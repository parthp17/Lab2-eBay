//<!--
// \include\lib\_global\features\syi3\describe\charity.js 

ebay.oP.initCharityAL=function()
{var t=this,oP=t,oD=t.parent,c=oD.getConfig("Selling.Format.Charity");if(c&&oEC.sCharityElemName)
{var eCharity=t.parent.controls[oEC.sCharityElemName];if(eCharity==null)
{var oDonation=new EbayHTMLSelect(t,oEC.sDonationelemName);if(c.bEGWOn)
{eCharity=new EbayHTMLRadio(t,oEC.sCharityElemName);eCharity._registerEvent('onclick','enableDonation');var oLink=new EbayHTMLAnchor(t,c.sSelNonProfit);oLink._registerEvent('onclick','ebay.oP.openCharityPopup');var oGiftAid=new EbayHTMLCheckbox(t,c.sUKTaxPayerElem);oGiftAid._registerEvent('onclick','showGiftAid');oGiftAid.sLayer=c.sGiftAidLayer;oGiftAid.showGiftAid=function()
{var t=this;var oLyr=t.parent.controls[t.sLayer];if(!oLyr.eElem)
oLyr.bind();oLyr.show(t.isChecked());}
new EbayHTMLLayer(t,c.sTCLayer);new EbayHTMLLayer(t,c.sGiftAidLayer);new EbayHTMLLayer(t,c.sDonatePercentLyr);new EbayHTMLLayer(t,c.sDonateLabelLyr);if(c.aCBLayer)
{new EbayHTMLLayer(t,c.aCBLayer.dom);new EbayHTMLLayer(t,c.aCBLayer.cbt);}
if(c.bDDMandateCheck)
new EbayHTMLLayer(t,c.sTCCBTextLyr);}
else
{eCharity=new EbayHTMLSelect(oP,oEC.sCharityElemName);eCharity._registerEvent('onchange','launchCharityPopup');}
eCharity.enableDonation=function()
{var t=this,p=t.parent,c=p.parent.getConfig('Selling.Format.Charity'),ctls=p.controls,oDonation=ctls[oEC.sDonationelemName],v=t.getValue(),b=v!=c.sNoCharityValue||v!="0",oTCLayer=ctls[c.sTCLayer],si=t.getSelectedIndex(),bDirectSeller=c.aSellerTypes[si]=='1',oPerLyr=ctls[c.sDonatePercentLyr],oLabelLyr=ctls[c.sDonateLabelLyr],oGILyr=ctls[c.sGiftAidLayer];if(!oDonation.eElem)
oDonation.bind();if(!oTCLayer.eElem)
oTCLayer.bind();if(!oPerLyr.eElem)
oPerLyr.bind();if(!oLabelLyr.eElem)
oLabelLyr.bind();if(!oGILyr.eElem)
oGILyr.bind();oPerLyr.show(!bDirectSeller);oLabelLyr.show(bDirectSeller);oDonation.selectByValue(b?c.sSelectedDonation:'-1');oDonation._exec('onchange');oDonation.enable(bDirectSeller?true:b)
oTCLayer.show(b&&!bDirectSeller)
if(b&&c.aCBLayer&&c.aCBSeller)
{var bCB=c.aCBSeller[si]=='1',cbDomLyr=ctls[c.aCBLayer.dom],cbCbtLyr=ctls[c.aCBLayer.cbt];if(!cbDomLyr.eElem)
cbDomLyr.bind();if(!cbCbtLyr.eElem)
cbCbtLyr.bind();cbDomLyr.show(!bCB);cbCbtLyr.show(bCB);}
if(oGILyr.eElem&&!b)
{var oGACB=ctls[c.sUKTaxPayerElem];if(oGACB)
oGACB.check(false);oGILyr.show(false);}
if(b&&c.bDDMandateCheck&&c.aCBSeller)
{var bCB=c.aCBSeller[si]=='1',cbTextLyr=ctls[c.sTCCBTextLyr];if(!cbTextLyr.eElem)
cbTextLyr.bind();cbTextLyr.setValue(bCB?c.aTCCBTexts['cbt']:c.aTCCBTexts['dom']);}
var oRE=t.parent.controls['SYI3-Rules-Engine'];if(oRE&&oRE.oDataMonitor)
{oRE.oDataMonitor.push(this.name,"radio");oRE.oDataMonitor.push(oDonation.name,"select-one");}}
eCharity.launchCharityPopup=function()
{var t=this;if(oEC.sDonationelemName)
{var dE=t.oDocument.getFormElem(oEC.sDonationelemName);if(dE)
{dE.selectedIndex=0;var sv=t.getSelectedValue(),b=(sv!=oEC.sCharityLaunchValue&&sv!=c.sNoCharityValue);dE.disabled=!b;var len=c.aCharityAffiliationsId.length;for(var i=0;i<len;i++)
if(sv==String(c.aCharityAffiliationsId[i]))
{var sType=String(c.aCharityAffiliationsType[i]);if(!oDonation.eElem)
oDonation.bind();var sDonationSelected=oDonation.getSelectedValue();var sSelectedVal=sType=="1"?c.sSelectedDonation:sDonationSelected?sDonationSelected:"-1";var bToggle=sType=="1"?true:false;oDonation.selectByValue(sSelectedVal);break;}
var oRE=t.parent.controls['SYI3-Rules-Engine'];if(oRE&&oRE.oDataMonitor)
oRE.oDataMonitor.push(dE.name,"select-one");}}
if(oEC.sCharityLaunchValue&&c.sCharityPageUrl)
{if(t.getSelectedValue()==oEC.sCharityLaunchValue)
{if(typeof(c.sNoCharityValue)=="undefined"||c.sNoCharityValue=="")
t.selectByIndex(0);else
t.selectByValue(c.sNoCharityValue);var pp=new EbayHTMLPopup(oP,"charity_"+oEC.sCharityElemName);with(pp)
{iWidth=1020;iHeight=700;iLeft=95;iTop=5;sUrl=c.sCharityPageUrl;bToolbar=bStatus=bMenubar=false;show();}}}}
new EbayHTMLLayer(t,c.sLayerName);}
else
eCharity.bind();}}
ebay.oP.openCharityPopup=function()
{var oP=ebay.oP,c=oP.parent.getConfig('Selling.Format.Charity'),pp=new EbayHTMLPopup(oP,"charity_"+oEC.sCharityElemName);with(pp)
{iWidth=1020;iHeight=700;iLeft=95;iTop=5;sUrl=c.sCharityPageUrl;bToolbar=bStatus=bMenubar=false;show();}}
ebay.oP.updateCharity=function(pVal,pTxt,pLogo,pDirectSeller,pCBType)
{var t=this,oD=t.parent,c=oD.getConfig("Selling.Format.Charity");if(oEC.sCharityElemName)
{var oC=t.controls[oEC.sCharityElemName],oDE=oD.getFormElem(oEC.sDonationelemName);if(c.bEGWOn)
{if(!oC.eElem)
oC.bind();if(!oC.eElem)
return;var oCCBElem=oC.eElem;if(oCCBElem.length)
oCCBElem=oCCBElem[oCCBElem.length-1];var pn=oCCBElem.parentElement?oCCBElem.parentElement:oCCBElem.parentNode,newDiv=oD.createElement('div'),s='';var isOptionPresent=false,os=oC.eElem,len=os.length;for(var i=0;i<len;i++)
{if(os[i].value==pVal)
{isOptionPresent=true;oC.selectByValue(pVal);oC._exec('onclick');break;}}
if(isOptionPresent!=true)
{if(pn.id!=null&&pn.id.substring(0,6)=='tmpDiv')
{if(typeof pDirectSeller!='undefined'&&c.aSellerTypes)
c.aSellerTypes[c.aSellerTypes.length-1]=pDirectSeller;if(typeof pCBType!='undefined'&&c.aCBSeller)
c.aCBSeller[c.aCBSeller.length-1]=pCBType;var sParentelem=pn.parentElement?pn.parentElement:pn.parentNode;sParentelem.removeChild(sParentelem.lastChild);newDiv.id='tmpDiv'+pVal;sParentelem.appendChild(newDiv);s+='<input type="radio" name="'+oEC.sCharityElemName+'" ';s+='value="'+pVal+'" onclick="ebay.run(this.name,\'onclick\');">&nbsp;';if(pLogo)
s+='<img src="'+pLogo+'" width="24" height="24"/>&nbsp;';s+=pTxt;newDiv.innerHTML=s;}
else
{if(typeof pDirectSeller!='undefined'&&c.aSellerTypes)
c.aSellerTypes[c.aSellerTypes.length]=pDirectSeller;if(typeof pCBType!='undefined'&&c.aCBSeller)
c.aCBSeller[c.aCBSeller.length]=pCBType;newDiv.id='tmpDiv'+pVal;pn.appendChild(newDiv);s+='<input type="radio" name="'+oEC.sCharityElemName+'" ';s+='value="'+pVal+'" onclick="ebay.run(this.name,\'onclick\');">&nbsp;';if(pLogo)
s+='<img src="'+pLogo+'" width="24" height="24"/>&nbsp;';s+=pTxt;newDiv.innerHTML=s;}
oC.bind();oC.check(false);oC.check(true,oC.eElem.length-1);oC._exec('onclick');}}
else
{var isE=false,os=oC.eElem.options,len=os.length;for(var i=0;i<len;i++)
{if(os[i].value==pVal)
{isE=true;break;}}
if(!isE)
oC.setOption(pVal,pTxt);oC.selectByValue(pVal);}
oDE.disabled=false;}}

// \include\lib\_global\features\syi3\_base\add_pictures.js 

function EbaySYI3AddPictures(pParent,pName,pCfg,pIndex)
{if(!this.objType)
this.objType="EbaySYI3AddPictures";this.base=EbayBaseControl;this.base(pParent,pName);var cl=this.oGlobals.oClient;var c=this.oConfig=pCfg;var idx=typeof pIndex!='undefined'?pIndex:'';this.bSYIFlow=typeof c.bSYIFlow!='undefined'?c.bSYIFlow:true;this.bIsMotors=typeof c.bIsMotors!='undefined'?c.bIsMotors:false;this.bImageResize=typeof c.bImageResize!='undefined'?c.bImageResize:true;idx=decodeURIComponent(idx);this.sControlIdx=idx;this.oPicUrlsText=new EbayHTMLText(this,c.sPicUrl+idx);this.oRemoveallLayer=new EbayHTMLLayer(this,c.sRemAllSecs+idx);this.oPopup=new EbayHTMLPopup(this,"add_pictures_popup",c);if(this.bSYIFlow)
this.oGalleryStrip=new EbaySYI3GalleryStrip(this,'gal_strip',c);this.sLockedPicUrls=this.sLockedTNUrls="";this.iMaxPics=this.iInitMaxPics=c.iMaxPics;this.bRevise=c.bRevise||false;this.bUsesImageWells=true;this.iFlashVer=-1;this.bCheckFlashVer=true;this.isFlashSupported=false;this.sSelectedPicUrls='';this.aSelfHostValues=[];this.aSelfHostDims=[];this.aPictureUrls=[];this.aIconUrl=[];this.aMainUrl=[];if(c.aSelImgs.length==0)
this.aThumbnailUrls=[];else
this.aThumbnailUrls=c.aSelImgs[idx];this.iSelfhostMax=c.iSHMax?c.iSHMax:c.iMaxPics;this.bSafari=cl.bSafari;this.oRemoveBtn=[];this.oRemoveBtnLnk=[];this.oPics=[];this.oPicLayer=[];this.oIconLayer=[];this.oPicHdnLyr=[];this.oChildImg=[];this.oMoveRight=[];this.oMoveRightLnk=[];this.oMoveLeft=[];this.oMoveLeftLnk=[];this.oSelfthostText=[];this.oPicNumDisplay=[];this.iPictureCount=this.iOrigPicCount=this.aThumbnailUrls.length;this.iStockPhotoCount=c.sStockPhotoUrl&&c.sStockPhotoUrl!=''?1:0;this.bSelfhost=false;this.bCellsCreated=false;this.bIconDivCreated=false;this.oAddBtn=new EbayHTMLAnchor(this,c.sAddPicBtn+idx);this.oAddBtn.subscribeEvents("ondblclick","onkeydown");if(!this.bIsMotors){this.oAddBtn._registerEvent('onkeydown','parent.checkEventForBtn');}
this.oAddBtn._registerEvent('onclick','parent.checkEventForBtn');this.oAddBtn.ondblclick=function()
{this.parent.oPopup.focus();return false;}
if(!pParent.aTotalPics)
pParent.aTotalPics={};if(!pParent.aTotalPics[this.sControlIdx])
pParent.aTotalPics[this.sControlIdx]={};for(var i=0;i<this.iPictureCount;i++){pParent.aTotalPics[this.sControlIdx][i]=this.aThumbnailUrls[i];}
this.oWarnLayer=new EbayHTMLLayer(this,c.sWarnlayer);this.oWarnLayerNew=new EbayHTMLLayer(this,c.sWarnlayerNew);this.oSubOptimalImage=new EbayHTMLImage(this,c.sSubOptimalImage);this.oWarnMsgLyr=new EbayHTMLLayer(this,c.sWarnMsgLyr);this.oWarnMsgLyrNew=new EbayHTMLLayer(this,c.sWarnMsgLyrNew);this.oWarnLyrTle=new EbayHTMLLayer(this,c.sLyrWarnTle);this.oWarnIconCssHolder=new EbayHTMLLayer(this,c.sLyrWarnIconNew);this.oTotalWarnLyr=new EbayHTMLLayer(this,c.sTotalWarnLyr);this.oTotalWarnLyrNew=new EbayHTMLLayer(this,c.sTotalWarnLyrNewP);this.iWarnImgCount=0;this.oRemoveAll=new EbayHTMLAnchor(this,c.sRemAll+idx);this.oRemoveAll._registerEvent('onclick','parent.onRemoveAllClick');this.oPicCount=new EbayHTMLLayer(this,c.sImgCnt+idx);this.sPicsBuyersViewSelector=new EbayHTMLLayer(this,c.sPicsBuyersViewSelector);this.SuperSizeImg=new EbayHTMLImage(this,c.sMainPicImage);var oStockRemLnk=new EbayHTMLAnchor(this,c.sStockRemLnk);if(!oStockRemLnk.eElem)
oStockRemLnk.bind();oStockRemLnk._registerEvent('onclick','parent.onRemovePictureClick');for(var sh=1;sh<=this.iSelfhostMax;sh++)
this.oSelfthostText[sh]=new EbayHTMLText(this,c.aSHHiddens+sh+idx);for(var j=0;j<this.iMaxPics+1;j++)
{with(this)
{var oRem=oRemoveBtn[j]=new EbayHTMLImage(this,c.sRemImg+idx+j);var oRemLnk=oRemoveBtnLnk[j]=new EbayHTMLAnchor(this,c.sRemImgLnk+idx+j);oRemLnk._registerEvent('onclick','parent.onRemovePictureClick');oRem.id=j;oRemLnk.id=j;var oMR=oMoveRight[j]=new EbayHTMLImage(this,c.sMR+idx+j);var oMRLnk=oMoveRightLnk[j]=new EbayHTMLAnchor(this,c.sMRLnk+idx+j);oMRLnk._registerEvent('onclick','parent.onMovePicture');oMR.id=j;oMRLnk.id=j;oMR.move='R';oMRLnk.move='R';var oML=oMoveLeft[j]=new EbayHTMLImage(this,c.sML+idx+j);var oMLLnk=oMoveLeftLnk[j]=new EbayHTMLAnchor(this,c.sMLLnk+idx+j);oMLLnk._registerEvent('onclick','parent.onMovePicture');oML.id=j;oML.move='L';oMLLnk.id=j;oMLLnk.move='L';oPics[j]=new EbayHTMLImage(this,c.sImgId+idx+j);oPicLayer[j]=new EbayHTMLLayer(this,c.sImgShowLyr+idx+j);oPicHdnLyr[j]=new EbayHTMLText(this,"picData"+idx);oPicLayer[j].subscribeEvents("onmouseover","onmouseout");if(c.bMSKU2Pic){oPicLayer[j]._registerEvent('onmouseover','parent.onover');oPicLayer[j]._registerEvent('onmouseout','parent.onout');}
oIconLayer[j]=new EbayHTMLLayer(this,"SelectorDiv"+idx+j);oChildImg[j]=new EbayHTMLImage(this,"SelectorImg"+idx+j);if(iStockPhotoCount>0)
oPicNumDisplay[j]=new EbayHTMLLayer(this,c.sPicNumPre+j);if((!bIconDivCreated)&&(this.objType!="EbaySYI3AddPicturesIcon")&&c.bMskuFlow){var oPDiv=this.oDocument.createElement('div');oPDiv.className=c.sPicsDivStyle;var oDiv=this.oDocument.createElement('div');oPDiv.appendChild(oDiv);oPDiv.setAttribute("id","SelectorDiv"+idx+j);var oChildDiv=this.oDocument.createElement('div');var oChildImgCreate=this.oDocument.createElement('img');if(j<c.aPictureDivdetails[this.sControlIdx].length){oPDiv.style.display='';oChildImgCreate.setAttribute("src",c.aPictureDivdetails[this.sControlIdx][j]["imagesrc"]);oChildImg[j].MainImg=c.aPictureDivdetails[this.sControlIdx][j]["mainimagesrc"];oChildImg[j].onclick=function(){bindElems(SuperSizeImg);SuperSizeImg.source(this.MainImg);if(bImageResize)
ebay.oP.imageResizer(SuperSizeImg.name,SuperSizeImg.eElem.src,300,300,true,null);}}
else{oPDiv.style.display='none';}
oChildImgCreate.setAttribute("id","SelectorImg"+idx+j);oChildDiv.appendChild(oChildImgCreate);oDiv.appendChild(oChildDiv);if(!sPicsBuyersViewSelector.eElem)
sPicsBuyersViewSelector.bind();sPicsBuyersViewSelector.eElem.appendChild(oPDiv);}}}
this.bIconDivCreated=true;new EbayHTMLText(this,c.sDescHasPhoto);this.oSelfHostPicShow=new EbayHTMLText(this,c.sSHPicShow);this.oSelfHostGallery=new EbayHTMLText(this,c.sSHGElemName);this.oMessageSec=new EbayHTMLLayer(this,c.sMsgSec+idx);var oLiM=this.parent.controls['listner_mgr'];uptcfg=ebay.oDocument.getConfig("Selling.SOJTagging");if(uptcfg&&uptcfg.sPhotoError){var s='',sTrackData='';if(typeof pageName!='undefined')
sTrackData+=",pageId|||"+pageName;BrowserVr=navigator.userAgent;if(typeof BrowserVr!='undefined')
sTrackData+=",PU_BrowserVr|||"+BrowserVr;UpldFlw=uptcfg.sCommand;if(typeof UpldFlw!='undefined')
sTrackData+=",PU_UpldFlw|||"+UpldFlw;DraftID=uptcfg.draftId;if(typeof DraftID!='undefined')
sTrackData+=",PU_DraftID|||"+DraftID;isCatalog=uptcfg.isCatalog;isUpEntryPts=uptcfg.isUpEntryPts;if(typeof isCatalog!='undefined'&&isUpEntryPts)
sTrackData+=",PU_IsCatalog|||"+isCatalog;s+="CU_UptErrorId|"+uptcfg.sPhotoError+"||";s+=sTrackData;new Image().src=uptcfg.sTagUrl+'{tagData="'+s+'"}';}
with(this)
_registerListener(oDocument._getEvent("load"),EVENT_AFTER,"onAfterLoad");this.bindElems=function(pObj)
{if(pObj&&!pObj.eElem)
pObj.bind();}
this.onAfterLoad=function()
{with(this)
{var isFreeImgLayer=typeof oFreeImgLayer!='undefined';bindElems(oPicUrlsText);bindElems(oRemoveallLayer);bindElems(oPicCount);if(isFreeImgLayer)
bindElems(oFreeImgLayer);bindSelfHostElems();bindLayersReviseFlow();updateGallery();if(bSafari&&oFreeImgLayer)
{sFreeClassName=oFreeImgLayer.getClass();if(oFreeImgLayer.eElem)
{sFreeHtml=oFreeImgLayer.eElem.innerHTML;}}
if(bSYIFlow)
{var cp=this.oUtils.controlPath(this);setTimeout(cp+".updateListingDesigner()",3000);bindElems(oAddBtn);oAddBtn.enable(!(iPictureCount>=iMaxPics)&&!oConfig.bImagesLocked[sControlIdx]);var cnfg=ebay.oDocument.getConfig("Selling.Describe.NewPicturePopup");if(cnfg&&cnfg.bNewUploaderEnabled)
{var aBtn=new EbayHTMLButton(this,cnfg.aOpenBtnIds);if(aBtn)
{aBtn.bind();aBtn.enable(!(iPictureCount>=iMaxPics)&&!oConfig.bImagesLocked[sControlIdx]);}}}
if(c.bMskuFlow)
{var len=c.aPictureDivdetails[this.sControlIdx].length;for(var i=0;i<len;i++)
{ebay.oP.imageResizer(oChildImg[i].name,oChildImg[i].eElem.src,32,32,false,oChildImg[i]);}}}}
this.onBeforeUnload=function()
{this.oPopup.close();}
this.onRemoveAllClick=function()
{if(confirm(c.sRemAllMsg))
{var p=this.parent;this.oRemoveallLayer=new EbayHTMLLayer(this,c.sRemAllSecs+idx);this.oRemoveallLayer.bind();this.oRemoveallLayer.eElem.style.display="none"
p.removeAllPics();p.iWarnImgCount=0;p.oTotalWarnLyr.show(false);if(cf.IsSherpaEnabled){var msg=document.getElementById("picData").value;var wmsgObj=JSON.parse(msg);wmsgObj.warningcount=0;document.getElementById("picData").value=JSON.stringify(wmsgObj);p.oTotalWarnLyrNew.show(false);}
var oAddBtn=p.oAddBtn;if(oAddBtn)
oAddBtn.focus(true);}}
this.removeAllPics=function()
{with(this)
{if(iStockPhotoCount>0)
RemoveStockPhoto();for(var i=0;i<iPictureCount;i++)
{var pic=oPicLayer[i];var fHdn=oPicHdnLyr[i];bindElems(pic);pic.show(false);var iconLyr=oIconLayer[i];bindElems(iconLyr);iconLyr.show(false);if(pic.bWarnMsg)
removeWarnIcon(oPics[i],i,pic);}
var isFreeImgLayer=typeof oFreeImgLayer!='undefined';if(isFreeImgLayer)
oFreeImgLayer.show(true);if(bSafari&&isFreeImgLayer)
{oFreeImgLayer.setClass(sFreeClassName);if(oFreeImgLayer.eElem)
{oFreeImgLayer.eElem.innerHTML=sFreeHtml;}}
aThumbnailUrls=[];iPictureCount=0;setPicCount();aPictureUrls=[];updatePictureUrlList();oRemoveallLayer.show(false);bindElems(oMessageSec);oMessageSec.show(false);updateInsertionFees();if(SuperSizeImg.eElem)
SuperSizeImg.source(c.sCoreHost+"s.gif");var pictMgr=this.oDocument.getConfig("Selling.Describe.NewPicturePopup");if(pictMgr&&fHdn){fHdn.bind();var json=JSON.parse(fHdn.getValue());json.item.pictureDetails.pictureURL=[];fHdn.setValue(JSON.stringify(json));}
if(cf.IsSherpaEnabled){if(!oTotalWarnLyrNew.eElwm)
oTotalWarnLyrNew.bind();oTotalWarnLyrNew.show(false);}}}
var cf=ebay.oDocument.getConfig("Selling.Describe.AddPictures.PageWarningIcon");if(cf&&cf.IsSherpaEnabled){var msg=document.getElementById("picData").value;var wmsgObj=JSON.parse(msg);wmsgObj.warningcount=wmsgObj.sherpa.length;wmsgObj.onmove=false;document.getElementById("picData").value=JSON.stringify(wmsgObj);}
this.onMovePicture=function()
{with(this.parent)
{var id=this.id,bRight=this.move=='R',msgObj,json,cur=oPics[id],next=oPics[bRight?id+1:id-1],aTns=aThumbnailUrls,cTn=aTns[bRight?id+1:id-1],tTn=aTns[id],aPics=aPictureUrls,tUrl=aPics[id],cDim=[],nDim=[],oNWL=oPicLayer[bRight?id+1:id-1],bNWarnMsg=oNWL.bWarnMsg,oCWL=oPicLayer[id],oTempWarns=[oCWL.bWarnMsg,oCWL.bIsMinPix,oCWL.bIsMinQlty,oCWL.sIconUrl];bindElems(cur);bindElems(next);if(bSelfhost)
{cDim=[next.width(),next.height()];nDim=[cur.width(),cur.height()];}
cur.source(cTn);next.source(tTn);if(bSelfhost)
{cur.width(cDim[0]);cur.height(cDim[1]);next.width(nDim[0]);next.height(nDim[1]);}
aTns[id]=aTns[bRight?id+1:id-1];aPics[id]=aPics[bRight?id+1:id-1];aTns[bRight?id+1:id-1]=tTn;aPics[bRight?id+1:id-1]=tUrl;var cf=ebay.oDocument.getConfig("Selling.Describe.AddPictures.PageWarningIcon");var pictMgr=this.oDocument.getConfig("Selling.Describe.NewPicturePopup");var fHdn=oPicHdnLyr[id];if(pictMgr&&fHdn){fHdn.bind();json=JSON.parse(fHdn.getValue());msgObj=json;json.item.pictureDetails.pictureURL=aPics;json.onmove=true;fHdn.setValue(JSON.stringify(json));}
if(typeof oCWL.bWarnMsg!='undefined'||typeof oNWL.bWarnMsg!='undefined')
{oCWL.bWarnMsg=oNWL.bWarnMsg;oCWL.bIsMinPix=oNWL.bIsMinPix;oCWL.bIsMinQlty=oNWL.bIsMinQlty;oCWL.sIconUrl=oNWL.sIconUrl;oNWL.bWarnMsg=oTempWarns[0];oNWL.bIsMinPix=oTempWarns[1];oNWL.bIsMinQlty=oTempWarns[2];oNWL.sIconUrl=oTempWarns[3];if(!oCWL.bWarnMsg)
removeWarnIcon(cur,id,oCWL);if(!oNWL.bWarnMsg){removeWarnIcon(next,(bRight?id+1:id-1),oNWL);if(cf&&cf.IsSherpaEnabled){for(var shr=0;shr<msgObj.sherpa.length;shr++){if((bRight?id+1:id-1)==msgObj.sherpa[shr].pic){json.sherpa[shr].pic=id;}}}}
if(cf&&cf.IsSherpaEnabled){var warn_type,longMsg=[],shortMsg=[],cshr;for(var shr=0;shr<msgObj.sherpa.length;shr++){if(id==msgObj.sherpa[shr].pic){cshr=shr;for(gui=0;gui<msgObj.sherpa[shr].guidance.length;gui++){if(msgObj.sherpa[shr].guidance[gui].code=="MANDATORY_STANDARDS_NOT_MET"){warn_type="picguiderror";longMsg[0]=msgObj.sherpa[shr].guidance[gui].longMsg,shortMsg[0]=msgObj.sherpa[shr].guidance[gui].shortMsg;break;}else if(msgObj.sherpa[shr].guidance[gui].code=="RECOMMENDED_STANDARDS_NOT_MET"){warn_type="picguidwarn";longMsg[gui]=msgObj.sherpa[shr].guidance[gui].longMsg,shortMsg[gui]=msgObj.sherpa[shr].guidance[gui].shortMsg;}}}}
if(oCWL.bWarnMsg&&!oTempWarns[0]){setWarningNew(cur.eElem,id,warn_type,longMsg,shortMsg);}
if(!bNWarnMsg&&oNWL.bWarnMsg){setWarningNew(next.eElem,(bRight?id+1:id-1),warn_type,longMsg,shortMsg);json.sherpa[cshr].pic=bRight?id+1:id-1;}}
if(pictMgr&&fHdn){fHdn.setValue(JSON.stringify(json));}
if(!cf.IsSherpaEnabled){if(oCWL.bWarnMsg&&!oTempWarns[0])
setWarning(cur.eElem,id);if(!bNWarnMsg&&oNWL.bWarnMsg)
setWarning(next.eElem,(bRight?id+1:id-1));}}
updatePictureUrlList();}}
this.RemoveStockPhoto=function()
{with(this)
{if(!bSYIFlow)
return;bindElems(oStockPhotoImage);bindElems(oStockPhotoLyr);oStockPhotoImage.source('');oStockPhotoLyr.show(false);c.sStockPhotoUrl='';c.IsStockPhotoAvailable=false;bindElems(oStockPhotoOption);iStockPhotoCount--;oStockPhotoOption.setValue('false');var isFreeImgLayer=typeof oFreeImgLayer!='undefined';if(isFreeImgLayer&&iPictureCount==0)
oFreeImgLayer.show(true);hidnamval=this.oDocument.getUIElem("picData");msgOb=JSON.parse(hidnamval.value);msgOb.stockPhotoUrls.splice(0,1);msgOb.item.pictureDetails.includeStockPhotoURL=false;msgOb.item.pictureDetails.pictureURL.splice(0,1);hidnamval.value=JSON.stringify(msgOb);var oRE=this.oDocument._getControl('SYI3-Rules-Engine');if(oRE)
{var oGPElem=this.oDocument.getUIElem(c.sGalPlusCheckName),oGalElem=this.oDocument.getUIElem(c.sGalCheckName);oRE.oDataMonitor.push(c.sGalPlusCheckName,(oGPElem&&oGPElem.type=='hidden')?"hidden":"checkbox");oRE.oDataMonitor.push(c.sGalCheckName,(oGalElem&&oGalElem.type=='hidden')?"hidden":"checkbox");oRE.oDataMonitor.push(c.sPhotoDispPkg,"hidden");oRE.oDataMonitor.push(this.oPicUrlsText.name,"hidden");oRE.oDataMonitor.push(c.sStockPhotoOption,"hidden");var oUpgrade=c.sPhotoDispUpgrade,oFrm=document.forms[c.sFormName],elems=oFrm.elements[oUpgrade];if(elems&&elems.length)
{var len=elems.length;for(var i=0;i<len;i++)
oRE.setCustomParams(oUpgrade,elems[i].value);}
var oGalCheck=this.oGalleryStrip.oGalImgCheck,oGalElem=this.oDocument.getUIElem(oGalCheck.name);if(oGalElem&&oGalElem.type=='checkbox')
oRE.sPostListner='ebay.oP.controls[\'add pictures\'].oGalleryStrip.postUpgradeFees()';this.parent.initFeeCalc();}
if(!oConfig.bNewUpl){resetImgCountDisplay();}}}
this.resetImgCountDisplay=function()
{with(this)
{for(var i=0;i<iMaxPics;i++)
{var dis=oPicNumDisplay[i];bindElems(dis);dis.setValue(parseInt(dis.getValue())-1);}}}
this.onRemovePictureClick=function()
{with(this.parent)
{var c=oConfig,msgObj,json;var cf=ebay.oDocument.getConfig("Selling.Describe.AddPictures.PageWarningIcon");if(this.name==c.sStockRemLnk)
RemoveStockPhoto();else
{var id=this.id,pics=iPictureCount,picsIdx=pics-1,lyr=oPicLayer[picsIdx],IconLyr=oIconLayer[picsIdx],fHdn=oPicHdnLyr[picsIdx];bIsWarnImg=oPicLayer[id].bWarnMsg,oLyrPic=oPics[picsIdx];if(SuperSizeImg.eElem&&oChildImg[id].MainImg==SuperSizeImg.eElem.src){var img=c.sCoreHost+"s.gif",isImgFound=false,bImgReplaced=false;for(var i in parent.aTotalPics){var aImg=parent.aTotalPics[i];if(!isImgFound){for(var c in aImg){var sMainImg=aImg[c].replace(/_0/g,"_35");if(isImgFound){img=aImg[c];bImgReplaced=true;break;}
if(SuperSizeImg.eElem.src==sMainImg){isImgFound=true;delete parent.aTotalPics[i][c];}}}
if(!bImgReplaced){for(var c in aImg){img=aImg[c];break;}}}
img=img.replace(/_0/g,"_35");SuperSizeImg.bind();SuperSizeImg.source(img);}
var pictMgr=this.oDocument.getConfig("Selling.Describe.NewPicturePopup");if(pictMgr){fHdn.bind();json=JSON.parse(fHdn.getValue());msgObj=json;}
for(var j=id;j<picsIdx;j++)
{var im=oPics[j];bindElems(im);im.source(aThumbnailUrls[j+1]);var oNL=oPicLayer[j+1];var oCL=oPicLayer[j];if(oNL.bWarnMsg)
{if(!oCL.bWarnMsg){if(cf.IsSherpaEnabled){var warn_type,longMsg=[],shortMsg=[],cshr;for(var shr=0;shr<msgObj.sherpa.length;shr++){if(j+1==msgObj.sherpa[shr].pic){cshr=shr;for(gui=0;gui<msgObj.sherpa[shr].guidance.length;gui++){if(msgObj.sherpa[shr].guidance[gui].code=="MANDATORY_STANDARDS_NOT_MET"){warn_type="picguiderror";longMsg[0]=msgObj.sherpa[shr].guidance[gui].longMsg,shortMsg[0]=msgObj.sherpa[shr].guidance[gui].shortMsg;break;}else if(msgObj.sherpa[shr].guidance[gui].code=="RECOMMENDED_STANDARDS_NOT_MET"){warn_type="picguidwarn";longMsg[gui]=msgObj.sherpa[shr].guidance[gui].longMsg,shortMsg[gui]=msgObj.sherpa[shr].guidance[gui].shortMsg;}}
json.sherpa[shr].pic=j;fHdn.setValue(JSON.stringify(json));}}
setWarningNew(im.eElem,j,warn_type,longMsg,shortMsg);}
if(!cf.IsSherpaEnabled){setWarning(im.eElem,j);}}
oCL.bWarnMsg=true;oCL.bIsMinPix=oNL.bIsMinPix;oCL.bIsMinQlty=oNL.bIsMinQlty;oCL.sIconUrl=oNL.sIconUrl;}
else if(oCL.bWarnMsg)
removeWarnIcon(im,j,oCL);currentIconImg=oChildImg[j];bindElems(currentIconImg);if(oChildImg[j+1].eElem)
{currentIconImg.source(oChildImg[j+1].eElem.src);currentIconImg.MainImg=oChildImg[j+1].MainImg;ebay.oP.imageResizer(currentIconImg.name,currentIconImg.eElem.src,32,32,false,currentIconImg);}}
aThumbnailUrls.splice(id,1);aPictureUrls.splice(id,1);var pictMgr=this.oDocument.getConfig("Selling.Describe.NewPicturePopup");if(pictMgr){fHdn.bind();var json=JSON.parse(fHdn.getValue());if(json.item.pictureDetails.includeStockPhotoURL)
id=id+1;json.item.pictureDetails.pictureURL.splice(id,1);if(bIsWarnImg)
json.warningcount=json.warningcount-1;fHdn.setValue(JSON.stringify(json));}
bindElems(lyr);if(lyr.bWarnMsg)
removeWarnIcon(oLyrPic,picsIdx,lyr);lyr.show(false);bindElems(IconLyr);IconLyr.show(false);if(pics>1)
{var oMR=oMoveRight[pics-2];bindElems(oMR);oMR.source(c.sCoreHost+c.sMRDisable);oMR.enable(false);oMR.setStyle('cursor','default');}
if(pics==iMaxPics)
oMessageSec.show(false);pics--;iPictureCount=pics;}
setPicCount();updatePictureUrlList();if(pics+iStockPhotoCount==0)
{isFreeImgLayer=typeof oFreeImgLayer!='undefined';if(isFreeImgLayer)
oFreeImgLayer.show(true);if(bSafari&&oFreeImgLayer)
{oFreeImgLayer.setClass(sFreeClassName);if(oFreeImgLayer.eElem)
{oFreeImgLayer.eElem.innerHTML=sFreeHtml;}}
oRemoveallLayer.show(false);}
if(bIsWarnImg)
{--iWarnImgCount;if(iWarnImgCount<0)
iWarnImgCount=0;}
oTotalWarnLyr.show(false);setWarningMsg();if(cf.IsSherpaEnabled){oTotalWarnLyrNew.show(false);setWarningMsgNew();}
updateInsertionFees();}}
this.resetPicOptions=function()
{with(this)
{if(!bRevise&&bSYIFlow)
{var c=oConfig,frm=this.oDocument._getControl(c.sFormName);frm.setElementValue(c.sPhotoDispPkg,'0');frm.setElementValue(c.sPhotoDispUpgrade,'0');}}}
this.setPicCount=function()
{with(this)
{var max=bSelfhost?iSelfhostMax:iMaxPics,c=oConfig,iRemainPicCount=max-iPictureCount;var s=c.sUploadedPicCountText.replaceTokens(iPictureCount,iRemainPicCount<0?0:iRemainPicCount);if(iRemainPicCount<0)
iRemainPicCount=0;if(c.sAddOnePicCountText&&c.sPicCountText)
{if(iRemainPicCount==1)
s+=c.sAddOnePicCountText;else
s+=c.sPicCountText.replaceTokens(iRemainPicCount);}
oPicCount.setValue(s);}}
this.updatePictureUrlList=function()
{with(this)
{var aP=aPictureUrls,l=aP.length,j=0,s='',iMaxPics=c.cMaxPics;bAllPicsUploaded=iPictureCount>=iMaxPics;for(j;j<l;j++)
s=s+aP[j]+";";s=s+"";sSelectedPicUrls=s;oAddBtn.enable(!bAllPicsUploaded);newPicBtn=ebay.oD.getUIElem("addPicturesBtn");if(newPicBtn&&!bAllPicsUploaded)
newPicBtn.removeAttribute("disabled");if(newPicBtn&&bAllPicsUploaded)
newPicBtn.disabled=true;bindElems(oMessageSec);oMessageSec.show(bAllPicsUploaded);updateGallery();updatePictureUrls();}}
this.updateIcon=function()
{with(this)
{var aValues=aPictureUrls,tn,sIdx=sControlIdx,c=oConfig;for(var j=0;j<iMaxPics;j++)
{if(!oIconLayer[j].eElem)
oIconLayer[j].bind();oIconLayer[j].show(false);}
parent.aTotalPics[this.sControlIdx]={};var len=aValues.length;for(var j=0;j<len;j++)
{tn=aValues[j].replace(/_0/g,"_14");if(!oIconLayer[j].eElem)
oIconLayer[j].bind();oIconLayer[j].show(true);if(!oChildImg[j].eElem)
oChildImg[j].bind();oChildImg[j].source(tn);oChildImg[j].MainImg=aValues[j].replace(/_0/g,"_35");parent.aTotalPics[this.sControlIdx][j]=oChildImg[j].MainImg;oChildImg[j].onclick=function()
{SuperSizeImg.source(this.MainImg);ebay.oP.imageResizer(SuperSizeImg.name,SuperSizeImg.eElem.src,300,300,true,null);}
ebay.oP.imageResizer(oChildImg[j].name,oChildImg[j].eElem.src,32,32,false,oChildImg[j]);}
if(len>0){for(var i in parent.aTotalPics){var aImg=parent.aTotalPics[i],bUpdate=false;for(var c in aImg){var img=aImg[c].replace(/_0/g,"_35");SuperSizeImg.source(img);bUpdate=true;break;}
if(bUpdate)break;}}}}
this.updateGallery=function()
{with(this)
{if(!bSYIFlow)
return;var oGS,c=oConfig,stockUrl=c.sStockPhotoUrl,isGalleryStrip=typeof oGalleryStrip!='undefined';if(isGalleryStrip){oGS=oGalleryStrip
oGS.aGalImgThums=aThumbnailUrls;}
if(stockUrl!=''&&oGS)
{if(oGS.aGalImgThums!="")
{sTempUrl=oGS.aGalImgThums.join(";");sTempUrl=stockUrl+";"+sTempUrl;oGS.aGalImgThums=sTempUrl.split(";");}
else
oGS.aGalImgThums=[stockUrl];}
if(c.bDefGalImg&&oGS)
oGS.oGalImgCheck.check(true);if(oGS)
oGS.updateGalStrip();}}
this.updatePictureUrls=function()
{with(this)
{var c=oConfig;oPicUrlsText.setValue(sSelectedPicUrls);if(c.bNewUpl){var oHdn=document.getElementById("picData"+sControlIdx);var json=JSON.parse(oHdn.value),aIconUrlList;aIconUrlList=sSelectedPicUrls.split(";");if(json.item.pictureDetails.includeStockPhotoURL&&c.IsStockPhotoAvailable){if(aIconUrlList[0]!=c.sStockPhotoUrl){aIconUrlList.splice(0,0,c.sStockPhotoUrl);}}
if(aIconUrlList[aIconUrlList.length-1].length==0){aIconUrlList=aIconUrlList.slice(0,aIconUrlList.length-1)}
json.item.pictureDetails.pictureURL=aIconUrlList;oHdn.value=JSON.stringify(json);}
if(bSelfhost)
{aSelfHostValues=[];for(var i=1,n=iSelfhostMax;i<=n;i++)
{var u=aPictureUrls[i-1];if(u)
aSelfHostValues[aSelfHostValues.length]=u;oSelfthostText[i].setValue(u?u:'');}}}}
this.bindSelfHostElems=function()
{with(this)
{var c=oConfig;for(var i=1,n=this.iSelfhostMax;i<=n;i++)
{oSelfthostText[i]._registerEvent("onchange","parent.updateSelfHostValue");oSelfthostText[i].bind();shVal=oSelfthostText[i].getValue();if(shVal)
{aSelfHostValues[aSelfHostValues.length]=shVal;bSelfhost=true;var pic=oPics[i-1];bindElems(pic);if(bImageResize)
ebay.oP.imageResizer(pic.name,pic.eElem.src,96,96,false,null);}}}}
this.updateSelfHostValue=function()
{this.parent.aSelfHostValues[0]=[this.getValue()];this.parent.updatePictureUrls();}
this.updateFromPopup=function(pUseImageWells,pValues,pURL,pOrigValues,pCalee,pMaxPics,pPhotoPgkName,pIconUrl,pMainUrl,pIsMinPixel,pIsMinQuality)
{with(this)
{var len=pValues.length;if(len<=0&&pUseImageWells)
return;if(len<=0&&!pUseImageWells)
{updateGallery();removeAllPics();return;}
var c=oConfig;if(typeof oFreeImgLayer!='undefined'&&oFreeImgLayer.eElem)
{oFreeImgLayer.show(false);}
oRemoveallLayer.show(true);if(c.rmallStl&&oRemoveallLayer.eElem){var mgnLt=c.rmallStl;oRemoveallLayer.eElem.style.marginLeft=mgnLt;}
if(pCalee=='picman'||pCalee=='eps'||!pUseImageWells)
{if(!pUseImageWells)
{for(var p=0;p<iPictureCount;p++)
{if(!oPicLayer[p].eElem)
oPicLayer[p].bind();oPicLayer[p].show(false);}
pOrigValues=pValues;bUsesImageWells=pUseImageWells;aSelfHostValues=pValues;this.bSelfhost=true;}
if(!c.bImagesAppendOnly[sControlIdx])
{iPictureCount=0;aThumbnailUrls=[];aPictureUrls=[];}}
if(pUseImageWells)
{if(bSelfhost&&!c.bImagesAppendOnly[sControlIdx])
{iPictureCount=0;aThumbnailUrls=[];aPictureUrls=[];for(var sh=1;sh<=this.iSelfhostMax;sh++)
{oSelfthostText[sh].setValue('');var pic=oPicLayer[sh-1];bindElems(pic);pic.show(false);}
aSelfHostValues=[];}
bSelfhost=false;}
if(pCalee=='picman')
{var iLocs=sLockedPicUrls.split(';').length,iPics=iPictureCount;if(iLocs>0&&iPics>iLocs)
{for(var i=iPics;i>iLocs;i--)
{var oRem=controls[c.sRemImgLnk+(i-1)];if(oRem)
oRem.onclick();}}}
for(var j=0;j<len;j++)
{if(iPictureCount<iMaxPics)
{var tn=pValues[j],url=pOrigValues[j],pic=oPics[iPictureCount],lyr=oPicLayer[iPictureCount];if(!pUseImageWells)
pic.subscribeEvents('onload');else if(!bSafari&&typeof oGalleryStrip!='undefined')
oGalleryStrip.setImgDim(pic,"","");pic.onload=function()
{var aDims=getSelfHostWH(this.eElem);if(typeof(aDims[0])!="undefined")
aDs=aDims;else
aDs=[96,96];isGalleryStrip=typeof oGalleryStrip!='undefined';if(isGalleryStrip)
oGalleryStrip.setImgDim(this,aDs[0],aDs[1]);this.width(aDs[0]+'px');this.height(aDs[1]+'px');}
pic.bind();bindElems(lyr);aThumbnailUrls[aThumbnailUrls.length]=tn;aPictureUrls[aPictureUrls.length]=url;if(pIconUrl)
aIconUrl[aIconUrl.length]=pIconUrl[j];if(pMainUrl)
aMainUrl[aMainUrl.length]=pMainUrl[j];if(pUseImageWells&&!bSafari)
{pic.setStyle("width","");pic.setStyle("height","");}
pic.source(tn);if(!this.oConfig.bMskuFlow&&this.oConfig.sWarnMsg&&(pIsMinPixel[j]||pIsMinQuality[j])&&!this.bSYIFlow)
{this.setWarning(pic.eElem,iPictureCount);this.iWarnImgCount++;lyr.bWarnMsg=true;lyr.bIsMinPix=pIsMinPixel[j];lyr.bIsMinQlty=pIsMinQuality[j];lyr.sIconUrl=pIconUrl[j];}
else if(lyr.bWarnMsg)
removeWarnIcon(pic,iPictureCount,lyr);lyr.show(true);if(iPictureCount>0)
{bindElems(oMoveRight[iPictureCount-1]);oMoveRight[iPictureCount-1].source(c.sCoreHost+c.sMREnable);if(!bSafari)
oMoveRight[iPictureCount-1].setStyle('cursor','pointer');oMoveRight[iPictureCount-1].enable(true);}
iPictureCount++;}}
if(iPictureCount>0)
{var oLMR=oMoveRight[iPictureCount-1];bindElems(oLMR);oLMR.enable(false);oLMR.source(c.sCoreHost+c.sMRDisable);if(!bSafari)
oLMR.setStyle('cursor','default');}
updatePictureUrlList();if(!this.oConfig.bMskuFlow&&this.oConfig.sWarnMsg)
setWarningMsg();var cp=this.oUtils.controlPath(this);if(this.oConfig.bMskuFlow)
{updateIcon();setTimeout(cp+".setSuperSizeImg()",1000);setTimeout(cp+".setPicCount()",1000);setTimeout(cp+".updateVariationPage()",2000);}
else
{setTimeout(cp+".setPicCount()",250);setTimeout(cp+".updateInsertionFees()",500);}}}
this.copyFieldValues=function(pList)
{for(var itm in pList)
{var el=this.oDocument.getFormElem(itm),s=pList[itm],v="";if(el)
el.value=itm.hasAny('selfHostGallery','selfHostGalleryUrl')?s:s?s:'0';}}
this.updateGP=function(pCfg,pPage,pPCfg)
{if(!this.bSYIFlow)
return;var ctrl,nm=pCfg.sGalPlusCheckName?pCfg.sGalPlusCheckName:pCfg.sGalleryPlus;if(nm&&(nm!=""))
{ctrl=pPage._getControl(nm);if(ctrl&&ctrl.eElem)
{var oGS=this.oGalleryStrip,oGPHidden=oGS.oGalPlusImgHidden,oGPCB=oGS.oGalPlusImgCheck,v=ctrl.getValue();if(oGPHidden)
oGPHidden.setValue(v);if(oGPCB)
oGPCB.check(v=='true');}}}
this.updatePicOptions=function(pCfg,pPage,pPCfg)
{if(!this.bSYIFlow)
return;var ctrl,aV,aPicOptions=[],nm=pCfg.sPhotoDispPkg,bSuperSize=false;if(nm&&(nm!=""))
{ctrl=pPage._getControl(nm);if(ctrl&&ctrl.eElem)
aPicOptions[nm]=ctrl.getValue();}
nm=pCfg.sPhotoDispUpgrade;ctrl=pPage._getControl(nm);if(ctrl.eElem)
{aV=ctrl.getValue();var f=document.forms[this.oConfig.sFormName],aFormElems=f.elements,formLen=aFormElems.length,sUpgradeDefaultVal='0',i=j=0;for(;i<formLen;i++)
{if(aFormElems[i].name==pCfg.sPhotoDispUpgrade)
{if(typeof aV=='string')
{if(aV=="")
aV=sUpgradeDefaultVal;aFormElems[i].value=aV;if(aV=='2')
bSuperSize=true;if(pPCfg.bPicShow&&this.iPictureCount>1)
aV=pPCfg.sPicShowVal;else
aV=sUpgradeDefaultVal;}
else if(aV[j])
aFormElems[i].value=aV[j];else
aFormElems[i].value=sUpgradeDefaultVal;j++;}}}
this.copyFieldValues(aPicOptions);if(aPicOptions[pCfg.sPhotoDispPkg]=='3')
{var oGalCheck=this.oGalleryStrip.oGalImgCheck;oGalCheck.check(true);oGalCheck.onclick();}
tmp=aV&&(bSuperSize||this.oUtils.isInArray(aV,'2')||aPicOptions[pCfg.sPhotoDispPkg]=='3')?'supersize':'';var ld=this.parent._getControl(this.oConfig.sListingDesignerName),oC=ebay.oGlobals.oClient;if(ld&&oC.bIE&&oC.bWin)
ld.updateLayoutOptions(tmp);}
this.updateListingDesigner=function()
{with(this)
{if(!bSYIFlow)
return;var c=oConfig,aV=[],ld=this.parent._getControl(c.sListingDesignerName);if(ld)
{var f=oDocument._getControl(c.sFormName);if(!f.eElem)
f.bind();var oDispPkg=f.getElement(c.sPhotoDispPkg),dpVal=oDispPkg?oDispPkg.value:"";var oDispUpgrade=f.getElement(c.sPhotoDispUpgrade),len=oDispUpgrade?oDispUpgrade.length:0;for(var i=0;i<len;i++)
aV[aV.length]=oDispUpgrade[i].value;var tmp=((aV.length>0&&oUtils.isInArray(aV,'2'))||dpVal=='3')?'supersize':'';ld.updateLayoutOptions(tmp)}}}
this.setPicOptions=function(pPage,pChildConfig)
{with(this)
{if(!bSYIFlow)
return;var c=oConfig,oGS=this.oGalleryStrip,oGPHidden,oGPCB,child_ctrl=pPage._getControl(c.sGalPlusCheckName);if(oGS){oGPHidden=oGS.oGalPlusImgHidden,oGPCB=oGS.oGalPlusImgCheck}
if(oGPHidden&&!oGPHidden.eElem)
oGPHidden.bind();if(oGPCB&&!oGPCB.eElem)
oGPCB.bind();if(((oGPHidden&&oGPHidden.eElem)||(oGPCB&&oGPCB.eElem))&&child_ctrl)
{var b=false;if(oGPCB&&oGPCB.eElem)
b=oGPCB.isChecked();else if(oGPHidden&&oGPHidden.eElem)
b=oGPHidden.getValue()=='true';child_ctrl.check(b);}
ctrl=new EbayHTMLText(oDocument.oPage,c.sPhotoDispPkg),child_ctrl=pPage._getControl(c.sPhotoDispPkg);if(ctrl&&child_ctrl)
{ctrl.bind();if(pChildConfig&&pChildConfig.bIsMotorsVehicles)
child_ctrl.selectByValue(ctrl.getValue());else
child_ctrl.check(ctrl.getValue()=="3");}
var f=document.forms[c.sFormName];var oUpgrade=c.sPhotoDispUpgrade,oParentElem=oGlobals.oClient.bNav?oDocument.getUIElem(oUpgrade):f.elements[oUpgrade],child_ctrl=pPage._getControl(oUpgrade),i,val,len;if(child_ctrl&&oParentElem)
{if(oParentElem.length)
{len=oParentElem.length;for(i=0;i<len;i++)
{val=oParentElem[i].value;if(val!='')
child_ctrl.selectByValue(val);}}
else
child_ctrl.selectByValue(oParentElem.value);}}}
this.setSuperSizeImg=function(){with(this){if(SuperSizeImg&&SuperSizeImg.eElem)
ebay.oP.imageResizer(SuperSizeImg.name,SuperSizeImg.eElem.src,300,300,true,null);}}
this.updateVariationPage=function()
{var oRE=this.oDocument._getControl('SYI3-Rules-Engine'),c=this.oConfig;if(oRE)
{var oGPElem=this.oDocument.getUIElem(c.sGalPlusCheckName),oGalElem=this.oDocument.getUIElem(c.sGalCheckName);oRE.oDataMonitor.push(c.sGalPlusCheckName,(oGPElem&&oGPElem.type=='hidden')?"hidden":"checkbox");oRE.oDataMonitor.push(c.sGalCheckName,(oGalElem&&oGalElem.type=='hidden')?"hidden":"checkbox");oRE.oDataMonitor.push(c.sPhotoDispPkg,"hidden");oRE.oDataMonitor.push(this.oPicUrlsText.name,"hidden");var oUpgrade=c.sPhotoDispUpgrade,oFrm=document.forms[c.sFormName],elems=oFrm.elements[oUpgrade];if(elems&&elems.length)
{var len=elems.length;for(var i=0;i<len;i++)
oRE.setCustomParams(oUpgrade,elems[i].value);}
oRE.post(oRE);}}
this.updateInsertionFees=function()
{if(!this.bSYIFlow)
return;var oRE=this.oDocument._getControl('SYI3-Rules-Engine'),c=this.oConfig;if(oRE)
{var oGPElem=this.oDocument.getUIElem(c.sGalPlusCheckName),oGalElem=this.oDocument.getUIElem(c.sGalCheckName);oRE.oDataMonitor.push(c.sGalPlusCheckName,(oGPElem&&oGPElem.type=='hidden')?"hidden":"checkbox");oRE.oDataMonitor.push(c.sGalCheckName,(oGalElem&&oGalElem.type=='hidden')?"hidden":"checkbox");oRE.oDataMonitor.push(c.sPhotoDispPkg,"hidden");oRE.oDataMonitor.push(this.oPicUrlsText.name,"hidden");var oUpgrade=c.sPhotoDispUpgrade,oFrm=document.forms[c.sFormName],elems=oFrm.elements[oUpgrade];if(elems&&elems.length)
{var len=elems.length;for(var i=0;i<len;i++)
oRE.setCustomParams(oUpgrade,elems[i].value);}
var oGalCheck=this.oGalleryStrip.oGalImgCheck,oGalElem=this.oDocument.getUIElem(oGalCheck.name);if(oGalElem&&oGalElem.type=='checkbox')
oRE.sPostListner='ebay.oP.controls[\'add pictures\'].oGalleryStrip.postUpgradeFees()';this.parent.initFeeCalc();}}
this.bindLayersReviseFlow=function()
{with(this)
{var v=oPicUrlsText.getValue(),c=oConfig;if(v&&v!='http://')
{aPictureUrls=v.split(";");aPictureUrls.splice(aPictureUrls.length-1,1);if(c.bImagesAppendOnly[sControlIdx])
sLockedPicUrls=v.substr(v.length-1)==';'?v.substr(0,v.length-1):v;}}}
this.resizeImage=function(pObj)
{var aWH=this.getSelfHostWH(pObj);if(aWH.length>0)
{pObj.width=aWH[0];pObj.height=aWH[1];}}
this.getSelfHostWH=function(pImg,pIdx)
{var aRet=[],h=pImg.height,w=pImg.width;if((h&&w)&&h>1&&w>1)
{if(h>w)
{aRet[0]=96*w/h;aRet[1]=96;}
else
{aRet[0]=96;aRet[1]=96*h/w;}}
if(h==0||w==0)
aRet=['96','96'];if(typeof(pIdx)=="undefined")
this.aSelfHostDims[this.aSelfHostDims.length]=aRet;else
this.aSelfHostDims[pIdx]=aRet;return aRet;}
this.onover=function()
{this.g=this.name.substr(9);this.tst=new EbayHTMLLayer(this,c.sSelImgTitle+this.g);this.tst.bind();if(this.tst.eElem)
this.tst.eElem.style.display="block";}
this.onout=function()
{this.g=this.name.substr(9);this.tst=new EbayHTMLLayer(this,c.sSelImgTitle+this.g);this.tst.bind();if(this.tst.eElem)
this.tst.eElem.style.display="none";}
this.checkEventForBtn=function(e)
{var key=window.event?window.event.keyCode:arguments[2].keyCode;var bShowPopUp=(e.name=="onclick")||(e.name=="onkeydown"&&key==13);if(e.name=="onkeydown"&&key!=9){this.eElem.disabled=true;}
if(bShowPopUp){this.parent.showPopup(this);this.eElem.disabled=false;return false;}}
this.showPopup=function(t)
{var p=null;if(t.parent.objType=="EbaySYI3AddPicturesDescribe"||t.parent.objType=="EbaySYI3AddPicturesVariations")
p=t.parent;else if(t.objType=="EbaySYI3AddPicturesDescribe")
p=t;if(p)
{if(!p.bCellsCreated)
p.createImageCells();with(p.oPopup)
{var c=oConfig,w=c.iWidth,h=screen.height<=600?'550':c.iHeight,a=p.getCenteredPopupCoords(w,h);sUrl=c.sURL;var dC=p.controls[c.sDescHasPhoto];if(dC)
{if(!dC.eElem)
dC.bind();sUrl+="&"+c.sDescHasPhoto+"="+dC.getValue();}
var sH=p.controls[c.sSHPicShow];if(sH)
{if(!sH.eElem)
sH.bind();sUrl+="&"+c.sSHPicShow+"="+sH.getValue();}
var oGS=p.oGalleryStrip,oGC=p.controls[c.sSHGElemName],oSHUrl;if(oGS)
oSHUrl=oGS.controls[c.sSHGUrlElemName];if(oGC)
{if(!oGC.eElem)
oGC.bind();sUrl+="&"+c.sSHGElemName+"="+oGC.getValue();}
if(oSHUrl)
{if(!oSHUrl.eElem)
oSHUrl.bind();sUrl+='&'+c.sSHGUrlElemName+'='+oSHUrl.getValue();}
if(p.sControlIdx!="")
sUrl+='&'+c.sTraitElemName+'='+encodeURIComponent(p.sControlIdx);sUrl+="&ej2child=true";if(oGS)
oGS.sSHGalUrlVal="";var hs=p.parent._getControl("help system");if(hs&&hs.oHelpAssistant)
{var haCtl=hs.oHelpAssistant;a[0]+=haCtl.bIsShowing?-(haCtl.width()/2):0;}
var oCl=ebay.oDocument.oGlobals.oClient;if(c.bFlashDetectPC&&navigator.userAgent.match(/(iPad|iPhone|iPod)/g)){sUrl+='&js=1&flashVer='+(p.bCheckFlashVer?p.getFlashVersion():p.iFlashVer)+'&isFlash='+p.isFlashSupported;}
else if(oCl.bSafari&&oCl.bMac&&c.bFlashInMac){var e=document.createElement('embed');e.width=1;e.height=1;e.src='';e.type='application/x-shockwave-flash';e.id="photo_flash";document.body.appendChild(e);var movie=document.getElementById("photo_flash");try{if(movie.PercentLoaded()>=0){sUrl+='&js=1&flashVer='+(p.bCheckFlashVer?p.getFlashVersion():p.iFlashVer);}}
catch(e){sUrl+='&js=1&flashVer=';}}
else{sUrl+='&js=1&flashVer='+(p.bCheckFlashVer?p.getFlashVersion():p.iFlashVer);}
showEx(sUrl,w,h,false,false,false,true,false,false,a[0],a[1],null,true);focus();}}
return false;}
this.createImageCells=function()
{with(this)
{var c=oConfig,sTr=c.sPicsRow.replaceTokens(this.sControlIdx),tr=oDocument.getUIElem(sTr),cl=oGlobals.oClient,newCellLen=cl.bMac&&cl.bNav?tr.cells.length:-1,sId=this.sControlIdx.replace(new RegExp("\"","g"),"&quot;");for(var i=iOrigPicCount;i<iMaxPics;i++)
{var td=tr.insertCell(newCellLen),oML=oMoveLeft[i],oMLLnk=oMoveLeftLnk[i],oMR=oMoveRight[i],oMRLnk=oMoveRightLnk[i],oRem=oRemoveBtn[i],oRemLnk=oRemoveBtnLnk[i];td.setAttribute('valign','middle');td.innerHTML=c.sCellHTML.replaceTokens(i,i+1+iStockPhotoCount,c.sCoreHost,sId,i==0?c.sTopTxt:'');bindElems(oML);bindElems(oMR);bindElems(oRem);bindElems(oMLLnk);bindElems(oMRLnk);bindElems(oRemLnk);if(i>0){pictle=ebay.oDocument.getUIElem("picnum_"+i);if(pictle)
pictle.style.paddingTop="15px";}
if(i==0||(i==iOrigPicCount&&c.bImagesAppendOnly[sControlIdx]))
{oML.enable(false);oML.source(c.sCoreHost+c.sMLDisable);if(!bSafari)
oML.setStyle('cursor','default');}}
bCellsCreated=true;}}
this.getCenteredPopupCoords=function(pWidth,pHeight)
{var w=window,x=w.screenX+w.innerWidth/2,y=w.screenY+w.innerHeight/2;if(typeof(w.screenLeft)!="undefined")
{x=w.screenLeft+document.body.clientWidth/2;y=w.screenTop+document.body.clientHeight/2;}
x-=pWidth/2;y-=pHeight/2;focus();return new Array(x,y);}
this.getPictureFee=function()
{var ctr=this.controls["format"]||new EbayHTMLFormElem(this,"format");if(!ctr.eElem)
ctr.bind();if(!ctr.eElem)
return false;if(ctr.eElem.value=="6")
{var c=this.oDocument.getConfig("Selling.Describe.AddPictures");var map=c.aDurationFees;if(typeof(map)!="undefined")
{var dur=this.controls["duration"]||new EbayHTMLSelect(this,"duration");if(!dur.eElem)
dur.bind();var oCurDuration=dur.getSelectedValue();var val=map[oCurDuration];if(typeof(val)!="undefined")
return val;}}
return false;}
this.getUnlockedUrls=function()
{this.sUnlockedUrls=this.sSelectedPicUrls;}
this.getFlashVersion=function()
{var fv=0;if(c.bFlashDetectPC&&navigator.userAgent.match(/(iPad|iPhone|iPod)/g)){if(typeof navigator.plugins['Shockwave Flash']=='undefined')
{this.isFlashSupported=false;}}
try
{fv=vjo.dsf.flash.Version.get();}
catch(e)
{if(cl.bIE&&cl.bWin&&!cl.bOpera&&cl.iVer<11)
{if(cl.activeXLibLoaded("ShockwaveFlash.ShockwaveFlash.10"))
fv=10;else if(cl.activeXLibLoaded("ShockwaveFlash.ShockwaveFlash.9"))
fv=9;}
else
{if(navigator.plugins["Shockwave Flash"])
{var pd=navigator.plugins["Shockwave Flash"].description,aDesc=pd.split(" "),fv=0;if(aDesc.length&&aDesc[2])
fv=aDesc[2].split('.')[0];}
if(cl.bWebTV)fv=3;}}
this.iFlashVer=fv;this.bCheckFlashVer=false;return fv;}
this.setWarning=function(pPicElem,pIdx)
{var c=this.oConfig,oDiv=this.oDocument.createElement('div');oDiv.id='warn_'+pIdx;oDiv.innerHTML='<img src="'+c.sWarnIcon+'" alt=" "/>';oDiv.className=c.sWarnIconCss;if(ebay.oGlobals.oClient.bIE){oDiv.style.top="5px";oDiv.style.left="98px";}
var pn=pPicElem.parentNode?pPicElem.parentNode.parentNode.parentNode:pPicElem.parentElement.parentElement.parentElement;pn.appendChild(oDiv);oDiv.oAddPic=this;oDiv.iIdx=pIdx;oDiv.style.display='block';oDiv.onmouseover=function()
{var oAddPic=this.oAddPic,oWarn=oAddPic.oWarnLayer,oWarnIcon=oAddPic.oSubOptimalImage,oWMSG=oAddPic.oWarnMsgLyr,aPos=ebay.oUtils.oPositioning.getOffsetLeftTop(this),oPicStrip=oAddPic.oDocument.getUIElem('picsFilmstrip_inpGrp'),scLeft=oPicStrip?oPicStrip.scrollLeft:0,leftLoc=(aPos[0]-scLeft)-5,oPicLyr=oAddPic.oPicLayer[this.iIdx];if(!oWarn.eElem)
oWarn.bind();oWarn.show(true);var lyrWidth=oWarn.width();if((leftLoc+lyrWidth)>document.body.clientWidth)
leftLoc=leftLoc-lyrWidth;oWarn.left((leftLoc+10)+'px');oWarn.top((aPos[1]+10)+'px');if(!oWarnIcon.eElem)
oWarnIcon.bind();oWarnIcon.source(oPicLyr.sIconUrl);var sMsg=c.sULList;if(oPicLyr.bIsMinPix)
sMsg+=c.sOpenList+c.sMinPixWarnMsg+c.sCloseList;if(oPicLyr.bIsMinQlty)
sMsg+=c.sOpenList+c.sMinQltyWarnMsg+c.sCloseList;sMsg+=c.sCloseULList;if(!oWMSG.eElem)
oWMSG.bind();oWMSG.setValue(sMsg);}
oDiv.onmouseout=function()
{this.oAddPic.oWarnLayer.show(false);}}
this.setWarningNew=function(pPicElem,pIdx,warn_type,longMsg,shortMsg)
{var c=this.oConfig,oDiv=this.oDocument.createElement('div');if(pPicElem.id==="stockImg")
pIdx=99;oDiv.id='warn_'+pIdx;oDiv.innerHTML='<img id="warniconimg'+pIdx+'"src="'+c.sWarnImgNew+'" class="'+warn_type+'" alt=" "/>';oDiv.className=c.sWarnIconCss;iver=ebay.oGlobals.oClient.iVer;if(ebay.oGlobals.oClient.bIE&&iver==7){oDiv.style.left="105px";oDiv.style.top="-15px";if(pPicElem.height<96){pPicElem.style.marginTop=pPicElem.height/2+"px";}}
var pn=pPicElem.parentNode?pPicElem.parentNode.parentNode.parentNode:pPicElem.parentElement.parentElement.parentElement;pn.appendChild(oDiv);oDiv.oAddPic=this;oDiv.iIdx=pIdx;oDiv.style.display='block';oDiv.onmouseover=function()
{var oAddPic=this.oAddPic,oWarn=oAddPic.oWarnLayerNew,oWMSG=oAddPic.oWarnMsgLyrNew,oWMsgTle=oAddPic.oWarnLyrTle,aPos=ebay.oUtils.oPositioning.getOffsetLeftTop(this),oPicStrip=oAddPic.oDocument.getUIElem('picsFilmstrip_inpGrp'),scLeft=oPicStrip?oPicStrip.scrollLeft:0,leftLoc=(aPos[0]-scLeft)-5,oPicLyr=oAddPic.oPicLayer[this.iIdx],oWarnIconLyr=document.getElementById('lyrwarnicon');var curImg=document.getElementById('warniconimg'+pIdx);oWarnIconLyr.className=curImg.className;var shortMsg=[];hidnam="picData"
if(pPicElem.id.length>8){hidnam+=pPicElem.id.substring(6);if(pIdx>9)
hidnam=hidnam.substring(0,hidnam.length-2);else
hidnam=hidnam.substring(0,hidnam.length-1);}
var hidnamval=document.getElementById(hidnam),len;json=JSON.parse(hidnamval.value);msgObj=json;len=msgObj.item.pictureDetails.pictureURL.length;if(msgObj.onmove&&msgObj.item.pictureDetails.includeStockPhotoURL){len++;msgObj.onmove=false;};var sherpaObj=msgObj.sherpa,guidanceObj;for(var x=0;x<len;x++){if(pPicElem.id==="stockImg"&&sherpaObj.length>0&&sherpaObj[0].guidance.length>0){guidanceObj=sherpaObj[0].guidance[0];longMsg[0]=guidanceObj.longMsg;shortMsg[0]=guidanceObj.shortMsg;break;}
var warnum=this.id.substring(5);if(msgObj.item.pictureDetails.includeStockPhotoURL&&warnum!="99"){warnum=parseInt(warnum)+1;}
if(x==warnum){for(var shr=0;shr<msgObj.sherpa.length;shr++){if(x==msgObj.sherpa[shr].pic){for(gui=0;gui<msgObj.sherpa[shr].guidance.length;gui++){if(msgObj.sherpa[shr].guidance[gui].code=="MANDATORY_STANDARDS_NOT_MET"){longMsg[gui]=msgObj.sherpa[shr].guidance[gui].longMsg,shortMsg[gui]=msgObj.sherpa[shr].guidance[gui].shortMsg;}else if(msgObj.sherpa[shr].guidance[gui].code=="RECOMMENDED_STANDARDS_NOT_MET"){longMsg[gui]=msgObj.sherpa[shr].guidance[gui].longMsg,shortMsg[gui]=msgObj.sherpa[shr].guidance[gui].shortMsg;}}}}}}
if(!oWarn.eElem)
oWarn.bind();var lyrWidth=oWarn.width();if((leftLoc+lyrWidth)>document.body.clientWidth)
leftLoc=leftLoc-lyrWidth;oWarn.left((leftLoc+10)+'px');oWarn.top((aPos[1]+10)+'px');var warnOvlyTle,sMsg;var shortmsglen=shortMsg.length;if(shortmsglen>1){sMsg=c.sULList;for(i=0;i<shortmsglen;i++){sMsg+=c.sOpenList+shortMsg[i]+c.sCloseList;}
sMsg+=c.sCloseULList;}
else
sMsg=shortMsg[0];if(!oWMSG.eElem)
oWMSG.bind();if(!oWMsgTle.eElem)
oWMsgTle.bind();oWMSG.setValue(sMsg);oWarn.show(true);}
oDiv.onmouseout=function()
{this.oAddPic.oWarnLayerNew.show(false);}}
this.setWarningMsg=function()
{if(this.iWarnImgCount>0)
{if(!this.oTotalWarnLyr.eElem)
this.oTotalWarnLyr.bind();this.oTotalWarnLyr.setValue(this.oConfig.sWarnMsg.replaceTokens(this.iWarnImgCount,this.iPictureCount));this.oTotalWarnLyr.show(true);}}
this.setWarningMsgNew=function()
{var hidnam="picData",count=0;var hidnamval=document.getElementById(hidnam),warn_type="";json=JSON.parse(hidnamval.value);msgObj=json;if(!this.oConfig.sSyiWarnImages)
this.oConfig.sSyiWarnImages=0;count=this.oConfig.sSyiWarnImages+json.warningcount;if(c.bMskuFlow)
count=json.warningcount;if(!this.oTotalWarnLyrNew.eElem)
this.oTotalWarnLyrNew.bind();this.oTotalWarnLyrNew.setValue(this.oConfig.sWarnMsgNewP.replaceTokens(count));if(count>0)
this.oTotalWarnLyrNew.show(true);else
this.oTotalWarnLyrNew.show(false);for(var x=0;x<msgObj.item.pictureDetails.pictureURL.length;x++){for(var shr=0;shr<msgObj.sherpa.length;shr++){if(x==msgObj.sherpa[shr].pic){for(gui=0;gui<msgObj.sherpa[shr].guidance.length;gui++){if(msgObj.sherpa[shr].guidance[gui].code=="MANDATORY_STANDARDS_NOT_MET"){warn_type="picguiderror";}}}}}
var img=ebay.oDocument.getUIElem('picguiwarnimg');if(warn_type=="picguiderror")
img.className=warn_type;}
this.removeWarnIcon=function(pObj,pIdx,pLyr)
{if(!pObj.eElem){if(pObj.bind){pObj.bind();}}
pElem=pObj.eElem;if(pElem)
{if(pElem.parentNode||pElem.parentElement){var pn=pElem.parentNode?pElem.parentNode.parentNode.parentNode:pElem.parentElement.parentElement.parentElement,oWarnDiv=this.oDocument.getUIElem('warn_'+pIdx),l=pLyr;if(oWarnDiv&&pn)
pn.removeChild(oWarnDiv);l.bWarnMsg=false;l.bIsMinPix=false;l.bIsMinQlty=false;l.sIconUrl='';}}}}

// \include\lib\_global\features\syi3\describe\_base\add_pictures.js 

function EbaySYI3AddPicturesDescribe(pParent,pName,pCfg)
{if(!this.objType)
this.objType="EbaySYI3AddPicturesDescribe";this.base=EbaySYI3AddPictures;this.base(pParent,pName,pCfg);var t=this,c=t.oConfig;t.bStockRevise=false;t.sFreeHtml="";t.oFreeImgLayer=new EbayHTMLAnchor(t,c.sFreeTnail);t.sFreeClassName="";if(!c.bNewUpl){t.oFreeImgLayer.subscribeEvents("onclick");t.oFreeImgLayer._registerEvent('onclick','parent.checkEvntAddPict');}
this.checkEvntAddPict=function()
{if(this.name=="freeImgLayer"){uptcfg=ebay.oDocument.getConfig("Selling.SOJTagging");if(uptcfg){var s='',sTrackData='';if(typeof pageName!='undefined')
sTrackData+=",pageId|||"+pageName;BrowserVr=navigator.userAgent;if(typeof BrowserVr!='undefined')
sTrackData+=",PU_BrowserVr|||"+BrowserVr;UpldFlw=uptcfg.sCommand;if(typeof UpldFlw!='undefined')
sTrackData+=",PU_UpldFlw|||"+UpldFlw;DraftID=uptcfg.draftId;if(typeof DraftID!='undefined')
sTrackData+=",PU_DraftID|||"+DraftID;isCatalog=uptcfg.isCatalog;isUpEntryPts=uptcfg.isUpEntryPts;if(typeof isCatalog!='undefined'&&isUpEntryPts)
sTrackData+=",PU_IsCatalog|||"+isCatalog;s="freeImgLayer|"+new Date().getTime()+"||";s+=sTrackData;new Image().src=uptcfg.sTagUrl+'{tagData="'+s+'"}';}}
this.parent.showPopup(this);}
if(t.bSYIFlow)
{t.oDefaultImage=new EbayHTMLImage(t,c.sDefImg);t.oStockPhotoImage=new EbayHTMLImage(t,c.sStockImg);t.oStockPhotoLyr=new EbayHTMLLayer(t,c.sStockLyr);t.oStockPhotoRemove=new EbayHTMLImage(t,c.sStockRem);t.oStockPhotoOption=new EbayHTMLText(t,c.sStockPhotoOption);t.oStockPhotoRemove._registerEvent('onclick','parent.onRemovePictureClick');}
if(c.sLastAddPicModeElem)
new EbayHTMLText(t,c.sLastAddPicModeElem);}

// \include\lib\_global\features\syi3\describe\_base\gal_strip.js 

function EbaySYI3GalleryStrip(pParent,pName,pConfig)
{if(!this.objType)
this.objType="EbaySYI3GalleryStrip";this.base=EbayBaseControl;this.base(pParent,pName);var t=this,c=t.oConfig=pConfig;t.aGalImgThums=[];t.aGalLayers=[];t.bIsChanged=false;t.bMouseIn=false;t.bUpdatedStockPhoto=false;t.bElemsBound=false;t.iGalImgIndex=0;t.sGalImgName='syi3_gallery_image';t.bSelfHostDimSet=true;t.oHiddenGalSrcElem=new EbayHTMLText(t,c.sGalImgSrc);t.oGalLink=new EbayHTMLLayer(t,c.sGalLink);t.bIsAPCOn=c.bIsAPCOn;t.oGalDefaultImg=new EbayHTMLImage(t,c.sGalDefImg);t.oGalDefaultImg.subscribeEvents('onload');this.oGalDefaultImg.onload=function()
{var t=this,p=t.parent,oGalImg=p.oGalImgCheck,oGalElem=t.oDocument.getUIElem(oGalImg.name),b=oGalElem&&oGalElem.type=='checkbox'?oGalImg.isChecked():true;p.setImgDim(t,"","");if(b&&((p.oSelfHostGalleryUrl.value()!="")||(p.parent.aSelfHostValues.length>0)||(c.sStockPhotoUrl!="")))
{var aDims=p.parent.getSelfHostWH(t.eElem),aDs=aDims?aDims:[96,96];p.setImgDim(t,aDs[0],aDs[1]);}}
t.oChangeGalImgDiv=new EbayHTMLLayer(t,c.sChangeGalDiv);t.oTimer=null;t.oSelfHostGalleryUrl=new EbayHTMLText(t,c.sSHGUrlElemName);t.sSHGalUrlVal="";t.oGalPhotoMsg=new EbayHTMLLayer(t,c.sGalPhotoMsgElem);t.oGalImgCheck=new EbayHTMLCheckbox(t,c.sGalCheckName);t.oGalImgCheck._registerEvent("onclick","parent.oGalCheckOnclick");this.oGalCheckOnclick=function()
{var t=this,oP=t.parent;var oGalElem=t.oDocument.getUIElem(t.name);if(!oGalElem)
return;if(oGalElem&&oGalElem.type=='checkbox'&&!t.eElem)
t.bind();oP.editGalleryImage(t.eElem?t.isChecked():true);if(t.eElem&&!t.isChecked())
oP.oGalImgStrip.show(false);var oLF=t.parent.parent.parent.controls['listing preview'];if(oLF)
{oLF.bIsSelfHostGalImage=oP.parent.bSelfhost;var oGalLF=oLF.controls[t.name];if(oGalLF)
{oGalLF.updateListingPreview=oLF.checkboxOnClick;oGalLF.sImageURL=oP.oGalDefaultImg.source();oGalLF.updateListingPreview();}}
var oRE=oP.parent.parent.controls['SYI3-Rules-Engine'];if(oRE)
{var oDM=oRE.oDataMonitor;oDM.push(t.name,'checkbox');if(arguments[1]&&typeof arguments[1]=='object')
{oRE.sPostListner+='ebay.oP.controls[\'add pictures\'].oGalleryStrip.postUpgradeFees();';ebay.oP.initFeeCalc();}}}
this.postUpgradeFees=function()
{var t=this;t.editGalleryImage(t.oGalImgCheck.isChecked());}
t.oGalPlusImgStrip=new EbayHTMLLayer(t,c.sGalPlusImgStrip);t.oGalPlusImgHidden=t.oGalPlusImgCheck=null;var oGPElem=t.oDocument.getUIElem(c.sGalPlusCheckName);if(oGPElem&&oGPElem.type.is('checkbox'))
{t.oGalPlusImgCheck=new EbayHTMLCheckbox(t,c.sGalPlusCheckName);if(!t.oGalPlusImgCheck.eElem)
t.oGalPlusImgCheck.bind();t.oGalPlusImgCheck._registerEvent("onclick","parent.oGalPlusCheckOnclick");}
else if(oGPElem&&oGPElem.type.is('hidden'))
t.oGalPlusImgHidden=new EbayHTMLText(t,c.sGalPlusCheckName);this.oGalPlusCheckOnclick=function()
{var t=this,oGalPlusElem=t.oDocument.getUIElem(t.name);if(!oGalPlusElem)
return;if(t.eElem[0].type=="checkbox"&&t.eElem[1].type=="hidden")
t.eElem[1].value=t.eElem[0].checked;if(oGalPlusElem&&oGalPlusElem.type=='checkbox'&&!t.eElem)
t.bind();var bChk=t.eElem?t.isChecked():true;var oP=t.parent;oP.oGalPlusImgStrip.bind();if(bChk)
{if(oP.oGalImgCheck.eElem)
{if(!oP.oGalImgCheck.isChecked())
oP.oGalImgCheck.check(true);oP.oGalImgCheck.onclick();oP.oGalImgCheck.enable(false);}
if(oP.oGalPlusImgStrip.eElem)
oP.oGalPlusImgStrip.show(true);}
else
{oP.oGalPlusImgStrip.show(false);if(!t.bByPassGalChk)
{oP.oGalImgCheck.check(false);oP.oGalImgCheck.enable(true);oP.oGalImgCheck.onclick();}}
t.bByPassGalChk=false;var oLF=t.parent.parent.parent.controls['listing_features'];if(oLF)
{oLF.bIsSelfHostGalImage=oP.parent.bSelfhost;oGalPlusLF=oLF.controls[t.name];if(oGalPlusLF)
{oGalPlusLF.sImageURL=oP.oGalDefaultImg.source();}
try
{var oImgScroll=oLF.oIFrame.eFrameElem.ebay.oDocument.oPage.controls['ImageSrollupDown'];if(oImgScroll)
{oImgScroll.aImgUrls=oP.parent.aPictureUrls;oImgScroll.init();}}
catch(e){}}
var oRE=oP.parent.parent.controls['SYI3-Rules-Engine'];if(oRE)
{var oDM=oRE.oDataMonitor;oDM.push(t.name,'checkbox');oDM.push(oP.oGalImgCheck.name,'checkbox');if(arguments[1]&&typeof arguments[1]=='object')
ebay.oP.initFeeCalc();}}
t.oGalImgStrip=new EbayHTMLLayer(t,c.sGalImgStrip);t.oGalImgStrip.subscribeEvents("onmouseover","onmouseout");t.oGalImgStrip._registerEvent("onmouseover","parent.onMouseOver");t.oGalImgStrip._registerEvent("onmouseout","parent.onMouseOut");this.onMouseOver=function()
{var t=this;t.parent.bMouseIn=true;}
this.onMouseOut=function()
{var t=this,p=t.parent;p.bMouseIn=false;var sTimeout="ebay.oP.controls['add pictures'].controls['"+p.name+"'].hideLyr();"
window.setTimeout(sTimeout,1000);}
this.hideLyr=function()
{var t=this;if(!t.bMouseIn)
t.oGalImgStrip.show(false);}
t.oChangeGalImg=new EbayHTMLButton(t,c.sChangeGalName,false);t.oChangeGalImg._registerEvent("onclick","parent.changeGalOnclick");this.changeGalOnclick=function()
{var t=this,p=t.parent;p.oGalImgStrip.show(true);p.position();}
this.bindGalStripElems=function()
{var t=this;with(t)
{try
{var p=t.parent;p.bindElems(p.oSelfHostGallery);p.bindElems(oHiddenGalSrcElem);p.bindElems(oGalPlusImgHidden);p.bindElems(oGalDefaultImg);p.bindElems(oGalImgStrip);p.bindElems(oGalImgCheck);p.bindElems(oChangeGalImgDiv);p.bindElems(oSelfHostGalleryUrl);p.bindElems(oGalLink);p.bindElems(oGalPhotoMsg);p.bindElems(p.oDefaultImage);}
catch(e)
{}}}
this.updateGalStrip=function()
{var t=this;with(t)
{if(!bElemsBound)
{bindGalStripElems();bElemsBound=true;}
setImgIndex();var s='<table><tr>',giBorder,p=parent,c=oConfig,tns=aGalImgThums,len=tns.length;for(var i=0;i<len;i++)
{giBorder=(i==iGalImgIndex)?c.sSelBorderCss:c.sNormalBorderCss;s+='<td><div class = "'+c.sNormalCss+'" id="'+sGalImgName+i+'"><div class="'+giBorder+'"><img src="'+tns[i]+'"';if(parent.aSelfHostValues.length>0)
{var aDims=parent.aSelfHostDims[i],w='96',h='96';if(aDims)
{w=aDims[0];h=aDims[1];}
else
bSelfHostDimSet=false;s+=' width="'+w+'" height="'+h+'"';}
else if((i==0)&&(c.sStockPhotoUrl!=""))
{var stockImg=p.oStockPhotoImage;p.bindElems(stockImg);s+=' height="96" style="width:'+stockImg.width()+';height:'+stockImg.height()+';"';}
s+=' name="'+sGalImgName+i+'_im" alt=" "></img></div></div></td>';}
s+='</tr></table>';if(len>=0){oGalImgStrip.setValue(s);if(len==0){if(c.sGalDefImg!=null){var defImg=t.oDocument.getUIElem(c.sGalDefImg);if(defImg!=null){defImg.src=c.sDefImgUrl;defImg.className='mgnLftSm';defImg.style.height='auto';defImg.style.width='auto';}}}}
aGalLayers=[];for(var i=0;i<len;i++)
{var giLyr=aGalLayers[aGalLayers.length]=new EbayHTMLLayer(t,sGalImgName+i);giLyr.iIndex=i;giLyr.subscribeEvents("onclick","onmouseover","onmouseout");giLyr.onclick=function()
{var t=this,p=t.parent;var gi=p.iGalImgIndex=t.iIndex;p.oGalDefaultImg.source(aGalImgThums[gi]);p.oGalImgStrip.show(false);if(parent.aSelfHostValues.length>0)
{var im=document.images[t.name+'_im'];setImgDim(oGalDefaultImg,im.width,im.height);p.oHiddenGalSrcElem.setValue(c.iSelfHostPhotoEnum);}
else if((iGalImgIndex==0)&&(p.oConfig.sStockPhotoUrl!=""))
{p.setImgDim(p.oGalDefaultImg,96,96);p.oHiddenGalSrcElem.setValue(c.iStockPhotoEnum);}
else
{p.setImgDim(p.oGalDefaultImg,"","");p.oHiddenGalSrcElem.setValue(c.iEPSEnumStartIndex+(p.oConfig.sStockPhotoUrl!=""?iGalImgIndex-1:iGalImgIndex));}
p.toggleGalTxt(c.sWithGalText);}
giLyr.onmouseover=function()
{var t=this;with(t)
{var p=parent,c=p.oConfig;if(iIndex!=p.iGalImgIndex)
setClass(c.sHighlightCss);}}
giLyr.onmouseout=function()
{var t=this;t.setClass(t.parent.oConfig.sNormalCss);}
if(!oGlobals.oClient.bMac)
giLyr.bind();}
if(oGlobals.oClient.bMac)
{var cp=t.oUtils.controlPath(t);setTimeout(cp+".bindPicLayer()",100);}
if(!bSelfHostDimSet)
oTimer=setTimeout(oUtils.controlPath(t)+'.getSelfHostDims()',1000);var cp=t.oUtils.controlPath(t);setTimeout(cp+".oGalImgCheck.onclick(true)",1000);if(t.oGalPlusImgCheck&&t.oGalPlusImgCheck.onclick&&t.oGalPlusImgStrip)
{if(!t.oGalPlusImgCheck.isChecked())
{t.oGalPlusImgStrip.show(false);}}}}
this.editGalleryImage=function(pChecked)
{var t=this;with(t)
{if(!bElemsBound)
{bindGalStripElems();bElemsBound=true;}
var tns=aGalImgThums,len=tns.length,b=pChecked,c=oConfig,gi=iGalImgIndex,p=parent,oGC=p.oSelfHostGallery;if(b&&len>0)
{if(sSHGalUrlVal.length>0)
{oSelfHostGalleryUrl.setValue(sSHGalUrlVal);oGC.setValue('true');}
var vSHVal=oSelfHostGalleryUrl.value();if(vSHVal&&vSHVal!="")
{oGalDefaultImg.source(vSHVal);sSHGalUrlVal=vSHVal;}
else
oGalDefaultImg.source(aGalImgThums[gi]);if(t.bIsAPCOn&&c.sStockPhotoUrl!="")
gi=1;if(vSHVal&&vSHVal!="")
oHiddenGalSrcElem.setValue(c.iSelfHostPhotoEnum);else if((gi==0)&&(c.sStockPhotoUrl!=""))
oHiddenGalSrcElem.setValue(c.iStockPhotoEnum);else if(p.aSelfHostValues.length>0)
oHiddenGalSrcElem.setValue(c.iSelfHostPhotoEnum);else
oHiddenGalSrcElem.setValue(c.iEPSEnumStartIndex+(c.sStockPhotoUrl!=""?gi-1:gi));toggleGalTxt(c.sWithGalText);oChangeGalImgDiv.show(((parent.aSelfHostValues.length==0)&&(len>1))?true:false);oGalPhotoMsg.show(false);}
else if(b&&len==0)
{if(oSelfHostGalleryUrl.value()!="")
oGalDefaultImg.source(oSelfHostGalleryUrl.value());else
{oGalDefaultImg.source(c.sDefImgUrl);toggleGalTxt(c.sWithGalText);oGalPhotoMsg.show(true);}
oChangeGalImgDiv.show(false);}
else
{oGalDefaultImg.source(c.sDefImgUrl);oChangeGalImgDiv.show(false);oHiddenGalSrcElem.setValue('0');toggleGalTxt(c.sWithoutGalText);oGalPhotoMsg.show(false);oGC.setValue('false');oSelfHostGalleryUrl.setValue("");}}}
this.toggleGalTxt=function(pTxt)
{var t=this;t.oGalLink.setText(pTxt);}
this.position=function()
{var t=this;with(t)
{var c=oConfig,oGI=oChangeGalImg,oStrip=oGalImgStrip,iBH=oGI.height(),pos=oUtils.oPositioning,offs=pos.getOffsetLeftTop(oGI.eElem),slt=pos.getScrollLeftTop(oGI),cwh=pos.getClientWidthHeight(),offx=c.iOffsetX||0,offy=c.iOffsetY||0,l=offs[0]+offx,t=offs[1]+offy;oStrip.top(iBH+t);oStrip.left(l+2);}}
this.setImgDim=function(pElem,pW,pH)
{if(pW=="")
{pElem.width(96+'px');pElem.setStyle("width","auto");}
else
pElem.width(pW+'px');if(pH=="")
{pElem.height(96+'px');pElem.setStyle("height","auto");}
else
pElem.height(pH+'px');}
this.setImgIndex=function()
{var t=this;with(t)
{if(!bElemsBound)
{bindGalStripElems();bElemsBound=true;}
iGalImgIndex=getImgIndex();}}
this.getImgIndex=function()
{var t=this;with(t)
{var a=aGalImgThums,l=a.length,u=oGalDefaultImg.source();if(u)
{for(var x=0;x<l;x++)
{if(a[x]==u)
return x;}}
return 0;}}
this.getSelfHostDims=function()
{var t=this;with(t)
{var aDims=parent.aSelfHostDims;if(aDims.length>0)
{clearTimeout(oTimer);bSelfHostDimSet=true;var a=aGalImgThums,l=a.length;for(var i=0;i<l;i++)
{var im=document.images[sGalImgName+i+'_im'];if(aDims[i]&&im)
{im.width=aDims[i][0];im.height=aDims[i][1];}
else
oTimer=setTimeout(oUtils.controlPath(t)+'.getSelfHostDims()',1000);}}
else
oTimer=setTimeout(oUtils.controlPath(t)+'.getSelfHostDims()',1000);}}
this.bindPicLayer=function()
{var t=this;with(t)
{if(aGalLayers)
{for(var i=0,n=aGalLayers.length;i<n;i++)
aGalLayers[i].bind();}}}}

// \include\lib\_global\features\syi3\image_resizer.js 

ebay.oP.imageResizer=function(pId,pSrc,pWidth,pHeight,pbCreateImg,pObj){with(this){var imageid=pId,imgSrc=pSrc,img,desiredHeight=pHeight,desiredWidth=pWidth
newHeight=null,newWidth=null;oLargeImage=oDocument.getUIElem(imageid);if(oLargeImage)
{var sAlt=oLargeImage.getAttribute('alt');oP=oLargeImage.parentNode;if(oP)
oP.removeChild(oLargeImage);var oImg=this.oDocument.createElement('img');oImg.setAttribute("id",imageid);oImg.setAttribute("name",imageid);oImg.setAttribute("src",imgSrc);if(sAlt)
oImg.setAttribute("alt",sAlt);oP.appendChild(oImg);oImg.removeAttribute("width");oImg.removeAttribute("height");}
img=oImg;var currentHeight=img.offsetHeight;var currentWidth=img.offsetWidth;if(currentHeight==currentWidth){newHeight=desiredHeight;newWidth=desiredWidth;}
else if(currentHeight<currentWidth){var liChange=desiredWidth/currentWidth;newHeight=currentHeight*liChange;newWidth=desiredWidth;}
else{var liChange=desiredHeight/currentHeight;newWidth=currentWidth*liChange;newHeight=desiredHeight;}
if(currentHeight<desiredHeight&&currentWidth<desiredWidth){newHeight=currentHeight;newWidth=currentWidth;}
img.style.height=parseInt(newHeight)+"px";img.style.width=parseInt(newWidth)+"px";if(img.style.height=="0px")
img.style.height="32px";if(img.style.width=="0px")
img.style.width="32px";oImg=new EbayHTMLImage(this,imageid);oImg.bind();if(pbCreateImg){SuperSizeImg=oImg;}
else{if(pObj){oImg.MainImg=pObj.MainImg;oImg.onclick=pObj.onclick;}}}}

// \include\lib\_global\features\syi3\describe\_base\format_tabs.js 

function EbaySYI3FormatTabs(pParent,pName,pConfig)
{if(!this.objType)
this.objType="EbaySYIFormatTabs";this.base=EbayBaseControl;this.base(pParent,pName)
var t=this;t.oConfig=pConfig;t.aFormatLyr=[];t.oFormat=null;t.oFormatList=null;t.sCurrentTab=null;this.init=function()
{var t=this;if(!t.oConfig)
return;var c=t.oConfig,ft=c.aFormatTabs,pt=t.parent;for(var i in ft)
{var e=new EbayHTMLAnchor(pt,i),li=i+'_li';e._registerEvent('onclick','parent.controls["format_tabs"].clickTab');e._registerEvent('onkeypress','parent.controls["format_tabs"].keypressTab');t.aFormatLyr[li]=new EbayHTMLLayer(pt,li);}
t.oFormat=new EbayHTMLText(pt,oEC.sFormatElem);t.oFormatList=new EbayHTMLLayer(pt,oEC.sFormatTabsElem);t.sCurrentTab=c.sCurrentTab;if(c.sQtyElem&&c.sAuctionCallOut)
{var oQty=pt.controls[c.sQtyElem];if(!oQty)
oQty=new EbayHTMLText(pt,c.sQtyElem);oQty._registerEvent('onblur','checkCallout');oQty.sAuctionCallout=c.sAuctionCallOut;oQty.checkCallout=function()
{var t=this,b=parseInt(t.getValue())>1,oL=t.parent.controls[t.sAuctionCallout];if(!oL.eElem)
oL.bind();oL.show(!b);}
new EbayHTMLLayer(pt,c.sAuctionCallOut);}
if(c.sHasBO){ebay.oP.initBestOfferAL();}else{var oBO=new EbayHTMLRadio(pt,oEC.sBestOfferDecline,false,c);var oBOP=new EbayHTMLText(pt,oEC.sAutoDeclineAmtElemName,false,c);var oBOM=pt.controls[oEC.sAutoDeclineMsgElemName];if(!oBOM)
oBOM=new EbayHTMLText(pt,oEC.sAutoDeclineMsgElemName,false,c);oBO._registerEvent('onclick','boOnClick');oBO.boOnClick=function()
{var t=this;with(t)
{var ctls=parent.controls,oBOP=ctls[oEC.sAutoDeclineAmtElemName],oBOM=ctls[oEC.sAutoDeclineMsgElemName],b=(getValue()==oEC.sAutoDeclineVal);if(!oBOP.eElem)
oBOP.bind();oBOP.enable(b);if(!oBOM.eElem)
oBOM.bind();oBOM.enable(b);}}
oBOP._registerEvent('onfocus','parent.controls["format_tabs"].boOnFocus');oBOM._registerEvent('onfocus','parent.controls["format_tabs"].boOnFocus');}
var oDur=pt.controls[oEC.sDurElem];if(!oDur)
oDur=new EbayHTMLSelect(pt,oEC.sDurElem);oDur._registerEvent('onchange','parent.controls["format_tabs"].durationChange');oDur.sMsgLyr=oEC.sDurMsg;new EbayHTMLLayer(pt,oEC.sDurMsg);var tf,ta;tf=ebay.oDocument.getUIElem('onlineauction');ta=ebay.oDocument.getUIElem('fixedprice');if(tf&&ta){if(t.sCurrentTab=='fixedprice'){tf.tabindex='-1';ta.tabindex='0';}
else{tf.tabindex='0';ta.tabindex='-1';}}}
this.boOnFocus=function()
{var t=this;with(t)
{var oBO=parent.controls[oEC.sBestOfferDecline];if(!oBO.eElem)
oBO.bind();var b=oBO.getValue()==oEC.sAutoDeclineVal;enable(b);if(!b)
setValue('');}}
this.keypressTab=function(pEvent)
{evt=pEvent||event;keynum=oGlobals.oClient.bIE?evt.keyCode:evt.charCode;keychar=String.fromCharCode(keynum);if(keychar===13||keychar===32){this.parent.clickTab;}}
this.clickTab=function()
{var t=this;with(t.parent.controls['format_tabs'])
{var n=t.name,c=oConfig,ft=c.aFormatTabs;v=ft[n];if(!oFormat.eElem)
oFormat.bind();oFormat.setValue(v);var aDisAjaxElems=oEC.aDisableAjaxElems,frmElem=oEC.sFormName,actionElem=oEC.sActionElem,actionVal=c.sActionValue,oRE=t.parent.controls['SYI3-Rules-Engine'];if(oUtils.isInArray(aDisAjaxElems,n)||oUtils.isInArray(aDisAjaxElems,sCurrentTab))
{oRE.bFormSubmitInProgress=true;var p=parent,fr=p.getFormObj(frmElem);var he=p.controls[actionElem];if(!he)
he=new EbayHTMLText(p,actionElem);if(!he.eElem)
he.bind();he.setValue(actionVal);if(!fr.eElem)
fr.bind();var tmp=fr.eElem.action.split("#");fr.setAction(tmp[0]+"#"+oEC.sBookMark);ebay.oDocument.oPage.bShowAlert=false;GTINReset();fr.submit();}
else
{if(sCurrentTab==n)
{return false;}
oRE.bFormSubmitInProgress=false;oRE.oDataMonitor.push(oFormat.name,"hidden");oRE.sPostListner+='ebay.oP.controls[\'format_tabs\'].setFormatUI("'+n+'")';}}
return false;}
this.setFormatUI=function(pName)
{var t=this;with(t)
{if(!oFormatList.eElem)
oFormatList.bind();var listItems=oFormatList.eElem.getElementsByTagName("li"),ti=0,l=listItems.length,i,m,n=pName,c=oConfig,tb;for(i=0,m=l;i<m;i++)
{var hdncurtab=listItems[i].childNodes[0].childNodes[0].childNodes[0];tb=ebay.oDocument.getUIElem(n);if(listItems[i].id==(n+"_li")){listItems[i].className=oEC.sActiveClass;ti=i;sCurrentTab=n;if(tb){tb.tabindex="-1";if(hdncurtab){hdncurtab.style.display='block';hdncurtab.innerHTML=c.scurrtabtxt;}}}
else{listItems[i].className=oEC.sInactiveClass;if(tb){tb.tabindex="0";if(hdncurtab){hdncurtab.style.display='none';hdncurtab.innerHTML='';}}}}}}
this.durationChange=function()
{var t=this,oRE=t.oDocument._getControl('SYI3-Rules-Engine');oRE.sPostListner+='ebay.oP.controls[\'format_tabs\'].setDurationMsg("'+t.sMsgLyr+'")';}
this.setDurationMsg=function(pLyr)
{var t=this,oLyr=t.parent.controls[pLyr];if(oLyr)
{if(!oLyr.eElem)
oLyr.bind();oLyr.show(true);}}
this.init();}

// \include\lib\_global\features\syi3\describe\format_tabs.js 

ebay.oP.initFormatTabsAL=function()
{var t=this;new EbaySYI3FormatTabs(t,"format_tabs",this.parent.getConfig('Selling.FormatTabs'));ebay.oP.initReservePriceAL();}

// \include\lib\_global\features\syi3\describe\_base\seller_tags\base.js 

function EbaySYI3SellerTags(pParent,pName,pCfg,pInit)
{if(!this.objType)
this.objType="EbaySYI3SellerTags";this.base=EbayBaseControl;this.base(pParent,pName);var t=this;t.oConfig=pCfg;t.oTopSecLayer=new EbayHTMLLayer(t,pCfg.sTopSectionLyr);t.oSugSecLayer=new EbayHTMLLayer(t,oSC.sSugSectionLyr);t.oCustomLnk=new EbayHTMLLayer(t,oSC.sCustomLyrId);t.oTrayLayer=new EbayHTMLLayer(t,oSC.sTrayId);t.oMsgLyr=new EbayHTMLLayer(t,pCfg.sWarningMsgId);t.oUtils=new EbaySYI3SellerTagUtils(t,'seller_tag_utils');t.oHiddenIndex=new EbayHTMLText(t,pCfg.sIndexTxtId);if(pCfg.oOverlayCfg)
{var c=pCfg.oOverlayCfg;var cCfg=ebay.oDocument.getConfig('Selling.Common');c.bOnFocus=cCfg.bOnFocus;c.sStartLyrName=cCfg.sStartLyrName;t.oOverlayTag=new EbaySYI3OverlayTagControl(t,c);}
t.oDividerLayer=pCfg.sDividerLyr?new EbayHTMLLayer(t,pCfg.sDividerLyr):null;t.iTotalTopTags=0;t.iTotalSugTags=0;t.iMaxSugTag=pCfg.iMaxSugTag;t.isMSKUFlow=pCfg.isMSKUFlow;t.oTagControls=[];t.oSugTagControls=[];t.oCustomControls=[];t.sCusLyrIdInDialog=null;t.oAjaxListner=null;t.oSpellUOM=null;t.oSpellUOMParent=null;t.sSpellOriginalValue="";t.sSpellSugValue="";t.aSpellUOMResponse="";t.iTagIndex=0;t.sCurrentTitle="";t.oCurrentTag=null;t.bLyrStatus=false;t.aGradNames=[];t.sOPTIONS="option_";t.SpellUOMCheckId=null;t.bGradNameRecoCall=true;t.oHelpPop=null;t.bSOJTagged=false;t.aTsrc={customNoAutoSug:'0',customAutoSug:'1',recoTop:'2',trayUsed:'3',trayUnUsed:'4',stored:'5'};t.aTaction={none:'0',removed:'1',custom:'2'};t.aSelValSrc={manualNoAuto:'0',manualAuto:'1',fromReco:'2',fromPrevList:'3'};this.bindObj=function(pObj)
{if(!pObj.eElem)
pObj.bind();}
this.init=function()
{var t=this;with(t)
{var c=oConfig,aTT=c.aTags,aTTLen=aTT.length,oTitle=parent.controls[oSC.sTitleId],cnt,len;bindObj(oTrayLayer);var pCfg=ebay.oDocument.getConfig('Selling.Common');if(pCfg.isCollapseEanbled){cnt=c.iInitialTopTag;}
else{cnt=c.iInitialTopTag?c.iInitialTopTag:c.iMaxTopTag;}
if(c.iChildTag>0)
cnt=cnt-c.iChildTag;for(var i=0;i<aTTLen;i++)
{var att=aTT[i],tn=att.tn,tnCtrl=tn.replace(/\s/g,"");if(iTotalTopTags<cnt)
{if(att.bMV)
{var aTagVals=[];var aVals=[];var iOpt=0;len=att.Vals.length;for(index=0;index<len;index++)
{if(index<oSC.iMVCBDefCount||att.Vals[index].Sel)
aTagVals.push(att.Vals[index]);else
{aVals[iOpt]=att.Vals[index];iOpt++;}}
att.Vals=aVals;oTagControls[tnCtrl]=new EbaySYI3MultiValueControl(t,tn,iTagIndex,aTsrc.recoTop,true,att,aTagVals,c);if(att.aChildren)
{oTagControls[tnCtrl]=new EbaySYI3DepTagControl(t,null,tn,iTagIndex,aTsrc.recoTop,true,att,false,c,0,false);iTotalTopTags=iTotalTopTags+att.aChildren.length;}}
else if(att.aChildren)
{oTagControls[tnCtrl]=new EbaySYI3DepTagControl(t,null,tn,iTagIndex,aTsrc.recoTop,true,att,false,c,0,false);iTotalTopTags=iTotalTopTags+att.aChildren.length;}
else
oTagControls[tnCtrl]=new EbaySYI3TagControl(t,null,tn,iTagIndex,aTsrc.recoTop,false,att,false,c);iTotalTopTags++;}
else
{tnCtrl=tnCtrl.replace(new RegExp("'","g"),"");oSugTagControls[tnCtrl]=new EbaySYI3SuggestTagControl(t,tn,iTagIndex,aTaction.none,false,att,c);if(att.aChildren)
{len=att.aChildren.length;for(var ii=0;ii<len;ii++)
iTagIndex++;}
iTotalSugTags++;}
iTagIndex++;}
if(!oTitle)
{oTitle=new EbayHTMLText(t,oSC.sTitleId);oTitle._registerEvent('onblur','parent.getTagsForTitle');oTitle._registerEvent('onfocus','parent.setCurrentTitle');}
else
{oTitle._registerEvent('onblur','parent.controls[\'seller_tags\'].getTagsForTitle');oTitle._registerEvent('onfocus','parent.controls[\'seller_tags\'].setCurrentTitle');}
if(!oMsgLyr.eElem)
bindObj(oMsgLyr);oCustomLnk._registerEvent('onclick','parent.addCustomTag');}}
this.setCurrentTitle=function()
{var t=this,p=t.parent,oST=p.objType.is('EbayPage')?p.controls['seller_tags']:p;oST.sCurrentTitle=t.getValue();}
this.getTagsForTitle=function()
{var t=this,p=t.parent,oST=p.objType.is('EbayPage')?p.controls['seller_tags']:p;with(oST)
{var v=t.getValue(),c=oConfig,u=oUtils;v=u.trim(v);if((sCurrentTitle&&v==sCurrentTitle)||v=="")
return;if(c&&oSC.bTitleAJAXEnabled)
{oAjaxListner=processTitleResponse;oUtils.bShowProgress=true;oUtils.requestData(c.sAJAXUrl.replaceTokens(oSC.aActionIdVals.fullReco,encodeURIComponent(v),"",""));}}}
this.processTitleGuidResponse=function(pData)
{var sCfg=ebay.oDocument.getConfig('Selling.Title.SherpaGuidance');if(sCfg){sResp=pData.sherparesp;sRespAddkwd=sResp[0].addkwd;sRespRemkwd=sResp[0].removekwd;sRespAddinfo=sResp[0].addinfo;TitleSugLyr=new EbayHTMLLayer(this,sCfg.SugLyr);if(!TitleSugLyr.eElem)
TitleSugLyr.bind();LegalCntLyr=new EbayHTMLLayer(this,sCfg.legalCnt);if(!LegalCntLyr.eElem)
LegalCntLyr.bind();LegalDiscLyr=new EbayHTMLLayer(this,sCfg.legalDisc);if(!LegalDiscLyr.eElem)
LegalDiscLyr.bind();if(!sRespAddkwd&&!sRespRemkwd&&!sRespAddinfo){TitleSugLyr.eElem.style.display="none";LegalCntLyr.eElem.style.display="none";LegalDiscLyr.eElem.style.display="none";}
addkwdBtmLyr=new EbayHTMLLayer(this,sCfg.addkwdBtm);if(!addkwdBtmLyr.eElem)
addkwdBtmLyr.bind();addkwdBtmLyr.eElem.innerHTML='';addonekwdLyr=new EbayHTMLLayer(this,sCfg.addonekwd);if(!addonekwdLyr.eElem)
addonekwdLyr.bind();addonekwdLyr.eElem.innerHTML='';addmanykwdLyr=new EbayHTMLLayer(this,sCfg.addmanykwd);if(!addmanykwdLyr.eElem)
addmanykwdLyr.bind();addmanykwdLyr.eElem.innerHTML='';remkwdBtmLyr=new EbayHTMLLayer(this,sCfg.remkwdBtm);if(!remkwdBtmLyr.eElem)
remkwdBtmLyr.bind();remkwdBtmLyr.eElem.innerHTML='';removekwdLyr=new EbayHTMLLayer(this,sCfg.removekwd);if(!removekwdLyr.eElem)
removekwdLyr.bind();removekwdLyr.eElem.innerHTML='';removemanykwdLyr=new EbayHTMLLayer(this,sCfg.removemanykwd);if(!removemanykwdLyr.eElem)
removemanykwdLyr.bind();removemanykwdLyr.eElem.innerHTML='';addinfoLyr=new EbayHTMLLayer(this,sCfg.addinfo);if(!addinfoLyr.eElem)
addinfoLyr.bind();addinfoLyr.eElem.innerHTML='';addmanyinfoLyr=new EbayHTMLLayer(this,sCfg.addmanyinfo);if(!addmanyinfoLyr.eElem)
addmanyinfoLyr.bind();addmanyinfoLyr.eElem.innerHTML='';infoBtmLyr=new EbayHTMLLayer(this,sCfg.infoBtm);if(!infoBtmLyr.eElem)
infoBtmLyr.bind();infoBtmLyr.eElem.innerHTML='';if(sRespAddkwd)
{kwdLen=(sRespAddkwd.length);if(kwdLen==1){addkeyCnt=sCfg.addkey.replaceTokens(sRespAddkwd[0].key);addonekwdLyr.eElem.innerHTML=addkeyCnt;}
else{addKeyVal=sRespAddkwd[0].key;if(kwdLen>2){for(j=1;j<kwdLen-1;j++)
{addKeyVal+=", "+sRespAddkwd[j].key;}}
addmanykeyCnt=sCfg.addkeys.replaceTokens(addKeyVal,sRespAddkwd[kwdLen-1].key);addmanykwdLyr.eElem.innerHTML=addmanykeyCnt;}
if(kwdLen==1)
addkwdBtmLyr.eElem.innerHTML=addkeyCnt;else
addkwdBtmLyr.eElem.innerHTML=addmanykeyCnt;if(!sRespRemkwd&&!sRespAddinfo)
addkwdBtmLyr.eElem.innerHTML=addkwdBtmLyr.eElem.innerHTML.substr(1);}
if(sRespRemkwd){rkwdLen=sRespRemkwd.length;if(rkwdLen==1){remkeyCnt=sCfg.remkey.replaceTokens(sRespRemkwd[0].rkwd);removekwdLyr.eElem.innerHTML=remkeyCnt;}
else{remKeyVal=sRespRemkwd[0].rkwd;if(rkwdLen>2){for(j=1;j<rkwdLen-1;j++)
{remKeyVal+=", "+sRespRemkwd[j].rkwd;}}
remmanykeyCnt=sCfg.remkeys.replaceTokens(remKeyVal,sRespRemkwd[rkwdLen-1].rkwd);removemanykwdLyr.eElem.innerHTML=remmanykeyCnt;}
if(rkwdLen==1)
remkwdBtmLyr.eElem.innerHTML=remkeyCnt;else
remkwdBtmLyr.eElem.innerHTML=remmanykeyCnt;if(!sRespAddkwd&&!sRespAddinfo)
remkwdBtmLyr.eElem.innerHTML=remkwdBtmLyr.eElem.innerHTML.substr(1);}
if(sRespAddinfo){addinfoLen=sRespAddinfo.length;if(addinfoLen==1){addinfoCnt=sCfg.addinf.replaceTokens(sRespAddinfo[0].info);addinfoLyr.eElem.innerHTML=addinfoCnt;}
else{manyInfoVal=sRespAddinfo[0].info;if(addinfoLen>2){for(j=1;j<addinfoLen-1;j++)
{manyInfoVal+=", "+sRespAddinfo[j].info;}}
manyInfoCnt=sCfg.addinfos.replaceTokens(manyInfoVal,sRespAddinfo[addinfoLen-1].info);addmanyinfoLyr.eElem.innerHTML=manyInfoCnt;}
if(addinfoLen==1)
infoBtmLyr.eElem.innerHTML=addinfoCnt;else
infoBtmLyr.eElem.innerHTML=manyInfoCnt;if(!sRespAddkwd&&!sRespRemkwd)
infoBtmLyr.eElem.innerHTML=infoBtmLyr.eElem.innerHTML.substr(1);}
if(sRespAddkwd||sRespRemkwd||sRespAddinfo){TitleSugLyr.eElem.style.display="block";LegalCntLyr.eElem.style.display="block";LegalDiscLyr.eElem.style.display="block";}
var itemConHlp=document.getElementById("bubble");if(itemConHlp&&itemConHlp.style.display==""&&itemConHlp.style.display!="none"){var obj=ebay.oP.controls['SYI3-Rules-Engine'];if(obj){obj.itC=this.parent.parent.aConfigs["Selling.Describe.ItemCondition"];if(obj.itC)
obj.showConditionHelp(obj.oDD,obj.itC);}}}}
this.processTitleResponse=function(pData)
{var t=this;with(t)
{var aData=pData.TagNmValLst,l=aData.length,u=oUtils,c=oConfig,s=0,bIsSugTag,iTotalTopCount=0,aTrash=new Array(),len;if(!l)
return;for(var sTn in oTagControls)
{if(oSugTagControls[sTn]&&!oTagControls[sTn].oParentTag)
{var bHasReco=false;for(var i=0;i<l;i++)
{if(aData[i].tn==sTn)
{bHasReco=true;break;}}
if(!bHasReco)
delete oTagControls[sTn];}}
for(var i in oTagControls)
{var oTag=oTagControls[i],rmv=false;if(!oTag.bIsRetain&&!oTag.bIsEdited&&oTag.iTsrc==t.aTsrc.recoTop&&(oTag.oParentTag?!oTagControls[oTag.oParentTag.sTagCtrlName]:true)&&!oTag.aChild&&!oTag.bIsHiddenTag)
{u.removeChild(oTag.oTagOuterLayer.name);aTrash.push(oTagControls[i]);delete oTagControls[i];iTotalTopTags--}}
for(var i in oTagControls)
{if(!oTagControls[i].bIsRemoved&&oTagControls[i].oParentTag)
iTotalTopCount++;}
for(var i=0;i<l;i++)
{bIsSugTag=iTotalTopCount<c.iMaxTopTag?false:true;var aTags=bIsSugTag?aData[l-s-1]:aData[i];var j=aTags.tn,tnCtrl=j.replace(/\s/g,"");if(oSugTagControls[tnCtrl]||(oTagControls[tnCtrl]&&oTagControls[tnCtrl].bIsRemoved))
continue;if(!bIsSugTag)
{if(!oTagControls[tnCtrl])
{var idx=iTagIndex;if(aTags.bMV)
{var aTagVals=[];var aVals=[];var iOpt=0;len=aTags.Vals.length;for(index=0;index<len;index++)
{if(index<c.iMaxTopTag)
aTagVals[index]=aTags.Vals[index];else
{aVals[iOpt]=aTags.Vals[index];iOpt++;}}
aTags.Vals=aVals;}
aTags.aValues=[];if(aTags.bClosed)
aTags.aValues.unshift("-");len=aTags.Vals.length;for(var ind=0;ind<len;ind++)
{aTags.aValues.push(aTags.Vals[ind].Val);}
sTitle=u.getIcons([aTags.bReq])+aTags.tn+u.getHelpIcon(aTags.sHelpUrl,idx);html=aTags.bMV?u.getMultiValueHTML(aTagVals,sTitle,idx,aTags):u.getTopTagHTML(idx,sTitle,false,null,aTags);u.appendChild(c.sTopSectionLyr,html,oSC.sTagOuterLyrPrefix+idx,'span');oTagControls[tnCtrl]=aTags.bMV?new EbaySYI3MultiValueControl(t,j,idx,aTsrc.recoTop,true,aTags,aTagVals,c):aTags.aChildren?new EbaySYI3DepTagControl(t,null,j,idx,aTsrc.recoTop,true,aTags,false,c,null):new EbaySYI3TagControl(t,null,j,idx,aTsrc.recoTop,true,aTags,false,c,null);oTagControls[tnCtrl].aTagAttr.aChildren?u.createChildTags(oTagControls[tnCtrl],1):iTotalTopCount++;;oTagControls[tnCtrl].oRemove.show(!oTagControls[tnCtrl].bIsRequired);iTagIndex++;u.setHiddenIndex(iTagIndex);u.addTopTagsCount(true);if(oSugTagControls[j])
{u.removeChild(oSugTagControls[j].oSugTag.name);delete oSugTagControls[j];iTotalSugTags--;}}
else
{with(oTagControls[tnCtrl])
{if(!bIsEdited)
{u.setTagOptions(oTagControls[tnCtrl],oTagControls[tnCtrl].aOptions,oTagControls[tnCtrl].bIsClosed);if(!bNoDropDown)
oTagText.setValue(sSelVal);bSuggestionCreated=false;}}}}
else
{if(!oTagControls[tnCtrl])
{if(oSugTagControls[tnCtrl])
{u.removeChild(oSugTagControls[tnCtrl].oSugTag.name);delete oSugTagControls[tnCtrl];iTotalSugTags--;}
var iIndex=iTagIndex++,sSugTagId=oSC.sSugTagPrefix+iIndex,sSugHTML=c.sSugTagHTML.replaceTokens(j,c.sHiddenParamPrefix+iIndex);u.insertFirst(oSC.sSugSectionLyr,sSugHTML,sSugTagId);u.setHiddenIndex(iTagIndex);oSugTagControls[tnCtrl]=new EbaySYI3SuggestTagControl(t,j,iIndex,aTaction.none,true,aTags,c);iTotalSugTags++;if(iTotalSugTags>iMaxSugTag)
{var sLastChildId=u.getLastChildId(oSC.sSugSectionLyr);u.removeChild(sLastChildId);for(var k in oSugTagControls)
{if(oSugTagControls[k].oSugTag.name==sLastChildId)
delete oSugTagControls[k];}
iTotalSugTags--;}}
s++;}}
if(iTotalTopCount<c.iMaxTopTag)
{len=aTrash.length;for(var i=0;i<len;i++)
{var idx=iTagIndex++,sCtrlName=aTrash[i].name,oTag=aTrash[i],tnCtrl=aTrash[i].name.replace(/\s/g,""),sTagName=oTag.sTagCtrlName,aVals=oTag.aValues,iRow=0,sMultiHTML="",sAddBtnHTML="",bMV=oTag.bMultiVal;var sTitle=u.getIcons([oTag.aTagAttr.bReq])+sCtrlName+u.getHelpIcon(oTag.aTagAttr.sHelpUrl,idx);var html=bMV?u.getMultiValueHTML(oTag.aTagVals,sTitle,idx,oTag):u.getTopTagHTML(idx,sTitle,false,null,oTag);if(!oTagControls[tnCtrl])
{u.appendChild(c.sTopSectionLyr,html,oSC.sTagOuterLyrPrefix+idx,'span');oTagControls[tnCtrl]=bMV?new EbaySYI3MultiValueControl(t,sCtrlName,idx,aTsrc.recoTop,true,oTag.aTagAttr,oTag.aTagVals,c,oTag?oTag.oParentTag:null,oTag&&oTag.oParentTag?oTag.oParentTag.iChildIndex+1:0):(oTag&&oTag.aTagAttr.aChildren)?new EbaySYI3DepTagControl(t,oTag.oParentTag,sCtrlName,idx,aTsrc.recoTop,true,oTag.aTagAttr,false,c,oTag.oParentTag?oTag.oParentTag.iChildIndex+1:0):new EbaySYI3TagControl(t,null,sCtrlName,idx,aTsrc.recoTop,true,aTrash[i].aTagAttr,false,c,oTag&&oTag.oParentTag?oTag.oParentTag.iChildIndex+1:0);oTagControls[sCtrlName]=new EbaySYI3TagControl(t,null,sCtrlName,idx,aTsrc.recoTop,true,aTrash[i].aTagAttr,false,c,null);u.setHiddenIndex(iTagIndex);u.addTopTagsCount(true);iTotalTopCount++;if(iTotalTopCount>c.iMaxTopTag)break;}}}
if(iTotalSugTags>0)
{bindObj(oTrayLayer);var b=oTrayLayer.getStyle('visibility')=='visible';if(!b)
oTrayLayer.show(true);if(oDividerLayer)
oDividerLayer.show(true);}}}
this.addCustomTag=function()
{var t=this,p=t.parent;c=p.oConfig,u=p.oUtils;if(c.bAutoCompleteEnabled&&p.aGradNames.length==0&&p.bGradNameRecoCall)
{p.oAjaxListner=p.processGradNameResponse;u.requestData(c.sAJAXUrl.replaceTokens(oSC.aActionIdVals.gradNames,"","",""));}
p.addCustomControl();}
this.processGradNameResponse=function(pData)
{var t=this;with(t)
{aGradNames=pData.TagNmLst;}}
this.addCustomControl=function()
{var t=this;with(t)
{var c=oConfig,ind=iTagIndex,idx=ind++;u=oUtils,html=u.getCustomTagHTML(idx),sCCName='cc_'+oSC.sCustomOuterLyr+idx;sCusLyrIdInDialog=sCCName;var cCfg=ebay.oDocument.getConfig('Selling.Common');c.bOnFocus=cCfg.bOnFocus;c.sStartLyrName=cCfg.sStartLyrName;t.oOverlayTag.displayOverlay(u.getCustomTagHTML(idx),t,t.oCustomLnk);oCustomControls[sCCName]=new EbaySYI3CustomTagControl(t,sCCName,idx,c);oCustomControls[sCCName].oRemoveLnk.show(false);t.oOverlayTag.oCustomControl=oCustomControls[sCCName];iTagIndex++;if(t.isMSKUFlow)
t.oOverlayTag.oSaveButton.enable(false);yoLayer=new EbayHTMLLayer(this,"yoDiv");yoLayer.bind();if(((ebay.oDocument.oPage.changeLen==null||ebay.oDocument.oPage.changeLen==undefined)&&(c&&c.aAddVarLen==0))||ebay.oDocument.oPage.changeLen==0)
{var yoId=document.getElementById("yourOwn");if(yoId)
yoId.click();if(yoLayer.eElem)
yoLayer.show();}}}
this.createTopTag=function(pHtml)
{var t=this,u=t.oUtils,c=t.oConfig;var oCC=t.oCustomControls[t.sCusLyrIdInDialog];oCC.iTname=escapeHTMLCode(oCC.iTname);if(!oCC||oCC.iTname.length==0)
return;u.appendChild(c.sTopSectionLyr,pHtml,oCC.oOuterLyr.name,'span');oCC.unbindCusObj();oCC.bindCusObj();if(t.oSugLink)
t.oSugLink.bind();if(t.oValLink)
t.oValLink.bind();oCC.oNameTexBox.setValue(oCC.iTname);if(oCC.oNameTexBox.eElem)
oCC.oNameTexBox.eElem.style.display="none";var oCusName=ebay.oDocument.getUIElem(oCC.oNameTexBox.name+"span");if(oCusName)
oCusName.innerHTML="<b>"+oCC.iTname+"</b>";if(oCC.sSugValue)
oCC.oValueTexBox.setValue(oCC.sSugValue);else
oCC.oValueTexBox.setValue(oCC.sCurTextVal);oCC.oRemoveLnk.show(true);t.iTagIndex++;u.addTopTagsCount(true);u.setHiddenIndex(t.iTagIndex);}
if(typeof pInit=='undefined'||pInit)
t.init();}
function EbaySYI3MultiSkuSellerTags(pParent,pName,pCfg)
{if(!this.objType)
this.objType="EbaySYI3MultiSkuSellerTags";this.base=EbaySYI3SellerTags;this.base(pParent,pName,pCfg,false);var t=this;t.oValueMsgLyr=new EbayHTMLLayer(t,oSC.sWarningValueId);t.iTotalMSKUTag=0;this.init=function()
{var t=this;with(t)
{var c=oConfig,aTT=c.aTags,aTTLen=aTT.length,cnt;bindObj(oTrayLayer);for(var i=0;i<aTTLen;i++)
{var att=aTT[i],tn=att.tn,iIdx=att.iSortOrder,sTname=tn.replace(/\s/g,""),tnCtrl=sTname+iIdx,iTopTagIdx=0,iTopTagIdx_child=0,oSugTag=oSugTagControls[tnCtrl];if(!oSugTag)
{oSugTag=oSugTagControls[tnCtrl]=new EbaySYI3SuggestTagControl(t,tn+iIdx,iIdx,aTaction.none,false,att,c,true);if(att.bIsTopTag)
iTotalTopTags++;else
iTotalSugTags++;}
if(iIdx>iTagIndex)
iTagIndex=iIdx;if(att.bIsTopTag){if(att&&att.aChild){iTopTagIdx_child=att.aChild.iSortOrder+"_"+oSugTag.iTopTagIdx;}
iTopTagIdx=oSugTag.iTopTagIdx;oSugTag.iTopTagIdx++;oSugTag.iTotalTopTag++;oSugTag.oHiddenText.setValue(oSugTag.iTopTagIdx);iTopTagIdx=iIdx+"_"+iTopTagIdx;tnCtrl=sTname+iTopTagIdx;att.aChildren?oTagControls[tnCtrl]=new EbaySYI3DepTagControl(t,null,tn+iTopTagIdx,iTopTagIdx,aTsrc.recoTop,false,att,false,c,oSugTag):oTagControls[tnCtrl]=new EbaySYI3TagControl(this,null,tn+iTopTagIdx,iTopTagIdx,aTsrc.recoTop,false,att,false,c,oSugTag);if(att&&att.aChild){att.aChild.bChildVar=true;oTagControls[tnCtrl]=new EbaySYI3TagControl(this,null,att.aChild.tn+iTopTagIdx_child,iTopTagIdx_child,aTsrc.recoTop,false,att.aChild,false,c,oSugTag);}
oSugTag.aTagCtrls.push(oTagControls[tnCtrl]);iTotalMSKUTag++;}}
iTagIndex++;if(!oMsgLyr.eElem)
bindObj(oMsgLyr);if(!oValueMsgLyr.eElem)
bindObj(oValueMsgLyr);oCustomLnk.subscribeEvents('onclick');oCustomLnk._registerEvent('onclick','parent.addCustomTag');}}
this.init();}

// \include\lib\_global\features\syi3\describe\_base\seller_tags\tags.js 

function EbaySYI3TagControl(pParent,pParentTag,pName,pIndex,pSource,pIsBind,pTagAttr,pMultiVal,pCfg,pSugCtrl,pChildIndex)
{if(!this.objType)
this.objType="EbaySYI3TagControl";this.base=EbayBaseControl;this.base(pParent,pName);var t=this,c=pCfg,pI=pIndex,att=pTagAttr;t.pI=pI;t.aOptions=att.Vals;t.aValues=[];t.aAutoCompleteValues=[];t.aTagAttr=att;t.oParentTag=pParentTag;t.sTagCtrlName=pName.replace(/\s/g,"");t.bIsClosed=typeof(att.bClosed)!='undefined'&&att.bClosed;t.bIsHiddenTag=typeof(att.bH)!='undefined'&&att.bH;t.sSelVal="";t.iTname=pCfg.isMSKUFlow?pName.replace(pI,""):t.name;t.iTsrc=pSource;t.iTaction=pParent.aTaction.none;t.sValSrc="";t.iChildIndex=pChildIndex?pChildIndex:0;t.sSuffix=pI;t.sOPTIONS=oSC.sTagValOptLyrPrefix+pI+'_option_';t.bSuggestionCreated=false;t.iSelOption=0;t.sSelOptionVal="";t.sCurTextVal="";t.bIsBind=pIsBind;t.bIsEdited=false;t.bIsPrePopulated=false;t.bIsRequired=att.bReq;t.sHelpUrl=att.sHelpUrl;t.bIsRetain=(pI<c.iRigidTagNameCount)||(att.src&&att.src!=2);t.bIsRemoved=false;t.bTagInOverlay=false;t.bMultiVal=pMultiVal;t.bNoDropDown=(t.bIsClosed&&t.bMultiVal&&t.aOptions.length==0);t.oSugCtrl=pSugCtrl;t.oTagOuterLayer=new EbayHTMLLayer(t,oSC.sTagOuterLyrPrefix+pI);t.oTagNameLayer=new EbayHTMLLayer(t,oSC.sTagNameLyrPrefix+pI);t.bDate=att.bDate;t.bFull=att.bFull;t.bPartial=att.bPartial;t.bYear=att.bYear;t.bVaries=att.bVaries;t.Months=[];t.Months=att.Months;t.monTxt=att.MonthTxt;t.dayTxt=att.DayTxt;t.yearTxt=att.YearTxt;t.selYr,t.selParDt;t.sSelMonInd="";t.sSelDayInd="";t.evtDateHdnTxt=new EbayHTMLText(t,c.sTagTextBoxPrefix+pI);t.evtDateHdnTxt.bind();t.evntDateLyr=new EbayHTMLLayer(t,c.hdnFldDivId);t.evntDateLyr.bind();if(!t.bNoDropDown)
{t.oTagText=t.bIsClosed?new EbayHTMLSelect(t,t.bMultiVal?(c.sMVTagTextBoxPrefix+pI):(t.bDate?'year_'+c.sTagTextBoxPrefix+pI:c.sTagTextBoxPrefix+pI)):new EbayHTMLText(t,t.bMultiVal?(c.sMVTagTextBoxPrefix+pI):((t.bDate&&!t.bYear)?'year_'+c.sTagTextBoxPrefix+pI:c.sTagTextBoxPrefix+pI));t.bIsClosed?t.oTagText._registerEvent('onchange','parent.setStatus'):t.oTagText._registerEvent('onblur','parent.setStatus');t.oTagText._registerEvent('onkeydown','parent.clearText');t.oTagText._registerEvent('onkeyup','parent.refreshAutoComplete');if(t.bDate){t.oTagText._registerEvent('onfocus','parent.checkFcsDate');t.oTagText._registerEvent('onchange','parent.checkFcsDate');t.oTagText._registerEvent('onblur','parent.checkBlrDate');t.oTagText._registerEvent('onkeyup','parent.checkDate');}
t.oTagText.bind();}
if(t.bFull||t.bPartial){t.oMon=new EbayHTMLSelect(t,t.bMultiVal?('mon_'+c.sMVTagTextBoxPrefix+pI):('mon_'+c.sTagTextBoxPrefix+pI));t.oMon.bind();t.oMon.setOption(-1,t.monTxt,-1);if(t.bFull)
t.oMon._registerEvent('onchange','parent.populateDates');if(t.bPartial)
t.oMon._registerEvent('onchange','parent.setPartialVal');if(!(t.bPartial)){t.oDay=new EbayHTMLSelect(t,t.bMultiVal?('day_'+c.sMVTagTextBoxPrefix+pI):('day_'+c.sTagTextBoxPrefix+pI));t.oDay.bind();t.oDay._registerEvent('onchange','parent.updateDates');t.oDay.setOption(-1,t.dayTxt,-1);}}
t.oDownArrow=new EbayHTMLAnchor(t,oSC.sDownArrowPrefix+pI);t.oRemove=new EbayHTMLAnchor(t,oSC.sRemovePrefix+pI);t.oCustSuggTxt=new EbayHTMLText(t,"suggCustVarTxt");t.oCustEdit=new EbayHTMLAnchor(t,oSC.sCustEditPrefix+pI);t.oCustLabel=new EbayHTMLLayer(t,"VarLabel_"+pI);t.oCustSuggLyr=new EbayHTMLLayer(t,"suggCustVarDiv");t.sCustOPTIONS='suggCustVarDiv_option_';t.oSuggestLayer=new EbayHTMLLayer(t,oSC.sTagValOptLyrPrefix+pI);t.oHiddenText=new EbayHTMLText(t,c.sHiddenParamPrefix+pI);t.oSeq=new EbayHTMLText(t,c.sTagSeqPrefix+pI);t.oHelp=new EbayHTMLAnchor(t,oSC.sHelpPrefix+pI);t.oCustDownArrow=new EbayHTMLAnchor(t,"suggCustVarImg");t.oHelp._registerEvent('onclick','parent.showHelp');t.oDownArrow._registerEvent('onclick','parent.onClickArrow');t.oRemove._registerEvent('onclick','parent.removeTag');t.oCustEdit._registerEvent('onclick','parent.editCustVarName');t.oCustDownArrow._registerEvent('onclick','parent.createCustVarSugg');t.bAutoComplete=false;t.bSecAutoComplete=false;t.bMore=att.bMore;this.init=function(pVals,pSetTagOptions,pSetChildClass)
{var t=this;with(t)
{var p=parent;u=p.oUtils;if(bIsBind)
{bindObjects();if(typeof oTagText=='undefined'||(oTagText.eElem&&oTagText.eElem.type=='hidden'))
return;if(typeof(pSetTagOptions)=='undefined'||pSetTagOptions)
((iTsrc!=p.aTsrc.customNoAutoSug&&iTsrc!=p.aTsrc.customAutoSug))?(bDate?u.setTagOptions(this,aOptions,bIsClosed,false,bDate):u.setTagOptions(this,aOptions,bIsClosed)):u.setTagOptions(this,aOptions,bIsClosed);u.setHiddenValues(t,iTname,iTsrc,iTaction,sSelVal,sValSrc);if(typeof oTagText!='undefined'){if(!oTagText.eElem)
oTagText.bind();oTagText.setValue((t.bIsClosed&&t.bMultiVal)?oTagText.getValue():sSelVal);}
if(oParentTag&&typeof(pSetChildClass)!='undefined'&&pSetChildClass)
oTagOuterLayer.setClass(oSC.sChildClass);}
else if(bDate&&!bYear){u.setTagOptions(this,aOptions,bIsClosed,false,bDate,false);if(sSelVal!=""){checkDate(true);if(sSelMonInd==0||sSelMonInd!="")
oMon.eElem.selectedIndex=sSelMonInd;if(bPartial)
updateMonth(true);if(!bPartial&&!(oMon.eElem.disabled)){populateDates(true);if(sSelDayInd!=""){oDay.eElem.selectedIndex=sSelDayInd;updateDates(true);}}}}
else if(bYear){u.setTagOptions(this,aOptions,bIsClosed,false,false,bYear);updateDates(true);}}}
this.bindObjects=function()
{var t=this;with(t)
{var p=parent;oTagOuterLayer.eElem=null;oTagNameLayer.eElem=null;oDownArrow.eElem=null;oRemove.eElem=null;if(oCustEdit&&oCustEdit.eElem)
oCustEdit.eElem=null;oHelp.eElem=null;oSuggestLayer.eElem=null;if(typeof oTagText!='undefined')
oTagText.eElem=null;oSeq.eElem=null;oHiddenText.eElem=null;p.bindObj(oTagOuterLayer);p.bindObj(oTagNameLayer);p.bindObj(oDownArrow);p.bindObj(oRemove);if(oCustEdit)
p.bindObj(oCustEdit);p.bindObj(oHelp);p.bindObj(oSuggestLayer);if(!bNoDropDown)
p.bindObj(oTagText);p.bindObj(oSeq);p.bindObj(oHiddenText);}}
this.unbindObjects=function()
{var t=this,oD=t.oDocument;if(!t.bNoDropDown)
oD.clearControl(t.oTagText.name);oD.clearControl(t.oSuggestLayer.name);oD.clearControl(t.oRemove.name);oD.clearControl(t.oDownArrow.name);oD.clearControl(t.oHelp.name);if(t.oCustEdit&&t.oCustEdit.name)
oD.clearControl(t.oCustEdit.name);}
this.checkFcsDate=function(){var t=this,p=t.parent;p.checkDate();p.updateDates(true);}
this.checkBlrDate=function(){var t=this,p=t.parent;p.checkDate();}
this.checkDate=function(pOv)
{var t=this,p=t.parent;oTagText=t.oTagText||p.oTagText;oMon=t.oMon||p.oMon;bFull=t.bFull||p.bFull;bPartial=t.bPartial||p.bPartial;Months=t.Months||p.Months;var val=oTagText.getValue();if((t.bIsClosed)||!(isNaN(val))){if(val.length==4||(t.bIsClosed&&val!="-")){if(bFull||bPartial){oMon.eElem.disabled="";oMon.eElem.disabled=false;if(oMon.getOptionsLength()<2){for(var i=0;i<12;i++)
oMon.insertOption(i,Months[i],i);}}}else{if(bFull||bPartial){oMon.eElem.disabled="disabled";oMon.eElem.disabled=true;}}}
t.updateDates?t.updateDates(pOv):p.updateDates(pOv);}
this.setPartialVal=function(){var t=this,p=t.parent;var val=p.sSelVal;var selIdx=p.oMon.getSelectedIndex();if(val){if(p&&!p.evtDateHdnTxt.eElem){p.setHdnValForTray(p);}
if(selIdx!=12){var selDay=selIdx+1,selSt=selDay.toString(),mon=(selSt.length==2)?selDay:('0'+selDay);p.evtDateHdnTxt.setValue("");if(val.length>4)
val=val.substring(0,4);p.selParDt=val+mon;p.evtDateHdnTxt.setValue(val+mon);p.sSelMonInd=selIdx;}else if(selIdx==12)
p.evtDateHdnTxt.setValue(val);}}
this.setHdnValForTray=function(p){var hn='<input type="hidden" value="" id="'+p.evtDateHdnTxt.name+'" name="'+p.evtDateHdnTxt.name+'">';p.oSuggestLayer.eElem.innerHTML+=hn;p.evtDateHdnTxt.bind();}
this.populateDates=function(pOv){var t=this,p;if(pOv==true)
p=this;else
p=t.parent;var selTxt=p.oMon.getSelectedText(),val=t.sSelVal||p.sSelVal,bLeap=false,nDays,ar1=[0,2,4,6,7,9,11];if(t.iSelIndex=="24")
p.oDay.eElem.disabled=true;if(p.oDay.eElem.length>1)
p.oDay.eElem.length=1;for(var i=0;i<12;i++){if(p.Months[i]==selTxt){p.oDay.eElem.disabled="";p.oDay.eElem.disabled=false;if(val%4==0)
bLeap=true;if(i==1&&bLeap)
nDays=29;else if(i==1)
nDays=28;else{for(var j=0;j<ar1.length;j++){if(ar1[j]==i){nDays=31;break;}}
if(typeof(nDays)=='undefined')
nDays=30;}
for(var j=1;j<=9;j++)
p.oDay.insertOption('0'+j,'0'+j,j);for(var k=0;k<nDays-9;k++){var n=k+10;p.oDay.insertOption(n,n,n);}
break;}}
var selIdx=p.oMon.getSelectedIndex();if(val){if(p&&!p.evtDateHdnTxt.eElem){p.setHdnValForTray(p);}
if(selIdx!=12){var selDay=selIdx+1,selSt=selDay.toString(),mon=(selSt.length==2)?selDay:('0'+selDay);p.evtDateHdnTxt.setValue("");if(val.length>4)
val=val.substring(0,4);p.selParDt=val+mon;p.evtDateHdnTxt.setValue(val+mon);p.sSelMonInd=selIdx;}else if(selIdx==12)
p.evtDateHdnTxt.setValue(val);}}
this.updateDates=function(pOv){var p,t=this;if((pOv==true)||t.oMon)
p=t;else
p=t.parent;var val=p.sSelVal?p.sSelVal:t.sSelVal;if(val){if(p&&!p.evtDateHdnTxt.eElem){p.setHdnValForTray(p);}
p.evtDateHdnTxt?p.evtDateHdnTxt.setValue(val):t.evtDateHdnTxt.setValue(val);if(p.oMon){var selIdx=p.oMon.getSelectedIndex();if(selIdx!=12){var selDay=selIdx+1,selSt=selDay.toString(),mon=(selSt.length==2)?selDay:('0'+selDay);p.evtDateHdnTxt.setValue("");if(val.length>4)
val=val.substring(0,4);p.selParDt=val+mon;p.evtDateHdnTxt.setValue(val+mon);p.sSelMonInd=selIdx;}else if(selIdx==12)
p.evtDateHdnTxt.setValue(val);}
if(p.oDay){var selIdxDy=p.oDay.getSelectedIndex();if(selIdxDy!=0){var selSt=selIdxDy.toString(),day=(selSt.length==2)?selIdxDy:'0'+selIdxDy;p.evtDateHdnTxt.setValue("");if(p.selParDt.length>6)
val=val.substring(0,6);p.evtDateHdnTxt.setValue(p.selParDt+day);p.sSelDayInd=selIdxDy;}else if(selIdxDy==0)
p.evtDateHdnTxt.setValue(p.selParDt);}}}
this.updateMonth=function(pOv){var p;if(pOv==true)
p=this;else
p=this.parent;var val=p.sSelVal?p.sSelVal:t.sSelVal;var selIdx=p.oMon.getSelectedIndex();if(val){if(p&&!p.evtDateHdnTxt.eElem){p.setHdnValForTray(p);}
if(selIdx!=12){var selDay=selIdx+1,selSt=selDay.toString(),mon=(selSt.length==2)?selDay:('0'+selDay);p.evtDateHdnTxt.setValue("");if(val.length>4)
val=val.substring(0,4);p.selParDt=val+mon;p.evtDateHdnTxt.setValue(val+mon);p.sSelMonInd=selIdx;}else if(selIdx==12)
p.evtDateHdnTxt.setValue(val);}}
this.showHelp=function()
{var t=this,oHS=t.oDocument.oPage.controls['help system'];{var p=ebay.oDocument.oPage.controls['seller_tags'];if(!p.oHelpPop)
{var c={};c.iWidth=500;c.iHeight=500;p.oHelpPop=new EbaySYI3HelpPopup(p,'slHelpPop',c);}
p.oHelpPop.sUrl=t.eElem.href;p.oHelpPop.show();}
return false;}
this.onClickArrow=function()
{var t=this.parent;with(t)
{parent.bindObj(oTagText);if(oTagText.eElem&&oTagText.eElem.disabled)
return;if(!bSuggestionCreated||t.parent.oConfig.bMSKU_Enh)
createSuggestions();if(!oSuggestLayer.eElem)
return;var p=parent,u=p.oUtils;p.oCurrentTag=t;u.aLayerValues=aValues;u.showSuggestions(arguments[2]);p.bLyrStatus=true;}}
this.createSuggestions=function()
{var t=this;with(t)
{parent.bindObj(oSuggestLayer);parent.bindObj(oTagText);oSuggestLayer.setValue("");if(aValues.length==0){if(bDate)
parent.oUtils.setTagOptions(this,aOptions,bIsClosed,false,bDate);else
parent.oUtils.setTagOptions(this,aOptions,bIsClosed);}
for(var i=0,l=aValues.length;i<l;i++)
parent.oUtils.createSuggestion(oSuggestLayer,sOPTIONS+i,aValues[i],i);bSuggestionCreated=true;}}
this.editCustVarName=function()
{var t=this,p=t.parent,pp=t.parent.parent,c=pp.oConfig,u=pp.oUtils;var edt_sTn=u.stripHTML(p.aTagAttr.tn);editCustomVarHTML=c.editCustomVarHTML.replaceTokens(edt_sTn);var cCfg=ebay.oDocument.getConfig('Selling.Common');c.bOnFocus=cCfg.bOnFocus;c.sStartLyrName=cCfg.sStartLyrName;pp.oOverlayTag.displayOverlay(editCustomVarHTML,pp,t);pp.oOverlayTag.oSaveButton.enable(false);pp.oCustEditCtrl={};pp.oCustEditCtrl.oHdnFld=[];pp.oCustEditCtrl.oRnFld=[];pp.oCustEditCtrl.oCustLabel=p.oCustLabel;p.oCustLabel.bind();pp.oCustEditCtrl.oCustTagCtrl=p;var len=Math.max.apply(Math,pp.oConfig.aCustTagLen);for(var x=0;x<len;x++){pp.oCustEditCtrl.oHdnFld[x]="0_"+p.pI.split("_")[0]+"_"+x;}
pp.oCustEditCtrl.oRnFld="0_"+p.pI.split("_")[0];p.oCustSuggTxt.bind();p.oCustSuggTxt.subscribeEvents("onblur","onkeyup","onkeydown");p.oCustSuggTxt.onblur=function(){this.parent.parent.oCustEditCtrl.oCustTxt=this.getValue();this.parent.parent.oOverlayTag.oSaveButton.focus(true);}
p.oCustSuggTxt.onkeydown=function(){var t=this,iKeyID=(window.event)?event.keyCode:arguments[1].keyCode,p=t.parent,pp=p.parent;with(t){if(iKeyID==13){if(getValue().length!=0){t.onkeyup();t.onblur();pp.oOverlayTag.oSaveButton.onclick();}
return false;}}}
p.oCustSuggTxt.onkeyup=function(){if(u.trim(this.getValue())!="")
this.parent.parent.oOverlayTag.oSaveButton.enable(true);else
this.parent.parent.oOverlayTag.oSaveButton.enable(false);}}
this.createCustVarSugg=function()
{var t=this,p=t.parent,pp=t.parent.parent,c=pp.oConfig,u=pp.oUtils;with(t)
{var sActClass=oSC.sActiveClass,sPassClass=oSC.sPassiveClass;p.oCustSuggLyr.bind();p.oCustSuggTxt.bind();p.oCustSuggLyr.setValue("");for(var i=0,l=c.aSuggVarNames.length;i<l;i++){p.createCustSuggestion(p.oCustSuggLyr,p.sCustOPTIONS+i,c.aSuggVarNames[i],i,p.oCustSuggTxt);}
p.createCustSuggestion(p.oCustSuggLyr,p.sCustOPTIONS+i+1,'<hr style="margin:0px 5px 0px 0px;" />',c.aSuggVarNames[i+1],p.oCustSuggTxt);p.createCustSuggestion(p.oCustSuggLyr,p.sCustOPTIONS+i+2,c.aTexts.ownname,c.aSuggVarNames[i+2],p.oCustSuggTxt);p.oCustSuggLyr.show(true);}}
this.createCustSuggestion=function(pSuggest,pLyrId,pValue,pIndex,pTagObj)
{var t=this;with(t)
{var oTag=pTagObj,val=pValue,sActClass=oSC.sActiveClass,sPassClass=oSC.sPassiveClass;if(typeof(pValue)!='undefined'){var val=pValue.replace(new RegExp("\&","g"),"&amp;");u.appendChild(pSuggest.name,val,pLyrId,'div');var oL=new EbayHTMLLayer(pSuggest,pLyrId);oL.iIndex=pIndex;oL.subscribeEvents("onclick","onmouseover","onmouseout");oL.onmouseout=function()
{var t=this;t.setClass(sPassClass);}
oL.onmouseover=function()
{var t=this;with(t)
{var p=parent.parent.parent,u=p.oUtils,oCT=oTag;setClass(oSC.sActiveClass);oCT.sSelOptionVal=this.getValue();oCT.iSelOption=iIndex;}}
oL.onclick=function()
{var t=this,p=t.parent.parent.parent,u=p.oUtils,oCT=oTag;with(oCT)
{setValue(sSelOptionVal);sSelVal=sSelOptionVal;bIsEdited=sSelVal!=sSelOptionVal;pSuggest.show();focus(true);p.oCustEditCtrl.oCustTxt=sSelOptionVal;p.oOverlayTag.oSaveButton.enable(true);}}
oL.bind();if(pValue==c.aTexts.ownname||pValue==c.aTexts.addMore)
{oL.setStyle('color','#666');}
oL.setClass(sPassClass);}}}
this.removeTag=function()
{var t=this;var p=t.parent,pp=t.parent.parent,c=pp.oConfig,u=pp.oUtils,len;with(t.parent.parent)
{if(p.aChild&&p.aChild.length>0)
{len=p.aChild.length;for(var i=0;i<len;i++)
{p.aChild[i].oRemove.onclick();iTotalSugTags--;}}
if(p.aTagAttr&&p.aTagAttr.aChild){var sfx=p.oTagOuterLayer.name.split("_");oTagOuterLayer_child=ebay.oDocument.getUIElem("TagOuterLayer_"+(parseInt(sfx[1])+1)+"_"+sfx[2]);if(oTagOuterLayer_child){u.removeChild("TagOuterLayer_"+(parseInt(sfx[1])+1)+"_"+sfx[2]);u.removeChild("Separator_"+(parseInt(sfx[1])+1)+"_"+sfx[2]);}}
if(oSugTagControls[t.parent.sTagCtrlName])
return;if(!isMSKUFlow)
{if(iTotalSugTags>=iMaxSugTag)
{var sLastChildId=u.getLastChildId(oSC.sSugSectionLyr);u.removeChild(sLastChildId);for(var k in oSugTagControls)
{if(oSugTagControls[k].oSugTag.name==sLastChildId)
delete oSugTagControls[k];}
iTotalSugTags--;}
var sSugTagId=oSC.sSugTagPrefix+iTagIndex,sSugTagName=t.parent.name,sgCtrlName=sSugTagName.replace(/\s/g,""),sSugHTML=c.sSugTagHTML.replaceTokens(sSugTagName,c.sHiddenParamPrefix+iTagIndex);var b=oTrayLayer.getStyle('visibility')=='visible';if(!b)
oTrayLayer.show(true);u.insertFirst(oSC.sSugSectionLyr,sSugHTML,sSugTagId);u.removeChild(t.parent.oTagOuterLayer.name);t.parent.bIsRemoved=true;if(c.iInitialTopTag>0)
{u.parent.controls.TopSectionLyr.bind();u.parent.controls.TopSectionLyr.focus(true);}
u.addTopTagsCount(false);oSugTagControls[sgCtrlName]=new EbaySYI3SuggestTagControl(t.parent.parent,sSugTagName,iTagIndex,1,true,t.parent.aTagAttr,c);iTotalSugTags++;u.setHiddenIndex(++iTagIndex);if(p.aChild&&p.aChild.length>0)
{len=p.aChild.length;for(i=0;i<len;i++)
{if(oSugTagControls[p.aChild[i].sTagCtrlName])
{oDocument.getUIElem(oSC.sSugSectionLyr).removeChild(oSugTagControls[p.aChild[i].sTagCtrlName].oSugTag.eElem);delete oSugTagControls[p.aChild[i].sTagCtrlName];}}}
if(oDividerLayer)
oDividerLayer.show(true);}
else
{u.removeChild(p.oTagOuterLayer.name);if(p.parent.oConfig.bMSKU_Enh){var suf=p.oTagOuterLayer.name.split("_");var prevElt=parseInt(suf[2])-1;var nextElt=parseInt(suf[2])+1;var tagnmFst="TagName_"+suf[1]+"_";var oTagName=oDocument.getUIElem(tagnmFst+nextElt);if(!oTagName)
{for(var i=nextElt;i<=ebay.oDocument.oPage.tagNameCnt;i++)
{oTagName=oDocument.getUIElem(tagnmFst+(parseInt(i)));if(oTagName)
break;}}
var oTagNamebfr=oDocument.getUIElem(tagnmFst+prevElt);if(!oTagNamebfr)
{for(var i=prevElt;i>=0;i--)
{oTagNamebfr=oDocument.getUIElem(tagnmFst+(parseInt(i)));if(oTagNamebfr)
break;}}
var oTagName_chld=oDocument.getUIElem("TagName_"+(parseInt(suf[1])+1)+"_"+(parseInt(suf[2])+1));var oSep_chld=oDocument.getUIElem("Separator_"+(parseInt(suf[1])+1)+"_"+(parseInt(suf[2])+1));if(!oTagNamebfr)
{if(oTagName)
oTagName.style.display="block";}
if(oTagName_chld&&oSep_chld){oTagName_chld.style.display="block";oSep_chld.style.display="block";oSep_chld.style.marginTop="40px";}}
var oSugCtrl=p.oSugCtrl,oSugTag=oSugCtrl.oSugTag;oSugCtrl.iTotalTopTag--;if(pp.oConfig.iMaxTagOptions!=oSugCtrl.iTotalTopTag&&oSugCtrl.oSugTag.eElem.style.display!=''){oSugCtrl.oSugTag.show(true);pp.oValueMsgLyr.show(false);}
var oTagCtrls=pp.oTagControls,oTagTxtValue=[];for(var i in oTagCtrls){if(oTagCtrls[i].oTagText&&oTagCtrls[i].oTagText.eElem)
oTagTxtValue[i]=oTagCtrls[i].oTagText.getValue();}
if(oSugCtrl.sAction==pp.aTaction.custom)
delete pp.oTagControls[p.name];if(oSugCtrl.iTotalTopTag==0&&iTotalSugTags>=pp.iMaxSugTag)
{var sLastChildId=u.getLastChildId(oSC.sSugSectionLyr);u.removeChild(sLastChildId);for(var k in oSugTagControls){if(oSugTagControls[k].oSugTag.name==sLastChildId)
delete oSugTagControls[k];}
iTotalSugTags--;}
if(oSugCtrl.iTotalTopTag==0)
{if(oSugCtrl.bIsParent)
{var html=oSugTag.eElem.innerHTML
u.addTopTagsCount(false);if(oSugCtrl.aTagAttr.aChild){u.addTopTagsCount(false);}
u.removeChild(oSugTag.name);for(var i=oSugCtrl.iLyrIndx;i<iTotalTopTags;i++)
{var sDesLyr=oSC.sDesLyrId+(i+1),sSugLyr=oSC.sVarLyr+(i+1);t.oDocument.getUIElem(oSC.sDesLyrId+i).innerHTML=t.oDocument.getUIElem(sDesLyr).innerHTML;t.oDocument.getUIElem(oSC.sVarLyr+i).innerHTML=t.oDocument.getUIElem(sSugLyr).innerHTML;}
var oCtrls=pp.oSugTagControls;for(var i in oCtrls)
{var oSug=oCtrls[i];if(oSug.bIsParent&&oSug.iLyrIndx>oSugCtrl.iLyrIndx)
{var idx=oSug.iLyrIndx-1;oSug.iLyrIndx=idx;oSug.sDesLyrId=oSC.sDesLyrId+idx;oSug.oCellLyr=new EbayHTMLLayer(oSug,oSC.sCellPrefix+idx);p.bindTagCtrl(oSug);}}
if(t.oDocument.getUIElem(oSC.sDesLyrId+iTotalTopTags))
t.oDocument.getUIElem(oSC.sDesLyrId+iTotalTopTags).innerHTML="";if(t.oDocument.getUIElem(oSC.sVarLyr+iTotalTopTags))
t.oDocument.getUIElem(oSC.sVarLyr+iTotalTopTags).innerHTML="";if(t.oDocument.getUIElem(oSC.sCellPrefix+iTotalTopTags))
t.oDocument.getUIElem(oSC.sCellPrefix+iTotalTopTags).style.display='none';if(oSugCtrl.sAction==pp.aTaction.custom)
delete oSugTag;else
{var b=pp.oTrayLayer.getStyle('visibility')=='visible';if(!b)
pp.oTrayLayer.show(true);oSugCtrl.iLyrIndx="";oSugCtrl.sDesLyrId="";oSugCtrl.oCellLyr=null;u.insertFirst(oSC.sSugSectionLyr,html,oSugTag.name);oSugTag.eElem=null;bindObj(oSugTag);iTotalSugTags++;}}
else
delete oSugTag;}
var oTagCtrls=pp.oTagControls;for(var i in oTagCtrls){oTagCtrls[i].oTagText.setValue(oTagTxtValue[i]);}
if(oSugCtrl.sAction==pp.aTaction.custom)
delete pp.oSugTagControls[oSugCtrl.name];}
return false;}}
this.bindTagCtrl=function(pSug)
{var t=this;pSug.oSugTag.eElem=null;pSug.oHiddenText.eElem=null;if(pSug.oCellLyr!=null)
{pSug.oCellLyr.eElem=null;t.parent.bindObj(pSug.oCellLyr);}
t.parent.bindObj(pSug.oSugTag);t.parent.bindObj(pSug.oHiddenText);var len=pSug.aTagCtrls.length;for(var i=0;i<len;i++)
{pSug.aTagCtrls[i].bindObjects();}
len=pSug.aChild.length;for(var i=0;i<len;i++)
{t.bindTagCtrl(pSug.aChild[i]);}}
this.setStatus=function()
{var t=this,p=t.parent,pp=p.parent,c=pp.oConfig,u=pp.oUtils,val=t.getValue();val=u.trim(val);with(p)
{sValSrc="";if(val.length>0&&val!=c.aTexts.ownValue)
{var bIsSugLayerOpen=oSuggestLayer.eElem?oSuggestLayer.getStyle('visibility').is('visible'):false;if(bIsSugLayerOpen)
return;bIsEdited=true;sSelVal=val;u.setSelValsrc(p,val);u.setHiddenValues(p,iTname,iTsrc,iTaction,sSelVal,sValSrc);u.postSOJTag();if(c.bMSKU_Enh&&p.bIsClosed&&c.aParChildMap){var i,j,aMap=c.aParChildMap,l=aMap.length;for(i=0;i<l;i++){if(aMap[i].pn==iTname){var innerMap=aMap[i].Vals,len=innerMap.length;for(j=0;j<len;j++){var chldCtrl=p.aTagAttr.aChild.tn+p.aTagAttr.idx+"_"+pIndex.split("_")[1];if(oTagText.getSelectedValue()=="-"){pp.controls[chldCtrl].aValues=innerMap[0].val;if(!p.contains(pp.controls[chldCtrl].aValues,'<hr style="margin:0px 5px 0px 0px;" />'))
pp.controls[chldCtrl].aValues.push('<hr style="margin:0px 5px 0px 0px;" />');if(!p.contains(pp.controls[chldCtrl].aValues,c.aTexts.ownname))
pp.controls[chldCtrl].aValues.push(c.aTexts.ownname);break;}
else if(oTagText.getSelectedValue()==innerMap[j].opn){pp.controls[chldCtrl].aValues=innerMap[j].val;if(!p.contains(pp.controls[chldCtrl].aValues,'<hr style="margin:0px 5px 0px 0px;" />'))
pp.controls[chldCtrl].aValues.push('<hr style="margin:0px 5px 0px 0px;" />');if(!p.contains(pp.controls[chldCtrl].aValues,c.aTexts.ownname))
pp.controls[chldCtrl].aValues.push(c.aTexts.ownname);break;}}
break;}}}}
else
{if(val==c.aTexts.ownValue)
t.setValue("");}
if(c.bMSKU_Enh&&!p.bIsClosed&&c.aParChildMap){var i,j,aMap=c.aParChildMap,l=aMap.length;for(i=0;i<l;i++){if(aMap[i].cn==iTname){var innerMap=aMap[i].Vals,len=innerMap.length;for(j=0;j<len;j++){var parCtrl=pp.controls[aMap[i].pn+(p.aTagAttr.iSortOrder-1)+"_"+p.name.split("_")[1]];var selParVal=parCtrl.oTagText.getSelectedValue();var chldCtrl=p;if(selParVal=="-"){return;}
else{if(innerMap[j].opn==selParVal){var temp=this.getValue();p.removeItem(innerMap[j].val,this.getValue());break;}}}}}}}}
this.removeItem=function(array,item){for(var i in array){if(array[i]==item){array.splice(i,1);break;}}}
this.contains=function(arr,findValue){var i=arr.length;while(i--){if(arr[i]===findValue)return true;}
return false;}
this.clearText=function()
{var iKeyID=(window.event)?event.keyCode:arguments[2].keyCode;with(this)
{if(iKeyID==13)
{if(this.parent.bMultiVal)
{this.parent.oAddBtn.onclick();return false;}}
if(iKeyID!=9)
{if(getValue()==parent.parent.oConfig.aTexts.ownValue)
{setValue("");eElem.style.color="#000000";}}
else
parent.oSuggestLayer.show(false);}}
this.refreshAutoComplete=function()
{var t=this,p=t.parent,u=p.parent.oUtils,pp=p.parent,c=pp.oConfig;t.setStyle("color","#000");pp.oCurrentTag=p;var val=p.oTagText.getValue();if(p.bMore>=c.maxValuesOnload){if((val.length==c.sMaxKeyStrokeLimit)&&(!p.bSecAutoComplete)){pp.oAjaxListner=p.setAutoCompleteData;u.requestData(c.sAJAXUrl.replaceTokens(oSC.aActionIdVals.fullVals,"",p.name,"")+'&mxtgvls='+c.sMaxItemTagValuesLimit);p.bSecAutoComplete=true;}}
else if(!p.bAutoComplete)
{pp.oAjaxListner=p.setAutoCompleteData;u.requestData(c.sAJAXUrl.replaceTokens(oSC.aActionIdVals.gradVals,"",p.name,""));p.bAutoComplete=true;}
if(p.aAutoCompleteValues.length>0)
{var v=t.getValue();v=u.trim(v);if(v==p.sCurTextVal)
return;p.sCurTextVal=v;p.oSuggestLayer.show(false);var aMatches=u.fetchMatches(v,p.aAutoCompleteValues);if(aMatches&&aMatches.length!=0)
u.createGradList(p,aMatches);}}
this.checkAutoComplete=function()
{var t=this;with(t)
{var p=parent,c=p.oConfig,u=p.oUtils;if(u.trim(oTagText.getValue())==c.aTexts.ownname||u.trim(oTagText.getValue())==c.aTexts.addMore)
{oTagText.setValue(c.aTexts.ownValue);oTagText.eElem.style.color="gray";if(bAutoComplete)
return;p.oAjaxListner=setAutoCompleteData;u.requestData(c.sAJAXUrl.replaceTokens(oSC.aActionIdVals.gradVals,"",name,""));bAutoComplete=true;}
else
oTagText.eElem.style.color="#000";}}
this.setAutoCompleteData=function(pData)
{var t=this,aData=pData.TagValList;if(t.oCurrentTag.bMultiVal)
{var aExistingValues=t.oCurrentTag.aTagVals,len,len2;for(var sTn in aData)
{len=aData[sTn].length;for(var index=0;index<len;index++)
{len2=aExistingValues.length;for(var iInd=0;iInd<len2;iInd++)
{if(aExistingValues[iInd].Val.is(aData[sTn][index]))
{aData[sTn].splice(index,1);}}}}}
p=t.oCurrentTag,u=t.oUtils,tt=t.oCurrentTag.oTagText;for(var i in aData){if(p.bDate||p.bYear){for(var d=0;d<aData[i].length;d++){if(!isNaN(aData[i][d])){aData[i][d]=aData[i][d].substring(0,4);}}}
t.oCurrentTag.aAutoCompleteValues=aData[i];}
if(c.bReloadRespVal&&(t.oCurrentTag.aValues.length<p.aAutoCompleteValues.length)){t.oCurrentTag.aValues=p.aAutoCompleteValues;t.oCurrentTag.aValues.push(c.aTexts.ownname);}
if(p.aAutoCompleteValues.length>0)
{var v=tt.getValue();v=u.trim(v);if(v==p.sCurTextVal)
return;p.sCurTextVal=v;p.oSuggestLayer.show(false);var aMatches=u.fetchMatches(v,p.aAutoCompleteValues);if(aMatches&&aMatches.length!=0)
u.createGradList(p,aMatches);}}
t.init(t.aOptions);}

// \include\lib\_global\features\syi3\describe\_base\seller_tags\suggested_tags.js 

function EbaySYI3SuggestTagControl(pParent,pName,pIndex,pAction,pIsBind,pTagAttr,pCfg,pIsParent)
{if(!this.objType)
this.objType="EbaySYI3SugTagControl";this.base=EbayBaseControl;this.base(pParent,pName);var t=this,c=pCfg,pI=pIndex,att=pTagAttr;t.aValues=[];t.sSelOptionVal="";if(att.bMV&&!t.parent.oTagControls[pName.replace(/\s/g,"")])
{t.aTagVals=[];var aVals=[],len=att.Vals.length;for(index=0;index<len;index++)
{if(index<c.iMaxTopTag||att.Vals[index].Sel)
t.aTagVals.push(att.Vals[index]);else
{aVals.push(att.Vals[index]);}}
att.Vals=aVals;}
t.aOptions=att.Vals;;t.sAction=pAction;t.sSelval="";t.bMultiVal=att.bMV;t.bIsClosed=att.bClosed;t.aTagAttr=att;t.sTagCtrlName=pName.replace(/\s/g,"");t.bIsParent=pIsParent;t.sTagCtrlName=t.sTagCtrlName.replace(new RegExp("'","g"),"");t.bDate=att.bDate;t.bYear=att.bYear
t.bFull=att.bFull;t.bPartial=att.bPartial;t.yearTxt=att.YearTxt;t.sSelMonInd="";t.sSelDayInd="";t.sDesLyrId=c.isMSKUFlow?oSC.sDesLyrId+t.parent.iTotalTopTags:null;t.iLyrIndx=c.isMSKUFlow?t.parent.iTotalTopTags:null;t.oPtagCtrl=null;t.sTname=pName.replace(pI,"");t.iIndex=pI;t.iIndex_child=pI+1;if(att&&att.aChild)
att.idx=t.iIndex_child;t.iTopTagIdx=0;t.iTotalTopTag=0;t.iTsrc="";t.aChild=[];t.aTagCtrls=[];t.oCellLyr=null;t.oSugTag=new EbayHTMLLayer(t,oSC.sSugTagPrefix+pI);t.oHiddenText=(c.isMSKUFlow)?new EbayHTMLText(t,c.sTagSeqPrefix+pI):new EbayHTMLText(t,c.sHiddenParamPrefix+pI);t.oSugTag.subscribeEvents('onclick');if(!c.isMSKUFlow)
t.oSugTag._registerEvent('onclick','parent.showOverlayTag');else
t.oSugTag._registerEvent('onclick','parent.showTopTag');this.init=function()
{var t=this;with(t)
{var pVals=aOptions,v,bDup=false;for(var i=0,l=pVals.length;i<l;i++)
{if(bDate||bYear){if(!isNaN(pVals[i].Val)){v=pVals[i].Val.substring(0,4);for(var j=0;j<aValues.length;j++){if(aValues[j]==v){bDup=true;break;}}
if(!bDup)
aValues[i]=(typeof(v)!='undefined')?v:pVals[i].Val;else
bDup=false;}}
else{v=pVals[i].Val;aValues[i]=v;}
if(pVals[i].Sel){sSelVal=v;var ln=pVals[i].Val.length;if(bDate&&ln>4){if(!isNaN(pVals[i].Val)){sSelMonInd=(pVals[i].Val.substring(4,6)-1);if(ln>6)
sSelDayInd=pVals[i].Val.substring(6,8);}}}}
if(bIsClosed)
{aValues.unshift("-");}
if(pIsBind)
{var p=parent,u=p.oUtils,sTsrc;p.bindObj(oSugTag);if(sAction==p.aTaction.removed)
{sTsrc=p.aTsrc.recoTop;if(!p.oTagControls[sTagCtrlName].bNoDropDown)
sSelOptionVal=p.oTagControls[sTagCtrlName].sSelOptionVal;if(bFull||bPartial){sSelMonInd=p.oTagControls[sTagCtrlName].oMon.getSelectedIndex();if(!bPartial)
sSelDayInd=p.oTagControls[sTagCtrlName].oDay.getSelectedIndex();}}
else
sTsrc=p.aTsrc.trayUnUsed;if(!p.isMSKUFlow)
u.setHiddenValues(t,name,sTsrc,sAction,sSelval,p.aSelValSrc.fromReco);else{p.bindObj(oHiddenText);oHiddenText.setValue(iTopTagIdx);}}}}
this.createTopTag=function(pHtml)
{var t=this,p=t,pp=p.parent,c=pp.oConfig,u=pp.oUtils,sTagName=p.sTagCtrlName,aVals=p.aValues;with(pp)
{var oTag=oTagControls[sTagName],idx=pp.iTagIndex,oRefNode=oTag.oParentTag?oTag.oParentTag.oTagOuterLayer:null;if(oRefNode&&!oRefNode.eElem)
oRefNode.bind();u.appendChild(c.sTopSectionLyr,pHtml,oSC.sTagOuterLyrPrefix+oTag.sSuffix,'div',oRefNode?oRefNode.eElem:null);oTag.unbindObjects();oTag.bTagInOverlay=false;oTag.aOptions=p.aOptions;oTag.init(p.aOptions,true,true);oTag.oRemove.show(!oTag.bIsRequired);if(!oTag.bNoDropDown)
oTag.oTagText.setValue(p.sSelOptionVal);if(oTag.bDate){if(t.bFull||t.bPartial){oTag.oMon.bind();if(!t.bPartial)
oTag.oDay.bind();}
if(p.sSelMonInd!="")
oTag.oMon.eElem.selectedIndex=p.sSelMonInd;if(p.sSelDayInd!="")
oTag.oDay.eElem.selectedIndex=p.sSelDayInd;}
delete oSugTagControls[sTagName];u.removeChild(p.oSugTag.name);u.addTopTagsCount(true);iTotalSugTags--;u.setHiddenIndex(pp.iTagIndex);if(oTag.oParentTag)
{var len=oTag.oParentTag.aChild.length;for(var i=0;i<len;i++)
{if(oTag.oParentTag.aChild[i].sTagCtrlName==oTag.sTagCtrlName)
oTag.oParentTag.aChild[i]=oTag;if(oTag.oParentTag.oTagText)
{var v=oTag.oParentTag.oTagText.getValue();if(v.is('-')||v=='')
{oTag.oTagText.enable(false);oTag.oTagText.setClass("disableCtrl");}}}}
if(oTag.aTagAttr.aChildren)
u.createChildTags(oTag,oTag.iChildIndex+1);if(oDividerLayer&&iTotalSugTags==0)
oDividerLayer.show(false);}}
this.showOverlayTag=function()
{var p=this.parent,pp=p.parent,u=pp.oUtils;var c=pp.oConfig,sTagName=p.sTagCtrlName,oOverlayTag=pp.oOverlayTag,aVals=p.aValues,idx=pp.iTagIndex++,iRow=0,sMultiHTML="",sAddBtnHTML="",bMV=p.bMultiVal,oTag=bMV?pp.oTagControls[sTagName]?pp.oTagControls[sTagName]:pp.oSugTagControls[sTagName]:pp.oSugTagControls[sTagName]?pp.oSugTagControls[sTagName]:pp.oTagControls[sTagName];if(bMV){var inDiv=oOverlayTag.controls["OverlayDiv_sec"];inDiv.bind();inDiv.setClass('En_SellTagOverLay_MV');oOverlayTag.setClass('En_Overlay_ST_MV');}
var sTitle=u.getIcons([p.aTagAttr.bReq])+p.name+u.getHelpIcon(p.aTagAttr.sHelpUrl,idx);oOverlayTag.displayOverlay((bMV?u.getMultiValueHTML(oTag.aTagVals,sTitle,idx,oTag):u.getTopTagHTML(idx,sTitle,false,null,oTag)),p,this);with(pp)
{var sTraySrc=(p.sAction==aTaction.removed)?aTsrc.recoTop:aTsrc.trayUsed;oTag=oTagControls[sTagName]=bMV?new EbaySYI3MultiValueControl(pp,p.name,idx,sTraySrc,true,p.aTagAttr,oTag.aTagVals,oConfig,oTag?oTag.oParentTag:null,oTag&&oTag.oParentTag?oTag.oParentTag.iChildIndex+1:0):(oTag&&oTag.aTagAttr.aChildren)?new EbaySYI3DepTagControl(pp,oTag.oParentTag,p.name,idx,sTraySrc,true,p.aTagAttr,false,oConfig,null,oTag.oParentTag?oTag.oParentTag.iChildIndex+1:0):new EbaySYI3TagControl(pp,oTag?oTag.oParentTag:null,p.name,idx,sTraySrc,true,p.aTagAttr,false,oConfig,null,oTag&&oTag.oParentTag?oTag.oParentTag.iChildIndex+1:0);oTag.bTagInOverlay=true;oTagControls[sTagName].oRemove.show(false);if(p.sSelOptionVal!=""){oTagControls[sTagName].oTagText.setValue(p.sSelOptionVal);if(p.bDate){if((p.bFull||p.bPartial)&&(p.sSelMonInd!="")){oTagControls[sTagName].oMon.eElem.disabled=false;oTagControls[sTagName].checkDate(true);oTagControls[sTagName].oMon.eElem.selectedIndex=p.sSelMonInd;if(p.bPartial)
oTagControls[sTagName].updateMonth(true);if(!p.bPartial&&(p.sSelDayInd!="")){oTagControls[sTagName].oDay.eElem.disabled=false;oTagControls[sTagName].populateDates(true);oTagControls[sTagName].oDay.eElem.selectedIndex=p.sSelDayInd;oTagControls[sTagName].updateDates(true);}}}}}}
this.showTopTag=function()
{var t=this,p=t.parent,pp=p.parent,u=pp.oUtils;if(p.bIsParent&&p.iTotalTopTag==0){var oHid=pp.oHiddenIndex;if(!oHid.eElem)
pp.bindObj(oHid);p.iIndex=pp.iTotalMSKUTag;pp.iTotalMSKUTag++;if(p.aTagAttr&&p.aTagAttr.aChild){p.iIndex_child=pp.iTotalMSKUTag;pp.iTotalMSKUTag++;}
oHid.setValue(pp.iTotalMSKUTag);}
p.createMSKUTopTag();if(pp.oConfig.iMaxTagOptions==p.iTotalTopTag){p.oSugTag.show(false);pp.oValueMsgLyr.show(true);}}
this.createMSKUTopTag=function()
{var t=this,p=t.parent,iIndex=t.iIndex,idx=iIndex+"_"+t.iTopTagIdx,sTagName=t.sTname,oTag=p.oTagControls[sTagName],u=p.oUtils,aVals=p.aValues,sTagCtlName=sTagName+idx,att=t.aTagAttr,att_child=t.aTagAttr.aChild,oHid=t.oHiddenText;if(typeof oSuggestControl!="undefined"&&oSuggestControl.oCustEditCtrl){sTagName=t.sTname=att.tn;sTagCtlName=sTagName+idx;}
if(t.aTagAttr&&t.aTagAttr.aChild){idx_child=t.iIndex_child+"_"+t.iTopTagIdx;}
with(p)
{var sTraySrc=(t.sAction==aTaction.custom)?t.iTsrc:(t.sAction==aTaction.removed)?aTsrc.recoTop:aTsrc.trayUsed,html;if(t.iTotalTopTag==0)
{var sVarLyr=t.bIsParent?oSC.sVarLyr+p.iTotalTopTags:oSC.sVarLyr+iIndex,oSugTag=p.oDocument.getUIElem(t.oSugTag.name);if(c.sSugTag_Chld&&t.aTagAttr&&t.aTagAttr.aChild){var sSugHTML=c.sSugTag_Chld.replaceTokens(sTagName+"/ "+t.aTagAttr.aChild.tn,c.sTagSeqPrefix+iIndex,c.sTagSeqPrefix+t.iIndex_child);t.aTagAttr.idx=t.iIndex_child;var parChldRelHTML=c.sParChldHdnRel.replaceTokens("0_"+iIndex,"vt_tseq_"+"0_"+t.iIndex_child,"0_"+t.iIndex_child,"vt_tseq_"+"0_"+iIndex);t.aTagAttr.parChldRel=parChldRelHTML;t.aTagAttr.bParChldRel=false;if(t.aTagAttr.parChldRel&&t.aTagAttr.parChldRel!=''&&!t.aTagAttr.bParChldRel){u.appendChild(sVarLyr,t.aTagAttr.parChldRel,'','div');t.aTagAttr.bParChldRel=true;}}else{if(sTagName.contains&&(sTagName.contains(">")||sTagName.contains(">")))
var sSugHTML=c.sSugTagHTML.replaceTokens(escapeHTMLCode(sTagName),c.sTagSeqPrefix+iIndex);else
var sSugHTML=c.sSugTagHTML.replaceTokens(sTagName,c.sTagSeqPrefix+iIndex);}
oHid=t.oHiddenText=new EbayHTMLText(t,c.sTagSeqPrefix+iIndex);t.sDesLyrId=t.bIsParent?oSC.sDesLyrId+p.iTotalTopTags:oSC.sDesLyrId+pI;t.iLyrIndx=p.iTotalTopTags;if(t.sAction!=aTaction.custom&&t.bIsParent)
{u.removeChild(t.oSugTag.name);t.oSugTag.eElem=null;t.oHiddenText.eElem=null;}
u.appendChild(sVarLyr,sSugHTML,t.oSugTag.name,'div');if(t.bIsParent)
{var sCellId=oSC.sCellPrefix+p.iTotalTopTags;t.oCellLyr=new EbayHTMLLayer(t,sCellId);bindObj(t.oCellLyr);t.oCellLyr.show(true);u.addTopTagsCount(true);if(t.aTagAttr&&t.aTagAttr.aChild)
u.addTopTagsCount(true);}
bindObj(t.oSugTag);bindObj(t.oHiddenText);}
if(c.bMSKU_Enh)
var sActn=t.iTotalTopTag;else
var sActn=null;html=t.bIsClosed?(t.aTagAttr&&t.aTagAttr.aChild)?u.getTopTagHTML(idx,sTagName,false,false,t,null,idx_child,null,null,sActn):u.getTopTagHTML(idx,sTagName,false,false,t,null,null,null,null,sActn):t.aTagAttr.bCustomTag?u.getTopTagHTML(idx,sTagName,false,null,null,null,null,true,null,sActn):(t.aTagAttr&&t.aTagAttr.aChild)?u.getTopTagHTML(idx,sTagName,false,null,null,null,idx_child,null,t.aTagAttr,sActn):u.getTopTagHTML(idx,sTagName,false,null,null,null,null,null,null,sActn);u.appendChild(t.sDesLyrId,html,oSC.sTagOuterLyrPrefix+idx,'div');if(att.aChildren)
u.createMSKUChildTags(t,idx);oTag=oTagControls[sTagCtlName]=(t.aTagAttr.aChildren)?new EbaySYI3DepTagControl(p,p,sTagCtlName,idx,sTraySrc,true,t.aTagAttr,false,oConfig,t,(oTag&&oTag.oParentTag)?oTag.oParentTag.iChildIndex+1:0):new EbaySYI3TagControl(p,oTag?oTag.oParentTag:null,sTagCtlName,idx,sTraySrc,true,t.aTagAttr,false,oConfig,t,oTag&&oTag.oParentTag?oTag.oParentTag.iChildIndex+1:0);if(t.aTagAttr&&t.aTagAttr.aChild){new EbaySYI3TagControl(p,oTag?oTag.oParentTag:null,t.aTagAttr.aChild.tn+idx_child,idx_child,sTraySrc,true,t.aTagAttr.aChild,false,oConfig,t,oTag&&oTag.oParentTag?oTag.oParentTag.iChildIndex+1:0);}
t.iTopTagIdx++;t.iTotalTopTag++;ebay.oDocument.oPage.tagNameCnt++;t.aTagCtrls.push(oTag);if(t.oPtagCtrl!=null&&!t.bIsParent)
t.oPtagCtrl.aChild.push(oTag);if(!oHid.eElem)
bindObj(oHid);oHid.setValue(t.iTopTagIdx);if(t.aTagAttr&&t.aTagAttr.aChild){oHid_Chld=new EbayHTMLText(t,c.sTagSeqPrefix+t.iIndex_child);if(!oHid_Chld.eElem)
bindObj(oHid_Chld);oHid_Chld.setValue(t.iTopTagIdx);}
if(!att.aChildren&&t.iTotalTopTag==1){t.oSugTag.onclick();iTotalSugTags--;}}}
this.init();}

// \include\lib\_global\features\syi3\describe\_base\seller_tags\custom_tags.js 

function EbaySYI3CustomTagControl(pParent,pName,pIndex,pCfg)
{if(!this.objType)
this.objType="EbaySYI3CustomTagControl";this.base=EbayBaseControl;this.base(pParent,pName);var t=this,c=pCfg,pI=pIndex;t.iIndex=pI;t.aValues=[];t.aAutoCompleteValues=[];t.sOPTIONS=oSC.sTagValOptLyrPrefix+pI+'_NameOption_';t.bSuggestionCreated=false;t.iSelOption=0;t.sSelOptionVal="";t.sCurTextVal="";t.sSelVal="";t.iTname="";t.iTsrc="";t.iTaction=pParent.aTaction.none;t.sValSrc="0";t.iTags=pParent.iTotalTopTags;t.oOuterLyr=new EbayHTMLLayer(t,oSC.sCustomOuterLyr+pI);t.oNameTexBox=new EbayHTMLText(t,oSC.sCustomNamePrefix+pI);t.oValueTexBox=new EbayHTMLText(t,c.sTagTextBoxPrefix+pI);t.oRemoveLnk=new EbayHTMLAnchor(t,oSC.sCustomRemovePrefix+pI);t.oSugNameLyr=new EbayHTMLLayer(t,oSC.sCusSugNamePrefix+pI);t.oSugValLyr=new EbayHTMLLayer(t,oSC.sCusSugValPrefix+pI);t.oWarnMsgLyr=new EbayHTMLLayer(t,oSC.sCustomWarnPrefix+pI);t.oHiddenText=new EbayHTMLText(t,c.sHiddenParamPrefix+pI);if(c.bMSKU_Enh&&c.aAddVarDivs){oCustomChkBox=t.oCustomChkBox=new Array();oAddVarDiv=t.oAddVarDiv=new Array();for(var x=0;x<c.aAddVarLen;x++){t.oCustomChkBox[x]=new EbayHTMLCheckbox(t,"chk"+x);t.oAddVarDiv[x]=new EbayHTMLLayer(t,c.aAddVarDivs["chk"+x][2].tid);}
oAddOwnChkBox=t.oAddOwnChkBox=new EbayHTMLCheckbox(t,"yourOwn");oCustLyr=t.oCustLyr=new EbayHTMLLayer(t,"CustomDivId");t.oCustLyr.bind();}
t.oSuggestLayer=t.oTagText=null;this.init=function()
{var t=this,p=t.parent,c=p.oConfig;with(t)
{oRemoveLnk._registerEvent('onclick','parent.removeCustomTag');oNameTexBox._registerEvent('onkeyup','parent.showGradNames');oNameTexBox._registerEvent('onblur','parent.getGradVals');oNameTexBox._registerEvent('onfocus','parent.clearText');if(c.bMSKU_Enh&&c.aAddVarDivs){for(var x=0;x<c.aAddVarLen;x++){oCustomChkBox[x]._registerEvent('onclick','parent.enableSave');}
oAddOwnChkBox._registerEvent('onclick','parent.showHideCustomLyr');}
oValueTexBox._registerEvent('onfocus','parent.clearText');oValueTexBox._registerEvent('onkeydown','parent.clearText');if(p.oConfig.isMSKUFlow||p.oConfig.bISFlow){oNameTexBox._registerEvent('onkeydown','parent.clearText');}
if(p.oConfig.bAutoCompleteEnabled)
oValueTexBox._registerEvent('onkeyup','parent.showGradVals');bindCusObj();}}
this.bindCusObj=function()
{var t=this;with(t)
{var p=parent;p.bindObj(oOuterLyr);p.bindObj(oNameTexBox);p.bindObj(oValueTexBox);p.bindObj(oRemoveLnk);p.bindObj(oSugNameLyr);p.bindObj(oSugValLyr);p.bindObj(oWarnMsgLyr);p.bindObj(oHiddenText);if(p.oConfig.bMSKU_Enh&&p.oConfig.aAddVarDivs){for(var x=0;x<p.oConfig.aAddVarLen;x++){p.bindObj(oCustomChkBox[x]);p.bindObj(oAddVarDiv[x]);}
p.bindObj(oAddOwnChkBox);}}}
this.unbindCusObj=function()
{var t=this;with(t)
{var oD=oDocument;oD.clearControl(oOuterLyr.name);oD.clearControl(oNameTexBox.name);oD.clearControl(oValueTexBox.name);oD.clearControl(oRemoveLnk.name);oD.clearControl(oSugNameLyr.name);oD.clearControl(oSugValLyr.name);oD.clearControl(oWarnMsgLyr.name);oD.clearControl(oHiddenText.name);if(this.parent.oConfig.bMSKU_Enh&&this.parent.oConfig.aAddVarDivs){for(var x=0;x<p.oConfig.aAddVarLen;x++){oD.clearControl(oCustomChkBox[x]);oD.clearControl(oAddVarDiv[x]);}
oD.clearControl(oAddOwnChkBox.name);}}}
this.clearText=function()
{var t=this,iKeyID=(window.event)?event.keyCode:arguments[2].keyCode,p=t.parent,pp=p.parent;with(t)
{if(iKeyID!=9)
{if(getValue()==parent.parent.oConfig.aTexts.ownValue||getValue()==parent.parent.oConfig.aTexts.customName||getValue()=="")
{setValue("");eElem.style.color="#000000";}}
else
{parent.oSugNameLyr.show(false);parent.oSugValLyr.show(false);}
if(iKeyID==13&&(parent.parent.oConfig.isMSKUFlow||parent.parent.oConfig.bISFlow)){if(!pp.oOverlayTag.oSaveButton.bDisabled&&getValue().length!=0&&p.oValueTexBox.getValue()!=parent.parent.oConfig.aTexts.ownValue){t.onblur();if(p.oWarnMsgLyr.eElem.style.display!='')
pp.oOverlayTag.oSaveButton.onclick();}
else{t.onblur();if(getValue().length!=0)
pp.oOverlayTag.oSaveButton.onclick();}
return false;}}}
this.showGradNames=function()
{var t=this,p=t.parent,pp=p.parent,u=pp.oUtils,v=t.getValue(),aGradList=[];v=u.trim(v);if(v==p.sCurTextVal)
return;p.sCurTextVal=v;p.sOPTIONS=oSC.sTagValOptLyrPrefix+pI+'_NameOption_';if(pp.aGradNames.length>0)
{var a=pp.aGradNames,len=a.length;for(var i=0;i<len;i++)
{if(pp.isMSKUFlow){if(!pp.oTagControls[a[i].replace(/\s/g,"")+i]&&!pp.oSugTagControls[a[i].replace(/\s/g,"")+i])
aGradList[aGradList.length]=a[i];}
else if(!pp.oTagControls[a[i].replace(/\s/g,"")]&&!pp.oSugTagControls[a[i].replace(/\s/g,"")])
aGradList[aGradList.length]=a[i];}}
if(aGradList.length>0)
{pp.oCurrentTag=p;var aMatches=u.fetchMatches(v,pp.aGradNames);p.oSuggestLayer=p.oSugNameLyr;p.oSuggestLayer.show(false);p.oTagText=t;if(aMatches&&aMatches.length!=0)
{p.aValues=aMatches;u.createGradList(p,aMatches);}}
if(pp.isMSKUFlow){if(v.length==0)
pp.oOverlayTag.oSaveButton.enable(false);else
pp.oOverlayTag.oSaveButton.enable(true);}}
this.enableSave=function()
{var t=this,p=t.parent,pp=p.parent;for(var x=0;x<pp.oConfig.aAddVarLen;x++){if(this.isChecked()){p.iTags++;break;}
if(!this.isChecked()){p.iTags--;break;}}
if(p.iTags){pp.oOverlayTag.oSaveButton.enable(true);}
else{pp.oOverlayTag.oSaveButton.enable(false);}
for(var x=0;x<pp.oConfig.aAddVarLen;x++){if(p.iTags>=5){if(!p.oCustomChkBox[x].isChecked()&&p.oCustomChkBox[x].eElem){p.oCustomChkBox[x].eElem.disabled=true;p.oAddOwnChkBox.eElem.disabled=true;}}else{if(p.oCustomChkBox[x].eElem)
p.oCustomChkBox[x].eElem.disabled=false;p.oAddOwnChkBox.eElem.disabled=false;}}}
this.showHideCustomLyr=function(){var t=this,p=t.parent,pp=p.parent,bEnable=false;if(p.oAddOwnChkBox.isChecked()){p.oCustLyr.show(true);bEnable=true;p.iTags++;}else{p.oCustLyr.show();p.iTags--;}
if(pp.oConfig.bMSKU_Enh&&pp.oConfig.aAddVarLen){for(var x=0;x<pp.oConfig.aAddVarLen;x++){if(p.iTags>=5){if(p.oAddOwnChkBox.isChecked()&&p.oCustomChkBox[x].eElem&&!p.oCustomChkBox[x].isChecked()){p.oCustomChkBox[x].eElem.disabled=true;}}else{if(p.oCustomChkBox[x].eElem)
p.oCustomChkBox[x].eElem.disabled=false;p.oAddOwnChkBox.eElem.disabled=false;}}}}
this.showGradVals=function()
{var t=this,p=t.parent,pp=p.parent,u=pp.oUtils,v=t.getValue();v=u.trim(v);if(v==p.sCurTextVal)
return;p.sCurTextVal=v;p.sOPTIONS=oSC.sTagValOptLyrPrefix+pI+'_ValOption_';if(p.aAutoCompleteValues.length>0)
{pp.oCurrentTag=p;var aMatches=u.fetchMatches(v,p.aAutoCompleteValues);p.oSuggestLayer=p.oSugValLyr;p.oSuggestLayer.show(false);p.oTagText=t;if(aMatches&&aMatches.length!=0)
{p.aValues=aMatches;u.createGradList(p,aMatches);}}}
this.getGradVals=function()
{var t=this,p=t.parent,pp=p.parent,u=pp.oUtils,c=pp.oConfig,val=t.getValue();val=u.trim(val);with(p)
{if(oValueTexBox.getValue()==c.aTexts.ownValue)
oValueTexBox.setValue("");if(val!=""&&val!=c.aTexts.customName)
{iTname=val;for(var i in pp.oTagControls)
{var iTn=pp.oTagControls[i].iTname;if(iTn.contains(">")||iTn.contains(">"))
val=unescapeHTMLCode(val);else
val=escapeHTMLCode(val);if(iTn.toLowerCase()==val.toLowerCase()&&!pp.oTagControls[i].bIsRemoved)
{t.setValue("");oWarnMsgLyr.setValue(c.aTexts.warnmsg);oWarnMsgLyr.show(true);if(pp.isMSKUFlow)
{if(t.getValue().length==0)
pp.oOverlayTag.oSaveButton.enable(false);else
pp.oOverlayTag.oSaveButton.enable(true);}
return;}}
for(var i in pp.oCustomControls)
{var sTxtVal=pp.oCustomControls[i].oNameTexBox.getValue().toLowerCase();if(i!=t.parent.name&&sTxtVal!=c.aTexts.customName.toLowerCase()&&sTxtVal!=c.aTexts.ownValue.toLowerCase()&&sTxtVal==val.toLowerCase())
{t.setValue("");oWarnMsgLyr.show(true);oWarnMsgLyr.setValue(c.aTexts.warnmsg);if(pp.isMSKUFlow)
{if(t.getValue().length==0)
pp.oOverlayTag.oSaveButton.enable(false);else
pp.oOverlayTag.oSaveButton.enable(true);}
return;}}
for(var i in pp.oSugTagControls){var iTn=pp.oSugTagControls[i].sTname;if(iTn.toLowerCase()==val.toLowerCase()&&!pp.oSugTagControls[i].bIsRemoved)
{t.setValue("");oWarnMsgLyr.setValue(c.aTexts.warnmsg);oWarnMsgLyr.show(true);if(pp.isMSKUFlow)
{if(t.getValue().length==0)
pp.oOverlayTag.oSaveButton.enable(false);else
pp.oOverlayTag.oSaveButton.enable(true);}
return;}}
iTsrc=u.oUtils.isInArray(pp.aGradNames,val)?pp.aTsrc.customAutoSug:pp.aTsrc.customNoAutoSug;sCurTextVal=oValueTexBox.getValue();u.setHiddenValues(p,iTname,iTsrc,iTaction,sSelVal,sValSrc);if(c.bAutoCompleteEnabled&&val!=pp.sSpellOriginalValue)
{pp.oCurrentTag=p;pp.oAjaxListner=processGradVals;u.requestData(c.sAJAXUrl.replaceTokens(oSC.aActionIdVals.gradVals,"",val,""));}
if(val!=pp.sSpellSugValue)
{pp.oSpellUOM=oSugNameLyr;pp.oSpellUOMParent=t;pp.SpellUOMCheckId=oSC.sSpellUOMPrefix+t.name;}}
else
{if(pp.isMSKUFlow)
{pp.oOverlayTag.oSaveButton.enable(false);t.setValue("");return;}
t.setValue("");}
pp.oOverlayTag.oSaveButton.enable(true);oWarnMsgLyr.show(false);}}
this.processGradVals=function(pData)
{var t=this,aData=pData.TagValList;for(var i in aData)
t.oCurrentTag.aAutoCompleteValues=aData[i];}
this.removeCustomTag=function()
{var t=this,p=t.parent.parent;u=p.oUtils;var sLyrId=t.parent.oOuterLyr.name;with(p)
{u.removeChild(sLyrId);delete oCustomControls[sLyrId];delete p.oCustomControls[t.parent.name];u.addTopTagsCount(false);var oAddAnch=p.controls['AddCustomLnk'].eElem;if(oAddAnch&&oAddAnch.nodeName=="A")
oAddAnch.focus(true);}}
this.showSpellCheckUOM=function()
{var t=this,p=t.parent.parent,c=p.oConfig,u=p.oUtils,val=t.getValue();val=u.trim(val);with(t.parent)
{if(val!=""&&val!=c.aTexts.ownValue)
{u.setSelValsrc(t.parent,val);u.setHiddenValues(t.parent,iTname,iTsrc,iTaction,sSelVal,sValSrc);if(val!=p.sSpellSugValue)
{p.oSpellUOM=oSugValLyr;p.oSpellUOMParent=t;p.SpellUOMCheckId=oSC.sSpellUOMPrefix+t.name;if(val!=p.sSpellOriginalValue&&c.bSpellCheckUOMEnabled&&sValSrc==p.aSelValSrc.manualNoAuto)
{p.sSpellOriginalValue=val;p.sSpellSugValue="";p.aSpellUOMResponse="";p.oAjaxListner=u.getSpellUOMChecks;}
else if(val==p.sSpellOriginalValue&&p.aSpellUOMResponse!="")
u.getSpellUOMChecks(p.aSpellUOMResponse);}}
else
t.setValue("");}}
this.init();}

// \include\lib\_global\features\syi3\describe\_base\seller_tags\utils.js 

function escapeHTMLCode(str){str=str.replace(/&/g,"&amp;");str=str.replace(/</g,"&lt;");str=str.replace(/>/g,"&gt;");return str;}
function unescapeHTMLCode(str){str=str.replace(/&amp;/g,"&");str=str.replace(/&lt;/g,"<");str=str.replace(/&gt;/g,">");return str;}
function EbaySYI3SellerTagUtils(pParent,pName)
{if(!this.objType)
this.objType="EbaySYI3SellerTagUtils";this.base=EbayBaseControl;this.base(pParent,pName);var t=this;t.sCurTagName="";t.aLayerValues=[];t.sMVContainer='mvContainer';t.bShowProgress=false;t.bUKAutos=(typeof(pParent.oConfig.bUKAutos)!='undefined')?pParent.oConfig.bUKAutos:false;this.requestData=function(pUrl)
{var t=this;if(t.bShowProgress)
t.showProgress();var p=t.parent.oConfig;var sUrl=pUrl;if(p.supList)
sUrl+='&'+oSC.sSuppresParam+'='+p.supList;if(p.varList)
sUrl+='&'+oSC.sVarTaginfoParam+'='+p.varList;if(t.bUKAutos){sUrl+='&responseformat=2&callback=processDataResponse';var head=document.getElementsByTagName("head")[0];var script=document.createElement("script");script.setAttribute("type","text/javascript");script.setAttribute("src",sUrl);head.appendChild(script);window['processDataResponse']=Function("resp","ebay.oDocument.oPage.controls['seller_tags'].controls['seller_tag_utils'].processDataResponse(resp);");}else{var req=ebay.oServer.createRequest('seller_tag',sUrl,true);req.sPostData="";req.iResponseType=3;req.registerAsDataListener(t);req.send();}}
this.processDataResponse=function(pResp)
{var t=this;var resp=t.bUKAutos?pResp:pResp.oJSON;if(resp)
t.parent.oAjaxListner(resp);if(t.bShowProgress)
t.hideProgress();}
this.showProgress=function()
{var t=this;with(t)
{var p=parent,oP=p.parent,c=p.oConfig,gLyr=oP.controls['grayout_lyr'];if(gLyr)
{var e=oDocument.getUIElem('ItemSpecifics'),iLocs=oUtils.oPositioning.getOffsetLeftTop(e);if(document.body.style.overflow=='hidden')
{var ge=oDocument.getUIElem('lyrGrayout_sec'),gePrt=ge.parentElement?ge.parentElement:ge.parentNode,cLyr=oDocument.getUIElem('content');if(gePrt.id!='content')
{gePrt.removeChild(ge);cLyr.appendChild(ge);}}
gLyr.bDisableSelElems=false;gLyr.display(e.scrollWidth,e.scrollHeight,iLocs);var oProgLyr=oDocument.getUIElem(oSC.sProgressIndicator)
if(oProgLyr)
gLyr.oLayer.setValue(oProgLyr.innerHTML);}}}
this.hideProgress=function()
{var t=this;t.parent.parent.controls['grayout_lyr'].hide();t.bShowProgress=false;}
this.removeChild=function(pChildId)
{var t=this;if(pChildId=="")return;var oChild=t.oDocument.getUIElem(pChildId),oP;if(!oChild)
return;oP=oChild.parentNode;if(oP)
oP.removeChild(oChild);}
this.appendChild=function(pParentId,pChildHTML,pChildId,pChildType,pRefNode,pChildClass)
{var t=this;if(pParentId=="")return;var oD=t.oDocument,oP=oD.getUIElem(pParentId),c=t.parent.oConfig;if(oP)
{var oChildTag=oD.createElement(pChildType);oChildTag.innerHTML=pChildHTML;oChildTag.id=pChildId;oChildTag.setAttribute('role','option');if(typeof pChildClass!='undefined')
oChildTag.className=pChildClass;if(pRefNode)
t.insertAfter(oChildTag,pRefNode);else
oP.appendChild(oChildTag);}}
this.insertFirst=function(pParentId,pChildHTML,pChildId)
{var t=this;if(pParentId==""||pChildId=="")return;var oD=t.oDocument,oP=oD.getUIElem(pParentId);if(oP)
{var oChildTag=oD.createElement("div"),oFirstChild=oP.firstChild,c=t.parent.oConfig;if(!oFirstChild)
{t.appendChild(pParentId,pChildHTML,pChildId,'div',null,c.sSugTagOuterClass);return;}
while(oFirstChild.nodeType==3)
{oFirstChild=oFirstChild.nextSibling;if(!oFirstChild)
{t.appendChild(pParentId,pChildHTML,pChildId,'div');return;}}
oChildTag.innerHTML=pChildHTML;oChildTag.id=pChildId;oChildTag.className=c.sSugTagOuterClass;oP.insertBefore(oChildTag,oFirstChild);}}
this.insertAfter=function(pNewNode,pRefNode)
{var oPN=pRefNode.parentNode?pRefNode.parentNode:pRefNode.parentElement;oPN.insertBefore(pNewNode,pRefNode.nextSibling);}
this.getLastChildId=function(pParentId)
{var t=this;if(pParentId=="")return;var oD=t.oDocument,oP=oD.getUIElem(pParentId),oLastChild=oP?oP.lastChild:null;if(!oLastChild)
return null;while(oLastChild.id=="")
oLastChild=oLastChild.previousSibling;if(oLastChild)
return oLastChild.id;return null;}
this.getHelpIcon=function(pHelp,pIndex)
{var t=this,c=t.parent.oConfig,helpHTML="",helpDiv=t.oDocument.createElement('div');if(pHelp)
{oHelpLink=t.oDocument.createElement('a');oHelpLink.href=pHelp;oHelpLink.id=oHelpLink.name="Help_"+pIndex;oHlpImg=t.oDocument.createElement('img');oHlpImg.src=c.sHelpImg;oHlpImg.setAttribute('border','0');oHlpImg.setAttribute('alt',' ');oHelpLink.appendChild(oHlpImg);helpDiv.appendChild(oHelpLink)
oHelpLink.style.marginLeft='7px';helpHTML=helpDiv.innerHTML;}
return helpHTML;}
this.getIcons=function(pArray)
{var t=this,c=t.parent.oConfig,iconHTML="",iconDiv=t.oDocument.createElement('div'),len=pArray.length;for(var i=0;i<len;i++)
{if(pArray[i])
{icon=t.oDocument.createElement('img');icon.src=c.aIconArray[i];icon.style.marginRight='7px';icon.setAttribute('alt',' ');iconDiv.appendChild(icon);}}
iconHTML=iconDiv.innerHTML;return iconHTML;}
this.getTagTitle=function(pIndex,pName,pCustom,pRemove,pChildName,pParentChild)
{var t=this,c=t.parent.oConfig,idx=pIndex;for(var i=0;i<c.aTags.length;i++)
if(c.aTags[i].tn==pName)
{var bMV=c.aTags[i].bMV;break;}
if(bMV){if(c.IsISSherpaEnabled)
var s=c.sTagTitle.replaceTokens(pName,oSC.sRemovePrefix+pIndex,c.sMVTagTextBoxPrefix+pIndex,pName.replace(/\s/g,''));else
var s=c.sTagTitle.replaceTokens(pName,oSC.sRemovePrefix+pIndex,c.sMVTagTextBoxPrefix+pIndex);}
else if(c.sCustomTagTitle&&pCustom)
var s=c.sCustomTagTitle.replaceTokens(pName,c.sTagTextBoxPrefix+pIndex,"Edit_"+pIndex,"VarLabel_"+pIndex);else if(pParentChild&&pRemove){if(pName=='Color')
var s=c.sTagTitle_parChild2.replaceTokens(pName,pChildName);else if(pName=='Metal')
var s=c.sTagTitle_parChild3.replaceTokens(pName,pChildName);else
var s=c.sTagTitle_parChild1.replaceTokens(pName,pChildName);}
else if(c.sTagTitle1&&pRemove)
var s=c.sTagTitle1.replaceTokens(escapeHTMLCode(pName));else{if(c.IsISSherpaEnabled)
var s=c.sTagTitle.replaceTokens(pName,oSC.sRemovePrefix+pIndex,((c.aTags[i]&&c.aTags[i].bDate)?'year_'+c.sTagTextBoxPrefix+pIndex:c.sTagTextBoxPrefix+pIndex),pName.replace(/\s/g,''));else
var s=c.sTagTitle.replaceTokens(pName,oSC.sRemovePrefix+pIndex,((c.aTags[i]&&c.aTags[i].bDate)?'year_'+c.sTagTextBoxPrefix+pIndex:c.sTagTextBoxPrefix+pIndex));}
return s;}
this.getOptions=function(pValues)
{var s="",len=pValues.length;for(var i=0;i<len;i++)
{if(typeof(pValues[i])!='undefined'){var val=pValues[i].replace(new RegExp("\"","g"),"&quot;");s+='<option value="'+val+'">'+pValues[i]+'</option>';}}
return s;}
this.getTopTagHTML=function(pIndex,pName,pAddBtnId,pChildId,pObj,pNoDDown,pIndex1,pCustomTag,pSuggTagCtrl,pAction)
{var t=this;if(pObj)
var bClosed=pObj.bClosed?pObj.bClosed:pObj.bIsClosed;var c=t.parent.oConfig,idx=pChildId&&pChildId>0?pIndex+'_'+pChildId:pIndex,sTopHtml,selectHTML=c.sSelectHTML;if(!(c.isVariation)&&c.isValRecom)
{sTopHtml=((pObj.aTagAttr)?pObj.aTagAttr.Vals.length==0:pObj.aValues.length==0)?c.sTopImglessHTML:c.sTopTagHTML;}
else
{if(pObj&&pObj.aTagAttr.bParent)
{if(pObj.aTagAttr.bDisable)
selectHTML=c.sSelectHTML_pDis;else if(pObj.aTagAttr.aChild.bDisable)
selectHTML=c.sSelectHTML_cDis;else{if(pName=='Color')
selectHTML=c.sSelectHTML_parChild2;else
selectHTML=c.sSelectHTML_parChild1;}}else{if(c.bMSKU_Enh&&c.isVariation){if(bClosed){selectHTML=c.sSelectHTML1;}else{if(pSuggTagCtrl&&pSuggTagCtrl.bParent){if(pName=='Color')
sTopHtml=c.sTopTagHTML_parChild2;else
sTopHtml=c.sTopTagHTML_parChild1;}
else
sTopHtml=c.sTopTagHTML1;}}
else{sTopHtml=c.sTopTagHTML;}}}
var s='';if(pObj&&!pNoDDown&&selectHTML)
var sSelectHTML=(!(c.isVariation)&&c.isValRecom)?selectHTML.replaceTokens(pAddBtnId?c.sMVTagTextBoxPrefix+idx:(pObj.bDate?'year_'+c.sTagTextBoxPrefix+idx:c.sTagTextBoxPrefix+idx),t.getOptions(pObj.aValues),(pAddBtnId&&!pNoDDown)?t.getAddTagBtn(t.sMVContainer+idx+"_add",bClosed):"",pAddBtnId?"PaddingTop":"DropDownPadding",(pObj.aTagAttr&&!pObj.oContainer&&!pObj.bMultiVal)?pObj.aTagAttr.hlpTxt:((!pObj.bMV&&!pObj.aTagAttr)?pObj.hlpTxt:"")):(pObj&&pObj.aTagAttr.bParent)?selectHTML.replaceTokens(pAddBtnId?c.sMVTagTextBoxPrefix+idx:(pObj.bDate?'year_'+c.sTagTextBoxPrefix+idx:c.sTagTextBoxPrefix+idx),t.getOptions(pObj.aValues),(pAddBtnId&&!pNoDDown)?t.getAddTagBtn(t.sMVContainer+idx+"_add",bClosed):"",pAddBtnId?"PaddingTop":"DropDownPadding",c.sTagTextBoxPrefix+pIndex1,50,21,oSC.sDownArrowPrefix+pIndex1,oSC.sTagValOptLyrPrefix+pIndex1,c.sHiddenParamPrefix+pIndex1,"Remove_"+idx):c.bMSKU_Enh&&c.isVariation?selectHTML.replaceTokens(pAddBtnId?c.sMVTagTextBoxPrefix+idx:(pObj.bDate?'year_'+c.sTagTextBoxPrefix+idx:c.sTagTextBoxPrefix+idx),t.getOptions(pObj.aValues),(pAddBtnId&&!pNoDDown)?t.getAddTagBtn(t.sMVContainer+idx+"_add",bClosed):"",pAddBtnId?"PaddingTop":"DropDownPadding","Remove_"+idx):selectHTML.replaceTokens(pAddBtnId?c.sMVTagTextBoxPrefix+idx:(pObj.bDate?'year_'+c.sTagTextBoxPrefix+idx:c.sTagTextBoxPrefix+idx),t.getOptions(pObj.aValues),(pAddBtnId&&!pNoDDown)?t.getAddTagBtn(t.sMVContainer+idx+"_add",bClosed):"",pAddBtnId?"PaddingTop":"DropDownPadding");if(pObj){var sMargin=pAddBtnId?'':pObj&&pObj.oParentTag?' style="margin-top:5px;position:relative;"':' style="margin-top:7px; clear:both;"';var sMargin_hide=pAddBtnId?'':pObj&&pObj.oParentTag?' style="margin-top:5px;position:relative;"':' style="margin-top:7px; clear:both;display:none;"';if(!c.bMSKU_Enh&&!(pObj&&pObj.aTagAttr.bParent))
s+='<div id="'+oSC.sTagNameLyrPrefix+idx+'"'+sMargin+'>';if(pName){if(pObj&&pObj.aTagAttr.bParent){if(pAction==0){s+='<div id="'+oSC.sTagNameLyrPrefix+idx+'"'+sMargin+'>';s+=t.getTagTitle(idx,pName,null,true,pObj.aTagAttr.aChild.tn,true);}else{s+='<div id="'+oSC.sTagNameLyrPrefix+idx+'"'+sMargin_hide+'>';s+=t.getTagTitle(idx,pName,null,true,pObj.aTagAttr.aChild.tn,true);}
s+='</div>';}
else{if(c.bMSKU_Enh){if(pAction==0){s+='<div id="'+oSC.sTagNameLyrPrefix+idx+'"'+sMargin+'>';s+=t.getTagTitle(idx,pName,null,true);}else{s+='<div id="'+oSC.sTagNameLyrPrefix+idx+'"'+sMargin_hide+'>';s+=t.getTagTitle(idx,pName,null,true);}
s+='</div></div>';}else{s+=t.getTagTitle(idx,pName);}}}
if(pObj.bDate)
s+='</div><div><table><tr><td width="135px" class="fl">';s+=bClosed?c.sClosedTopTagHTML.replaceTokens(pNoDDown?'<div class="clr"></div>':sSelectHTML,c.sHiddenParamPrefix+idx):(!(c.isVariation)&&c.isValRecom)?sTopHtml.replaceTokens(pAddBtnId?c.sMVTagTextBoxPrefix+idx:(pObj.bDate?'year_'+c.sTagTextBoxPrefix+idx:c.sTagTextBoxPrefix+idx),oSC.sDownArrowPrefix+idx,oSC.sTagValOptLyrPrefix+idx,c.sHiddenParamPrefix+idx,pAddBtnId?t.getAddTagBtn(t.sMVContainer+idx+"_add",bClosed):"",pAddBtnId?"PaddingTop":"DropDownPadding",(pObj.aTagAttr&&!pObj.oContainer&&!pObj.bMultiVal)?pObj.aTagAttr.hlpTxt:((!pObj.bMV&&!pObj.aTagAttr)?pObj.hlpTxt:""),(pObj.bDate||pObj.bYear)?4:50,(pObj.bDate||pObj.bYear)?12:49):sTopHtml.replaceTokens(pAddBtnId?c.sMVTagTextBoxPrefix+idx:(pObj.bDate?'year_'+c.sTagTextBoxPrefix+idx:c.sTagTextBoxPrefix+idx),oSC.sDownArrowPrefix+idx,oSC.sTagValOptLyrPrefix+idx,c.sHiddenParamPrefix+idx,pAddBtnId?t.getAddTagBtn(t.sMVContainer+idx+"_add",bClosed):"",pAddBtnId?"PaddingTop":"DropDownPadding",(pObj.bDate||pObj.bYear)?4:50,(pObj.bDate||pObj.bYear)?12:49);if(pObj.bDate){s+=c.sGhostHtml.replaceTokens(pObj.yearTxt);if(pObj.bFull||pObj.bPartial){s+='</td><td class="fl" style="vertcal-align:top"><div  >'+c.sTopMon_DayHTML.replaceTokens(pObj.bMV?'mon_'+c.sMVTagTextBoxPrefix+idx:'mon_'+c.sTagTextBoxPrefix+idx);+'</div></td>';if(pObj.bFull){s+='<td style=\"padding-left:6px;\" valign="top" class="fl"><div >'+c.sTopMon_DayHTML.replaceTokens(pObj.bMV?'day_'+c.sMVTagTextBoxPrefix+idx:'day_'+c.sTagTextBoxPrefix+idx)+'</div></td>';}
s+='</tr></table></div>';}}
if(!c.bMSKU_Enh&&!(pObj&&pObj.aTagAttr.bParent))
s+='</div>';}else{var sMargin=pAddBtnId?'':pObj&&pObj.oParentTag?' style="margin-top:5px;position:relative;"':' style="margin-top:7px"';var sMargin_hide=pAddBtnId?'':pObj&&pObj.oParentTag?' style="margin-top:5px;position:relative;"':' style="margin-top:7px; display:none;"';if(!c.bMSKU_Enh&&!pCustomTag)
s+='<div id="'+oSC.sTagNameLyrPrefix+idx+'"'+sMargin+'>';var msku=ebay.oP.controls['seller_tags'];if(pName){if(pCustomTag){if(pAction==0){s+='<div id="'+oSC.sTagNameLyrPrefix+idx+'"'+sMargin+'>';s+=t.getTagTitle(idx,pName,true,true);}else{s+='<div id="'+oSC.sTagNameLyrPrefix+idx+'"'+sMargin_hide+'>';s+=t.getTagTitle(idx,pName,true,true);}
s+='</div>';}else{if(c.bMSKU_Enh){if(pAction==0){s+='<div id="'+oSC.sTagNameLyrPrefix+idx+'"'+sMargin+'>';if(pSuggTagCtrl&&pSuggTagCtrl.bParent){s+=t.getTagTitle(idx,pName,null,true,pSuggTagCtrl.aChild.tn,true);}else{s+=t.getTagTitle(idx,pName,null,true);}}else{s+='<div id="'+oSC.sTagNameLyrPrefix+idx+'"'+sMargin_hide+'>';if(pSuggTagCtrl&&pSuggTagCtrl.bParent){s+=t.getTagTitle(idx,pName,null,true,pSuggTagCtrl.aChild.tn,true);}else{s+=t.getTagTitle(idx,pName,null,true);}}
s+='</div></div>';}else{s+=t.getTagTitle(idx,pName);}}}
s+=bClosed?c.sClosedTopTagHTML.replaceTokens(pNoDDown?'<div class="clr"></div>':sSelectHTML,c.sHiddenParamPrefix+idx):(!(c.isVariation)&&c.isValRecom)?sTopHtml.replaceTokens(pAddBtnId?c.sMVTagTextBoxPrefix+idx:c.sTagTextBoxPrefix+idx,oSC.sDownArrowPrefix+idx,oSC.sTagValOptLyrPrefix+idx,c.sHiddenParamPrefix+idx,pAddBtnId?t.getAddTagBtn(t.sMVContainer+idx+"_add",bClosed):"",pAddBtnId?"PaddingTop":"DropDownPadding",(pObj.aTagAttr&&!pObj.oContainer&&!pObj.bMultiVal)?pObj.aTagAttr.hlpTxt:((!pObj.bMV&&!pObj.aTagAttr)?pObj.hlpTxt:"")):c.bMSKU_Enh?(pSuggTagCtrl?sTopHtml.replaceTokens(pAddBtnId?c.sMVTagTextBoxPrefix+idx:c.sTagTextBoxPrefix+pIndex1,oSC.sDownArrowPrefix+pIndex1,oSC.sTagValOptLyrPrefix+pIndex1,c.sHiddenParamPrefix+pIndex1,pAddBtnId?t.getAddTagBtn(t.sMVContainer+idx+"_add",bClosed):"",pAddBtnId?"PaddingTop":"DropDownPadding",'',50,msku.isMSKUFlow?21:49,"Remove_"+idx,c.sTagTextBoxPrefix+idx,oSC.sDownArrowPrefix+idx,oSC.sTagValOptLyrPrefix+idx,c.sHiddenParamPrefix+idx):sTopHtml.replaceTokens(pAddBtnId?c.sMVTagTextBoxPrefix+idx:c.sTagTextBoxPrefix+idx,oSC.sDownArrowPrefix+idx,oSC.sTagValOptLyrPrefix+idx,c.sHiddenParamPrefix+idx,pAddBtnId?t.getAddTagBtn(t.sMVContainer+idx+"_add",bClosed):"",pAddBtnId?"PaddingTop":"DropDownPadding",'',50,msku.isMSKUFlow?21:49,"Remove_"+idx)):(sTopHtml.replaceTokens(pAddBtnId?c.sMVTagTextBoxPrefix+idx:c.sTagTextBoxPrefix+idx,oSC.sDownArrowPrefix+idx,oSC.sTagValOptLyrPrefix+idx,c.sHiddenParamPrefix+idx,pAddBtnId?t.getAddTagBtn(t.sMVContainer+idx+"_add",bClosed):"",pAddBtnId?"PaddingTop":"DropDownPadding",'',50,msku.isMSKUFlow?21:49));if(!c.bMSKU_Enh&&!pCustomTag)
s+='</div>';}
return s;}
this.getMVHiddenVal=function(pObj)
{var t=this,s="",p=t.parent,aV=pObj.aTagVals,c=p.oConfig,len=aV.length;for(var i=0;i<len;i++)
{if(aV[i].Sel)
{s+=aV[i].Val+c.sDelim+t.getSelValsrc(pObj,aV[i].Val)+c.sDelim;}}
pObj.oMVHiddenInp.setValue(s);}
this.getCustomTagHTML=function(pIndex)
{var t=this,c=t.parent.oConfig,idx=pIndex,sCustomHTML='',sCustomHTML1='';if(c.bMSKU_Enh&&c.aAddVarDivs){sCustomHTML1=c.sCustomHTML.replaceTokens(oSC.sCustomNamePrefix+idx,oSC.sCusSugNamePrefix+idx,c.sTagTextBoxPrefix+idx,oSC.sCustomRemovePrefix+idx,oSC.sCusSugValPrefix+idx,oSC.sCustomWarnPrefix+idx,c.sHiddenParamPrefix+idx);sCustomHTML+=c.sCustomHTML1;for(var x=0;x<c.aAddVarLen;x++){if(c.aAddVarDivs["chk"+x][1].bAdded!="true"){sCustomHTML+='<div><input type="checkbox" id="chk'+x+'" name="chk'+x+'" value=""><#123#></input></div>';sCustomHTML=sCustomHTML.replace("<#123#>",c.aAddVarDivs["chk"+x][0].tn);}}
sCustomHTML=sCustomHTML+sCustomHTML1;return sCustomHTML;}else{return c.sCustomHTML.replaceTokens(oSC.sCustomNamePrefix+idx,oSC.sCusSugNamePrefix+idx,c.sTagTextBoxPrefix+idx,oSC.sCustomRemovePrefix+idx,oSC.sCusSugValPrefix+idx,oSC.sCustomWarnPrefix+idx,c.sHiddenParamPrefix+idx);}}
this.getMultiValueCB=function(pVal,pCBName,pFloat)
{var t=this,oD=t.oDocument,oSpan=oD.createElement('span'),v=pVal.Val,sFloat=pFloat?"float:left":"";oSpan.setAttribute((!t.oGlobals.oClient.bIE)?'class':'className','MultiValueSpanWidth');oCBcontent='<div class="Float_Left"><div class="MultiValueCheckbox" ><input type="checkbox" title="'+unescape(v)+'" name="'+pCBName+'" id="'+pCBName+'" value="'+unescape(v)+'"';oCBcontent+=(pVal.Sel?" checked":"")+' /></div><div class="MultiValueContent">'+t.stripHTML(v)+'</div></div>';oSpan.innerHTML=oCBcontent;return oSpan;}
this.stripHTML=function(psString)
{return psString.replace(/</g,'&lt;').replace(/>/g,'&gt;');}
this.getAddTagBtn=function(pId,pbClosed)
{var sDisabled=pbClosed?"":"disabled",c=this.parent.oConfig;return'<input type="button" name="'+pId+'" id="'+pId+'" value ="'+c.sAddText+'" '+sDisabled+' />';}
this.getMultiValueHTML=function(pVals,pName,pIndex,pObj)
{var t=this,oD=t.oDocument,aV=pVals,len=aV.length,idx=pIndex,oContainer=oD.createElement('div'),oContainerParent=oD.createElement('div'),oDiv,iRow=0,cid=t.sMVContainer+idx,c=t.parent.oConfig,bRemoveDDown=false,ohlpTxtParent,oHlpTxtChild;bRemoveDDown=(pObj.objType=="EbaySYI3MultiValueControl")?((pObj.aValues.length<=1)&&pObj.bIsClosed):((pObj.objType=="EbaySYI3SugTagControl")?((pObj.aOptions.length<=0)&&pObj.bIsClosed):(pObj.Vals.length==0)&&pObj.bClosed);oContainer.id=cid;oContainerParent.appendChild(oContainer);var s='';s+='<div id="'+oSC.sTagNameLyrPrefix+pIndex+'" style="margin-top:10px;">';s+='<input type="hidden" id="'+c.sTagTextBoxPrefix+idx+'" name="'+c.sMVHiddenPrefix+idx+'" value="" />';s+=t.getTagTitle(pIndex,pName);for(var i=0;i<len;i++)
{if(i%3==0)
{oDiv=oD.createElement('div');oDiv.id=cid+iRow;oContainer.appendChild(oDiv);iRow++;}
oDiv.setAttribute((!t.oGlobals.oClient.bIE)?'class':'className','MultiValueDivWidth');oDiv.appendChild(t.getMultiValueCB(aV[i],cid+'_cb',(i%3==0)));}
if(c.isValRecom&&!(c.isVariation))
{ohlpTxtParent=oD.createElement('div');oHlpTxtChild=oD.createElement('div');oHlpTxtChild.setAttribute((!t.oGlobals.oClient.bIE)?'class':'className','help');oHlpTxtChild.innerHTML=(pObj.aTagAttr)?pObj.aTagAttr.hlpTxt:pObj.hlpTxt;ohlpTxtParent.appendChild(oHlpTxtChild)
s+=ohlpTxtParent.innerHTML;}
s+=oContainerParent.innerHTML;s+=t.getTopTagHTML(pIndex,null,true,null,pObj,bRemoveDDown)
s+='</div>';return s;}
this.addTopTagsCount=function(pAdd)
{var t=this;with(t.parent)
{if(oConfig.bMSKU_Enh&&iTotalTopTags>=6)
iTotalTopTags=5;if(pAdd)
iTotalTopTags++;else
iTotalTopTags--;if(!oSugSecLayer.eElem)
bindObj(oSugSecLayer);var b=iTotalTopTags>=oConfig.iMaxTag;oSugSecLayer.show(!b);if(b)
oTrayLayer.show(b);if(!oCustomLnk.eElem)
bindObj(oCustomLnk);oCustomLnk.show(!b);if(oCustomLnk.eElem)
oMsgLyr.show(b);else if(b&&oDividerLayer)
oDividerLayer.show(false);}}
this.fetchMatches=function(pSearch,pArray)
{var aMatch=[],a=pArray,str=pSearch.toLowerCase(),l=str.length;if(str=="")
return a;for(var i=0,len=a.length;i<len;i++)
{var s=a[i].length>l?a[i].substr(0,l).toLowerCase():a[i].toLowerCase();if(s==str)
aMatch.push(a[i]);}
return aMatch;}
this.createGradList=function(pTag,pValues)
{var t=this,p=t.parent,c=p.oConfig,aValues=pValues,oSugLyr=pTag.oSuggestLayer,oText=pTag.oTagText;with(t)
{aLayerValues=aValues;p.bindObj(oSugLyr);p.bindObj(oText);oSugLyr.setValue("");if(c.sMaxKeyStrokeLimit==2)
var l=aValues.length;else
var l=aValues.length>c.iMaxTagOptions?c.iMaxTagOptions:aValues.length;for(var i=0;i<l;i++)
createSuggestion(oSugLyr,pTag.sOPTIONS+i,aValues[i],i);showSuggestions();pTag.bSuggestionCreated=false;p.bLyrStatus=false;}}
this.createSuggestion=function(pSuggest,pLyrId,pValue,pIndex)
{var t=this;with(t)
{var oTag=pSuggest.parent,c=oTag.parent.oConfig,sActClass=oSC.sActiveClass,sPassClass=oSC.sPassiveClass;if(typeof(pValue)!='undefined'){var val=pValue.replace(new RegExp("\&","g"),"&amp;");appendChild(pSuggest.name,val,pLyrId,'div');var oL=new EbayHTMLLayer(pSuggest,pLyrId);oL.iIndex=pIndex;oL.subscribeEvents("onclick","onmouseover","onmouseout");oL.onmouseout=function()
{var t=this;t.setClass(sPassClass);}
oL.onmouseover=function()
{var t=this;with(t)
{var p=parent.parent.parent,u=p.oUtils,oCT=p.oCurrentTag;u.resetClass();setClass(oSC.sActiveClass);oCT.sSelOptionVal=getValue(true);oCT.iSelOption=iIndex;}}
oL.onclick=function()
{var t=this,p=t.parent.parent.parent,u=p.oUtils,oCT=p.oCurrentTag;with(oCT)
{oTagText.setValue(sSelOptionVal);oCT.sSelVal=sSelOptionVal;bIsEdited=sSelVal!=sSelOptionVal;u.hideSuggestions();if(typeof(c.bIsSwift)!='undefined'){var tn=aTagAttr.tn;if((tn=='Year'||tn=='Trim'||tn=='Engine')&&sSelOptionVal!=c.aTexts.ownname)
p.parent.controls["st_ymmte"].requestData(sSelOptionVal,oTagText);}
if(oCT.checkAutoComplete)
{checkAutoComplete();}
oTagText.focus(true);if(c.bMSKU_Enh&&c.aParChildMap){var i,j,aMap=c.aParChildMap,l=aMap.length,pp=t.parent.parent;for(i=0;i<l;i++){if(aMap[i].pn==tn){var innerMap=aMap[i].Vals,len=innerMap.length;for(j=0;j<len;j++){var chldCtrl=aTagAttr.aChild.tn+aTagAttr.idx+"_"+this.parent.name.split("_")[2];if(oTagText.getValue()=="-"){p.controls[chldCtrl].aValues=innerMap[0].val;if(!pp.contains(p.controls[chldCtrl].aValues,'<hr style="margin:0px 5px 0px 0px;" />'))
p.controls[chldCtrl].aValues.push('<hr style="margin:0px 5px 0px 0px;" />');if(!pp.contains(p.controls[chldCtrl].aValues,c.aTexts.ownname))
p.controls[chldCtrl].aValues.push(c.aTexts.ownname);break;}
else if(oTagText.getValue()==innerMap[j].opn){p.controls[chldCtrl].aValues=innerMap[j].val;if(!pp.contains(p.controls[chldCtrl].aValues,'<hr style="margin:0px 5px 0px 0px;" />'))
p.controls[chldCtrl].aValues.push('<hr style="margin:0px 5px 0px 0px;" />');if(!pp.contains(p.controls[chldCtrl].aValues,c.aTexts.ownname))
p.controls[chldCtrl].aValues.push(c.aTexts.ownname);break;}}
break;}}}}}
oL.bind();if(pValue==c.aTexts.ownname||pValue==c.aTexts.addMore)
{oL.setStyle('color','#666');}
oL.setClass(sPassClass);}}}
this.setIFShim=function(pElem)
{var t=this;if(!pElem.eElem)
return;var e=pElem,w=e.width(),h=e.height(),f=document.createElement('IFRAME');f.setAttribute('scrolling','no');with(f.style)
{position='absolute';top=0+'px';left=0+'px';zIndex='-1';width=w-20+'px';height=h-5+'px';}
f.frameBorder='0';f.src=t.oGlobals.oEnvironment.sPicsDir+'s.gif';e.eElem.appendChild(f);}
this.setTopPosition=function(pObj,pEvent)
{var t=this;with(t)
{var iEventY=null,iLocY=null,e=oDocument.getUIElem(pObj.oTagText.name),oPos=oUtils.oPositioning,ih=pObj.oSuggestLayer.height(),oD=oDocument,winHeight=oD.doc.body.clientHeight,cL=oGlobals.oClient,iLocY=oPos.getOffsetLeftTop(e)[1],evt=oDocument.win.event||pEvent;if(evt)
iEventY=evt.clientY;if(!cL.bIE)
winHeight=oD.win.innerHeight;else if(typeof(winHeight)=='undefined'&&cL.iVer>=6)
winHeight=oD.doc.documentElement.clientHeight;var iBtm=winHeight-iEventY;pObj.oSuggestLayer.top((iBtm>ih?iLocY+pObj.oTagText.height():iLocY-ih)+'px');}}
this.showSuggestions=function(pEvent)
{var t=this;with(t)
{var oCT=parent.oCurrentTag,oL;if(oCT&&oCT.name!=sCurTagName)
hideSuggestions();oL=oCT.oSuggestLayer.controls[oCT.sOPTIONS+'0'];if(!oL)
return;sCurTagName=oCT.name;if(oCT.oSuggestLayer.eElem){var cls=oCT.oSuggestLayer.eElem.className;if(!(cls=="En_tagSm"||cls=="En_tagL")){oCT.oSuggestLayer.setClass(parent.oConfig.sTagClass);}}
if(oL)
oL.setClass(oSC.sActiveClass);if(parent.oConfig.sMaxKeyStrokeLimit==2&&aLayerValues.length>25){oCT.oSuggestLayer.eElem.style.height='300px';oCT.oSuggestLayer.eElem.style.overflowY='auto';oCT.oSuggestLayer.eElem.style.overflowX='hidden';}
else{oCT.oSuggestLayer.eElem.style.height='';if(u.aLayerValues.length>12)
oCT.oSuggestLayer.eElem.style.height='150px';oCT.oSuggestLayer.eElem.style.overflowY='auto';oCT.oSuggestLayer.eElem.style.overflowX='hidden';}
oCT.oSuggestLayer.show(true);setIFShim(oCT.oSuggestLayer);oCT.iSelOption=0;oCT.sSelOptionVal=oL.getValue(true);document.onkeydown=onKeyDown;document.onclick=onClickDoc;}}
this.hideSuggestions=function()
{var t=this;if(t.sCurTagName=="")
return;t.resetClass();if(t.parent.controls[t.sCurTagName].oSuggestLayer)
t.parent.controls[t.sCurTagName].oSuggestLayer.show(false);ebay.oDocument.oPage.bItemFocus=true;document.onkeydown=null;document.onclick=null;if(ebay.oP.bSugPPCreated)
document.onclick=onClkDoc;}
this.resetClass=function()
{var t=this;with(t.parent.oCurrentTag)
{if(oSuggestLayer.controls[sOPTIONS+iSelOption])
oSuggestLayer.controls[sOPTIONS+iSelOption].setClass(oSC.sPassiveClass);}}
this.onKeyDown=function(pEvent)
{var evt=pEvent||event,oCtrl=ebay.oDocument.oPage.controls['seller_tags'],oCT=oCtrl.oCurrentTag,u=oCtrl.oUtils;switch(evt.keyCode)
{case 38:case 40:u.NextSug(evt.keyCode);return false;break;case 13:with(oCT)
{if(oCT&&name)
{sSelOptionVal=bMultiVal?"":sSelOptionVal;oTagText.setValue(sSelOptionVal);sCurTextVal=sSelOptionVal;oCT.sSelVal=sSelOptionVal;bIsEdited=sSelVal!=sSelOptionVal;if(oCT&&!oCtrl.bLyrStatus)
u.hideSuggestions();oCtrl.bLyrStatus=false;oTagText.focus(true);if(oCT.checkAutoComplete)
checkAutoComplete();}}
return false;break;}}
this.NextSug=function(pKeyCode)
{var t=this;with(t)
{var p=t.parent,oCT=p.oCurrentTag,iSO=oCT.iSelOption,aV=aLayerValues,c=p.oConfig;resetClass();var l=aV.length>c.iMaxTagOptions?c.iMaxTagOptions:aV.length;iSO=pKeyCode==40?iSO+1:iSO-1;iSO=l==iSO?0:iSO<0?l-1:iSO;oCT.iSelOption=iSO;var oL=oCT.oSuggestLayer.controls[oCT.sOPTIONS+iSO];if(oL)
{if(oCT.oDownArrow&&oCT.oDownArrow.eElem){oCT.oDownArrow.eElem.setAttribute('aria-activedescendant',oL.eElem.id);}
oL.setClass(oSC.sActiveClass);oCT.sSelOptionVal=oL.getValue(true);}}}
this.onClickDoc=function()
{var oCtrl=ebay.oDocument.oPage.controls["seller_tags"];if(oCtrl.oCurrentTag&&!oCtrl.bLyrStatus)
oCtrl.oUtils.hideSuggestions();oCtrl.bLyrStatus=false;}
this.getRecoValues=function(pObj)
{var t=this,aV=pObj.aTagVals,dl=t.parent.oConfig.sDelim,s="",len=aV.length;for(var i=0;i<len;i++)
{if(aV[i].Sel)
{var len2=pObj.aValues.length;for(var k=0;k<len2;k++)
{if(aV[i].Val==pObj.aValues[k])
{s=s+pObj.aValues[k]+dl;}}
len2=pObj.aAutoCompleteValues.length;for(var j=0;j<len2;j++)
{if(aV[i].Val==pObj.aAutoCompleteValues[j])
{s=s+pObj.aAutoCompleteValues[j]+dl;}}}}
return s;}
this.setHiddenValues=function(pObj,pTname,pSrc,pAction,pSelVal,pValSrc)
{var t=this,p=pObj,ht=p.oHiddenText,dl=t.parent.oConfig.sDelim,s="";with(t)
{if(pObj.bMultiVal&&pObj.aTagVals)
{var tname=replaceString(pObj.name),tsrc=replaceString(pSrc?pSrc:pObj.iTsrc),taction=replaceString(pAction?pAction:pObj.iTaction);var trecoval=replaceString(t.getRecoValues(pObj));s=tname+dl+tsrc+dl+taction+dl+trecoval;}
else
{var tname=replaceString(pTname),tsrc=replaceString(pSrc),taction=replaceString(pAction),trecoval=replaceString(pSelVal),selvalsrc=replaceString(pValSrc);s=tname+dl+tsrc+dl+taction+dl+trecoval+dl+selvalsrc;}
p.parent.bindObj(ht);s=unescapeHTMLCode(s);ht.setValue(s);}}
this.setHiddenIndex=function(pIndex)
{var t=this;with(t.parent)
{bindObj(oHiddenIndex);oHiddenIndex.setValue(pIndex);}}
this.replaceString=function(pStr)
{return pStr!=""?pStr:"\"\"";}
this.getSelValsrc=function(pObj,pVal)
{var t=this,p=pObj.parent,oU=t.oUtils;with(pObj)
return oU.isInArray(aAutoCompleteValues,pVal)?p.aSelValSrc.manualAuto:oU.isInArray(aValues,pVal)?p.aSelValSrc.fromReco:p.aSelValSrc.manualNoAuto;}
this.setSelValsrc=function(pObj,pVal)
{var t=this,p=pObj.parent,oU=t.oUtils;with(pObj)
sValSrc=oU.isInArray(aAutoCompleteValues,pVal)?p.aSelValSrc.manualAuto:oU.isInArray(aValues,pVal)?p.aSelValSrc.fromReco:p.aSelValSrc.manualNoAuto;}
this.setTagOptions=function(pObj,pVals,pClosed,pIgnoreOwnValue,pDate,pYear,pChildVar)
{var t=this,p=t.parent,c=p.oConfig,len=pVals.length,bDup=false;with(pObj)
{aValues=[];for(var i=0;i<len;i++)
{if(pDate||pYear){if(!isNaN(pVals[i].Val)){var v=pVals[i].Val.substring(0,4);for(var j=0;j<aValues.length;j++){if(aValues[j]==v){bDup=true;break;}}
if(!bDup)
aValues[aValues.length]=(typeof(v)!='undefined')?v:pVals[i].Val;else
bDup=false;}}
else{if(pVals[i]){var v=pVals[i].Val;aValues[i]=v;}}
if(pVals[i]&&pVals[i].Sel)
{sSelVal=v;sValSrc=p.aSelValSrc.fromReco;bIsPrePopulated=true;var ln=pVals[i].Val.length;if(pDate&&ln>4){if(!isNaN(pVals[i].Val)){sSelMonInd=(pVals[i].Val.substring(4,6)-1);if(ln>6)
sSelDayInd=pVals[i].Val.substring(6,8);}}}
if(!oTagText.eElem)
p.bindObj(oTagText);if(bIsPrePopulated)
oTagText.setValue(sSelVal);}
if(pClosed)
{for(var i=0;i<len;i++)
{if(pDate||pYear){if(!isNaN(pVals[i].Val)){var v=pVals[i].Val.substring(0,4);for(var j=0;j<aValues.length;j++){if(aValues[j]==v){bDup=true;break;}}
if(!bDup)
aValues[i]=(typeof(v)!='undefined')?v:pVals[i].Val;else
bDup=false;}}
else{var v=pVals[i].Val;aValues[i]=v;}}
aValues.unshift("-");}
else if(!pIgnoreOwnValue)
{aValues.push('<hr style="margin:0px 5px 0px 0px;" />');aValues.push(pObj.bMultiVal?c.aTexts.addMore:c.aTexts.ownname);}
if(pClosed){for(var i=0;i<len;i++){if((pDate||pYear)&&!isNaN(pVals[i].Val)){if(!oTagText.eElem)
p.bindObj(oTagText);oTagText.clearOptions();for(var op=0;op<aValues.length;op++)
oTagText.createOption(aValues[op],aValues[op]);if(pVals[i].Sel)
{sSelVal=pVals[i].Val;sValSrc=p.aSelValSrc.fromReco;bIsPrePopulated=true;var ln=pVals[i].Val.length;if(pDate&&ln>4){if(!isNaN(pVals[i].Val)){sSelMonInd=(pVals[i].Val.substring(4,6)-1);if(ln>6)
sSelDayInd=pVals[i].Val.substring(6,8);}}}
if(sSelVal!="")
oTagText.selectByValue(pVals[i].Val.substring(0,4));}}}}}
this.getSpellUOMChecks=function(pData)
{var aData=pData;if(aData["SugVal"])
{var oCtrl=ebay.oDocument.oPage.controls['seller_tags'];with(oCtrl)
{var s=aData["SugType"]==1?oConfig.aTexts.spellCheck:oConfig.aTexts.UOM;oSpellUOM.setValue(s.replaceTokens(SpellUOMCheckId,aData["SugVal"]));aSpellUOMResponse=pData;oSpellUOM.show(true);oSpellUOM.setClass(oConfig.spellcheck);sSpellSugValue=aData["SugVal"];if(SpellUOMCheckId.has('Name')){oCtrl.oValLink=new EbayHTMLLayer(oSpellUOMParent,SpellUOMCheckId);oCtrl.oValLink.subscribeEvents("onclick");oCtrl.oValLink._registerEvent('onclick','parent.parent.parent.oUtils.onLinkClick');bindObj(oCtrl.oValLink);oCtrl.oValLink.oSpellUOM=oSpellUOM;}else{oCtrl.oSugLink=oL=new EbayHTMLLayer(oSpellUOMParent,SpellUOMCheckId);oCtrl.oSugLink.subscribeEvents("onclick");oCtrl.oSugLink._registerEvent('onclick','parent.parent.parent.oUtils.onLinkClick');bindObj(oCtrl.oSugLink);oCtrl.oSugLink.oSpellUOM=oSpellUOM;}
oSpellUOM.setClass(oSC.sPassiveClass);}}}
this.onLinkClick=function()
{var t=this,val=t.getValue(true);t.oSpellUOM.show(false);t.oSpellUOM.setValue('');with(t.parent)
{setValue(val);var a=t.parent.name;if(a.has('Name'))
parent.sSugName=val;else
parent.sSugValue=val;focus(true);}}
this.trim=function(pStr)
{var str=new String(pStr);str=str.replace(/^\s*/,"");str=str.replace(/\s*$/,"");return str;}
this.createChildTags=function(oTag,pChildIndex)
{var att=oTag.aTagAttr,p=oTag.parent,c=p.oConfig,tagSuffix=oTag.sSuffix;for(var i=(att.aChildren.length-1);i>=0;i--)
{var aC=att.aChildren[i],tagSuffix=tagSuffix+1,u=oTag.parent.oUtils,tn=aC.tn,sTagName=tn.replace(/\s/g,"");sHtml=aC.bMV?u.getMultiValueHTML(p.oTagControls[sTagName].aTagVals,aC.tn,tagSuffix,p.oTagControls[sTagName]):u.getTopTagHTML(tagSuffix,aC.tn,false,null,p.oTagControls[sTagName]),oRefNode=oTag?oTag.oTagOuterLayer:null;if(oRefNode&&!oRefNode.eElem)
oRefNode.bind();sOuterPrefix=tagSuffix;u.appendChild(c.sTopSectionLyr,sHtml,oSC.sTagOuterLyrPrefix+sOuterPrefix,'div',oRefNode?oRefNode.eElem:null);var oCTag=p.oTagControls[sTagName],sTraySrc=(oCTag.sAction==p.aTaction.removed)?p.aTsrc.recoTop:p.aTsrc.trayUsed;oCTag=p.oTagControls[sTagName]=oTag.oChild=oCTag.aTagAttr.aChildren?new EbaySYI3DepTagControl(p,oTag,tn,tagSuffix,sTraySrc,true,aTagVals,false,c,null,pChildIndex):oCTag.bMultiVal?new EbaySYI3MultiValueControl(p,tn,tagSuffix,sTraySrc,true,oCTag.aTagAttr,oCTag.aTagVals,c,oTag,pChildIndex):new EbaySYI3TagControl(p,oTag,tn,tagSuffix,sTraySrc,true,oCTag.aTagAttr,false,c,null,pChildIndex);if(oTag.aChild)
{var len=oTag.aChild.length;for(var j=0;j<len;j++)
{if(oTag.aChild[j].sTagCtrlName==oCTag.sTagCtrlName)
oTag.aChild[j]=oCTag;}}
delete p.oSugTagControls[sTagName];oCTag.init(oCTag.aOptions,false,true);if(!oCTag.bNoDropDown)
{oCTag.oTagText.enable(false);oCTag.oTagText.setClass("disableCtrl");}
oCTag.oRemove.show(false);if(oCTag&&oCTag.aTagAttr.aChildren)
t.createChildTags(oCTag,pChildIndex+1);}}
this.createMSKUChildTags=function(pTag,pIndex)
{var att=pTag.aTagAttr,p=pTag.parent,c=p.oConfig,len=att.aChildren.length;for(var i=0;i<len;i++)
{var aC=att.aChildren[i],u=pTag.parent.oUtils,tn=aC.tn,sTagName=tn.replace(/\s/g,""),sTagName=sTagName.replace(new RegExp("'","g"),""),iIdx=pIndex+"_"+i,sTagName=sTagName+pIndex,sSugTName=oSC.sSugTagPrefix+iIdx,sDesLyr=oSC.sDesLyrId+iIdx,sHiddName=c.sTagSeqPrefix+iIdx;var sTopHTML=c.sVariationHTML.replaceTokens(sDesLyr,oSC.sVarLyr+iIdx,"");u.appendChild(oSC.sTagOuterLyrPrefix+pIndex,sTopHTML,c.sTopSectionLyr+pIndex,'div');}}
this.sortMulti=function(pA,pB)
{var aV=pA.Val.toLowerCase(),bV=pB.Val.toLowerCase();if(aV==bV)
return 0;return(aV<bV)?-1:1;}
this.postSOJTag=function()
{var p=this.parent;if(!p.bSOJTagged)
{var oSOJ=ebay.oP.controls['soj_tagging'];if(oSOJ)
oSOJ.registerTag({"k":"SellerTagsUsed"});p.bSOJTagged=true;}}
this.unescapeHTMLCode=function(str)
{str=str.replace(/&amp;/g,"&");str=str.replace(/&lt;/g,"<");str=str.replace(/&gt;/g,">");return str;}}

// \include\lib\_global\features\syi3\describe\_base\seller_tags\overlay_tags.js 

function EbaySYI3OverlayTagControl(pParent,pCfg)
{if(!this.objType)
this.objType="EbaySYI3OverlayTagControl";var t=this,c=pCfg;c.bClearValueOnClose=true;t.base=EbayHTMLOverlayContent;t.base(pParent,c.sLayerHTMLName,c);t.oSuggestCtl=null;t.bIsShown=false;t.rVal="";t.oCustomControl=null;t.oOlayShadow=new EbayHTMLLayer(t,c.stOlayShadow);t.oOlayContent=new EbayHTMLLayer(t,c.stOlay);t.oOlayCloseBtn=new EbayHTMLLayer(this,c.closeBtnDiv);t.iCusLen=0;for(var i=0,len=c.aCancelLinks.length;i<len;i++)
{var oL=new EbayHTMLAnchor(t,c.aCancelLinks[i]);oL.subscribeEvents("onblur");oL._registerEvent('onclick','parent.closeOverlay');if(oL.name==c.aCancelLinks[1]){this.lastElem=oL;oL.subscribeEvents('onkeydown');oL.onkeydown=this.focusFirst;}
oL.bind();this.focusFirst=function(elem,e){if(this==this.parent.lastElem){var e=window.event||e;if(e&&e.keyCode==9&&!e.shiftKey){this.parent.firstElem.focus();}
else{return;}}
return false;}
this.retainFocusInside=function()
{if(this.parent.eElem!=null)
{if(this.parent.eElem.firstChild!=null&&this.parent.bIsShown)
this.parent.eElem.firstChild.focus(true);}
return false;}
this.closeOverlay=function()
{var t=this;var p=t.parent,pp=p.parent;if(p.oCustomControl!=null)
{delete pp.oCustomControls[p.oCustomControl.name];p.oCustomControl=null;}
t.parent.bIsShown=false;t.parent.close();var oCurrentEle=pp.controls[oSC.sCustomLyrId],oCurrentSugTag=p.oSuggestCtl.oSugTag;if(oCurrentSugTag)
{if(oCurrentSugTag.eElem)
oCurrentEle=oCurrentSugTag.eElem.firstChild;}
if(oCurrentEle)
oCurrentEle.focus(true);}}
this.focusLast=function(e){var e=window.event||e;if(e&&e.keyCode==9&&e.shiftKey){ebay.oDocument.doc.getElementById("closeBtn").focus();}
else{return;}
return false;}
this.resizeOverlay=function(pObj)
{var t=this,iContentHeight=t.oOlayContent.height(),iContentWidth=t.oOlayContent.width();if(iContentHeight>0)
{t.oOlayShadow.bind();t.oOlayShadow.height(iContentHeight+'px');t.oOlayShadow.width(t.oOlayContent.width()+'px');var oCL=t.oGlobals.oClient,bIE6=oCL.bIE&&oCL.iVer<7;if(oCL.bIE)
{var oIF=t.eElem.getElementsByTagName('iframe');if(oIF)
{var ifElem=oIF[0];ifElem.style.top='0px';ifElem.style.width=(iContentWidth-5)+'px';if(bIE6)
ifElem.style.height=iContentHeight+'px';}}}}
t.oSaveButton=new EbayHTMLAnchor(t,c.sSave);this.oSaveButton.subscribeEvents("onkeydown");this.oSaveButton._registerEvent('onclick','parent.chkEventSaveBtn');if(c.bIsDYI)
this.oSaveButton._registerEvent('onkeydown','parent.chkEventSaveBtn');this.oSaveButton.bind();this.chkEventSaveBtn=function(e)
{var key=window.event?window.event.keyCode:arguments[2]?arguments[2].keyCode:0;if((e.name=='onkeydown')&&(key==13)||(e.name=='onclick'))
this.parent.saveOverlay(this);if(c.bIsDYI)
ebay.oP.sherpaItemSpec();}
this.saveOverlay=function(t)
{t=t.name=='onclick'?this:t;var p=t.parent,pp=p.parent;oSuggestControl=p.oSuggestCtl;var oL=p.controls[p.sContentDiv],v=oL?oL.getValue():p.sContent,oCurCtl=t.parent.oCustomControl;var lenCfg=this.parent.oConfig;if(oCurCtl&&oCurCtl.oWarnMsgLyr&&oCurCtl.oWarnMsgLyr.eElem&&oCurCtl.iTname.length==0&&!(lenCfg.isMSKUFlow)){oCurCtl.oWarnMsgLyr.setValue(lenCfg.sEWarnMsg);oCurCtl.oWarnMsgLyr.show(true);return;}
if(lenCfg){var len=lenCfg.aAddVarLen;if(len){if(ebay.oDocument.oPage.changeLen==null||ebay.oDocument.oPage.changeLen==undefined)
ebay.oDocument.oPage.changeLen=len;for(var x=0;x<len;x++){if(this.parent.oOverlayTag.oCustomControl!=null)
var isCheckBox=this.parent.oOverlayTag.oCustomControl.oCustomChkBox[x];if(isCheckBox&&isCheckBox.isChecked()){ebay.oDocument.oPage.changeLen--;}}}}
if(!oSuggestControl.name.is('seller_tags'))
{var oCurrTag=p.parent.oTagControls[oSuggestControl.sTagCtrlName];if(!oCurrTag.bNoDropDown)
oSuggestControl.sSelOptionVal=pp.oUtils.stripHTML(oCurrTag.oTagText.getValue());if(oSuggestControl.bDate&&(oSuggestControl.bFull||oSuggestControl.bPartial)){oSuggestControl.sSelMonInd=oCurrTag.oMon.getSelectedIndex();if(!oSuggestControl.bPartial)
oSuggestControl.sSelDayInd=oCurrTag.oDay.getSelectedIndex();}
if(oCurrTag.objType=="EbaySYI3DepTagControl")
{oCurrTag.bSaveClicked=true;oCurrTag.bIsClosed?oCurrTag.oTagText.onchange():oCurrTag.oTagText.onblur();}}
p.bIsShown=false;p.close();var oCurrentEle=pp.controls[oSC.sCustomLyrId],oCurrentSugTag=p.oSuggestCtl.oSugTag;if(oCurrentSugTag)
{if(oCurrentSugTag.eElem)
oCurrentEle=oCurrentSugTag.eElem.firstChild;}
if(oCurrentEle)
oCurrentEle.focus(true);if(typeof oSuggestControl!="undefined"&&oSuggestControl.oCustEditCtrl){var oCus=oSuggestControl.oCustEditCtrl;var len=Math.max.apply(Math,pp.oConfig.aCustTagLen);for(var x=0;x<len;x++){var oHdnFld=ebay.oDocument.getUIElem("vt_tmdata_"+oCus.oHdnFld[x]);if(oHdnFld)
oHdnFld.value=oHdnFld.value.replace(oCus.oCustTagCtrl.aTagAttr.tn,oCus.oCustTxt);}
var oRnFld=ebay.oDocument.getUIElem("vt_rename_"+oCus.oRnFld);if(p.rVal==""&&!p.contains(p.rVal,"!?^")&&oRnFld){p.rVal=oRnFld.value;}
if(oRnFld)
oRnFld.value=oCus.oCustTxt+"!?^"+p.rVal;oCus.oCustLabel.bind();oCus.oCustLabel.setValue(oCus.oCustTxt);oCus.oCustTagCtrl.name=oCus.oCustTagCtrl.name.replace(oCus.oCustTagCtrl.aTagAttr.tn,oCus.oCustTxt);oCus.oCustTagCtrl.aTagAttr.tn=oCus.oCustTxt;oCus.oCustTagCtrl.iTname=oCus.oCustTxt;if(oCus.oCustTagCtrl.aTagAttr.iAddLinkId)
var addV=oCus.oCustTagCtrl.aTagAttr.iAddLinkId;else
var addV=oCus.oCustTagCtrl.aTagAttr.iSortOrder;ebay.oDocument.getUIElem("AddVariation_"+addV).innerHTML='<a href="javascript:void(0);"><span><img src="http://pics.ebaystatic.com/aw/pics/buttons/btnOptionAdd.gif" alt=" " align="top" border="0" hspace="1">&nbsp;<b class="g-hdn">Add</b>&nbsp;'+oCus.oCustTxt+'</span></a><input value="'+oCus.oCustTagCtrl.oSugCtrl.oHiddenText.getValue()+'" name="'+oCus.oCustTagCtrl.oSugCtrl.oHiddenText.name+'" type="hidden">';}
var oCusTag=pp.oOverlayTag.oCustomControl;if(pp.isMSKUFlow&&oCusTag)
{if(pp.oConfig.bMSKU_Enh&&pp.oConfig.aAddVarDivs){var l=pp.oConfig.aAddVarLen;for(var x=0;x<l;x++){if(oCusTag.oCustomChkBox[x].isChecked()){pp.oConfig.aAddVarDivs["chk"+x][1].bAdded="true";oCusTag.oAddVarDiv[x].show(true);pp.controls[pp.oConfig.aAddVarDivs["chk"+x][0].tn+pp.oConfig.aAddVarDivs["chk"+x][3].iIdx].oSugTag.onclick();}else{if(pp.oConfig.aAddVarDivs["chk"+x][1].bAdded!="true")
oCusTag.oAddVarDiv[x].show();}}
if(!oCusTag.oAddOwnChkBox.isChecked())
return;}
var sTn=oCusTag.oNameTexBox.getValue(),sTv=oCusTag.oValueTexBox.getValue(),sTn=escapeHTMLCode(sTn),iIdx=oCusTag.iIndex,att={"Vals":[],"tn":sTn,"edit":1,"bMV":0,"bReq":0,"bClosed":0,"sHelpUrl":"","bIsTopTag":false,"iSortOrder":0},sTname=sTn.replace(/\s/g,""),tnCtrl=sTname+iIdx;if(pp.oConfig.bMSKU_Enh&&pp.oConfig.aAddVarDivs){att={"Vals":[],"tn":sTn,"edit":1,"bMV":0,"bReq":0,"bClosed":0,"sHelpUrl":"","bIsTopTag":false,"iSortOrder":0,"iAddLinkId":iIdx,"bCustomTag":1};p.iCusLen+=2;pp.oConfig.aCustTagLen.push(p.iCusLen);}
var oSug=pp.oSugTagControls[tnCtrl]=new EbaySYI3SuggestTagControl(pp,sTn+iIdx,iIdx,pp.aTaction.custom,false,att,pp.oConfig,true);oSug.iTsrc=oCusTag.iTsrc;oSug.oSugTag.onclick();var idx=oSug.iIndex+"_0";if(pp.oTagControls[sTn+idx]){pp.oTagControls[sTn+idx].oTagText.setValue(sTv);oHidnCusTag=oCusTag.oHiddenText.getValue();pp.oTagControls[sTn+idx].oHiddenText.setValue(oHidnCusTag);}
delete pp.oCustomControls[oCusTag.name];pp.oOverlayTag.oCustomControl=null;}
else
oSuggestControl.createTopTag(v);var oCurrentEle=pp.controls[oSC.sCustomLyrId];if(oCurrentEle)
setTimeout(function(){oCurrentEle.focus(true);},10);return false;}
this.contains=function(arr,findValue){var i=arr.length;while(i--){if(arr[i]===findValue)return true;}
return false;}
this.displayOverlay=function(pVal,pSugObj,pObj)
{var t=this;t.oSuggestCtl=pSugObj;t.oObj=pObj;t.sContent=pVal;t.setCoords();t.bIsShown=true;t.setPositionCloseBtn();var sFirstInsElem=this.eElem.firstChild;this.firstElem=sFirstInsElem;sFirstInsElem.onkeydown=this.focusLast;}
this.setCoords=function()
{var t=this;var offLoc=t.oUtils.oPositioning.getOffsetLeftTop(t.oObj.eElem);var browserLoc=[t.oGlobals.oClient.getBrowserWindowWidth()+t.oGlobals.oClient.getScrollLeft(),t.oGlobals.oClient.getBrowserWindowHeight()+t.oGlobals.oClient.getScrollTop()];var div1=document.createElement('div');div1.style.position="absolute";div1.style.width="300px";div1.style.height="300px";div1.style.top="0px";div1.style.left="0px";var div2=document.createElement('div');div2.style.position="absolute";div2.style.top="0px";div2.style.left="0px";div2.innerHTML=t.sContent;div1.appendChild(div2);document.body.appendChild(div1);var tH=div2.offsetHeight+50,tW=div2.offsetWidth+50;var bTop=((offLoc[1]+tH)>browserLoc[1]);var bLeft=(((offLoc[0]+tW+30)>browserLoc[0])&&(offLoc[0]>tW));t.sLeft=(bLeft?(offLoc[0]-tW+30):(offLoc[0]+30))+'px';t.sTop=(bTop?(offLoc[1]-tH):(offLoc[1]+20))+'px';document.body.removeChild(div1);t.display();var oOlay=t.oOlayContent;oOlay.bind();var aOlayDims=[oOlay.width(),oOlay.height()],offLoc=t.oUtils.oPositioning.getOffsetLeftTop(t.oObj.eElem);var browserLoc=[t.oGlobals.oClient.getBrowserWindowWidth()+t.oGlobals.oClient.getScrollLeft(),t.oGlobals.oClient.getBrowserWindowHeight()+t.oGlobals.oClient.getScrollTop()];var bTop=((offLoc[1]+aOlayDims[1])>browserLoc[1]);var bLeft=(((offLoc[0]+aOlayDims[0]+30)>browserLoc[0])&&(offLoc[0]>aOlayDims[0]));t.sLeft=(bLeft?(offLoc[0]-aOlayDims[0]+30):(offLoc[0]+30))+'px';t.sTop=(bTop?(offLoc[1]-aOlayDims[1]):(offLoc[1]+20))+'px';t.setPosition();var cp=t.oUtils.controlPath(t);setTimeout(cp+".resizeOverlay()",100);}
this.setPositionCloseBtn=function()
{with(this)
{if(!oOlayCloseBtn.eElem)
oOlayCloseBtn.bind();if(oOlayCloseBtn!=null)
oOlayCloseBtn.eElem.style.position='absolute';}}}

// \include\lib\_global\features\syi3\describe\_base\seller_tags\multitags.js 

function EbaySYI3MultiValueControl(pParent,pName,pIndex,pSource,pIsBind,pTagAttr,pTagVals,pCfg,pParentTag,pChildIndex)
{if(!this.objType)
this.objType="EbaySYI3MultiValueControl";this.base=EbaySYI3TagControl;this.aTagVals=pTagVals;this.base(pParent,pParentTag?pParentTag:null,pName,pIndex,pSource,pIsBind,pTagAttr,true,pCfg,pChildIndex);var t=this,pI=pIndex,iRow=0,u=t.parent.oUtils,mvContainer=u.sMVContainer;t.oContainer=new EbayHTMLLayer(t,mvContainer+pI);if(!t.bNoDropDown)
{t.oAddBtn=new EbayHTMLButton(t,mvContainer+pI+'_add');t.oAddBtn._registerEvent("onclick","parent.addClick");t.oTagText._registerEvent('onfocus','parent.validateTag');t.bIsClosed?t.oTagText._registerEvent('onchange','parent.validateTag'):t.oTagText._registerEvent('onkeyup','parent.validateTag');}
t.oMultiValCB=new EbayHTMLCheckbox(t,mvContainer+pI+'_cb');t.oMVHiddenInp=new EbayHTMLText(t,pCfg.sMVHiddenPrefix+pI);t.oMultiValCB._registerEvent('onclick','parent.onClickMVCB');this.validateTag=function()
{var t=this,bEnable=(t.getValue().length>0&&!t.getValue().is(t.parent.bIsClosed?"-":t.parent.parent.oConfig.aTexts.ownValue));if(bEnable)
{t.setStyle('color','');}
t.parent.oAddBtn.enable(bEnable);}
this.onClickMVCB=function()
{var t=this,bMultipleCB=t.eElem.length?true:false;var p=t.parent,v=bMultipleCB?unescape(t.getValueByIndex(arguments[arguments.length-1])):unescape(t.getValue(true)),b=bMultipleCB?t.isCheckedByValue(v):t.isChecked(),aV=p.aTagVals,len=aV.length;for(var i=0;i<len;i++)
{if(aV[i].Val.is(v))
{aV[i].Sel=b?1:0;break;}}
p.bIsEdited=true;p.parent.oUtils.getMVHiddenVal(p);p.parent.oUtils.setHiddenValues(p);}
t.initBase=t.init;this.init=function(pVals,pSetTagOptions,pInitBase)
{var t=this,p=t.parent;if(t.bIsBind)
{p.bindObj(t.oContainer);if(!t.bNoDropDown)
p.bindObj(t.oAddBtn);p.bindObj(t.oMultiValCB);p.bindObj(t.oMVHiddenInp);}
p.oUtils.getMVHiddenVal(t);p.oUtils.setHiddenValues(t);if(pInitBase)
t.initBase(pVals,false);t.checkValues();t.checkMaxTags();}
this.checkMaxTags=function()
{var t=this;if(t.bNoDropDown)
return;var iTagCount=t.aTagVals.length;if(iTagCount>=oSC.iMaxMVTags&&!t.aTagAttr.bClosed)
t.oTagText.enable(false);}
this.addClick=function()
{var t=this,p=t.parent,oD=t.oDocument,pp=p.parent,sSelVal=pp.oUtils.trim(p.oTagText.getValue()),iarrIdx=p.aTagVals.length,oContainer=p.oContainer,sContName=oContainer.name,oCurrDiv=p.oDocument.getUIElem(sContName+(Math.ceil(iarrIdx/2)-1)),aV=p.aTagVals,aSugVals=p.aValues,att=p.aTagAttr;if(sSelVal=='-'||sSelVal=='')
return;p.bIsEdited=true;var len=aV.length;for(var index=0;index<len;index++)
{if(aV[index].Val==sSelVal)
return;}
var aOption=aV[aV.length]={'Val':sSelVal,'Sel':1};oCurrDiv=oD.createElement('div');oCurrDiv.id=sContName+(Math.floor(iarrIdx/3));oContainer.eElem.appendChild(oCurrDiv);oCurrDiv.setAttribute((!t.oGlobals.oClient.bIE)?'class':'className','MultiValueDivWidth');oCurrDiv.appendChild(pp.oUtils.getMultiValueCB(aOption,sContName+'_cb',(iarrIdx%3==0)));p.bIsClosed?p.oTagText.deleteOption(p.oTagText.getSelectedIndex()):p.oTagText.setValue('');if(p.bIsClosed)
p.oTagText.selectByIndex(p.oTagText.getIndexByValue("-"));t.enable(p.bIsClosed?true:false);oD.clearControl(p.oMultiValCB.name);p.oMultiValCB.bind();for(var j=0,iLen=p.aTagAttr.Vals.length;j<iLen;j++)
{if(p.aTagAttr.Vals[j].Val.is(sSelVal))
{delete p.aTagAttr.Vals[j];p.aTagAttr.Vals.sort();p.aTagAttr.Vals.length-=1;break}}
for(var i=0,len=aSugVals.length;i<len;i++)
{if(aSugVals[i].is(sSelVal))
{delete aSugVals[i];if(!p.bIsClosed)
{var sMsg=aSugVals.pop(),sHr=aSugVals.pop();}
aSugVals.sort();aSugVals.length-=1;if(!p.bIsClosed)
{aSugVals.push(sHr);aSugVals.push(sMsg);}
p.createSuggestions();break;}}
len=p.aAutoCompleteValues.length;for(var n=0;n<len;n++)
{sAVal=p.aAutoCompleteValues[n];var len2=aV.length;for(i=0;i<len2;i++)
{if(aV[i].Val.is(sAVal))
{p.aAutoCompleteValues.splice(n,1);p.aAutoCompleteValues.sort();}}}
if(aSugVals.length==1&&p.bIsClosed)
{var oDropDiv=oD.getUIElem(p.oTagText.name).parentElement;oDropDiv.parentElement.removeChild(oDropDiv);oD.clearControl(p.oTagText.name);oD.clearControl(p.oAddBtn.name);p.bNoDropDown=true;}
t.parent.checkMaxTags();pp.oUtils.getMVHiddenVal(p);pp.oUtils.setHiddenValues(p);pp.oOverlayTag.resizeOverlay(t.parent);}
this.checkValues=function()
{var t=this,aV=t.aTagVals,len=aV.length,oCB=t.oMultiValCB;for(var i=0;i<len;i++)
oCB.setValue(aV[i].Val,aV[i].Sel==1);}
t.unbindObjectsBase=t.unbindObjects;this.unbindObjects=function()
{var t=this,oD=t.oDocument;oD.clearControl(t.oMultiValCB.name);if(!t.bNoDropDown)
oD.clearControl(t.oAddBtn.name);oD.clearControl(t.oContainer.name);oD.clearControl(t.oMVHiddenInp.name);t.unbindObjectsBase();}
t.init(pTagAttr,false,false);}

// \include\lib\_global\features\syi3\describe\_base\seller_tags\dep_tags.js 

function is_child_of(parent,child){if(child!=null){while(child.parentNode){if((child=child.parentNode)==parent){return true;}}}
return false;}
function titleGuidanceReq(element,event){if(ebay.oDocument.oPage.bItemFocus)
{var current_mouse_target=null,itemConVal="",tempVal="",bValAdd=false;if(event.toElement){current_mouse_target=event.toElement;}else if(event.relatedTarget){current_mouse_target=event.relatedTarget;}
if(!is_child_of(element,current_mouse_target)&&element!=current_mouse_target&&event.target.type!="select-one"){itemTleElem=ebay.oDocument.getUIElem("title");itemCon=ebay.oDocument.getUIElem("itemCondition");if(itemCon)
itemConVal=itemCon.value;if(itemTleElem)
itemTitle=encodeURIComponent(itemTleElem.value);var tagCtrl=ebay.oDocument.oPage.controls["seller_tags"];with(tagCtrl){oAjaxListner=processTitleGuidResponse;c=oConfig,iTags=0;sUrl=c.sReqUrl.replaceTokens('7',itemTitle,"","",itemConVal);for(var oTag in oTagControls){tempElem=oTagControls[oTag];if(tempElem.bMultiVal){var bMulValAdd=false;for(k=0;k<tempElem.aTagVals.length;k++){if(tempElem.aTagVals[k].Sel){tempVal+=c.sDelim+encodeURIComponent(tempElem.aTagVals[k].Val);bMulValAdd=true;}}
if(bMulValAdd){sUrl+='&selNV_'+iTags+++'='+encodeURIComponent(oTagControls[oTag].name)+tempVal;bMulValAdd=false;tempVal="";}}else{var tv="";if(tempElem.oTagText.eElem)
tv=tempElem.oTagText.eElem.value;if(tv){sUrl+='&selNV_'+iTags+++'='+encodeURIComponent(oTagControls[oTag].name)+c.sDelim+encodeURIComponent(tv);}}}
sUrl+='&maxNVSeq='+iTags;oUtils.requestData(sUrl);ebay.oDocument.oPage.bItemFocus=false;}}}}
function titleguidonchange(){ebay.oDocument.oPage.bItemFocus=true;}
function titleGuidancePageLoad(){var itemConVal="",tempVal="",bValAdd=false;itemTleElem=ebay.oDocument.getUIElem("title");itemCon=ebay.oDocument.getUIElem("itemCondition");if(itemCon)
itemConVal=itemCon.value;if(itemTleElem)
itemTitle=encodeURIComponent(itemTleElem.value);var tagCtrl=ebay.oDocument.oPage.controls["seller_tags"];with(tagCtrl){oAjaxListner=processTitleGuidResponse;c=oConfig,iTags=0;sUrl=c.sReqUrl.replaceTokens('7',itemTitle,"","",itemConVal);for(var oTag in oTagControls){tempElem=oTagControls[oTag];if(tempElem.bMultiVal){var bMulValAdd=false;for(k=0;k<tempElem.aTagVals.length;k++){if(tempElem.aTagVals[k].Sel){tempVal+=c.sDelim+encodeURIComponent(tempElem.aTagVals[k].Val);bValAdd=true;bMulValAdd=true;}}
if(bMulValAdd){sUrl+='&selNV_'+iTags+++'='+encodeURIComponent(oTagControls[oTag].name)+tempVal;bMulValAdd=false;tempVal="";}}else{var tv="";if(tempElem.oTagText.eElem)
tv=tempElem.oTagText.eElem.value;if(tv){sUrl+='&selNV_'+iTags+++'='+encodeURIComponent(oTagControls[oTag].name)+c.sDelim+encodeURIComponent(tv);bValAdd=true;}}}
sUrl+='&maxNVSeq='+iTags;if(bValAdd)
oUtils.requestData(sUrl);ebay.oDocument.oPage.bItemFocus=false;}}
function EbaySYI3DepTagControl(pParent,pParentTag,pName,pIndex,pSource,pIsBind,pTagAttr,pMultiVal,pCfg,pChild,pNoTopIncrement)
{if(!this.objType)
this.objType="EbaySYI3DepTagControl";this.base=EbaySYI3TagControl;this.base(pParent,pParentTag,pName,pIndex,pSource,pIsBind,pTagAttr,pMultiVal,pCfg,pChild);this.sChildName=null;var t=this,oTT=t.oTagText;t.aChild=[];if(oTT)
t.bIsClosed?oTT._registerEvent('onchange','parent.getDependentData'):oTT._registerEvent('onblur','parent.getDependentData');var att=t.aTagAttr,aC=att.aChildren,len=aC.length;for(var i=0;i<len;i++)
{var oT=aC[i],sTagName=oT.tn.replace(/\s/g,""),tName=oT.tn,oST=ebay.oP.controls['seller_tags'],oSugTag=null;oST.iTagIndex++;var iTopTagIdx=oST.iTagIndex;if(oST.isMSKUFlow)
{t.oSeq.setValue(parseInt(t.oSeq.getValue())+1);var iTopTagIdx=0,sIdx=pIndex+"_"+i,oSugTag=oST.oSugTagControls[sTagName+sIdx];if(!oSugTag)
{oSugTag=oST.oSugTagControls[sTagName+sIdx]=new EbaySYI3SuggestTagControl(oST,tName+sIdx,sIdx,oST.aTaction.none,true,oT,pCfg,false);oSugTag.oPtagCtrl=t;oSugTag.oSugTag.onclick();}
else
{iTopTagIdx=oSugTag.iTopTagIdx;oSugTag.iTotalTopTag++;}
oSugTag.iTotalTopTag++;oSugTag.oHiddenText.setValue(oSugTag.iTopTagIdx);iTopTagIdx=sIdx+"_"+iTopTagIdx;sTagName=sTagName+iTopTagIdx;tName=tName+iTopTagIdx;if(oT.aChildren)
t.oChild=oST.oTagControls[sTagName]=new EbaySYI3DepTagControl(t.parent,t,oT.tn,oST.iTagIndex,t.iTsrc,true,oT,false,oST.oConfig);}
else
{if(oT.aChildren)
{t.oChild=oST.oTagControls[sTagName]=new EbaySYI3DepTagControl(t.parent,t,oT.tn,oST.iTagIndex,t.iTsrc,true,oT,false,oST.oConfig);t.aChild.push(t.oChild);}
else
{if(oT.bMV)
{var aTagVals=[];var aVals=[];var iOpt=0,len2=oT.Vals.length;for(index=0;index<len2;index++)
{if(index<oST.oConfig.iMaxTopTag||oT.Vals[index].Sel)
aTagVals.push(oT.Vals[index]);else
{aVals[iOpt]=oT.Vals[index];iOpt++;}}
oT.Vals=aVals;t.oChild=oST.oTagControls[sTagName]=new EbaySYI3MultiValueControl(t.parent,oT.tn,oST.iTagIndex,t.iTsrc,true,oT,oST.oTagControls[sTagName]?oST.oTagControls[sTagName].aTagVals:aTagVals,oST.oConfig,t);}
else
{t.oChild=oST.oTagControls[sTagName]=new EbaySYI3TagControl(t.parent,t,tName,iTopTagIdx,t.iTsrc,t.bIsBind,oT,false,oST.oConfig,oSugTag);}
t.aChild.push(t.oChild);}
if(!t.oChild.bNoDropDown&&t.oChild.oTagText.eElem)
{if(!t.bVaries){bDisable=(t.oTagText.getValue()=="-")||(t.oTagText.getValue()=="");t.oChild.oTagText.enable(!bDisable);t.oChild.oTagText.setClass(bDisable?"disableCtrl":"");t.oChild.oRemove.show(!t.oChild.oTagText.eElem.disabled);}}}}
this.getDependentData=function()
{var t=this,pp=t.parent.parent,p=t.parent,sUrl="";oST=pp.objType.is('EbayPage')?pp.controls['seller_tags']:pp;if(p.bTagInOverlay&&!p.bSaveClicked)
return;var sVal=oST.oUtils.trim(t.getValue());if(sVal=="-"||sVal=="")
{len=p.aChild.length;for(var i=0;i<len;i++)
{p.aChild[i].oTagText.enable(false);p.aChild[i].oTagText.setClass("disableCtrl");}
return;}
with(oST)
{var v=t.getValue(),c=oConfig,u=oUtils;v=u.trim(v),iTags=0;if((sCurrentTitle&&v==sCurrentTitle)||v=="")
return;if(c&&oSC.bTitleAJAXEnabled)
{oAjaxListner=p.processDepTags;oCurrentTag=p;var oCtg=ebay.oDocument.getConfig('Selling.Title.SherpaGuidance');if(!oCtg)
oUtils.bShowProgress=true;var sUrl=c.sAJAXUrl.replaceTokens('5',"","","");len=p.aChild.length;for(var i=0;i<len;i++)
p.aChild[i].sSelVal="";for(var oTag in oTagControls){var tv=oTagControls[oTag].sSelVal;if(tv&&!p.isChild(p,oTag))
sUrl+='&selNV_'+iTags+++'='+encodeURIComponent(oTagControls[oTag].name)+c.sDelim+encodeURIComponent(tv);}
sUrl+='&reqNames='+p.getChildName();sUrl+='&maxNVSeq='+(iTags-1);oUtils.requestData(sUrl);}}}
this.isChild=function(pObj,pName)
{var aChildren=pObj.getChildName().split(pObj.parent.oConfig.sDelim);len=aChildren.length;for(var i=0;i<len;i++)
{if(aChildren[i].is(pName))
return true;}
return false;}
this.getChildName=function()
{var t=this;if(t.sChildName)
return t.sChildName;t.setChildName();return t.sChildName;}
this.setChildName=function()
{var t=this,s="",aC=t.aTagAttr.aChildren,len=aC.length;for(var i=0;i<len;i++)
{if(i>0)
s+=t.parent.oConfig.sDelim;s+=encodeURIComponent(aC[i].tn);}
t.sChildName=s;}
this.processDepTags=function(oD)
{var t=this,oTag=t.oCurrentTag,aData=oD.TagNmValLst,l=aData.length,c=t.oConfig,oCTags=oTag.sChildName.split(t.oConfig.sDelim),len=oCTags.length;if(!t.isMSKUFlow)
{for(var i=0;i<len;i++)
{var oC=oCTags[i],oCTName=decodeURIComponent(oC),oCT=t.oTagControls[oCTName.replace(/\s/g,"")];if(!oCT.bNoDropDown)
{t.bindObj(oCT.oTagText);oCT.oTagText.enable(true);oCT.oTagText.setClass("");if(!oCT.bIsClosed)
oCT.oTagText.setValue("");}
if(oCT.bMultiVal)
{oCT.oContainer.setValue("");if(oCT.oTagText&&oCT.oTagText.eElem&&oCT.bIsClosed)
{oSelectParent=oCT.oTagText.eElem.parentElement?oCT.oTagText.eElem.parentElement:oCT.oTagText.eElem.parentNode;oContainer=oSelectParent.parentElement?oSelectParent.parentElement:oSelectParent.parentNode;if(oContainer&&oSelectParent)
oContainer.removeChild(oSelectParent);t.oDocument.clearControl(oCT.oTagText.name);oCT.bNoDropDown=true;}}
oCT.oRemove.show(!oCT.bIsRequired);oCT.sSelVal="";oCT.aOptions=[];oCT.aValues=[];if(!l)
{oCT.aValues.push('<hr style="margin:0px 5px 0px 0px;" />');oCT.aValues.push(oCT.bMultiVal?c.aTexts.addMore:c.aTexts.ownname);}}
for(i=0;i<l;i++)
{var sTnName=aData[i].tn.replace(/\s/g,""),oCTag=t.oTagControls[sTnName];if(oCTag.bMultiVal)
{var aVals=[];oCTag.aTagVals=[];len=aData[i].Vals.length;for(index=0;index<len;index++)
{if(index<c.iMaxTopTag)
oCTag.aTagVals.push(aData[i].Vals[index]);else
{oCTag.aValues.push(aData[i].Vals[index].Val);aVals.push(aData[i].Vals[index]);}}
oCTag.aOptions=aVals;}
else
{var dv=aData[i].Vals;oCTag.aOptions=dv;var oSugCTag=t.oSugTagControls[sTnName];if(oSugCTag)
{oSugCTag.aOptions=dv;oSugCTag.sSelOptionVal="";}}
oCTag.init(oCTag.aOptions,true,false);oCTag.bSuggestionCreated=false;oCTag.bNoDropDown=(oCTag.bMultiVal&&aVals.length==0&&oCTag.bIsClosed)
oCTag.aTagAttr=aData[i];if(c.isValRecom)
{var oArr=oCTag.oDownArrow;if(oArr.eElem)
oArr.eElem.style.display=(oCTag.aTagAttr.Vals.length!=0)?"":"none";}
len=oTag.aChild.length;for(var iInd=0;iInd<len;iInd++)
{if(aData[i].tn==oTag.aChild[iInd].name)
oTag.aChild[iInd].aTagAttr.Vals=aData[i].Vals;}
len=oTag.aTagAttr.aChildren.length;for(var k=0;k<len;k++)
{if(oTag.aTagAttr.aChildren[k].tn==aData[i].tn)
oTag.aTagAttr.aChildren[k]=aData[i];}
if(oCTag.bMultiVal)
{var p=oCTag,oD=t.oDocument,pp=p.parent,oContainer=p.oContainer,sContName=oContainer.name;len=p.aTagVals.length;for(var iarrIdx=0;iarrIdx<len;iarrIdx++)
{if(iarrIdx%2==0)
{oCurrDiv=oD.createElement('div');oCurrDiv.id=sContName+(Math.floor(iarrIdx/2));oContainer.eElem.appendChild(oCurrDiv);}
oCurrDiv.setAttribute((!t.oGlobals.oClient.bIE)?'class':'className','MultiValueDivWidth');oCurrDiv.appendChild(pp.oUtils.getMultiValueCB(p.aTagVals[iarrIdx],sContName+'_cb',(iarrIdx%2==0)));}
oD.clearControl(p.oMultiValCB.name);p.oMultiValCB.bind();p.checkMaxTags();pp.oUtils.getMVHiddenVal(p);pp.oUtils.setHiddenValues(p);}
if(oCTag.bIsClosed)
{if(oCTag.bMultiVal)
{if(!oCTag.bNoDropDown)
{oCTag.aValues.unshift("-");oCTag.bNoDropDown=false;oDDiv=t.oDocument.createElement('div');oDDiv.setAttribute((!t.oGlobals.oClient.bIE)?'class':'className','DropDownPadding');oDDiv.style.clear='both';oDDiv.innerHTML='<select name="'+c.sMVTagTextBoxPrefix+oCTag.pI+'" id="'+c.sMVTagTextBoxPrefix+oCTag.pI+'"></select><span style="margin-left:10px;">'+u.getAddTagBtn(u.sMVContainer+oCTag.pI+"_add",true)+'</span>';oCTag.oTagOuterLayer.eElem.appendChild(oDDiv);oCTag.oTagText=new EbayHTMLSelect(oCTag,c.sMVTagTextBoxPrefix+oCTag.pI);oCTag.oTagText.bind();oCTag.oTagText._registerEvent('onchange','parent.validateTag');oCTag.oAddBtn=new EbayHTMLButton(oCTag,u.sMVContainer+oCTag.pI+'_add');oCTag.oAddBtn.bind();oCTag.oAddBtn._registerEvent("onclick","parent.addClick");}
else
{oClearDiv=t.oDocument.createElement('div');oClearDiv.setAttribute((!t.oGlobals.oClient.bIE)?'class':'className','clr');oCTag.oTagOuterLayer.eElem.appendChild(oClearDiv);return;}}
oCTag.oTagText.clearOptions();len=oCTag.aValues.length;for(var ind=0;ind<len;ind++)
oCTag.oTagText.createOption(oCTag.aValues[ind],oCTag.aValues[ind]);}}
if(aData.length==0)
{len=oTag.aChild.length;for(var i=0;i<len;i++)
{var oCN=oTag.aChild[i];if(oCN)
{oCN.aTagAttr.Vals=[];oCN.oTagText.enable(false);oCN.oTagText.setClass("disableCtrl");oCN.oRemove.show(false);}}}}
else
{if(oTag.aChild&&l>0)
{for(var i=0;i<l;i++)
{var oD=aData[i];len=oTag.aChild.length;for(var j=0;j<len;j++)
{var oCT=oTag.aChild[j];if(oCT.iTname==oD.tn)
{var aVal=oD.Vals;oCT.oSugCtrl.aOptions=aVal;oCT.oSugCtrl.aTagAttr=oD;oTag.parent.oUtils.setTagOptions(oCT,aVal,oCT.bIsClosed,false);}}}}}}}

// \include\lib\_global\features\syi3\describe\seller_tags.js 

ebay.oP.initSellerTags=function()
{var t=this,c=t.parent.getConfig('Selling.SellerTags');if(c)
new EbaySYI3SellerTags(t,'seller_tags',c);}
ebay.oP.initMultiSKUSellerTags=function(){var t=this;new EbaySYI3MultiSkuSellerTags(t,'seller_tags',t.parent.getConfig('Selling.MultiSKUSellerTags'));}

// \include\lib\_global\features\syi3\describe\_base\seller_tags\sellertag_config.js 
;(function(){var c={};c.sTagOuterLyrPrefix='TagOuterLayer_';c.sTagNameLyrPrefix='TagName_';c.sDownArrowPrefix='DownArrow_';c.sRemovePrefix='Remove_';c.sCustEditPrefix='Edit_';c.sTagValOptLyrPrefix='TagValueOptionList_';c.sCustomLyrId='AddCustomLnk';c.sCustomOuterLyr='Custom_';c.sCustomNamePrefix='Name_';c.sCustomWarnPrefix='Warnmsg_';c.sCusSugNamePrefix='CustSugName_';c.sCusSugValPrefix='CustSugVal_';c.sCustomRemovePrefix='CusRemove_';c.sTrayId='tray';c.iMVCBDefCount='24';c.sHelpPrefix='Help_';c.sSuppresParam='suppressionList';c.sVarTaginfoParam='variationSpecificsTags';c.aActionIdVals={fullReco:1,gradNames:2,gradVals:3,spellReco:4,depVals:5,fullVals:6};c.sTitleBoxId='title';c.sSugSectionLyr='SuggestedSectionLyr';c.sSugTagPrefix='AddVariation_';c.sSpellUOMPrefix='SpellUOM_'
c.sChildClass='stChild';c.iMaxMVTags='30';c.sActiveClass='activeTag';c.sPassiveClass='passiveTag';c.sGrayOutLayer='lyrProgressIndicator_sec';c.bTitleAJAXEnabled=true;c.sProgressIndicator='lyrProgressIndicator_sec';c.sCellPrefix='mskucell_';c.sDesLyrId='Destination_';c.sVarLyr='variation_';c.sWarningValueId='VarValuemsg_secGrp';ebay.oP.oSellerTagConfig=c;})();var oSC=ebay.oP.oSellerTagConfig;

// \include\lib\_global\features\syi3\_base\listener_manager.js 

function EbaySYI3ListenerManager(pParent,pName)
{if(!this.objType)
this.objType="EbaySYI3ListenerManager";this.base=EbayBaseControl;this.base(pParent,pName);this.aListners=[];this.oTimer=null;this.sHashFuncDone=null;this.sComplete='ebay.oP.controls[\'listner_mgr\'].complete();';var oC=this.oContent=new EbayHTMLLayer(ebay.oP,'content');oC.subscribeEvents('onscroll');this.push=function(pFunction)
{if(this.sHashFuncDone&&this.sHashFuncDone.is(pFunction))
return;this.aListners[this.aListners.length]=pFunction;}
this.execute=function()
{if(this.oTimer){clearTimeout(this.oTimer);}
if(this.aListners.length>0)
{try{eval(this.aListners[0]+'();'+this.sComplete);}catch(e){this.complete();}}}
this.complete=function()
{this.aListners.splice(0,1);if(this.aListners.length>0)
{this.oTimer=setTimeout("ebay.oP.controls[\'listner_mgr\'].execute()",60);}}
this.loadExtDyiJs=function()
{var oLM=ebay.oP.controls['listner_mgr'],oH=document.getElementsByTagName("head")[0],oS=oLM.oDocument.createElement("script");oS.setAttribute("type","text/javascript");oS.setAttribute("src",extDYIJs);oH.appendChild(oS);oLM.oContent.onscroll=null;window.onscroll=null;EbaySYIscrollFunction();window.onscroll=EbaySYIscrollFunction;}
window.onscroll=this.loadExtDyiJs;this.oContent.onscroll=this.loadExtDyiJs;}
new EbaySYI3ListenerManager(ebay.oP,'listner_mgr');

// \include\lib\_global\features\syi3\motors\_base\sign_post.js 

function EbaySYI3MotorsSignPost(pParent,pName,pCfg)
{if(!this.objType)
this.objType="EbaySYI3MotorsSignPost";this.base=EbayBaseControl;this.base(pParent,pName);var c=this.oConfig=pCfg;this.oForm=pParent.parent._getControl(c.sFormName);if(!this.oForm)
this.oForm=new EbayHTMLForm(this,c.sFormName);this.oAid=pParent.parent._getControl(c.sAidElem);if(!this.oAid)
this.oAid=new EbayHTMLText(this,c.sAidElem);if(!this.oAid.eElem)this.oAid.bind();this.oTpg=new EbayHTMLText(this,c.sTpgElem);for(var i in c.aLinks)
{var oFrmLink=new EbaySYI3MotorsFormPost(this.oForm,this.oAid,i,c.sAidVal);oFrmLink.sTpgVal=c.aLinks[i];oFrmLink.onClickBase=oFrmLink.onclick;oFrmLink.onclick=function()
{with(this)
{var p=parent,oSP=ebay.oP.controls['sign_post'];if(oSP)
oSP.oTpg.setValue(p.sTpgVal);p.onClickBase();return false;}}
if(typeof c.bForceBind&&c.bForceBind)
oFrmLink.oLink.bind();}}

// \include\lib\_global\features\syi3\motors\_base\form_post.js 

function EbaySYI3MotorsFormPost(pForm,pAid,pName,pAidVal)
{if(!this.objType)
this.objType="EbaySYI3MotorsFormPost";this.oForm=pForm;this.oAid=pAid;this.sAidVal=pAidVal;var oLink=this.oLink=new EbayHTMLAnchor(this,pName);oLink._registerEvent('onclick','parent.onclick');this.onclick=function()
{var oP=this.objType=="EbaySYI3MotorsFormPost"?this:this.parent
with(oP)
{oAid.setValue(sAidVal);oForm.submit();}
return false;}}

// \include\lib\_global\features\syi3\describe\_base\inventory.js 

function EbaySYI3Inventory(pParent,pName,pConfig)
{if(!this.objType)
this.objType="EbaySYI3Inventory";this.base=EbayBaseControl;this.base(pParent,pName)
var t=this,p=pParent,c;c=t.oConfig=pConfig;t.oInvLayer=new EbayHTMLLayer(p,oEC.sInvLayer);t.oVariationLyr=new EbayHTMLLayer(p,oEC.sVarLayer);t.oAddInventory=new EbayHTMLAnchor(p,oEC.sAddInventory);t.oAddInventory._registerEvent('onclick','ebay.oP.controls["inventory"].openInventory');t.oEditInventory=new EbayHTMLAnchor(p,oEC.sEditInventory);if(typeof(c.bSmproVehiclepc)!="undefined")
{t.oEditInventory.bind();}
t.oEditInventory._registerEvent('onclick','ebay.oP.controls["inventory"].openInventory');this.openInventory=function()
{var t=this,oP=t.parent;oP.oSelectInvLnk=t;var cfg=oP.controls['inventory'].oConfig,cCfg=ebay.oDocument.getConfig('Selling.Common');cfg.bOnFocus=cCfg.bOnFocus;cfg.sStartLyrName=cCfg.sStartLyrName;oP.openDialog(cfg,t.eElem.href+"&ej2child=true");return false;}}

// \include\lib\_global\features\syi3\describe\_base\save_draft.js 

function EbaySYI3SaveDraft(pParent,pName,pCfg)
{if(!this.objType)
this.objType="EbaySYI3SaveDraft";this.base=EbayBaseControl;this.base(pParent,pName);var t=this,c=t.oConfig=pCfg;t.sListner=null;t.bAutoSaveOn=c.iAutoSaveTime&&c.iAutoSaveTime>0;t.oTimer=null;t.oDisplayTime=new EbayHTMLLayer(t,oEC.sSaveDraftElem);var a=c.aSaveDraftElems,len=a?a.length:0,aSDL=oEC.aSDLater;for(var i=0;i<len;i++)
{var l=new EbayHTMLAnchor(t,a[i]);l.sAid=c.sAIdValue?c.sAIdValue:'72';l._registerEvent('onclick','parent.saveDraftAction');}
if(aSDL)
{len=aSDL.length;for(var i=0;i<len;i++)
{var oSDL=new EbayHTMLAnchor(t,aSDL[i]);oSDL.sAid=c.sSDLaterAid;oSDL._registerEvent('onclick','parent.saveDraftAction');}}
this.saveDraftAction=function()
{ebay.oDocument.oPage.bShowAlert=false;var cf=ebay.oDocument.getConfig("Selling.Variation.UPIMandate");if(cf){var oGTINFld=[];for(i=0;i<cf.nMaxVar;i++){oGTINFld[i]=ebay.oDocument.getUIElem(cf.sGTINFld+i);if(oGTINFld[i]&&oGTINFld[i].value==cf.aLyrOpnLbl[0])
oGTINFld[i].value="";}}
GTINReset();var t=this;var p=t.parent,c=p.oConfig,oP=p.parent,oD=oP.parent,frm=oEC.sFormName,aid=oEC.sAidName;var fE=oP.controls[frm],hE=oP.controls[aid];if(!fE)
fE=new EbayHTMLForm(t,frm);if(!fE.eElem)
fE.bind();if(!hE)
hE=new EbayHTMLText(t,aid);if(!hE.eElem)
hE.bind();hE.setValue(t.sAid);fE.submit();return false;}
with(t)
{if(bAutoSaveOn)
_registerListener(oDocument._getEvent("load"),EVENT_AFTER,"startTimer");if(oConfig.bDraftSaved)
_registerListener(oDocument._getEvent("load"),EVENT_AFTER,"displayTime");}
this.startTimer=function()
{var t=this,cp=t.oUtils.controlPath(t);t.oTimer=setTimeout(cp+".saveDraft()",t.oConfig.iAutoSaveTime*1000);}
this.saveDraft=function(pListner)
{var t=this;clearTimeout(t.oTimer);t.sListner=pListner;t.setDataMonitor();var c=t.oConfig,oRE=t.parent.controls['SYI3-Rules-Engine'];oRE.post(t);}
this.processDataResponse=function(pResp)
{var t=this;with(t)
{var oRE=parent.controls['SYI3-Rules-Engine'];oRE.oDataMonitor.clear();oRE.bIsInProgress=false;displayTime();if(bAutoSaveOn)
startTimer();var sL=sListner;if(sL)
eval(sL+'();');}}
this.displayTime=function()
{var t=this,c=t.oConfig,oDiv=t.oDisplayTime;if(!oDiv.eElem)
oDiv.bind();var dt=new Date(),h=dt.getHours(),m=dt.getMinutes(),ap="";if(c.bIs12HrFormat==true)
{ap=h>=12?'PM':'AM';h=h>=13?h-=12:h;h=h==0?12:h;}
m=m<10?'0'+m:m;var s=h+':'+m+(ap!=""?'&nbsp;'+ap:"");oDiv.setValue('&nbsp;'+c.sSaveDraftTime.replaceTokens(s));dt=null;}
this.setDataMonitor=function()
{var t=this,p=t.parent,oRE=p.controls['SYI3-Rules-Engine'],oDM=oRE.oDataMonitor,oRTE=p.controls['rte'];if(oRTE)
oRTE.updateHTMLSourceElem();oDM.push('title','text');oDM.push('description','textarea');oDM.push('addToDescription','textarea');oDM.push('pictureUrl','hidden');oDM.push('selfHostPictureUrl1','hidden');oDM.push('selfHostPictureUrl2','hidden');oDM.push('selfHostPictureUrl3','hidden');oDM.push('selfHostPictureUrl4','hidden');oDM.push('selfHostPictureUrl5','hidden');oDM.push('selfHostPictureUrl6','hidden');oDM.push('photoDisplayUpgrades','hidden');oDM.push('photoDisplayPackage','hidden');oDM.push('listingDesigner','checkbox');oDM.push('theme','select-one');var oTD=p.controls["Motors.SYI.Change"];if(oTD){if(typeof(oTD.oCfg.bEdmunds)!='undefined'){oDM.push('fromed','hidden');oDM.push('EdmundsDescription','hidden');}
if(typeof(oTD.oCfg.bRelist)!='undefined')
oDM.push('lMode','hidden');oDM.push('startPrice','text');var oElems=oTD.parent.controls['selling'].getElements(),len=oElems.length;for(var i=0;i<len;i++){var oE=oElems[i],type=oE.type;if(type&&type.hasAny('text','select-one','checkbox','radio','textarea'))
oDM.push(oE.name,type);}}}}

// \include\lib\_global\features\syi3\describe\save_draft.js 

ebay.oP.initSaveDraft=function()
{var t=this;new EbaySYI3SaveDraft(t,'save_draft',t.parent.getConfig('Selling.Describe.SaveDraft'));}

// \include\lib\_global\features\syi3\_base\switch_format.js 

function EbaySYI3SwitchFormat(pParent,pName,pCfg)
{if(!this.objType)
this.objType="EbaySYI3SwitchFormat";this.base=EbayBaseControl;this.base(pParent,pName);var c=this.oConfig=pCfg;c.bNoSetContent=true;c.bClearValueOnClose=false;this.aSwitchLinks=[];this.oA=[];this.oActiveLink;if(!c.bReviseFlow)
{this.oCloseCallout=new EbayHTMLAnchor(this,oEC.sCloseCalloutLink);this.oCalloutHidden=new EbayHTMLText(this,oEC.sShowCalloutHidden);this.oCalloutLyr=new EbayHTMLLayer(this,oEC.sCalloutLyr);this.oCloseCallout._registerEvent('onclick','parent.closeCallout');}
if(c.bELFlow)
{this.oCPG=new EbayHTMLText(this,oEC.sCpgName);this.oISAPIName=new EbayHTMLText(this,oEC.sIsapiCmdName);this.oLMode=new EbayHTMLText(this,oEC.sLmodeName);}
if(!(c.bELFlow||c.bReviseFlow))
this.oCloseCallout.bind();this.init=function()
{var c=this.oConfig,info=c.aInfo,len=info.length;for(var i=0;i<len;i++)
{var e=info[i],lnk=e.aSwitchLinks,l=lnk.length;var oLyr=new EbayHTMLOverlayContent(this.oA[i],e.sCntLyr,c)
for(var n=0;n<l;n++){var l=this.oA[i];l=new EbayHTMLAnchor(this,lnk[n]);l.oOlyCnt=oLyr;l._registerEvent('onclick','parent.show');l.bind();if(l.eElem){l.eElem.href="#";}}
var oCnt=new EbayHTMLAnchor(this,e.sContinue);oCnt.iAid=e.iAid;var oCancel=new EbayHTMLAnchor(this,e.sCancel);oCnt.subscribeEvents("onkeydown");oCnt._registerEvent('onkeydown','parent.checkEventForContinue');oCnt._registerEvent('onclick','parent.checkEventForContinue');oCancel._registerEvent('onclick','(function(){this.parent.close()})');oLyr.oCnt=oCnt;oLyr.oCancel=oCancel;;if(e.sClose){var oClose=new EbayHTMLAnchor(this,e.sClose);oClose._registerEvent('onclick','(function(){this.parent.close()})');}}}
this.show=function(pEvent)
{var p=this.parent,c=p.oConfig,olay=this.oOlyCnt,e=pEvent.parent.parent.eElem,aLocs=this.oUtils.oPositioning.getOffsetLeftTop(e);var cCfg=ebay.oDocument.getConfig('Selling.Common');c.bOnFocus=cCfg.bOnFocus;c.sStartLyrName=cCfg.sStartLyrName;p.oActiveLink=this;var gLyr=this.oDocument._getControl('grayout_lyr'),sw,sh;if(gLyr)
{var bd=this.oDocument.doc.body,aPageSize=ebay.oUtils.oPositioning.getPageSize(),bStyleOverflow=bd.style.overflow=='hidden',cLyr=this.oDocument.getUIElem('content');;sw=bStyleOverflow?cLyr.scrollWidth:aPageSize[0];sh=bStyleOverflow?cLyr.scrollHeight:aPageSize[1];gLyr.display(sw,sh);}
if(!olay.eElem)
olay.bind();if(!c.isGrdRej){var sLeft=sw/2-225,sTop=aLocs[1]+35;olay.sLeft=(sLeft>=0)?sLeft+'px':aLocs[0]+'px';if(sTop>=0){olay.sTop=sTop+'px';}}
olay.eElem.style.zIndex=111;if(typeof(olay.display)=="undefined")
{olay.eElem.style.top=olay.sTop;olay.eElem.style.left=olay.sLeft;olay.eElem.style.display="block";}
else
olay.display();olay.oCnt.bind();olay.oCancel.bind();}
this.checkEventForContinue=function(e)
{var key=window.event?window.event.keyCode:arguments[2].keyCode;if((e.name=="onkeydown"&&key==13)||(e.name=="onclick"))
this.parent.changeFormat(this);}
this.changeFormat=function(t)
{ebay.oDocument.oPage.bShowAlert=false;if(c&&c.sCalloutLyr){GTINReset();}
var p=t.parent,c=p.oConfig,oFrm=p.parent.controls[oEC.sFormName],oAid=p.parent.controls[oEC.sAidName];p.close();if(!oFrm)
{if(c.sFormName)
oFrm=new EbayHTMLForm(p.parent,c.sFormName);else
oFrm=new EbayHTMLForm(p.parent,oEC.sFormName);}
if(!oAid)
oAid=new EbayHTMLText(p.parent,oEC.sAidName);if(!oFrm.eElem)
oFrm.bind();if(!oAid.eElem)
oAid.bind();oAid.setValue(t.iAid);if(c.bELFlow)
{p.oCPG.setValue(c.iNewCpg);p.oISAPIName.setValue(c.sNewIsapiCmd);p.oLMode.setValue(c.iNewLmode);}
oFrm.submit();}
this.close=function()
{var gLyr=this.oDocument._getControl('grayout_lyr');if(gLyr)
gLyr.hide();if(typeof(this.oActiveLink.oOlyCnt.hide)=="undefined")
this.oActiveLink.oOlyCnt.eElem.style.display="none";else
this.oActiveLink.oOlyCnt.hide();this.oActiveLink.focus(true);}
this.closeCallout=function()
{var p=this.parent,hid=p.oCalloutHidden,lyr=p.oCalloutLyr;if(!hid.eElem)
hid.bind();if(!lyr.eElem)
lyr.bind();hid.setValue('false');lyr.show(false);}
this.init();}
ebay.oP.initSwitchFormat=function()
{var c=this.parent.getConfig('Selling.Describe.SwitchForm');if(c)
new EbaySYI3SwitchFormat(this,'switch_format',c);}

// \include\lib\_global\features\syi3\describe\add_options.js 

ebay.oP.initAddOptions=function()
{var t=this,oD=t.parent,c=oD.getConfig("Selling.Describe.AddOptions");if(c)
{var len=c.aLinks.length;for(var i=0;i<len;i++)
{var link=c.aLinks[i],a=[],n;if(link.has(':'))
{a=link.split(':');n=a[0];}
else
n=link;var l=new EbayHTMLAnchor(t,n,false,c);l.sOptionId=l.sWidth=l.sHeight=null;if(a.length>0)
{l.sOptionId=a[1];l.sWidth=a[2];l.sHeight=a[3];}
l.onclick=function()
{with(this)
{var oP=parent,c=oConfig;var cCfg=ebay.oDocument.getConfig('Selling.Common');c.bOnFocus=cCfg.bOnFocus;c.sStartLyrName=cCfg.sStartLyrName;if(sWidth)
c.width=sWidth;if(sHeight)
c.height=sHeight;eElem.href="javascript:void(0);";oP.openAddOption(c,name,sOptionId?sOptionId:oEC.sCustomizeAid);return false;}}}}}
ebay.oP.openAddOption=function(pConfig,pName,pAid)
{var t=this;with(t)
{var c=pConfig;if(!pName)
pName='addOptions';t.sAddOptionsBookmark=pName;var b=openDialog(c,'http://pics.ebaystatic.com/aw/pics/tbx/s.gif');if(!b)
return;var fm=getFormObj(oEC.sFormName);if(!fm.eElem)
fm.bind();var sAction=fm.getAction();fm.sOrigTarget=fm.getTarget();fm.sOrigAction=sAction;fm.setElementValue(oEC.sAidName,pAid);sAction=sAction+(sAction.has('?')>0?'&':'?')+'ej2child=true';fm.setAction(sAction);fm.setTarget(oDisplayedOverlay.sIframeName);fm.submit();fm.setTarget(fm.sOrigTarget);fm.setAction(fm.sOrigAction);fm.setElementValue(oEC.sAidName,'');}}
ebay.oP.onAfterOptionsSave=function(pDialogName,pClosePopUp)
{ebay.oDocument.oPage.bShowAlert=false;GTINReset();var t=this,oD=this.oDocument,c=oD.getConfig("Selling.Describe.AddOptions");try
{var oSurvey=t.controls["KeyFlow.Exit.Survey"];if(oSurvey)
oSurvey.disable();}
catch(e)
{}
var fr=t.getFormObj(oEC.sFormName);if(!fr.eElem)
fr.bind();var he=new EbayHTMLText(t,oEC.sAidName);he.bind();he.setValue(c.sActionValue);var bClosePopUp=typeof(pClosePopUp)!='undefined'?pClosePopUp:false;if(bClosePopUp){var oPop=t.controls[pDialogName];if(oPop)
oPop.close();t.sAddOptionsBookmark=oEC.sExcLnk;var oHidden=new EbayHTMLText(oD.oPage,oEC.sHidden);if(!oHidden.eElem)
oHidden.bind();oHidden.setValue(true);}
else if(pDialogName)
{if(t.controls[pDialogName]){t.controls[pDialogName].closeOverlay();}
else{return;}}
if(!bClosePopUp){try
{t.showProgressIndicator();var oGrayLyr=t.controls['grayout_lyr'];oGrayLyr.disableSelElems(false);}catch(e){}}
var tmp=fr.eElem.action.split("#");fr.setAction(tmp[0]+"#"+t.sAddOptionsBookmark);fr.submit();}
ebay.oP.initAddOptionFromHelpPane=function(pAddOptionId)
{var t=this,oD=t.parent,cgUrl=t.controls['help system'].oBubbleHelp.oConfig.sCustomizeFormUrl,c=oD.getConfig('Selling.Describe.AddOptions'),aLinks=c.aLinks,len=aLinks.length;for(var i=0;i<len;i++)
{var lnk=aLinks[i],lnks=lnk.split(':');if(lnks.length>2&&lnks[1]==pAddOptionId)
{c.width=lnks[2];c.height=lnks[3];break;}}
t.openDialog(c,cgUrl+pAddOptionId+'&ej2child=true');}
ebay.oP.onAddoptionsJitClose=function(){var t=this,oD=t.parent,oC=oD.getConfig("Selling.Common");t.oJitCls=new EbayHTMLAnchor(t,oC.sclsid);t.oJitCls.bind();t.oJitCls.onclick=function(){var oJitOpt=new EbayHTMLText(t.oJitCls,oC.sAddorRemJit);oJitOpt.bind();oJitOpt.eElem.value="true";ADJit=ebay.oDocument.getUIElem("AddorRemJIT");ADJit.style.display="none";}}
ebay.oP.onExpandCollapse=function(){var t=this,oD=t.parent,oC=oD.getConfig("Selling.Describe.VariationCollapse");t.oExpCollapse=new EbayHTMLAnchor(t,oC.EnCimg);t.oExpCollapse.bind();t.oExpCollapseSec=new EbayHTMLLayer(t,oC.EnCSection);t.oExpCollapseSec.bind();t.oExtraSpace=new EbayHTMLLayer(t,oC.sExtraSpace);t.oExtraSpace.bind();t.oExpCollapseSec.isCollapse=true;cureElem=t.oExpCollapseSec.eElem;firResCh=cureElem.children[2];if(t.oExpCollapseSec.isCollapse)
firResCh.style.display="none";secResCh=cureElem.children[3];if(t.oExpCollapseSec.isCollapse)
secResCh.style.display="none";t.oExtraSpace.show(t.oExpCollapseSec.isCollapse)
t.oExpCollapse.eElem.setAttribute('aria-expanded',!t.oExpCollapseSec.isCollapse);t.oExpCollapse.onclick=function(){this.parent.oExpCollapseSec.isCollapse=this.parent.oExpCollapseSec.isCollapse?false:true;cureElem=this.parent.oExpCollapseSec.eElem;nxteElem=(cureElem.parentElement)?cureElem.parentElement.nextElementSibling:cureElem.parentNode.nextElementSibling;if(this.parent.oExpCollapseSec.isCollapse){firResCh.style.display="none";secResCh.style.display="none";this.parent.oExtraSpace.show(this.parent.oExpCollapseSec.isCollapse);t.oExpCollapse.eElem.setAttribute('aria-expanded','false');}
else{firResCh.style.display="block";secResCh.style.display="block";this.parent.oExtraSpace.show(this.parent.oExpCollapseSec.isCollapse);t.oExpCollapse.eElem.setAttribute('aria-expanded','true');}
if(t.oExpCollapseSec.isCollapse){this.parent.oExpCollapse.eElem.style.background="url('http://p.ebaystatic.com/aw/pics/cmp/img/imgBluDivot.gif') no-repeat scroll 0 2px transparent";}else{this.parent.oExpCollapse.eElem.style.background="url('http://q.ebaystatic.com/aw/pics/cmp/img/imgBluDivot_Dwn.gif') no-repeat scroll 0 4px transparent";}
return false;}}

// \include\lib\_global\features\syi3\describe\itemspecific_sherpa.js 

ebay.oP.sherpaItemSpec=function(){var cfg,eElemid="VarLabel_";cfg=ebay.oDocument.getConfig("Selling.SellerTags.ItemSpecSherpa");if(cfg){for(i=0;i<cfg.aTags.length;i++){LabeleElem=ebay.oD.getUIElem(cfg.aTags[i].tn+"ISS");if(LabeleElem){if(cfg.aTags[i].bMV!=1){InpElem=ebay.oD.getUIElem(LabeleElem.value);if(InpElem.value.length==0)
InpElem.value=cfg.aTags[i].Vals[0].Val.replace(/&amp;/g,'&');}
if(cfg.aTags[i].bMV==1){LableStr=LabeleElem.value;LabelIndx=LableStr.split("_0_");LabelStrElm="mvContainer"+LabelIndx[1]+"_cb";bMVTags=document.getElementsByName(LabelStrElm);for(l=0;l<cfg.aTags[i].Vals.length;l++){for(k=0;k<bMVTags.length;k++){InpElem=bMVTags[k];if(InpElem.value==cfg.aTags[i].Vals[l].Val){InpElem.checked=true;break;}}}}}}}}

// \include\lib\_global\features\syi3\describe\add_pictures.js 

ebay.oP.initAddPictures=function()
{var t=this,c=t.parent.getConfig("Selling.Describe.AddPictures");if(c)
{if(!t.controls[c.sFormName])
new EbayHTMLForm(t,c.sFormName);var oAP=new EbaySYI3AddPicturesDescribe(t,'add pictures',c);oAP.onAfterLoad();}}
ebay.oP.onAfterLoadAddPictures=function()
{var t=this,oD=t.parent,c=oD.getConfig("Selling.Describe.AddPictures");if(c)
{var f=oD._getControl(c.sFormName);if(!f.eElem)
f.bind();var aPhotoUpgradeElems=f.getElement(c.sPhotoDispUpgrade),len=aPhotoUpgradeElems?aPhotoUpgradeElems.length:0,i=0,aPhotoUpgradeVals=[],oPhotoPkg=f.getElement(c.sPhotoDispPkg);for(i;i<len;i++)
aPhotoUpgradeVals[i]=aPhotoUpgradeElems[i].value;if(ebay.oUtils.isInArray(aPhotoUpgradeVals,"2")||(oPhotoPkg&&oPhotoPkg.value=="3"))
{var ld=oD._getControl(c.sListingDesignerName);if(ld)
ld.updateLayoutOptions('supersize');}}}

// \include\lib\_global\features\syi3\describe\attributes.js 

ebay.oP.initAttributes=function()
{var t=this;new EbayAttributeManager(t,'attribute-manager');var c=t.parent.getConfig("Selling.Describe.ItemCondition");if(c)
{var alnk=[];for(var i=0;i<2;i++)
{alnk[i]=new EbayHTMLAnchor(t,c.aBubHlpElem[i],false,c);alnk[i].onclick=function()
{var t=this,hs=t.parent.controls["help system"],oHA,oHP;if(hs)
{if(hs.bHelpInPopup)
{oHP=hs.oHelpPopup;sMoreHelpPage=null;oHP.sUrl=t.oConfig.sUrl;oHP.show();}
else
{oHA=hs.oHelpAssistant;hs.bForceHelpPane=true;oHA.display(t.oConfig.sUrl);hs.bForceHelpPane=false;}}
return false;}}}}

// \include\lib\_global\features\syi3\describe\catalog_search.js 

ebay.oP.initCatalogSearch=function()
{var t=this,oD=t.parent,c=oD.getConfig("Selling.Describe.Catalog.Search"),l,fE,hE,keywords;this.aSrchCtlgElem=[];if(c)
{var len=c.aSrchCtlgElem.length;for(var i=0;i<len;i++)
{if(c.aSrchCtlgElem[i]!=""){l=new EbayHTMLAnchor(t,c.aSrchCtlgElem[i],false,c);l.onclick=function()
{ebay.oDocument.oPage.bShowAlert=false;GTINReset();fE=this.parent.getFormObj(this.oConfig.sFormName);if(!fE.eElem)
fE.bind();hE=new EbayHTMLText(this,this.oConfig.sAIdElem);if(!hE.eElem)
hE.bind();hE.setValue(this.oConfig.fAidValue);var titleVal=ebay.oDocument._getControl("title").getValue();var fElm=fE.eElem;fElm.keywords.value=fElm.SearchString.value=titleVal;fE.submit();return false;}}}}
c=oD.getConfig("Selling.Describe.Catalog.CompatibleProducts");if(c)
{if(c.bHasProduct)
{l=new EbayHTMLAnchor(t,c.sCompProdElem,false,c);l.onclick=function()
{var t=this;t.parent.showDetailsLnk=this;t.parent.openDialog(t.oConfig,t.eElem.href+"&ej2child=true");return false;}}
else
{l=new EbayHTMLAnchor(t,c.sCompProdElem,false,c);l.onclick=function()
{ebay.oDocument.oPage.bShowAlert=false;GTINReset();var t=this;fE=t.parent.getFormObj(t.oConfig.sFormName);if(!fE.eElem)fE.bind();hE=new EbayHTMLText(t,t.oConfig.sAIdElem);if(!hE.eElem)hE.bind();hE.setValue(t.oConfig.sAIdValue);fE.submit();return false;}}}
c=oD.getConfig("Selling.Describe.Catalog.Remove");if(c)
{l=new EbayHTMLAnchor(t,c.sRemCtlgElem,false,c);oIsReco=new EbayHTMLText(t,"isRecommendProduct",false,c);l.onclick=function()
{ebay.oDocument.oPage.bShowAlert=false;GTINReset();var t=this;fE=t.parent.getFormObj(t.oConfig.sFormName);if(!fE.eElem)fE.bind();hE=new EbayHTMLText(t,t.oConfig.sAIdElem);if(!hE.eElem)hE.bind();hE.setValue(t.oConfig.sAIdValue);if(!oIsReco.eElem)oIsReco.bind();oIsReco.setValue(false);fE.submit();return false;}}}
function EbaySYIProductOvly(pParent,pName,pCfg){if(!this.objType)
this.objType="EbaySYIProductOvly";this.base=EbayBaseControl;this.base(pParent,pName);var t=this;t.oC=pCfg;t.oGLyr=new EbaySYI3Grayout(this,'lyrGrayout_sec');t.oClyr=new EbayHTMLOverlayContent(this,pCfg.sOvlayid,pCfg);t.oClyr.bind();this.init=function(){var t=this;with(t){oLnk=new EbayHTMLAnchor(t,oC.sOvlayLnk);oLnk.bind();oLnk._registerEvent("onclick","this.parent.openOly");oCls=new EbayHTMLAnchor(t,oC.scloseovlnk);oCls.bind();oCls._registerEvent("onclick","this.parent.closeOly");oCls1=new EbayHTMLAnchor(t,oC.sclseovlnk);oCls1.bind();oCls1._registerEvent("onclick","this.parent.closeOly");}}
this.openOly=function(){with(this.parent){if(oGLyr){var bd=this.oDocument.doc.body,aPageSize=ebay.oUtils.oPositioning.getPageSize(),bStyleOverflow=bd.style.overflow=='hidden';cLyr=this.oDocument.getUIElem('content');sw=bStyleOverflow?cLyr.scrollWidth:aPageSize[0];sh=(bStyleOverflow?cLyr.scrollHeight:aPageSize[1])+100;oGLyr.bDisableSelElems=false;oGLyr.display(sw,sh);}
oClyr.bForceReposition=true;oClyr.bNoSetContent=true;oClyr.bClearValueOnClose=false;oClyr.display();sTop=oClyr.eElem.style.top.substr(0,oClyr.eElem.style.top.length-2);oClyr.eElem.style.top=sTop-100+'px';}}
this.closeOly=function(){with(this.parent)
{oClyr.close();oGLyr.hide();}
oLnk.isOpen=false;oLnk.focus(true);}
this.init();}

// \include\lib\_global\features\syi3\describe\categories.js 

ebay.oP.initCategories=function()
{var t=this,oD=t.parent;var oD=this.parent,c=oD.getConfig("Selling.Describe.Category");if(c)
t.initCategoriesExecute(c);c=oD.getConfig("Selling.Describe.Motors.ChangeVIN");if(c)
t.initCategoriesExecute(c);}
ebay.oP.initCategoriesExecute=function(pC)
{var t=this,l,fE,hE,len=pC.aAnchorNames.length;for(var i=0;i<len;i++)
{var l=new EbayHTMLAnchor(t,pC.aAnchorNames[i],true);l.onclick=function()
{ebay.oDocument.oPage.bShowAlert=false;GTINReset();fE=this.parent.getFormObj(oEC.sFormName);hE=new EbayHTMLText(t,oEC.sActionElemName);hE.bind();hE.setValue(pC.sActionValue);if(pC.sTrkId&&pC.sTrkValue){hE1=new EbayHTMLText(t,pC.sTrkId);hE1.bind();if(hE1&&typeof(hE1.eElem)!="undefined")
hE1.setValue(pC.sTrkValue);}
if(!fE.eElem)
fE.bind();fE.submit();return false;}
l.bind();if(l.eElem)
{l.eElem.href="#";l.eElem.style.cursor='pointer';}}}
ebay.oP.onAfterLoadCategory=function()
{var t=this;var c=this.parent.getConfig("Selling.Describe.Category");if(c)
{var aA=c.aAnchorNames;for(var i=0,l=aA.length;i<l;i++)
{var a=t.controls[aA[i]];if(a)
{if(!a.eElem)
a.bind();a.enable(true);}}}}

// \include\lib\_global\features\syi3\describe\instant_sale.js 

ebay.oP.initInstantOffer=function(){var t=this,pC=t.parent.getConfig("Selling.Describe.CatalogueInstantOffer");if(pC){t.insCfg=pC;t.docDomain="";lnk=new EbayHTMLAnchor(t,pC.sInstantOffer,false,pC);lnk.bind();lnk._registerEvent('onclick','parent.openInstantOffer');t.openInstantOffer=function(){var cCfg=ebay.oDocument.getConfig('Selling.Common');pC.bOnFocus=cCfg.bOnFocus;pC.sStartLyrName=cCfg.sStartLyrName;pC.sUrl+="&ebayAspUsed="+(Math.round(pC.avgPrice)*100);this.parent.openDialog(pC,pC.sUrl);ebay.oP.closeProgressIndicator();ebay.oP.insertCloseBtn();ebay.oP.insertCancelLink();return false;}
t.instantDiv=new EbayHTMLLayer(this,pC.sInstantSale);t.instantDiv.bind();aP=document.getElementById(pC.sAvgPrice);aP.onclick=function(){var d=ebay.oP.instantDiv;if(d){ebay.oP.instantDiv.show();}
return false;}}}
ebay.oP.insertCancelLink=function(){var t=this,c=t.insCfg,overlay=t.controls[c.sLayerElemName],ifrm=overlay.eElem.childNodes[1];var oChildTag=ebay.oD.createElement("div");oChildTag.innerHTML=c.sCnlHTML;ifrm.parentNode.insertBefore(oChildTag,ifrm.nextSibling.nextSibling);cnl=new EbayHTMLAnchor(t,c.sCnlId,false,c);cnl.bind();cnl._registerEvent('onclick','ebay.oP.closeInstantOffer()');}
ebay.oP.insertCloseBtn=function(){var t=this,c=t.insCfg,overlay=t.controls[c.sLayerElemName],ifrm=overlay.eElem.childNodes[1];var oChildTag=ebay.oD.createElement("div");oChildTag.innerHTML=c.sCloseBtn;ifrm.parentNode.insertBefore(oChildTag,ifrm);lnk=new EbayHTMLAnchor(t,c.sInstClose,false,c);lnk.bind();lnk._registerEvent('onclick','ebay.oP.closeInstantOffer()');}
ebay.oP.closeInstantOffer=function()
{var t=this,c=t.insCfg;var overlay=t.controls[c.sLayerElemName];if(overlay){overlay.close();}
t.closeGrayout();return false;}

// \include\lib\_global\features\syi3\describe\char_counter.js 

ebay.oP.initCharCounter=function()
{var t=this,oD=t.parent,c=oD.getConfig("Selling.Describe.titleCharCounter");if(c)
new EbayCharCounter(t,c.name,c);c=oD.getConfig("Selling.Describe.subtitleCharCounter");if(c)
{var oSubCC=new EbayCharCounter(t,c.name,c);var oSubT=oSubCC.oTxt;oSubT.bind();oSubT.initValue=oSubT.getValue();oSubT._registerListener(oSubT._getEvent('onblur'),t.EVENT_AFTER,'initSubtitleFeeCalc');oSubT.initSubtitleFeeCalc=function()
{var t=this;if(location.href.has('Revise')&&oSubT.initValue)
return;var v=t.getValue(),oSTDisplay=ebay.oP.controls['subtitleDisplayControl'];if(oSTDisplay)
{if(!oSTDisplay.eElem)
oSTDisplay.bind();oSTDisplay.setValue(v&&v.length>0);}
var oRE=t.parent.controls["SYI3-Rules-Engine"];if(oRE)
{oRE.oDataMonitor.push('subtitleDisplayControl','hidden');oRE.sPostListner+='ebay.oP.controls[\'Selling.Describe.subtitleCharCounter\'].oLyr.bind();';}
ebay.oP.initFeeCalc();}
new EbayHTMLText(t,'subtitleDisplayControl');}}
function EbayHTMLitemconditiondesc(pParent,pName,pCfg){this.base=EbayBaseControl;this.base(pParent,pName);var p=ebay.oP;this.oC=p.oC=pCfg;with(this){var c=oC;this.iCDFld=new EbayHTMLText(this,c.inputFieldId);iCDFld.bind();iCDFld._registerEvent("onblur","parent.ICDSave");this.ICDLayer=new EbayHTMLLayer(this,c.sConditionDescGrp);ICDLayer.bind();if(c.ICDdisp){this.ICDmenu=p.controls[c.itmCond];if(!ICDmenu){ICDmenu=new EbayHTMLSelect(this.parent,c.itmCond);ICDmenu.bind();}
if(!this.ICDmenu.eElem)
this.ICDmenu.bind();ICDmenu._registerEvent("onchange",'ICDChange');if(this.ICDmenu.eElem==null)return;var icdval=this.ICDmenu.eElem.value;if(icdval==-1){if(c.bCondReq){this.iCDFld.eElem.disabled=true;this.iCDFld.eElem.style.backgroundColor="#CCC";}
else{this.iCDFld.eElem.disabled=false;this.iCDFld.eElem.style.backgroundColor="#FFF";}
if(c.SYIImpPhase1cEnabled)
this.ICDLayer.show(false);}
else if(icdval!=-1&&icdval<1500){this.iCDFld.eElem.disabled=true;this.iCDFld.eElem.style.backgroundColor="#CCC";if(c.SYIImpPhase1cEnabled)
this.ICDLayer.show(false);}
else if(icdval>=1500){this.iCDFld.eElem.disabled=false;if(!c.bRestrictedCase)
this.iCDFld.eElem.style.backgroundColor="#FFF";if(c.SYIImpPhase1cEnabled)
this.ICDLayer.show(true);}
this.ICDmenu.ICDChange=function(){var icdval=ICDmenu.eElem.value;if(icdval==-1){if(c.bCondReq){iCDFld.eElem.disabled=true;iCDFld.eElem.style.backgroundColor="#CCC";}
else{iCDFld.eElem.disabled=false;iCDFld.eElem.style.backgroundColor="#FFF";}
if(c.SYIImpPhase1cEnabled)
ICDLayer.show(false);}
else if(icdval!=-1&&icdval<1500){iCDFld.eElem.disabled=true;iCDFld.eElem.style.backgroundColor="#CCC";if(c.SYIImpPhase1cEnabled)
ICDLayer.show(false);}
else if(icdval>=1500){iCDFld.eElem.disabled=false;iCDFld.eElem.style.backgroundColor="#FFF";if(c.SYIImpPhase1cEnabled)
ICDLayer.show(true);}
ebay.oP.pricingGuidance(icdval);}}
this.ICDSave=function(){var aForm=ebay.oP.getFormObj('selling');var cfg=ebay.oDocument.getConfig("Selling.RulesEngine");var sUrl=cfg.sUrl,sPost="";sPost+='&itemConditionDescription='+encodeURIComponent(this.value());var req=ebay.oServer.createRequest('icd_ajax',sUrl,false);req.sPostData=sPost;req.send();}}}
ebay.oP.initPaymentCharCounterAL=function()
{var t=this,oD=t.parent,c=oD.getConfig("Selling.Describe.paymentInstructionsCharCounter");if(c)
new EbayCharCounter(t,c.name,c);}
function EbayShowStockInfoMsg(pParent,pName,pCfg){this.base=EbayBaseControl;this.base(pParent,pName);var p=ebay.oP;this.oC=p.oC=pCfg;with(this){var c=oC;if(c.IsStockPhotoMsgEnabled){var ICStockMsg=new EbayHTMLLayer(this,c.sICStockPhotoMsg);ICStockMsg.bind();this.ICDmenu=p.controls[c.sCondition];if(!ICDmenu)
ICDmenu=new EbayHTMLSelect(this.parent,c.sCondition);if(!ICDmenu.eElem)
ICDmenu.bind();ICDmenu._registerEvent("onchange","ICDChange1");ICDmenu.ICStockMsg=ICStockMsg;var icdval=ICDmenu.eElem.value;if(icdval!=-1&&icdval>=3000){ICStockMsg.show(true);}
else if(icdval==-1||icdval<3000){ICStockMsg.show(false);}}}
this.ICDmenu.ICDChange1=function(){var t=this,icdval=this.eElem.value;if(icdval!=-1&&icdval>=3000){t.ICStockMsg.show(true);}
else if(icdval==-1||icdval<3000){t.ICStockMsg.show(false);}}}

// \include\lib\_global\features\syi3\describe\pricing_guidance.js 

ebay.oP.pricingGuidance=function(icdval){var prCfg=ebay.oDocument.getConfig("Selling.Format.prGuid");if(prCfg)
{var gidAry=prCfg.sGuidPrAry,auTab=prCfg.bAuFmt,fPTab=prCfg.bFPFmt,aGuidMsg=prCfg.sAGuidMsg,fGuidMsg=prCfg.sFGuidMsg;prGuid=gidAry[icdval];var guPrDiv=new EbayHTMLLayer(this,prCfg.sGuidPrDiv);if(!guPrDiv.eElem)
guPrDiv.bind();var guPrDisDiv=new EbayHTMLLayer(this,prCfg.sGuidPrDisDiv);if(!guPrDisDiv.eElem)
guPrDisDiv.bind();if(prGuid){if(auTab||fPTab)
{var guidMsg=(auTab)?aGuidMsg:fGuidMsg;guPrDiv.setValue(guidMsg);guPrDiv.setStyle("paddingTop","10px");var guPr=new EbayHTMLLayer(this,prCfg.sGuidPr);if(!guPr.eElem)
guPr.bind();guPr.eElem.innerHTML=prGuid;guPrDiv.show(true);guPrDisDiv.show(true);}}
else{guPrDiv.show(false);guPrDisDiv.show(false);}}}
ebay.oP.initSoftGoods=function(sCfg){var t=this,discMsg=ebay.oDocument.getUIElem("sherpaDisclaimer");if(sCfg.gowiththisLinks){var len=sCfg.gowiththisLinks.length;for(var i=0;i<len;i++)
{oGoWithThis=new EbayHTMLAnchor(t,sCfg.gowiththisLinks[i]);oGoWithThis.bind();oGoWithThis._registerEvent("onclick","parent.onGoWithThis");}}
this.onGoWithThis=function(){if(sCfg.sugSPValue&&this.name=="gowiththisSP"){stPrice=ebay.oDocument.getUIElem("startPrice");if(stPrice){stPrice.value=sCfg.sugSPValue;stPrice.focus();}}
else if(sCfg.sugBINValue&&this.name=="gowiththisBIN"){bPrice=ebay.oDocument.getUIElem("binPrice");if(bPrice){bPrice.value=sCfg.sugBINValue;bPrice.focus();}}}
if(discMsg&&(sCfg.sugSPValue||sCfg.sugBINValue))
discMsg.style.display='block';}

// \include\lib\_global\features\syi3\describe\subtitle.js 

ebay.oP.initSubtitle=function()
{var t=this,oD=t.parent,c=oD.getConfig("Selling.Describe.Subtitle");if(c)
{var lnk=new EbayHTMLAnchor(t,oEC.sLnkName,false,c),lyr=new EbayHTMLOverlay(t,oEC.sLyrName,c),a,len=oEC.aCloseBtnNames.length;for(var i=0;i<len;i++)
{a=new EbayHTMLAnchor(t,oEC.aCloseBtnNames[i],false,c);a.onclick=function()
{lyr.show();return false;}}
lyr.bNoSetContent=true;lnk.onclick=function()
{var t=this;lyr.sTop=t.top()+20;lyr.sLeft=t.left();lyr.display();return false;}}}

// \include\lib\_global\features\syi3\describe\picture_insert.js 

ebay.oP.initPictureInsert=function()
{var t=this,c=t.parent.getConfig("Selling.Describe.Description.Picture.Insert");if(c)
new EbayRTEPictureInsert(t,c.name,c);}
ebay.oP.setClassName=function(pPicLyr,pStyle)
{pPicLyr.className=pStyle;}
ebay.oP.selectPicture=function(pIndex)
{var t=this,oD=t.parent,c=oD.getConfig("Selling.Describe.Description.Picture.Insert");if(c)
{var pictureInsert=t.controls[c.name];pictureInsert.restoreRTEEnv();pictureInsert.toggleDisplay(false);var aPicUrls=pictureInsert.oPictureUrls.getValue().split(';');var rte=t.controls[pictureInsert.sRTEElemName];rte.applyCommand("insert-image",aPicUrls[pIndex]);rte.setCurrentState();}}
ebay.oP.addPictures=function()
{var t=this,c=t.parent.getConfig("Selling.Describe.Description.Picture.Insert");if(c)
{var oAddPics=t.controls[t.sAddPicturesControlName];oAddPics.showPopup();var pictureInsert=t.controls[c.name];pictureInsert.restoreRTEEnv();pictureInsert.toggleDisplay(false);}
return false;}

// \include\lib\_global\features\syi3\describe\color_palette.js 

ebay.oP.initColorPalette=function()
{var t=this;var c=this.parent.getConfig("Selling.Describe.Description.Color.Palette");if(c)
new EbayRTEColorPalette(t,c.name,c);}
ebay.oP.selectColor=function(pHex)
{var t=this,oD=t.parent,c=oD.getConfig("Selling.Describe.Description.Color.Palette");if(c)
{var palette=t.controls[c.name];palette.restoreRTEEnv();palette.toggleDisplay(false);var rte=t.controls["rte"];rte.applyCommand("font-color",pHex);rte.setCurrentState();}}

// \include\lib\_global\features\syi3\describe\grayout.js 

ebay.oP.initGrayout=function()
{var t=this;new EbaySYI3Grayout(t,'grayout_lyr')}
ebay.oP.closeGrayout=function()
{var t=this,ctls=t.controls,gLyr=ctls['grayout_lyr'],oShadow=ctls['shadow_lyr'];if(gLyr)
gLyr.hide();if(oShadow)
oShadow.show(false);}

// \include\lib\_global\features\syi3\describe\help_system.js 

ebay.oP.initHelpSystem=function()
{var t=this;new EbaySYIHelpSystem(t,"help system");}

// \include\lib\_global\features\syi3\describe\progress_indicator.js 

ebay.oP.showProgressIndicator=function()
{var t=this,oPiol=t.controls["lyrProgressIndicator_sec"];if(oPiol)
oPiol.display();}
ebay.oP.closeProgressIndicator=function()
{var t=this,oPiol=t.controls["lyrProgressIndicator_sec"];if(oPiol)
oPiol.closeOverlay();}

// \include\lib\_global\features\syi3\describe\rte.js 

ebay.oP.createRTE=function()
{var t=this,oD=t.parent,c=oD.getConfig("Selling.Describe.Description");if(c)
{c.bCustomInitSpellcheck=true;c.bSYI3Flow=true;c.bTaggingOn=true;var rte=new EbayRTE(t,"rte",c);var bRTE=rte.createHTML();if(bRTE)
{if(oD.oGlobals.oClient.bFirefox)
{var descCtl=rte.controls[c.sTextareaElemName];if(descCtl.getValue().length==0)
descCtl.setValue("&nbsp;");}
rte.setCurrentStateBase=rte.setCurrentState;rte.setCurrentState=function()
{var id="description",hs=this.parent.controls["help system"];if(hs&&typeof(hs.aElemsData[id])!="undefined")
{with(hs)
{var p=aElemsData[id]["hp"],oHA=oHelpAssistant;if(p!=sMoreHelpPage&&oHA)
{sMoreHelpPage=p;if(p.has(":1"))
p=p.replaceTokensEx(":1","_"+oBubbleHelp.oConfig.sMetaId);var l=oHA.oConfig.sHelpUrlPrefix+p+".html";if(hs.bForceHelpPane)
{if(oHA.bIsShowing)
oHA.setSource(l);else
oHA.showFrame(null,l);}
else if(oHA.bIsShowing)
oHA.setSource(l);}}}
this.setCurrentStateBase();}
rte.onFocusFrame=function(){var t=this;t.prevDescVal="",t.newDescVal="";if(t.oConfig){t.prevDescVal=t.oConfig.sPrevDescValue;}
autoSaveTimer=setInterval('ebay.oDocument.oPage.sendAutoSaveAjax()',t.oConfig.sAutoSaveTime);}
rte.startAutoSaveFields=function(){var t=this;t.firstDescVal="",t.nextDescVal="";if(t.oConfig){t.firstDescVal=t.oConfig.sPrevDescValue;}
autoSaveAllFieldsTimer=setInterval('ebay.oDocument.oPage.sendAutoSaveIframe()',t.oConfig.sAutoSaveAllFieldsInterval);}
rte.stopAutoSaveFields=function(){var t=this;t.currentDescVal="";if(t.oRTEFrame){t.currentDescVal=t.oRTEFrame.getHTML();}
if(t.currentDescVal!=t.firstDescVal){ebay.oDocument.oPage.sendAutoSaveIframe();}
clearInterval(autoSaveAllFieldsTimer);}
rte.onBlurFrame=function(){var t=this;t.lastDescVal="";if(t.oRTEFrame){t.lastDescVal=t.oRTEFrame.getHTML();}
if(t.lastDescVal!=t.prevDescVal){ebay.oDocument.oPage.sendAutoSaveAjax();}
clearInterval(autoSaveTimer);}
var sBtn=c.sContinueBtn?c.sContinueBtn:"aidZ1",oBtn;oBtn=new EbayHTMLButton(t,sBtn);oBtn.subscribeEvents("onkeydown");oBtn._registerEvent('onclick','parent.submitForm');oBtn._registerEvent('onkeydown','parent.submitForm');oBtn.bind();this.submitForm=function(e)
{ebay.oDocument.oPage.bShowAlert=false;cf=ebay.oDocument.getConfig("Selling.Describe.GTINMandate");if(cf){oGTINFld=ebay.oDocument.getUIElem(cf.oGTINField);if(oGTINFld&&oGTINFld.value==cf.sEnterTxt)
oGTINFld.value="";}
var key=window.event?window.event.keyCode:arguments[2]?arguments[2].keyCode:0;var sEnterKeyCode=(e.name=='onkeydown')&&(key==13);if(sEnterKeyCode||(e.name=='onclick'))
{var t=this,p=t.parent,rte=p.controls["rte"],oAid=p.controls['aid'];if(rte){if(rte.bContentModified||oD.oGlobals.oClient.bOpera)
rte.updateHTMLSourceElem();rte.checkHTML();}
if(!oAid)
oAid=new EbayHTMLText(p,'aid');if(!oAid.eElem)
oAid.bind();oAid.setValue('');if(sEnterKeyCode)
{oForm=ebay.oP.getFormObj('selling');if(oForm)
{var oHiddenElem=document.createElement('input');oHiddenElem.type="hidden";oHiddenElem.name=this.name;oForm.eElem.appendChild(oHiddenElem);oForm.submit();}}}}
var oF=t.controls[oEC.sFormName];if(!oF)
oF=new EbayHTMLForm(t,oEC.sFormName);oF.onBeforeSubmit=t.updateRTEDesc;if(!oF.eElem)
oF.bind();}
else if(c.sLayerID)
new EbayHTMLLayer(t,c.sLayerID);if(c.aBasicRTE)
{if(!t.controls[c.rteBody])
new EbayHTMLLayer(t,c.rteBody);new EbayHTMLLayer(t,c.aBasicRTE["rteSec"]);var oAnch=new EbayHTMLAnchor(t,c.aBasicRTE["lnk"],false,c);oAnch.onclick=function()
{var t=this,oTabsLyr=rte.controls[c.sRteTabsElemName],oRTEBody=t.parent.controls[c.rteBody],oToolbarLyr=rte.controls[c.sLayerID],oRTEIfmLyr=t.parent.controls[c.aBasicRTE["rteSec"]],oTA=rte.controls[c.sTextareaElemName];oTabsLyr.show();oRTEBody.setClass(c.aBasicRTE["css"]);oToolbarLyr.show();oRTEIfmLyr.show();oTA.show(true);rte.bInitialized=false;rte.bBasic=true;return false;}}}}
ebay.oDocument.oPage.sendAutoSaveIframe=function(){var t=this,cfg=t.parent.getConfig("Selling.Describe.Description");var aForm=ebay.oP.getFormObj('selling'),aid,cpg;var rteCtrl=t._getControl("rte");if(rteCtrl){t.nextDescVal=rteCtrl.oRTEFrame.getHTML();}
if(t.firstDescVal!=t.nextDescVal){aid=aForm.eElem.aid.value;cpg=aForm.eElem.cpg.value;aForm.setTarget(cfg.sAutoSaveIframe);aForm.eElem.aid.value=cfg.sAutoSaveActionId;aForm.eElem.cpg.value=cfg.sAutoSaveCpg;aForm.submit();aForm.setTarget("");aForm.eElem.aid.value=aid;aForm.eElem.cpg.value=cpg;}
t.firstDescVal=t.nextDescVal;return false;}
ebay.oDocument.oPage.sendAutoSaveAjax=function(){var t=this,cfg=t.parent.getConfig("Selling.Describe.Description");var aForm=ebay.oP.getFormObj('selling');var sUrl=aForm.getAction(),sPost=cfg.sAutoSavePost;var rteCtrl=t._getControl("rte");if(rteCtrl){t.newDescVal=rteCtrl.oRTEFrame.getHTML();sPost+='&description='+encodeURIComponent(t.newDescVal);}
var req=ebay.oServer.createRequest('auto_save',sUrl,false);req.sPostData=sPost;if(t.prevDescVal!=t.newDescVal){req.send();}
t.prevDescVal=t.newDescVal;}
ebay.oDocument.oPage.setCustomInsert=function(pCIList,pMode)
{if(pCIList.length<=0)
return;var t=this,cfg=t.parent.getConfig("Selling.Describe.Description"),oSI=t.controls["rte"].controls[cfg.sCustomInsertSel],oA=ebay.oUtils.oArray,iCI=cfg.iCustomInsertCount;if(!oSI||!iCI)
return;if(pMode=="edit")
{var aI=oSI.aInserts,si=iCI==5?3:4,ai=iCI==5?1:2,len=pCIList.length,len2=ai+len;for(var j=ai;j<len2;j++)
oA.removeFromArray(aI,ai);for(var j=0;j<len;j++)
{var aNI=pCIList[j].split('*:*');oSI.setOption(aNI[0],aNI[1],si);if(aNI[1])
aI[ai]=[aNI[0],decodeURIComponent(aNI[2])];si++,ai++;}
if(!oSI.eElem)
oSI.bind();var len=oSI.eElem.length;for(var i=0;i<len;i++)
{if(oSI.getValueByIndex(i,true)=="")
oSI.deleteOption(i);}}
else if(pMode=="create")
{var aNI=pCIList[0].split(':');oSI.insertOption(aNI[0],aNI[1],4+iCI);oA.insertIntoArray(oSI.aInserts,iCI+2,[aNI[0],aNI[2]]);cfg.iCustomInsertCount++;}}
ebay.oP.onAfterLoadDescription=function()
{var t=this,oD=t.parent,c=oD.getConfig("Selling.Describe.Description.ReadOnly");if(c)
{var oOrigDescFrm=new EbayHTMLFrame(t,oEC.sOrigDescFrmName);var oOrigDesc=new EbayHTMLText(t,oEC.sOrigDescElemName,false,c);oOrigDescFrm.bindHTML();oOrigDesc.bind();var bIsIE=t.oGlobals.oClient.bIE;var frmElem=oOrigDescFrm.eElem,eFrmWindow=frmElem.contentWindow,eFrmDocument=bIsIE?eFrmWindow.document:frmElem.contentDocument,eFrmBody=eFrmDocument.body;eFrmBody.innerHTML=oOrigDesc.value();}}
ebay.oDocument.win.pmAddToDescription=function(pUrls)
{if(!pUrls)
return;var ctls=ebay.oP.controls["rte"].controls;for(var i in ctls)
{if(ctls[i].objType=="EbayRTEButtonPicMan")
{ctls[i].insertPictures(pUrls,";")
break;}}}
ebay.oP.updateRTEDesc=function()
{var t=this,p=t.parent,rte=p.controls["rte"];if(rte&&rte.bContentModified)
{rte.updateHTMLSourceElem();rte.checkHTML();}}

// \include\lib\_global\features\syi3\open_dialog.js 

ebay.oP.openDialog=function(pConfig,pUrl,pIsSuper)
{var c=pConfig,iL=0,iT=0;if(c)
{var w,h,oD=this.parent,d=oD.doc,bd=d.body,resizeW,resizeH;c.bForceReposition=true,shadowLyr='shadow_lyr';if(bd)
{w=bd.clientWidth;if(c.bIsMotors){h=bd.clientHeight+250;}
else{h=bd.clientHeight;}}
else if(d.innerWidth)
{w=d.innerWidth;h=d.innerHeight;}
else
{w=d.documentElement.clientWidth;h=d.documentElement.clientHeight;}
if(w<c.width||h<c.height)
{resizeW=w;resizeH=h;if(h<c.height)
resizeH=c.height+210;if(w<c.width)
resizeW=c.width+50;window.resizeTo(resizeW,resizeH);w=resizeW;h=resizeH;}
if(c.width>=w)
c.width=w-50;if(c.height>=h){if(screen.height<=600)
c.height=h-25;else
c.height=h-50;}
c.iWidth=c.width-35;var sContentLayer=c.sContentLayerName||'content',oL=this._getControl(c.sLayerElemName),cLyr;if(bd.style.overflow=='hidden')
{var dlgLyr=oD.getUIElem(c.sLayerElemName),dlgPrt=dlgLyr.parentElement?dlgLyr.parentElement:dlgLyr.parentNode;if(dlgPrt.id!=sContentLayer)
{var gryLyr=oD.getUIElem('lyrGrayout_sec'),progLyr=oD.getUIElem('lyrProgressIndicator_sec'),shLyr=oD.getUIElem(shadowLyr),mainLyr=oD.getUIElem(sContentLayer);dlgPrt.removeChild(dlgLyr);dlgPrt.removeChild(progLyr);mainLyr.appendChild(dlgLyr);mainLyr.appendChild(progLyr);if(shLyr)
{bd.removeChild(shLyr);mainLyr.appendChild(shLyr);}
var glPrt=gryLyr.parentElement?gryLyr.parentElement:gryLyr.parentNode;if(glPrt.id!=sContentLayer)
{glPrt.removeChild(gryLyr);mainLyr.appendChild(gryLyr);}}}
if(!oL)
{if(pUrl!="")
oL=new EbayHTMLOverlayUrl(this,c.sLayerElemName,c);else
oL=new EbayHTMLOverlayContent(this,c.sLayerElemName,c);}
else
{oL.sWidth=c.width;oL.sHeight=c.height;}
oL.bIsMotors=c.bIsMotors;oL.centerTop=this.getDialogTop;if(!pIsSuper)
{cLyr=this._getControl(sContentLayer);if(cLyr)
{if(!cLyr.eElem)
cLyr.bind();}
else
{cLyr=new EbayHTMLLayer(this,sContentLayer)
cLyr.bind();}}
if(pUrl!="")
{var oPiol=this._getControl("lyrProgressIndicator_sec");if(!oPiol)
oPiol=new EbayHTMLOverlayContent(this,"lyrProgressIndicator_sec",c);else
{oPiol.sWidth=c.width;oPiol.sHeight=c.height;}
oPiol.bIsMotors=c.bIsMotors;oPiol.centerTop=this.getDialogTop;if(cLyr)
oPiol.iTopPadding=iT;oPiol.iLeftPadding=iL;oPiol.bNoSetContent=oPiol.bForceReposition=true;oPiol.bClearValueOnClose=false;if(!oPiol.eElem)
oPiol.bind();if(oPiol.eElem)
{oPiol.width(parseInt(oL.sWidth)+4+'px');oPiol.height(parseInt(oL.sHeight)+4+'px');oPiol.display();var oShadow=this.controls[shadowLyr];if(!oShadow)
{oShadowDiv=oD.createElement('div');oShadowDiv.id=shadowLyr;var shadowPrt=oPiol.eElem.parentElement?oPiol.eElem.parentElement:oPiol.eElem.parentNode;shadowPrt.appendChild(oShadowDiv);oShadow=new EbayHTMLLayer(this,shadowLyr);oShadow.bind();}
if(!oShadow.eElem)
oShadow.bind();oShadow.width(oL.sWidth);oShadow.height(oL.sHeight);oShadow.top((oPiol.top()+7)+'px');oShadow.left((oPiol.left()+7)+'px');oShadow.show(true);}}
if(!pIsSuper)
{var gLyr=this.controls['grayout_lyr'],sw,sh;if(gLyr)
{var aPageSize=ebay.oUtils.oPositioning.getPageSize();sw=bd.style.overflow=='hidden'?cLyr.eElem.scrollWidth:aPageSize[0];sh=bd.style.overflow=='hidden'?cLyr.eElem.scrollHeight:aPageSize[1];gLyr.display(sw,sh);}}
oL.iLeftPadding=iL;oL.iTopPadding=iT;oL.bDowngradeDomain=false;oL.bForceReposition=true;oL.sUrl=pUrl;if(!oL.eElem)
oL.bind();if(oL.eElem)
{oL.display();if(oL.bIsMotors){window.scrollBy(0,-300);}
this.oDisplayedOverlay=oL;return true;}
return false;}}
ebay.oP.getDialogTop=function()
{with(this)
{bIsMotors=typeof bIsMotors!='undefined'?bIsMotors:false;var oD=oDocument,bd=oD.doc.body,winHeight=bd.clientHeight,cL=oGlobals.oClient,cLyr=oD.getUIElem('content');if(!cL.bIE)
winHeight=oD.win.innerHeight;else if(typeof(winHeight)=='undefined'&&cL.iVer>=6)
winHeight=oD.doc.documentElement.clientHeight;var s=0;if(bd.style.overflow=='hidden')
s=cLyr.scrollTop;else if(bd.scrollTop>0)
s=bd.scrollTop;else if(document.documentElement)
s=document.documentElement.scrollTop;s=bIsMotors?parseInt(s)-250:parseInt(s)+100;sTop=(parseInt(s)+iTopPadding)+'px';return s;}}

// \include\lib\_global\features\syi3\describe\inventory.js 

ebay.oP.initInventory=function()
{var t=this;new EbaySYI3Inventory(t,'inventory',t.parent.getConfig('Selling.Describe.Inventory'));}

// \include\lib\_global\features\syi3\describe\motors_locationdisable.js 

ebay.oP.initLocationDisable=function(){var t=this,cfg=t.oDocument.getConfig('Motors.SYI.Location');if(cfg)
new EbaySYI3LocationDisable(t,'Motors.LocationDisable',cfg);}
function EbaySYI3LocationDisable(pParent,pName,pCfg)
{if(!this.objType)
this.objType="EbaySYI3LocationDisable";this.base=EbayBaseControl;this.base(pParent,pName);var t=this,oC=t.oCfg=pCfg;t.aAddressText=oC.aElemTextArray;t.iLen=t.aAddressText.length;var oTextbox=[];this.init=function()
{var t=this;with(t)
{var oCheck=new EbayHTMLCheckbox(t,oC.sCheck);oCheck.onclick=t.disableLocation;for(i=0;i<iLen;i++)
{oTextbox[i]=new EbayHTMLText(t,aAddressText[i]);}}}
this.disableLocation=function()
{var t=this;with(t.parent)
{for(i=0;i<iLen;i++)
oTextbox[i].enable(t.isChecked());}}
this.init();}

// \include\lib\_global\features\syi3\describe\dyn_price.js 

ebay.oP.setFeeCalc=function()
{var t=this,cp=t.oUtils.controlPath(t);setTimeout(cp+".initFeeCalc()",1000);}
ebay.oP.initFeeCalc=function()
{var oRE=this.controls['SYI3-Rules-Engine'];if(oRE)
oRE.post(oRE);}

// \include\lib\_global\features\syi3\describe\back_to_previous.js 

ebay.oP.initBackToPrevious=function()
{var t=this,oD=t.parent,c;c=oD.getConfig("SYI3.Motors.BackToPrevious");if(c)
{var oLink=new EbayHTMLAnchor(t,oEC.sLink,false,c);oLink.onclick=function()
{var t=this,p=t.parent,c=t.oConfig,oFrm=t.parent.controls[oEC.sFormName],oAid=p.parent._getControl(oEC.sAidName);if(!oFrm)
oFrm=new EbayHTMLForm(t,oEC.sFormName);if(!oAid)
oAid=new EbayHTMLText(t,oEC.sAidName);if(!oFrm.eElem)
oFrm.bind();if(!oAid.eElem)
oAid.bind();oAid.setValue(c.sAidVal);oFrm.submit();return false;}}}

// \include\lib\_global\features\syi3\describe\policies.js 

function EbaySellerPolicies(pParent,pName,pCfg)
{var t=this,oC=pCfg,cCfg=ebay.oDocument.getConfig('Selling.Common');if(!this.objType)
this.objType="EbaySellerPolicies";this.base=EbayBaseControl;this.base(pParent,pName);t.oCfg=pCfg;t.width=pCfg.width=800;t.height=pCfg.height=535;oC.bOnFocus=cCfg.bOnFocus;oC.sStartLyrName=cCfg.sStartLyrName;if(t.oDocument.getUIElem('ShippingProfile'))
{ebay.oP.oCostProf=t.oDocument.getUIElem('ShippingProfile').value;}
ebay.oP.bOnchange=false;ebay.oP.bShipOnChange=false;ebay.oP.OC=false;oC.bForceReposition=true;oC.bClearValueOnClose=false;t.currPolicy={};t.oOverlay=pCfg.oOverlay=new EbayHTMLOverlayContent(this,oC.sOlyDiv,oC);t.oOverlay.isOpen=pCfg.oOverlay.isOpen=false;t.oSPCfg=ebay.oDocument.oPage.oSPCfg=oC;t.showPolicyDesc=ebShowPolicyDesc;t.showPolicyView=ebShowPolicyView;t.closeOly=ebCloseOly;t.greyLyr=ebGreyLyr;t.showDetails=pCfg.showDetails;t.oSel=new EbayHTMLSelect(t,oC.sPolicyDD);t.oSel.bind();t.oSelShip=new EbayHTMLSelect(t,'ShippingProfile');t.oSelShip.bind();t.rand=function(){return(new Date).getTime();}
t.aDescArr=oC.aDescTxt;t.sChildBase=oC.sChildBase;t.sRaptorUrl=oC.sRaptorUrl;t.sReferrer=oC.sReferrer;t.sDftTxt=oC.sDeflTxt;t.sOneListTxt=oC.sOneListTxt;t.sManyListTxt=oC.sManyListTxt;t.aPolicyArr=oC.aPolicyDet;for(var i in t.aPolicyArr){if(i!=-1){t.aPolicyArr[i].Name=t.aDescArr[i].Name;t.aPolicyArr[i].Desc=t.aDescArr[i].Desc;}}
t.oViewWrap=new EbayHTMLLayer(t,oC.sViewWrap);t.oViewWrap.bind();t.oHde=new EbayHTMLAnchor(t,oC.sHideLnk);t.oHde.bind();t.oShw=new EbayHTMLAnchor(t,oC.sShowLnk);t.oShw.bind();t.oDescSpan=new EbayHTMLLayer(t,oC.sDescSpan);t.oDescSpan.bind();t.oDescDiv=new EbayHTMLLayer(t,oC.sDescDiv);t.oDescDiv.bind();t.oCls=new EbayHTMLAnchor(t,oC.sClsBtn);t.oCls.bind();t.oCrLnk=new EbayHTMLAnchor(t,oC.sCrLnk);t.oCrLnk.bind();t.oEdLnk=new EbayHTMLAnchor(t,oC.sEdLnk);t.oEdLnk.bind();t.oEntCost=new EbayHTMLAnchor(t,oC.sEntCost);t.oEntCost.bind();t.oEdCost=new EbayHTMLAnchor(t,oC.sEdCost);t.oEdCost.bind();t.oOverrideDiv=new EbayHTMLLayer(t,oC.sOverrideDiv);t.oOverrideDiv.bind();t.oPipe=new EbayHTMLLayer(t,oC.sPipe);t.oPipe.bind();t.oCostBH=new EbayHTMLLayer(t,'bubble_SCO');t.oCostBH.bind();t.oCloseId=new EbayHTMLAnchor(t,oC.sclsId);t.oCloseId.bind();t.oHiddenId=new EbayHTMLLayer(t,oC.shidId);t.oHiddenId.bind();t.oCostHidId=new EbayHTMLLayer(t,oC.sCostHidId);t.oCostHidId.bind();oShippingOverride=t.oDocument.getUIElem('shippingOverride');if(oShippingOverride&&oShippingOverride.value)
ebay.oP.oShipOverrideCost=oShippingOverride.value;t.oJITDiv=new EbayHTMLLayer(t,oC.sJIT);t.oJITDiv.bind();if(oC.aJITparam){t.oCloseId.aHidName=oC.aJITparam;var oJit=new EbayHTMLText(t.oCloseId,oC.aJITparam);oJit.bind();}
if(t.oJITDiv.eElem){t.oJITDiv.show(true);t.oCloseId.onclick=function()
{t.oHiddenId.eElem.value=true;t.oJITDiv.show(false);if(this.aHidName){oHid=this._getControl(this.aHidName);oHid.setValue(true);}}}
t.oViewIfrm=new EbayHTMLFrame(t,oC.viewFrame);t.oViewIfrm.bind();t.oViewDiv=new EbayHTMLLayer(t,oC.viewFrameDiv);t.oViewDiv.bind();t.oViewInrDiv=new EbayHTMLLayer(t,oC.viewFrameInDiv);t.oViewInrDiv.bind();t.oThrDiv=new EbayHTMLLayer(t,oC.viewFrameThr);t.oThrDiv.bind();t.oStickyIfrm=new EbayHTMLFrame(t,'policiesSticky');t.oStickyIfrm.bind();t.oStickyFld=new EbayHTMLFrame(t,oC.sDpField);t.oStickyFld.bind();t.oHde.onclick=function(){t.showDetails=false;t.oHde.show(false);t.oShw.show(true);t.oViewDiv.show(false);if(!t.oStickyIfrm.eElem)
t.oStickyIfrm.bind();if(!t.oStickyFld.eElem)
t.oStickyFld.bind();if(t.oStickyFld.eElem)
t.oStickyFld.eElem.value=t.showDetails;dpFieldState='';fld=new EbayHTMLFormElem(t,'PaymentProfileDescDP');fld.bind();if(fld.eElem)
dpFieldState+='&PaymentProfileDescDP='+fld.eElem.value;fld=new EbayHTMLFormElem(t,'ShippingProfileDescDP');fld.bind();if(fld.eElem)
dpFieldState+='&ShippingProfileDescDP='+fld.eElem.value;fld=new EbayHTMLFormElem(t,'ReturnProfileDescDP');fld.bind();if(fld.eElem)
dpFieldState+='&ReturnProfileDescDP='+fld.eElem.value;t.oStickyIfrm.eElem.src=t.oCfg.sDpUrl+dpFieldState;}
t.oShw.onclick=function(){t.showDetails=true;t.showPolicyView();if(!t.oStickyIfrm.eElem)
t.oStickyIfrm.bind();if(!t.oStickyFld.eElem)
t.oStickyFld.bind();if(t.oStickyFld.eElem)
t.oStickyFld.eElem.value=t.showDetails;dpFieldState='';fld=new EbayHTMLFormElem(t,'PaymentProfileDescDP');fld.bind();if(fld.eElem)
dpFieldState+='&PaymentProfileDescDP='+fld.eElem.value;fld=new EbayHTMLFormElem(t,'ShippingProfileDescDP');fld.bind();if(fld.eElem)
dpFieldState+='&ShippingProfileDescDP='+fld.eElem.value;fld=new EbayHTMLFormElem(t,'ReturnProfileDescDP');fld.bind();if(fld.eElem)
dpFieldState+='&ReturnProfileDescDP='+fld.eElem.value;t.oStickyIfrm.eElem.src=t.oCfg.sDpUrl+dpFieldState;};t.getSelectedProfile=function(){return t.oSel.eElem&&(t.oSel.getSelectedValue()||t.oSel.eElem.value);};t.oCls.onclick=function(){this.parent.closeOly();};t.ifm=ifm=document.createElement("Iframe");t.ifm.id=t.oCfg.iframeID;t.ifm.style.height=535+"px";t.ifm.style.width=800+"px";t.ifm.setAttribute("frameborder","0");t.ifm.setAttribute("allowtransparency","true");t.oCrLnk.onclick=function(pEvent){var p=this.parent,c=p.oCfg,ifmUrl;if(oShippingOverride)
oShippingOverride.value="";ifmUrl=t.sChildBase;var bNewCalc=oC.bNewCalc,shipCalcValues=oC.shipCalcValues,itemTitle="",itemTleElem=ebay.oDocument.getUIElem("title");if(itemTleElem)
itemTitle=itemTleElem.Value;if(bNewCalc)
{var n=shipCalcValues.split("&");shipCalcValues="";for(i=0;i<n.length;i++)
{var id=n[i].substring(0,n[i].indexOf('=')),e=document.getElementById(id);if(e){if(oC.bShipCalV2Enabled)
v=((e.type!="checkbox")?e.value:(e.checked?true:false));else
v=((e.type!="checkbox")?e.value:(e.checked?"on":"off"));n[i]=n[i].replace("#",v);shipCalcValues+=(shipCalcValues!="")?'&'+n[i]:n[i];}}}
if(c.isVehicleCat)
ifmUrl+="?catId="+c.isVehicleCat+"&renderType=overlay&source=SYI&"+shipCalcValues+"&referrer="+encodeURIComponent(document.location.href);else
ifmUrl+="?catId=all&renderType=overlay&source=SYI&"+shipCalcValues+"&referrer="+encodeURIComponent(document.location.href);ifmUrl+="&title="+encodeURIComponent(itemTitle);ifmUrl+="&categoryId="+encodeURIComponent(c.categoryId);if(oC.bShipCalV2Enabled){estiWgtElem=ebay.oDocument.getUIElem("estimatedWeight"),mjrWgtElem=ebay.oDocument.getUIElem("majorUnitWeight"),mnrWgtElem=ebay.oDocument.getUIElem("minorUnitWeight");if(estiWgtElem&&mjrWgtElem&&mnrWgtElem){estiWgtVal=estiWgtElem.value;if(estiWgtVal==0){if(mnrWgtElem.value==0&&mjrWgtElem.value==1){minorUnitWeightVal=16;majorUnitWeightVal=0;}
else if(mnrWgtElem.value>=0&&mjrWgtElem.value>1){minorUnitWeightVal=mnrWgtElem.value;majorUnitWeightVal=mjrWgtElem.value;}
else{minorUnitWeightVal=mnrWgtElem.value;majorUnitWeightVal=mjrWgtElem.value;}}
else if(estiWgtVal==1){if(mnrWgtElem.value==0){minorUnitWeightVal=16;majorUnitWeightVal=0;}else{minorUnitWeightVal=mnrWgtElem.value;majorUnitWeightVal=0;}}
else if(estiWgtVal>1){minorUnitWeightVal=0;majorUnitWeightVal=estiWgtVal;}}
ifmUrl+="&majorUnitWeight="+majorUnitWeightVal+"&minorUnitWeight="+minorUnitWeightVal+"&v=2";}
p.ifm.src=ifmUrl;document.getElementById(c.sOlyDiv).appendChild(p.ifm);p.greyLyr();t.eventId=oC.policyType+'_create';BPXD.addEventListener(t.eventId,t.managePolicy,this);};t.oEdLnk.onclick=function(pEvent){var p=this.parent,enUrl=encodeURIComponent(document.location.href),c=p.oCfg,ifmUrl;var bNewCalc=oC.bNewCalc,shipCalcValues=oC.shipCalcValues,itemTitle="",itemTleElem=ebay.oDocument.getUIElem("title");if(itemTleElem)
itemTitle=itemTleElem.Value;if(bNewCalc)
{var n=shipCalcValues.split("&");shipCalcValues="";for(i=0;i<n.length;i++)
{var id=n[i].substring(0,n[i].indexOf('=')),e=document.getElementById(id);if(e){if(oC.bShipCalV2Enabled)
v=((e.type!="checkbox")?e.value:(e.checked?true:false));else
v=((e.type!="checkbox")?e.value:(e.checked?"on":"off"));n[i]=n[i].replace("#",v);shipCalcValues+=(shipCalcValues!="")?'&'+n[i]:n[i];}}}
if(t.getSelectedProfile()!="-1"){ifmUrl=t.sChildBase+"?renderType=overlay&profileId="+t.getSelectedProfile()+"&source=SYI&"+shipCalcValues;if(c.isVehicleCat===true)
ifmUrl+="&catId=motors_vehicle";if(c.itemId&&c.itemId!='')
ifmUrl+="&itemId="+c.itemId;if(c.isTemplate)
ifmUrl+="&entityType=SM_TEMPLATE";ifmUrl+="&referrer="+enUrl;ifmUrl+="&title="+encodeURIComponent(itemTitle);ifmUrl+="&categoryId="+encodeURIComponent(c.categoryId);if(oC.bShipCalV2Enabled){estiWgtElem=ebay.oDocument.getUIElem("estimatedWeight"),mjrWgtElem=ebay.oDocument.getUIElem("majorUnitWeight"),mnrWgtElem=ebay.oDocument.getUIElem("minorUnitWeight");if(estiWgtElem&&mjrWgtElem&&mnrWgtElem){estiWgtVal=estiWgtElem.value;if(estiWgtVal==0){if(mnrWgtElem.value==0&&mjrWgtElem.value==1){minorUnitWeightVal=16;majorUnitWeightVal=0;}
else if(mnrWgtElem.value>=0&&mjrWgtElem.value>1){minorUnitWeightVal=mnrWgtElem.value;majorUnitWeightVal=mjrWgtElem.value;}
else{minorUnitWeightVal=mnrWgtElem.value;majorUnitWeightVal=mjrWgtElem.value;}}
else if(estiWgtVal==1){if(mnrWgtElem.value==0){minorUnitWeightVal=16;majorUnitWeightVal=0;}else{minorUnitWeightVal=mnrWgtElem.value;majorUnitWeightVal=0;}}
else if(estiWgtVal>1){minorUnitWeightVal=0;majorUnitWeightVal=estiWgtVal;}}
ifmUrl+="&majorUnitWeight="+majorUnitWeightVal+"&minorUnitWeight="+minorUnitWeightVal+"&v=2";}
p.ifm.src=ifmUrl;document.getElementById(c.sOlyDiv).appendChild(p.ifm);p.greyLyr();t.eventId=oC.policyType+'_edit';BPXD.addEventListener(t.eventId,t.managePolicy,this);}};t.oEntCost.onclick=function(pEvent){var p=this.parent,enUrl=encodeURIComponent(document.location.href),c=p.oCfg,ifmUrl;if(t.getSelectedProfile()!="-1"){ifmUrl=t.sRaptorUrl+"/businesspolicy/shipcostoverride?source=manage&renderType=overlay&profileId="+t.getSelectedProfile()+"&referrer="+enUrl;p.ifm.src=ifmUrl;document.getElementById(c.sOlyDiv).appendChild(p.ifm);p.greyLyr();t.eventId=oC.policyType+'_cost_override';BPXD.addEventListener(t.eventId,t.managePolicy,this);}};t.oEdCost.onclick=function(pEvent){var p=this.parent,enUrl=encodeURIComponent(document.location.href),c=p.oCfg,ifmUrl;if(t.getSelectedProfile()!="-1"){overrideCost=t.oCostHidId.eElem?(t.oCostHidId.eElem.value?t.oCostHidId.eElem.value:(ebay.oP.oShipOverrideCost!=''?ebay.oP.oShipOverrideCost:'')):oCost;ifmUrl=t.sRaptorUrl+"/businesspolicy/shipcostoverride?source=manage&renderType=overlay&profileId="+t.getSelectedProfile()+"&overridenCost="+overrideCost+"&edit=true&referrer="+enUrl;p.ifm.src=ifmUrl;document.getElementById(c.sOlyDiv).appendChild(p.ifm);p.greyLyr();t.eventId=oC.policyType+'_cost_override';BPXD.addEventListener(t.eventId,t.managePolicy,this);}};function ebGreyLyr(){var gLyr=this.oDocument._getControl('grayout_lyr'),sw,sh,bd;if(gLyr){bd=this.oDocument.doc.body,aPageSize=ebay.oUtils.oPositioning.getPageSize(),bStyleOverflow=bd.style.overflow=='hidden',cLyr=this.oDocument.getUIElem('content');sw=bStyleOverflow?cLyr.scrollWidth:aPageSize[0];sh=bStyleOverflow?cLyr.scrollHeight:aPageSize[1];gLyr.display(sw,sh);}
t.openThrobbr();}
t.getPwd=function(profileId){if(!t.oSel.eElem)t.oSel.bind();var oRE=ebay._getControl('SYI3-Rules-Engine');if(oRE&&ebay.oP.bShipOnChange)
{clearTimeout(t.timeoutVar);oRE.sUrl=oRE.sUrl+'&sellerProfileId='+profileId+'&ShippingProfile='+profileId;oRE.setCustomParams('ShippingProfile',profileId);oRE.post(oRE);oRE.sPostListner+='ebay.oP.setPwd("policy", oXml);';}
else{t.timeoutVar=setTimeout(function(){t.getPwd(profileId)},1000);}}
ebay.oP.setPwd=function(pVal,pXml){var t=this,oD=t.parent,c=oEC;var oRE=ebay._getControl('SYI3-Rules-Engine');if(oRE&&(pVal=='policy'))
{var sInd=oRE.sUrl.indexOf("&sellerProfileId=");if(sInd!=-1)
{oRE.sUrl=oRE.sUrl.substring(0,sInd);}
if(pXml){var scripts=pXml.getElementsByTagName('script');for(var i=0;i<scripts.length;i++){if(scripts[i].textContent){var script=scripts[i].textContent.trim();if(script&&(script.length>0)){if(script.indexOf('ebay.oP.hide')>-1){eval(script);}}}
else if(scripts[i].childNodes[0]){var script=scripts[i].childNodes[0].nodeValue.trim();if(script&&(script.length>0)){if(script.indexOf('ebay.oP.hide')>-1){eval(script);}}}}}}}
ebay.oP.setW=function(bFreightQuote){var t=this,sbpCfg=ebay.oDocument.getConfig('Selling.Describe.Shipping.SellerPolicies');if((t.oDocument.getUIElem('ShippingProfile'))&&(!sbpCfg.bHiddenWeight)){var estweight=new EbayHTMLSelect(t,'estimatedWeight');t.majorUnitWeight_inp=new EbayHTMLLayer(t,'majorUnitWeight_inp');t.majorUnitWeight_inp.bind();t.minorUnitWeight_inp=new EbayHTMLLayer(t,'minorUnitWeight_inp');t.minorUnitWeight_inp.bind();t.majorUnitDiv_inpGrp=new EbayHTMLLayer(t,'majorUnitDiv_inpGrp');t.majorUnitDiv_inpGrp.bind();t.majorUnitDiv_inp=new EbayHTMLLayer(t,'majorUnitDiv_inp');t.majorUnitDiv_inp.bind();if(!estweight.eElem){estweight.bind();}
if(bFreightQuote){var e=t.majorUnitWeight_inp;if(e){e.show(true);}
e=t.minorUnitWeight_inp;if(e){e.show(false);}
e=t.majorUnitDiv_inp;if(e){e.show(false);}
e=t.majorUnitDiv_inpGrp;if(e){e.show(false);}}
else if(estweight.eElem&&(estweight.eElem.value==1)){var e=t.majorUnitWeight_inp;if(e){e.show(false);}
e=t.minorUnitWeight_inp;if(e){e.show(true);}
e=t.majorUnitDiv_inp;if(e){e.show(false);}
e=t.majorUnitDiv_inpGrp;if(e){e.show(false);}}
else if(estweight.eElem&&(estweight.eElem.value==0)){var e=t.majorUnitWeight_inp;if(e){e.show(true);}
e=t.minorUnitWeight_inp;if(e){e.show(true);}
e=t.majorUnitDiv_inp;if(e){e.show(true);}
e=t.majorUnitDiv_inpGrp;if(e){e.show(true);}}
else{var e=t.majorUnitWeight_inp;if(e){e.show(false);}
e=t.minorUnitWeight_inp;if(e){e.show(false);}
e=t.majorUnitDiv_inp;if(e){e.show(false);}
e=t.majorUnitDiv_inpGrp;if(e){e.show(true);}}}}
ebay.oP.hideFlat=function(bHide){bShow=false;if(oShippingOverride){if(oShippingOverride.value=='{}'){ebay.oP.gl=false;ebay.oP.oShipOverrideCost=''}}
if(!ebay.oP.gl){if(ebay.oP.bOnchange||oShippingOverride&&oShippingOverride.value){if(oShippingOverride.value=='{}')bShow=false;else
bShow=true;bHide=false;}
var oEntFlat=ebay.oDocument.getUIElem('enterFlatCost'),oEdFlat=ebay.oDocument.getUIElem('editFlatCost'),oOrCost=ebay.oDocument.getUIElem('overrideListing'),oCPipe=ebay.oDocument.getUIElem('costPipe');oBH=ebay.oDocument.getUIElem('bubble_SCO');if(bHide){if(oEntFlat){oEntFlat.setAttribute('style','display:none');oCPipe.setAttribute('style','display:none');if(oEdFlat)
oEdFlat.setAttribute('style','display:none');if(oOrCost)
oOrCost.setAttribute('style','display:none');if(oBH)
oBH.setAttribute('style','display:none');}}else{if(oEntFlat)
oEntFlat.setAttribute('style','display:all');if(oCPipe)
oCPipe.setAttribute('style','display:all');if(oEdFlat)
oEdFlat.setAttribute('style','display:none');if(oOrCost)
oOrCost.setAttribute('style','display:none');if(oBH)
oBH.setAttribute('style','display:all');}
if(bShow){if(oEntFlat)
oEntFlat.setAttribute('style','display:none');if(oEdFlat)
oEdFlat.setAttribute('style','display:all');if(oOrCost)
oOrCost.setAttribute('style','display:all');if(oBH)
oBH.setAttribute('style','display:all');}}
ebay.oP.gl=false;ebay.oP.bOnchange=false;}
ebay.oP.hidePwd=function(bHide,bFreight){var cnfg=ebay.oDocument.getConfig('Selling.Common');if(bHide){if(bFreight){if(ebay.oDocument.getUIElem('bp-pkgdetails_inpGrp'))ebay.oDocument.getUIElem('bp-pkgdetails_inpGrp').setAttribute('style','display:all');var dimElem=document.getElementById("bp-pkgdetails-dim_inpGrp");var weiElem=document.getElementById("bp-pkgdetails-wei_inpGrp");if(dimElem&&weiElem){weiElem.parentNode.appendChild(dimElem);}
if(ebay.oDocument.getUIElem('majorUnitWeight_inp'))ebay.oDocument.getUIElem('majorUnitWeight_inp').setAttribute('style','display:all');if(ebay.oDocument.getUIElem('bp-pkgdetails-dim_inpGrp'))ebay.oDocument.getUIElem('bp-pkgdetails-dim_inpGrp').setAttribute('style','display:all');if(ebay.oDocument.getUIElem('estimatedWeight'))ebay.oDocument.getUIElem('estimatedWeight').setAttribute('style','display:none');if(ebay.oDocument.getUIElem('bp-pkgdetails-wei_ttl'))ebay.oDocument.getUIElem('bp-pkgdetails-wei_ttl').setAttribute('style','display:all');if(ebay.oDocument.getUIElem('majorUnitWeight_helpLink'))ebay.oDocument.getUIElem('majorUnitWeight_helpLink').setAttribute('style','display:all');}
else{if(ebay.oDocument.getUIElem('bp-pkgdetails_inpGrp'))ebay.oDocument.getUIElem('bp-pkgdetails_inpGrp').setAttribute('style','display:none');if(ebay.oDocument.getUIElem('bp-pkgdetails-dim_inpGrp'))ebay.oDocument.getUIElem('bp-pkgdetails-dim_inpGrp').setAttribute('style','display:none');if(ebay.oDocument.getUIElem('estimatedWeight'))ebay.oDocument.getUIElem('estimatedWeight').setAttribute('style','display:none');if(ebay.oDocument.getUIElem('bp-pkgdetails-wei_ttl'))ebay.oDocument.getUIElem('bp-pkgdetails-wei_ttl').setAttribute('style','display:none');if(ebay.oDocument.getUIElem('majorUnitWeight_helpLink'))ebay.oDocument.getUIElem('majorUnitWeight_helpLink').setAttribute('style','display:none');if(ebay.oDocument.getUIElem('majorUnitWeight_inp'))ebay.oDocument.getUIElem('majorUnitWeight_inp').setAttribute('style','display:none');}
if(ebay.oDocument.getUIElem('pkgSize_inp'))ebay.oDocument.getUIElem('pkgSize_inp').setAttribute('style','display:none');if(ebay.oDocument.getUIElem('minorUnitWeight_inp'))ebay.oDocument.getUIElem('minorUnitWeight_inp').setAttribute('style','display:none');if(ebay.oDocument.getUIElem('pkgIrregular_ctr_1'))ebay.oDocument.getUIElem('pkgIrregular_ctr_1').setAttribute('style','display:none');}
else{if(ebay.oDocument.getUIElem('bp-pkgdetails_inpGrp'))ebay.oDocument.getUIElem('bp-pkgdetails_inpGrp').setAttribute('style','display:all');if(ebay.oDocument.getUIElem('bp-pkgdetails-dim_inpGrp'))ebay.oDocument.getUIElem('bp-pkgdetails-dim_inpGrp').setAttribute('style','display:all');var pkSz=new EbayHTMLLayer(this,"pkgSize_inp");pkSz.bind();if(pkSz)
{if(cnfg.bIsPkgSizeHide)
pkSz.show(false);else
pkSz.show(true);}
if(ebay.oDocument.getUIElem('pkgIrregular_ctr_1'))ebay.oDocument.getUIElem('pkgIrregular_ctr_1').setAttribute('style','display:all');var dimElem=document.getElementById("bp-pkgdetails-dim_inpGrp");var dimElemParent=document.getElementById("bp-dim-p");if(dimElem&&dimElemParent){dimElemParent.appendChild(dimElem);}
if(ebay.oDocument.getUIElem('bp-pkgdetails-wei_ttl'))ebay.oDocument.getUIElem('bp-pkgdetails-wei_ttl').setAttribute('style','display:all');if(ebay.oDocument.getUIElem('majorUnitWeight_helpLink'))ebay.oDocument.getUIElem('majorUnitWeight_helpLink').setAttribute('style','display:all');ebay.oP.setW();}}
ebay.oP.hideGsp=function(bHide){if(bHide){if(ebay.oDocument.getUIElem('gsp_Qual_border'))ebay.oDocument.getUIElem('gsp_Qual_border').setAttribute('style','display:none');}
else{if(ebay.oDocument.getUIElem('gsp_Qual_border'))ebay.oDocument.getUIElem('gsp_Qual_border').setAttribute('style','display:all');}}
t.oSel.onchange=function(){ebay.oP.bShipOnChange=true;t.showPolicyDesc();if(t.getSelectedProfile()=="-1"){t.oDescDiv.show(false);t.oPipe.show(false);t.oEdLnk.show(false);t.oViewWrap.show(false);}else{if(t.oSelShip.eElem&&ebay.oP.oCostProf==t.oSelShip.getSelectedValue())
{t.oEdCost.show(true);t.oOverrideDiv.show(true);t.oEntCost.show(false);t.oCostBH.show(true);if(ebay.oP.oShipOverrideCost){t.oCostHidId.eElem.value=ebay.oP.oShipOverrideCost;ebay.oP.bOnchange=true;}}
else{if(t.oCostHidId.eElem)
t.oCostHidId.eElem.value="";}
t.oDescDiv.show(true);t.oPipe.show(true);t.oEdLnk.show(true);t.oViewWrap.show(true);}
t.showPolicyView();if(oC.policyType=='shipping'||oC.policyType=='payment'||oC.policyType=='return'){t.getPwd(t.getSelectedProfile());}};t.managePolicy=function(message){var obj=message,map={},l,beditMode=false,eIdx=0,profile;profile=obj.hasOwnProperty('profiledata')?obj.profiledata:"";if(profile&&profile.hasOwnProperty('id')&&profile.hasOwnProperty('name')){if(t.aPolicyArr.hasOwnProperty(profile.id)){t.setupPolicy(profile);t.oSel.setOption(profile.id,profile.name,t.oSel.getSelectedIndex(),"",false);}else{eIdx=t.oSel.eElem.length;t.aPolicyArr[profile.id]={"Count":""};t.aDescArr[profile.id]={};if(t.getSelectedProfile()=="-1"){if(!t.oJITDiv.eElem)
t.oJITDiv.bind();t.oJITDiv.show(false);t.oDescDiv.show(true);t.oPipe.show(true);t.oEdLnk.show(true);t.oViewWrap.show(true);}
t.setupPolicy(profile);t.oSel.insertOption(profile.id,profile.name,eIdx);t.oSel.selectByIndex(eIdx);}
t.showPolicyDesc();t.showPolicyView(profile);if(profile.overridenCost)
{t.oEdCost.show(true);t.oEntCost.show(false);t.oOverrideDiv.show(true);}
if(profile.hasOwnProperty('context')&&profile.context.hasOwnProperty('gspOptedIn')){t.oPolicyGSP=new EbayHTMLLayer(t,oC.sPolicyGSP);t.oPolicyGSP.bind();if(t.oPolicyGSP){t.oPolicyGSP.show(false);}}
if(profile.context.hasOwnProperty('estimatedWeight'))
estimatedWeight.value=profile.context.estimatedWeight;if(profile.context.hasOwnProperty('minorUnitWeight'))
minorUnitWeight.value=profile.context.minorUnitWeight;if(profile.context.hasOwnProperty('majorUnitWeight')){majorUnitWeight.value=profile.context.majorUnitWeight;if(oC.bShipCalV2Enabled)
estimatedWeight.value=profile.context.majorUnitWeight;}
if(profile.context.hasOwnProperty('pkgLength'))
pkgLength.value=profile.context.pkgLength;if(profile.context.hasOwnProperty('pkgWidth'))
pkgWidth.value=profile.context.pkgWidth;if(profile.context.hasOwnProperty('pkgHeight'))
pkgHeight.value=profile.context.pkgHeight;if(profile.context.hasOwnProperty('itemPostalCode'))
itemPostalCode.value=profile.context.itemPostalCode;if(profile.context.hasOwnProperty('pkgIrregular')){if(profile.context.pkgIrregular=="on"||profile.context.pkgIrregular==true)
pkgIrregular.checked=true;else
pkgIrregular.checked=false;}
if(profile.context.hasOwnProperty('pkgSize'))
pkgSize.value=profile.context.pkgSize;}
t.closeOly();ebay.oP.gl=profile.overridenCost;if(oC.policyType=='shipping'){t.getPwd(t.getSelectedProfile());}};t.setupPolicy=function(profile){var l,policyId,currDefault,el,y,listTxt='',defTxt='';if(profile.isDefault===true){for(policyId in t.aPolicyArr){if(t.aPolicyArr[policyId].Default==="true"){currDefault=policyId;break;}}
if(currDefault&&(profile.id!==currDefault)){t.aPolicyArr[currDefault].Default="false";t.aPolicyArr[profile.id].Default="true";el=t.oSel.eElem,l=el.length;for(y=0;y<l;y++){if(currDefault===el[y].value){if(t.aPolicyArr[currDefault].Count&&t.aPolicyArr[currDefault].Count!=="0"){if(t.aPolicyArr[currDefault].Count==="1"){listTxt=t.sOneListTxt;}else{listTxt=t.sManyListTxt;}}
if(listTxt){el[y].text=t.aPolicyArr[currDefault].Name+' ('+t.aPolicyArr[currDefault].Count+' '+listTxt+')';listTxt='';}else{el[y].text=t.aPolicyArr[currDefault].Name;}
break;}}}
defTxt=' - '+t.sDftTxt;}
if(t.aPolicyArr[profile.id].Count&&t.aPolicyArr[profile.id].Count!=="0"){if(t.aPolicyArr[profile.id].Count==="1"){listTxt=t.sOneListTxt;}else{listTxt=t.sManyListTxt;}}
t.aPolicyArr[profile.id].Name=profile.name;t.aPolicyArr[profile.id].Desc=profile.desc;t.aDescArr[profile.id].Name=profile.desc;t.aDescArr[profile.id].Desc=profile.desc;if(listTxt){profile.name+=' ('+t.aPolicyArr[profile.id].Count+' '+listTxt+')';}
profile.name+=defTxt;};function ebShowPolicyDesc(){var selVal=t.getSelectedProfile();if(t.aDescArr[selVal]&&t.aDescArr[selVal].Desc){sDesc=t.aDescArr[selVal].Desc;if(sDesc.contains(">")||sDesc.contains("<"))
sDesc=escapeHTMLCode(sDesc);t.oDescSpan.setValue(sDesc);}
else
t.oDescSpan.setValue('');}
function ebShowPolicyView(profileObj){var t=this,ifrmSrc="",pId="";if(t.showDetails===true){t.oHde.show(true);t.oShw.show(false);pId=profileObj?profileObj.id:t.getSelectedProfile();encURL=encodeURIComponent(document.location.href);if(t.oCostHidId.eElem&&t.oCostHidId.eElem.value!=null){if(ebay.oP.oCostProf==t.oSelShip.getSelectedValue()&&t.oCostHidId.eElem.value!=''||t.oCostHidId.eElem.value!=''){ebay.oP.bOnchange=true;}else{t.oCostHidId.eElem.value="";}
oOverrideCost=ebay.oP.bOnchange?(t.oCostHidId.eElem.value!=ebay.oP.oShipOverrideCost?t.oCostHidId.eElem.value:ebay.oP.oShipOverrideCost):t.oCostHidId.eElem.value;ifrmSrc=t.sChildBase+"?mode=view&renderType=inline&profileId="+pId+"&overridenCost="+oOverrideCost+"&rand="+t.rand()+"#"+encURL;}
else
ifrmSrc=t.sChildBase+"?mode=view&renderType=inline&profileId="+pId+"&rand="+t.rand()+"#"+encURL;if(profileObj){oCost=JSON.stringify(profileObj.overridenCost);if(profileObj.overridenCost){t.oCostHidId.eElem.value=oCost;costoverride=(oCost=='{}')?'':oCost;ifrmSrc=t.sRaptorUrl+"/businesspolicy/shipping?mode=view&renderType=inline&profileId="+pId+"&overridenCost="+costoverride+"&rand="+t.rand()+"#"+encURL;}}
else{oCostHidValue=t.oCostHidId.eElem;if(oCostHidValue&&oCostHidValue.value!='{}'&&oCostHidValue.value!='')
{ifrmSrc=t.sRaptorUrl+"/businesspolicy/shipping?mode=view&renderType=inline&profileId="+pId+"&overridenCost="+oCostHidValue.value+"&rand="+t.rand()+"#"+encURL;}}
if(!t.oViewIfrm.eElem)
t.oViewIfrm.bind();if(t.oViewIfrm.eElem){t.oViewIfrm.eElem.src=ifrmSrc;if(window['postMessage']){t.oViewIfrm.eElem.style.height="1px";t.oThrDiv.show(true);BPXD.addEventListener(oC.policyType+'_view',t.viewPolicy,this);}else{t.oViewIfrm.eElem.style.height="100px";t.oViewIfrm.eElem.style.border="1px solid #ccc";}}
t.oViewDiv.show(true);}
ebay.oP.bOnchange=false;if(!t.oStickyFld.eElem)
t.oStickyFld.bind();if(t.oStickyFld.eElem)
t.oStickyFld.eElem.value=t.showDetails;}
t.oSelShip.onchange=function()
{ebay.oP.OC=true;}
t.viewPolicy=function(message){var dim=message.hasOwnProperty('dimension')?message.dimension:"";if(ebay.oP.OC){t.myVar=setTimeout(function(){var bpCfg=ebay.oDocument.getConfig("Selling.Describe.Shipping.SellerPolicies");if(bpCfg.isMotors)
ebay.oDocument.ajaxResp=true;if(ebay.oDocument.ajaxResp&&dim&&dim.hasOwnProperty('height')){t.oThrDiv.show(false);if(!t.oViewIfrm.eElem)
t.oViewIfrm.bind();if(t.oViewIfrm.eElem)
t.oViewIfrm.eElem.style.height=dim.height+"px";clearTimeout(t.myVar);ebay.oDocument.ajaxResp=false;ebay.oP.OC=false;}},50);}
else{if(dim&&dim.hasOwnProperty('height')){t.oThrDiv.show(false);if(!t.oViewIfrm.eElem)
t.oViewIfrm.bind();if(t.oViewIfrm.eElem)
t.oViewIfrm.eElem.style.height=dim.height+"px";}
BPXD.removeEventListener(message.msgId);}};function ebCloseOly(){var t=this,gLyr=t.oDocument._getControl('grayout_lyr'),ovlay;if(t.eventId){BPXD.removeEventListener(t.eventId);t.eventId=null;ovlay=t.oOverlay;if(gLyr)
gLyr.hide();ovlay.bClearValueOnClose=false;ovlay.hide();ovlay.isOpen=false;t.oSel.enable(true);t.oSel.focus(true);var oChild=t.oDocument.getUIElem(t.oCfg.iframeID),oP;if(!oChild)
return;oP=oChild.parentNode;if(oP)
oP.removeChild(oChild);}}
t.openThrobbr=function(){var olay=this.oOverlay,c=this.oSPCfg;if(!olay.eElem){olay.bind();}
if(!olay.isOpen){olay.bNoSetContent=true;olay.eElem.style.zIndex=111;olay.eElem.style.width=t.width+'px'
olay.eElem.style.height=t.height+'px';olay.display();olay.eElem.style.display='block';olay.isOpen=true;}};if(t.getSelectedProfile()=="-1"){t.oDescDiv.show(false);t.oPipe.show(false);t.oEdLnk.show(false);t.oViewWrap.show(false);t.oEntCost.show(false);t.oEdCost.show(false);t.oOverrideDiv.show(false);if(t.oSel.eElem.id=='ShippingProfile')
{if(ebay.oDocument.getUIElem('costPipe'))
ebay.oDocument.getUIElem('costPipe').setAttribute('style','display:none');t.oCostBH.show(false);}}
else{t.showPolicyDesc();t.showPolicyView();if(oC.policyType=='shipping'){t.getPwd(t.getSelectedProfile());}}
if(oC.policyType=='shipping'){ebay.oP.setW();t.estweight=new EbayHTMLSelect(t,'estimatedWeight');if(!t.estweight.eElem)t.estweight.bind();t.estweight.onchange=function(){ebay.oP.setW();}
var dimElem=document.getElementById("bp-pkgdetails-dim_inpGrp");if(dimElem)dimElem.parentNode.id="bp-dim-p";}
if(t.getSelectedProfile()=="-1"){t.oDescDiv.show(false);t.oPipe.show(false);t.oEdLnk.show(false);t.oViewWrap.show(false);}
else{t.showPolicyDesc();t.showPolicyView();if(oC.policyType=='shipping'){t.getPwd(t.getSelectedProfile());}}}

// \include\lib\_global\features\syi3\describe\compatibilities.js 

function EbayMCPFitments(pParent,pName,pCfg)
{var t=this,oC=pCfg;if(!this.objType)
this.objType="EbayMCPFitments";this.base=EbayBaseControl;this.base(pParent,pName);t.oCfg=pCfg;t.width=pCfg.width='800px';t.height=pCfg.height='535px';if(t.oCfg.iframeHt!=null&&t.oCfg.iframeHt!=''){t.height=t.oCfg.iframeHt;}
if(t.oCfg.iframeWt!=null&&t.oCfg.iframeWt!=''){t.width=t.oCfg.iframeWt;}
oC.bForceReposition=true;oC.bClearValueOnClose=false;t.oOverlay=pCfg.oOverlay=new EbayHTMLOverlayContent(this,oC.sOlyDiv,oC);t.oOverlay.isOpen=pCfg.oOverlay.isOpen=false;t.oIfrm=new EbayHTMLFrame(t,oC.iframeID);t.oSPCfg=ebay.oDocument.oPage.oSPCfg=oC;t.closeOly=ebCloseOly;t.greyLyr=ebGreyLyr;t.oCrLnk=new EbayHTMLAnchor(t,oC.sCrLnk);t.oCrLnk.bind();t.fitsLimitExceeded=(oC.fitsLimitExceeded=='true');if(t.fitsLimitExceeded){t.fitsLimitExceededoCrLnk=new EbayHTMLAnchor(t,oC.sCrLnkFitsLimitExceed);t.fitsLimitExceededoCrLnk.bind();t.fitsLimitWarningDiv=oC.fitsLimitWarningDiv;t.fitsRdButton=oC.sCrLnk;t.fitsCountCmpDivElemName=oC.sCmpCntDiv;t.cmpSectionOuterDiv=oC.cmpSectionOuterDiv;t.fitOverlayLnk=new EbayHTMLAnchor(t,oC.fitsOverlayLnk);t.fitOverlayLnk.bind();t.fitOverlayLnk2=new EbayHTMLAnchor(t,oC.fitsOverlayLnk2);t.fitOverlayLnk2.bind();t.catyChangeBtn=new EbayHTMLAnchor(t,oC.sChangeCatbtn);t.catyChangeBtn.bind();t.fitsLimitChangeCaty=new EbayHTMLAnchor(t,oC.sFitsLimitChangeCaty);t.fitsLimitChangeCaty.bind();t.changeCatFn=ChangeCat;t.sActionValue=oC.sActionValue;}
t.oCrLnkLbl=oC.sCrLnkLabel;t.isDE=oC.bIsDE;t.sRaptorUrl=oC.sRaptorUrl;t.getElementsByClass=getElementsByClass;t.cmpCnt=oC.sCmpCnt;t.sCmpCntMany=oC.sCmpCntMany;t.sCmpCntOne=oC.sCmpCntOne;if(t.isDE=="false"&&t.getElementsByClass(t.cmpCnt)[0]){if(t.getElementsByClass(t.cmpCnt)[0].innerHTML>1)
{if(document.getElementById(t.sCmpCntMany))document.getElementById(t.sCmpCntMany).style.display="block";}
else if(t.getElementsByClass(t.cmpCnt)[0].innerHTML>0)
{if(document.getElementById(t.sCmpCntOne))document.getElementById(t.sCmpCntOne).style.display="block";}}
t.veTxt=oC.viewEditCmpTxt;t.addTxt=oC.addCmpTxt;t.CmpCntDiv=oC.sCmpCntDiv;t.helpLnk=new EbayHTMLAnchor(t,oC.sLearnMore);t.helplinktxt=oC.sLearnMoreLink;t.helpLnk.bind();t.chkMessage=checkMessage;t.numExct=extractNumbers;t.openOverlay=openOverlay;t.viewmode=(oC.isViewMode=='true');t.oCls=new EbayHTMLAnchor(t,oC.sCloseBt);t.oCls.bind();t.isTecDocFlow=(oC.isTecDocFlow=='true');if(t.isTecDocFlow){window.FitmentOverlay=openOverlay;t.TDAjax=TDAjaxCall;linkObj=t.getElementsByClass(oC.tecdocManualEditLnkClass);if(linkObj!=null&&linkObj!=undefined){for(i=0;i<linkObj.length;i++){linkObj[i].onclick=function(){t.openOverlay();}}}}
t.processDataResponse=function(pResp)
{var jsonResp=pResp.sResponseText;if(jsonResp==null)
{return;}
var strtIndex=jsonResp.indexOf('"data":');if(strtIndex!=-1){var endIndex=jsonResp.indexOf("}",strtIndex);if(endIndex!=-1){var resp=jsonResp.substring(strtIndex,endIndex+1);resp="{"+resp+"}";var obj=JSON.parse(resp);obj=obj.data;if(obj.status=="Success")
{window.TDFitmentCount=obj.tecdocFitmentCount;window.TotalCompatibiltyCount=obj.fitmentCount;}}}};var func=function(event){t.chkMessage(event);};t.oCls.onclick=function(){this.parent.closeOly();};if(t.fitsLimitExceeded){t.fitsLimitExceededoCrLnk.onclick=function(pEvent){t.openOverlay();};t.fitOverlayLnk.onclick=function(pEvent){t.openOverlay();};t.fitOverlayLnk2.onclick=function(pEvent){t.openOverlay();};t.catyChangeBtn.onclick=function(pEvent){t.changeCatFn();};t.fitsLimitChangeCaty.onclick=function(pEvent){t.changeCatFn();};}
t.helpLnk.onclick=function(pEvent){var p=this.parent,c=p.oCfg;params="scrollbars=1";params+='width='+screen.width/3;params+=', height='+screen.height/2;params+=', left='+(((screen.width/3)*2)-15);window.open(p.helplinktxt,'',params);};t.oCrLnk.onclick=function(pEvent){t.openOverlay();};t.openThrobbr=function(){var olay=this.oOverlay,c=this.oSPCfg;if(!olay.eElem){olay.bind();}
if(!olay.isOpen){var oD=ebay.oDocument,bd=oD.doc.body;if(bd.style.overflow=='hidden')
{var dlgLyr=oD.getUIElem("mcpDiv"),sContentLayer='content',dlgPrt=dlgLyr.parentElement?dlgLyr.parentElement:dlgLyr.parentNode;if(dlgPrt.id!=sContentLayer)
{var mainLyr=oD.getUIElem(sContentLayer),gryLyr=oD.getUIElem('lyrGrayout_sec');dlgPrt.removeChild(dlgLyr);mainLyr.appendChild(dlgLyr);var glPrt=gryLyr.parentElement?gryLyr.parentElement:gryLyr.parentNode;if(glPrt.id!=sContentLayer)
{glPrt.removeChild(gryLyr);mainLyr.appendChild(gryLyr);}}}
olay.bNoSetContent=true;olay.eElem.style.zIndex=111;olay.eElem.style.width=t.width;olay.eElem.style.height=t.height;var ovrWidth=t.numExct(t.width);ovrWidth=ovrWidth[0];var leftVal=screen.width-(ovrWidth*1);olay.eElem.style.left=(leftVal/2)+'px';olay.eElem.style.top=t.getDialogTop()+'px';olay.display();olay.eElem.style.display='block';olay.isOpen=true;}
document.getElementById('compatibilityIframe').focus();};t.getDialogTop=function()
{with(this)
{bIsMotors=typeof bIsMotors!='undefined'?bIsMotors:false;var oD=oDocument,bd=oD.doc.body,winHeight=bd.clientHeight,cL=oGlobals.oClient,cLyr=oD.getUIElem('content');if(!cL.bIE)
winHeight=oD.win.innerHeight;else if(typeof(winHeight)=='undefined'&&cL.iVer>=6)
winHeight=oD.doc.documentElement.clientHeight;var s=0;if(bd.style.overflow=='hidden')
s=cLyr.scrollTop;else if(bd.scrollTop>0)
s=bd.scrollTop;else if(document.documentElement)
s=document.documentElement.scrollTop;s=parseInt(s);return s;}};function openOverlay(pEvent){var p=t,c=p.oCfg,ifmUrl;if(!p.oIfrm.eElem)
p.oIfrm.bind();ifmUrl=t.sRaptorUrl+"&referrer="+encodeURIComponent(document.location.href);p.oIfrm.eElem.src=ifmUrl;p.oIfrm.height(p.height);p.oIfrm.width(p.width);p.greyLyr();p.eventId="ovl_ops";BPXD.addEventListener(p.eventId,p.chkMessage,p);};function ChangeCat(pEvent){ebay.oDocument.oPage.bShowAlert=false;GTINReset();var fE=this.parent.getFormObj(oEC.sFormName);var hE=new EbayHTMLText(t,oEC.sActionElemName);hE.bind();hE.setValue(t.sActionValue);if(!fE.eElem)
fE.bind();fE.submit();return false;}
function extractNumbers(str){return str.match(/\d+/g);}
function ebGreyLyr(){var gLyr=this.oDocument._getControl('grayout_lyr'),sw,sh,bd;if(gLyr){bd=this.oDocument.doc.body,aPageSize=ebay.oUtils.oPositioning.getPageSize(),bStyleOverflow=bd.style.overflow=='hidden',cLyr=this.oDocument.getUIElem('content');sw=bStyleOverflow?cLyr.scrollWidth:aPageSize[0];sh=bStyleOverflow?cLyr.scrollHeight:aPageSize[1];gLyr.display(sw,sh);}
t.openThrobbr();}
function ebCloseOly(){var t=this,gLyr=t.oDocument._getControl('grayout_lyr'),ovlay;if(t.oOverlay.isOpen){ovlay=t.oOverlay;if(gLyr)
gLyr.hide();ovlay.bClearValueOnClose=false;ovlay.hide();ovlay.isOpen=false;if(!t.oIfrm.eElem)
t.oIfrm.bind();t.oIfrm.eElem.src="";document.getElementById(t.oCrLnkLbl);BPXD.removeEventListener(t.eventId);}}
function checkMessage(event){var t=this;var data=event;if(data){if(data.bClose){t.closeOly();if(!t.viewmode){if(data.count!=null&&data.count!=undefined&&data.count!='-1'){if(t.fitsLimitExceeded){if(document.getElementById(t.fitsLimitWarningDiv)){document.getElementById(t.fitsLimitWarningDiv).style.display="none";}
if(document.getElementById(t.fitsRdButton)){document.getElementById(t.fitsRdButton).style.display="block";}
if(document.getElementById(t.fitsCountCmpDivElemName)){document.getElementById(t.fitsCountCmpDivElemName).style.display="block";}
if(document.getElementById(t.cmpSectionOuterDiv)){document.getElementById(t.cmpSectionOuterDiv).style.height="214px";document.getElementById(t.cmpSectionOuterDiv).style.width="445px";}}
var cnt=data.count*1;if(cnt>0){if(!t.isTecDocFlow){if(t.isDE=='true'){if(t.getElementsByClass(t.cmpCnt)[0])t.getElementsByClass(t.cmpCnt)[0].innerHTML=cnt;}else{if(cnt>1)
{if(t.getElementsByClass(t.cmpCnt)[0])t.getElementsByClass(t.cmpCnt)[0].innerHTML=cnt;if(document.getElementById(t.sCmpCntMany))document.getElementById(t.sCmpCntMany).style.display="block";if(document.getElementById(t.sCmpCntOne))document.getElementById(t.sCmpCntOne).style.display="none";}
if(cnt==1)
{if(t.getElementsByClass(t.cmpCnt)[1])t.getElementsByClass(t.cmpCnt)[1].innerHTML=cnt;if(document.getElementById(t.sCmpCntOne))document.getElementById(t.sCmpCntOne).style.display="block";if(document.getElementById(t.sCmpCntMany))document.getElementById(t.sCmpCntMany).style.display="none";}}
if(document.getElementById(t.oCrLnkLbl))document.getElementById(t.oCrLnkLbl).innerHTML=t.veTxt;if(document.getElementById(t.CmpCntDiv))document.getElementById(t.CmpCntDiv).style.display='block';}else{t.TDAjax();var noteImg=document.getElementById("TecDocNoteContentImg");var noteHdr=document.getElementById("TecDocNoteHeader");noteHdr.style.background="green";var noteCntntTxt=document.getElementById("TecDocNoteContentText");var noteCntntBtns=document.getElementById("TecDocNoteContentBtns");noteCntntBtns.innerHTML='';noteCntntBtns.style.width="0px";noteImg.style.background="url(http://p.ebaystatic.com/aw/pics/cmp/ds3/sprds3_18.png) -346px -12px";if(window.TDFitmentCount>0){noteCntntTxt.innerHTML=window.TDVehiclesCompatibleWithPart1;t.getElementsByClass('VCWP1Count')[0].innerHTML=cnt;}
if(window.TDFitmentCount===0)
{noteCntntTxt.innerHTML=window.TDVehiclesCompatibleWithPart2;t.getElementsByClass('VCWP2Count')[0].innerHTML=cnt;}
document.getElementById(t.oCrLnkLbl).innerHTML=t.veTxt;}}else{if(!t.isTecDocFlow){document.getElementById(t.CmpCntDiv).style.display='none';document.getElementById(t.oCrLnkLbl).innerHTML=t.addTxt;}else{window.TDFitmentCount=0;window.TotalCompatibiltyCount=0;var noteImg=document.getElementById("TecDocNoteContentImg");var noteHdr=document.getElementById("TecDocNoteHeader");noteHdr.style.background="purple";var noteCntntTxt=document.getElementById("TecDocNoteContentText");noteCntntTxt.innerHTML=window.TDNoAddedVehicles;var noteCntntBtns=document.getElementById("TecDocNoteContentBtns");noteCntntBtns.innerHTML='';noteImg.style.background="url(http://p.ebaystatic.com/aw/pics/cmp/ds3/sprds3_18.png) -48px -12px";}}}
if(t.isTecDocFlow)
{linkObj=t.getElementsByClass(oC.tecdocManualEditLnkClass);if(linkObj!=null&&linkObj!=undefined){for(i=0;i<linkObj.length;i++){linkObj[i].onclick=function(){t.openOverlay();}}}}}}}}
function TDAjaxCall(){var p=t;var serviceUrl=oC.tdSvcEndPt;var SID=oC.tdSvcEndPtSID;var UID=oC.tdSvcEndPtUID;var request="action=tecdoc";request+="&sessId="+SID;request+="&user="+UID;var addParams="";addParams+="forceJson=true";addParams+="&rand="+Math.random();addParams=encodeURIComponent(addParams);request+="&addParams="+addParams;serviceUrl+="&request="+encodeURIComponent(request);req=ebay.oServer.createRequest('GET',serviceUrl,true);req.sPostData="";req.iResponseType=1;req.registerAsDataListener(p);req.send();}
function getElementsByClass(classname){if(document.getElementsByClassName){nodes=document.getElementsByClassName(classname);}
else if(document.querySelectorAll)
{nodes=document.querySelectorAll("."+classname);}else{var a=[];var re=new RegExp('(^| )'+classname+'( |$)');var els=document.getElementsByTagName("*");for(var i=0,j=els.length;i<j;i++)
if(re.test(els[i].className))a.push(els[i]);return a;}
var a=[];for(var i=0,j=nodes.length;i<j;i++)
a.push(nodes[i]);return a;}}
function EbayHybridCatalogDescription(pParent,pName,pCfg){var t=this,oC=pCfg;if(!this.objType)
this.objType="EbayHybridCatalogDescription";this.base=EbayBaseControl;this.base(pParent,pName);var container=ebay.oDocument.getUIElem(pCfg.sDescSecId);if(container){container.innerHTML=pCfg.sCatDesc;}}
function EbayPnACatalogDetailsRemoval(pParent,pName,pCfg){var t=this,oC=pCfg;if(!t.objType)
t.objType="EbayPnACatalogDetailsRemoval";t.base=EbayBaseControl;t.base(pParent,pName);t.cnt=0;if(pCfg.sMPN){t.mpn=pCfg.sMPN;t.cnt++;}else{t.mpn="";}
if(pCfg.sBrand){t.brand=pCfg.sBrand;t.cnt++;}else{t.brand="";}
t.catISVal=[];t.ttlBx=pCfg.sTtlBx;t.rmvLnk=pCfg.sRmvPrdLnk;t.bRem=false;t.removeProductDetails=removeProdDetails;t.removeCatalogDtls=removeCatalogDetails;t.removeCatDtlsOnClick=removeCatDetailsOnClick;this.init=function(){with(t){adjustRemoveProductLink(ttlBx,rmvLnk);for(var i=0;i<cnt;i++){var itmSpc=ebay.oDocument.getUIElem("VarLabel_"+i).innerHTML;if(mpn&&mpn!=''&&itmSpc&&itmSpc.replace(/\s/g,"")==mpn[0].replace(/\s/g,"")){assignEvents(mpn);}else if(brand&&brand!=''&&itmSpc&&itmSpc.replace(/\s/g,"")==brand[0].replace(/\s/g,"")){assignEvents(brand);}}}}
this.init();function adjustRemoveProductLink(ttlBx,rmvLnk){var ttlBox=ebay.oDocument.getUIElem(ttlBx),rmvPrdLnk=ebay.oDocument.getUIElem(rmvLnk);if(ttlBox&&rmvPrdLnk){rmvPrdLnk.style.paddingLeft=ttlBox.offsetWidth-rmvPrdLnk.offsetWidth+"px";rmvPrdLnk.parentNode.style.marginTop="-10px";}}
function assignEvents(prop){var txtBx=new EbayHTMLText(this,"st_selval_0_"+prop[2]);if(!txtBx.eElem)txtBx.bind();if(txtBx){if(txtBx.eElem.addEventListener){txtBx.eElem.addEventListener("keyup",function(evt){t.removeCatalogDtls(this);},false);}
else{txtBx.eElem.attachEvent('onkeyup',function(){t.removeCatDtlsOnClick(prop[2]);});}}
var oOpt=ebay.oDocument.getUIElem("TagValueOptionList_"+prop[2]);if(oOpt){if(oOpt.addEventListener){oOpt.addEventListener("click",function(evt){var id=this.id.replace("TagValueOptionList_","");t.removeCatDtlsOnClick(id);},false);}else{oOpt.attachEvent("onclick",function(){var id=prop[2];t.removeCatDtlsOnClick(id);});}}
var rmLnk=ebay.oDocument.getUIElem("Remove_"+prop[2]);if(rmLnk){if(rmLnk.addEventListener){rmLnk.addEventListener("click",function(evt){var id=this.id.replace("Remove_","");for(var j=0;j<t.cnt;j++){if(j!=parseInt(id)&&!t.bRem){var inp=ebay.oDocument.getUIElem("st_selval_0_"+j);if(inp&&inp.getAttribute('iTrk')){if(!t.bRem){inp.value="";}
t.bRem=true;}}}
t.removeProductDetails();},false);}else{rmLnk.attachEvent("onclick",function(evt){var id=prop[2]+"";for(var j=0;j<t.cnt;j++){if(j!=parseInt(id)&&!t.bRem){var inp=ebay.oDocument.getUIElem("st_selval_0_"+j);if(inp&&inp.getAttribute('iTrk')){if(!t.bRem){inp.value="";}
t.bRem=true;}}}
t.removeProductDetails();});}}
t.catISVal.push(txtBx.eElem.value);txtBx.eElem.setAttribute('iTrk',prop[0].replace(/\s/g,""));}
function removeCatDetailsOnClick(id){var t=this,curBx=document.getElementById("st_selval_0_"+id),ind=0;t.removeValue(curBx,t);}
function removeCatalogDetails(elm){var t=this,curBx=elm,ind=0;t.removeValue(curBx,t);}
this.removeValue=function(curBx,t){var ind="";if(t.mpn&&t.mpn!=''&&(curBx.getAttribute('iTrk')==t.mpn[0].replace(/\s/g,""))){ind=t.mpn[2];}else if(t.brand&&t.brand!=''&&(curBx.getAttribute('iTrk')==t.brand[0].replace(/\s/g,""))){ind=t.brand[2];}
if(curBx.value.replace(/\s/g,"")!=t.catISVal[ind].replace(/\s/g,"")){for(var j=0;j<t.cnt;j++){if(j!=ind&&!t.bRem){var inp=ebay.oDocument.getUIElem("st_selval_0_"+j);if(inp&&inp.getAttribute('iTrk')){if(!t.bRem){inp.value="";}
t.bRem=true;}}}
t.removeProductDetails();}}
function removeProdDetails(){var cbPrdDtl=new EbayHTMLCheckbox(this,"productDetailsOption");if(!cbPrdDtl.eElem)cbPrdDtl.bind();if(cbPrdDtl&&!t.bHideProdDtls){cbPrdDtl.eElem.checked=false;t.bHideProdDtls=true;var prodDtlsSec=ebay.oDocument.getUIElem("productDetailsOption_inp").parentNode.parentNode;if(prodDtlsSec){prodDtlsSec.style.display="none";}}}}

// \include\lib\_global\features\syi3\describe\tecdoc_fitments.js 

function EbayTecdocFitments(pParent,pName,pCfg)
{var t=this,oC=pCfg;if(!this.objType){this.objType="EbayTecdocFitments";}
this.base=EbayBaseControl;this.base(pParent,pName);t.oCfg=pCfg;t.notFound=notFoundFit;t.TDAjax=TDAjaxCall;t.tdButtonStatus=tdButtonStatus;t.tdGetElementsByClass=tdGetElementsByClass;t.tdGetAllElementsByClass=tdGetAllElementsByClass;t.TecDocAutoComplete=TecDocAutoComplete;t.bindTDLinks=bindTDLinks;t.bindTDButtons=bindTDButtons;t.ClosePartBrandOverlay=ClosePartBrandOverlay;t.autoCompleteClick=autoCompleteClick;t.changeColorBlue=changeColorBlue;t.changeColorWhite=changeColorWhite;t.selectthis=selectthis;t.oCrLnkLbl=oC.sCrLnkLabel;t.veTxt=oC.viewEditCmpTxt;t.addTxt=oC.addCmpTxt;t.tdManHelp=oC.tdManHelp;window.TDFitmentCount=0;window.TotalCompatibiltyCount=0;window.TDVehiclesCompatibleWithPart1=pCfg.tdNtVCWP1;window.TDVehiclesCompatibleWithPart2=pCfg.tdNtVCWP2;window.TDNoAddedVehicles=pCfg.tdNtNAV;if(typeof oC.PreloadTDNT=='undefined'&&oC.tdPreSelTtlCnt>0)
{window.TotalCompatibiltyCount=(oC.tdPreSelTtlCnt)*1;t.tdGetElementsByClass(oC.tdNtVCWP2Cnt).innerHTML=oC.tdPreSelTtlCnt;}
t.bindTDLinks();var tdPrtBrand=document.getElementById(oC.tdPrtBrndDD);var tdPrtNumTB=document.getElementById(oC.tdPrtNumTB);var noteImg=document.getElementById(oC.tdNtCntnImg);var tecdocLookUpBtn=document.getElementById(oC.tdLkUpBtn);var tecdocLookUpBtnFrm=document.getElementById(oC.tdLkUpBtn+"_btnFrm");var tecdocLookUpBtnLbl=document.getElementById(oC.tdLkUpBtn+"_btnLbl");if(oC.tdRestrictedFlow=="true"&&(oC.tdPreSelTtlCnt*1)>0){t.tdGetElementsByClass(oC.tdManHelp).innerHTML=oC.ViewFtmtTxt;}
if(oC.tdFitsLimitExceedWarn=="true")
{t.tdFitsLimitExceedWarn=oC.tdFitsLimitExceedWarn;}
if(oC.tdSeller=="true")
{tdPrtBrand.tabIndex=1;tdPrtNumTB.tabIndex=2;tdPrtNumTB.maxLength=50;PrtNumTB=new EbayHTMLText(t,pCfg.tdPrtNumTB);PrtNumTB.bind();PrtBrndDD=new EbayHTMLText(t,pCfg.tdPrtBrndDD);if(!PrtBrndDD.eElem)PrtBrndDD.bind();LkUpBtn=new EbayHTMLButton(t,pCfg.tdLkUpBtn);if(!LkUpBtn.eElem)LkUpBtn.bind();t.bindTDButtons();if(tdPrtNumTB.value.replace(/\s+$/,'')===""||tdPrtBrand.value.replace(/\s+$/,'')===""){tecdocLookUpBtn.disabled=true;tecdocLookUpBtn.style.opacity=".4";tecdocLookUpBtnFrm.style.cursor="default";tecdocLookUpBtnLbl.style.cursor="default";}
else{tecdocLookUpBtn.disabled=false;}
PrtNumTB.onkeyup=function(){t.tdButtonStatus();};PrtNumTB.onblur=function(){t.tdButtonStatus();};PrtBrndDD.eElem.onkeyup=function(evt){t.TecDocAutoComplete(evt);t.tdButtonStatus();};PrtBrndDD.onblur=function(){t.tdButtonStatus();};if(oC.tdVersionChng=="true"&&typeof oC.tdRestrictedFlow=='undefined'){window.TotalCompatibiltyCount=(oC.tdPreSelTtlCnt)*1;window.TDFitmentCount=(oC.tdPreSelTDCnt)*1;}
if(oC.PreloadTDNT=="true"&&(typeof oC.tdVersionChng=='undefined'||oC.tdRestrictedFlow=="true")){window.TotalCompatibiltyCount=(oC.tdPreSelTtlCnt)*1;window.TDFitmentCount=(oC.tdPreSelTDCnt)*1;if(window.TotalCompatibiltyCount>0)
{if(window.TDFitmentCount===0){t.tdGetElementsByClass(oC.tdNtVCWP2Cnt).innerHTML=window.TotalCompatibiltyCount;}
if(window.TDFitmentCount>0){t.tdGetElementsByClass(oC.tdNtVCWP1Cnt).innerHTML=window.TotalCompatibiltyCount;}}}
if(oC.tdRestrictedFlow=="true"){tdPrtBrand.disabled=true;tdPrtNumTB.disabled=true;tecdocLookUpBtn.disabled=true;tecdocLookUpBtn.style.opacity=".4";tecdocLookUpBtnFrm.style.cursor="default";tecdocLookUpBtnLbl.style.cursor="default";}
LkUpBtn.onclick=function(){var clear,override;if(window.TotalCompatibiltyCount===0){clear="true";override="true";}
if(window.TotalCompatibiltyCount>0){clear="false";override="false";}
t.TDAjax(oC.tdVerNum,clear,override,"tecdocsave");};}
function notFoundFit(newContentTxt,color,newContentBtns,newContentBtnsWidth)
{var noteHdr=document.getElementById(oC.tdNtHdr);noteHdr.style.background=color;var noteCntntTxt=document.getElementById(oC.tdNtCntnTxt);noteCntntTxt.innerHTML=newContentTxt;var noteCntntBtns=document.getElementById(oC.tdNtCntnBtns);if(newContentBtns==="NoButton")
{noteCntntBtns.innerHTML='';noteCntntBtns.style.width="0px";}
else
{if(document.getElementById(newContentBtns)){noteCntntBtns.innerHTML=document.getElementById(newContentBtns).innerHTML;noteCntntBtns.style.display="block";noteCntntBtns.style.width=newContentBtnsWidth+"px";}}
t.bindTDLinks();t.bindTDButtons();}
function TDAjaxCall(ver,clear,override,operation)
{var p=t;var brandValue=tdPrtBrand.value;var partValue=tdPrtNumTB.value;brandValue=brandValue.trim();partValue=partValue.trim();brandValue=(encodeURIComponent(brandValue));var serviceUrl=oC.tdSvcEndPt;var SID=oC.tdSvcEndPtSID;var UID=oC.tdSvcEndPtUID;var request="action="+operation;request+="&sessId="+SID;request+="&user="+UID;var addParams="n="+partValue+"&b="+brandValue;if(operation=="tecdocsave")
{addParams+="&ver="+ver;addParams+="&clear="+clear;addParams+="&override="+override;}
addParams+="&forceJson=true";addParams+="&rand="+Math.random();addParams=encodeURIComponent(addParams);request+="&addParams="+addParams;request=encodeURIComponent(request);serviceUrl+="&request="+request;var req=ebay.oServer.createRequest('GET',serviceUrl,true);req.sPostData="";req.iResponseType=1;req.registerAsDataListener(p);req.send();}
this.processDataResponse=function(pResp)
{var jsonResp=pResp.sResponseText;if(jsonResp==null)
{return;}
var strtIndex=jsonResp.indexOf('"data":');if(strtIndex!=-1){var endIndex=jsonResp.indexOf("}",strtIndex);if(endIndex!=-1){var resp=jsonResp.substring(strtIndex,endIndex+1);resp="{"+resp+"}";var obj=JSON.parse(resp);obj=obj.data;if(obj.status=="NoKtypes"){t.notFound(oC.tdNtNPfFD,"orange","NoButton",0);noteImg.style.background="url(http://p.ebaystatic.com/aw/pics/cmp/ds3/sprds3_18.png) -245px -12px";}
if(obj.status=="InvalidProduct"){t.notFound(oC.tdNtPNEIC,"orange",oC.tdNtPNEICBtns,110);noteImg.style.background="url(http://p.ebaystatic.com/aw/pics/cmp/ds3/sprds3_18.png) -245px -12px";}
if(obj.status=="Success")
{if(obj.fitmentCount>0){document.getElementById(t.oCrLnkLbl).innerHTML=t.veTxt;document.getElementById("itemCondition").selectedIndex=1;}else{document.getElementById(t.oCrLnkLbl).innerHTML=t.addTxt;}
if(obj.fitmentCount>0)
{if(obj.tecdocFitmentCount>0){t.notFound(oC.tdNtVCWP1,"green","NoButton",0);t.tdGetElementsByClass(oC.tdNtVCWP1Cnt).innerHTML=obj.fitmentCount;}
if(obj.tecdocFitmentCount===0){t.notFound(oC.tdNtVCWP2,"green","NoButton",0);t.tdGetElementsByClass(oC.tdNtVCWP2Cnt).innerHTML=obj.fitmentCount;}
noteImg.style.background="url(http://p.ebaystatic.com/aw/pics/cmp/ds3/sprds3_18.png) -346px -12px";window.TDFitmentCount=obj.tecdocFitmentCount;window.TotalCompatibiltyCount=obj.fitmentCount;if(obj.fitmentLimitExceeded=="true"){document.getElementById(oC.tdFitmntExceedMsg).style.display="block";}}}
if(obj.status=="ProductFitmentsOverrideParamMissing")
{if(window.TotalCompatibiltyCount>0&&window.TDFitmentCount==window.TotalCompatibiltyCount)
{t.notFound(oC.tdNtRFC,"red",oC.tdNtRFCBtns,215);noteImg.style.background="url(http://p.ebaystatic.com/aw/pics/cmp/ds3/sprds3_18.png) -145px -12px";t.tdGetElementsByClass(oC.tdNtRFCOCnt).innerHTML=window.TotalCompatibiltyCount;t.tdGetElementsByClass(oC.tdNtRFCNCnt).innerHTML=obj.tecdocFitmentCount;}
else
{if(window.TotalCompatibiltyCount>0&&window.TotalCompatibiltyCount>window.TDFitmentCount)
{window.newTDFitmentCount=obj.tecdocFitmentCount;window.newFitmentCount=obj.fitmentCount;t.notFound(oC.tdNtAREV,"orange",oC.tdNtAREVBtns,325);noteImg.style.background="url(http://p.ebaystatic.com/aw/pics/cmp/ds3/sprds3_18.png) -245px -12px";t.tdGetElementsByClass(oC.tdNtAREVNtdCnt).innerHTML=window.newTDFitmentCount;t.tdGetElementsByClass(oC.tdNtAREVONTDCnt).innerHTML=window.TotalCompatibiltyCount-window.TDFitmentCount;t.tdGetElementsByClass(oC.tdNtAREVOTtlCnt).innerHTML=window.TotalCompatibiltyCount;}}}}}}
function tdButtonStatus()
{if(tdPrtNumTB.value.replace(/\s+$/,'')===""||tdPrtBrand.value.replace(/\s+$/,'')===""){tecdocLookUpBtn.disabled=true;tecdocLookUpBtn.style.opacity=".4";tecdocLookUpBtnFrm.style.cursor="default";tecdocLookUpBtnLbl.style.cursor="default";}
else{tecdocLookUpBtn.disabled=false;tecdocLookUpBtn.style.opacity="1";tecdocLookUpBtnFrm.style.cursor="pointer";tecdocLookUpBtnLbl.style.cursor="pointer";}}
function tdGetElementsByClass(a)
{if(document.getElementsByClassName){return document.getElementsByClassName(a)[0];}
else if(document.querySelector)
{return document.querySelector("."+a);}
else{var n=[];var re=new RegExp('(^| )'+a+'( |$)');var els=document.getElementsByTagName("*");for(var i=0,j=els.length;i<j;i++)
{if(re.test(els[i].className))
n.push(els[i]);}
return n[0];}}
function tdGetAllElementsByClass(classname)
{if(document.getElementsByClassName){nodes=document.getElementsByClassName(classname);}
else if(document.querySelectorAll)
{nodes=document.querySelectorAll("a."+classname);}else{var a=[];var re=new RegExp('(^| )'+classname+'( |$)');var els=document.getElementsByTagName("*");for(var i=0,j=els.length;i<j;i++){if(re.test(els[i].className))
{a.push(els[i]);}}
return a;}
var a=[];for(var i=0,j=nodes.length;i<j;i++){a.push(nodes[i]);}
return a;}
function TecDocAutoComplete(evt)
{evt=evt||window.event;var partBrandEntered=tdPrtBrand.value;var tdPartBrandsArraySC=pCfg.tdBrandArry;var newBlueIndex=-1;if(typeof tdPartBrandsArraySC!='undefined')
{var tdPartBrandsArray=tdPartBrandsArraySC.split('||');var tdPrtBrandArrayLength=tdPartBrandsArray.length;if(document.getElementById("TecDocPartBrandAutoCompleteChild")&&(evt.keyCode===40||evt.keyCode===38||evt.keyCode===13))
{var autoCompleteOverlayChild=document.getElementById("TecDocPartBrandAutoCompleteChild");var autoCompleteOverlayParent=document.getElementById("TecDocPartBrandAutoCompleteParent");var autocompleteOverlayChildren=autoCompleteOverlayChild.childNodes;var numChild=autocompleteOverlayChildren.length;var blueindex=-1;for(var x=0;x<numChild;x++)
{if(autocompleteOverlayChildren[x].style.backgroundColor=="rgb(215, 237, 255)"||autocompleteOverlayChildren[x].style.backgroundColor=="#d7edff")
{blueindex=x;break;}}
if(evt.keyCode===40){if(blueindex!=(numChild-1)){autocompleteOverlayChildren[blueindex+1].style.backgroundColor="#d7edff";newBlueIndex=blueindex+1;var parentRect=autoCompleteOverlayParent.getBoundingClientRect();if(blueindex!==-1)
{var childRect=autocompleteOverlayChildren[blueindex].getBoundingClientRect();var diffBwParentChild=childRect.bottom-parentRect.top;}
if(blueindex===-1)
{var childRect=autocompleteOverlayChildren[blueindex+1].getBoundingClientRect();var diffBwParentChild=childRect.top-parentRect.top;}
if(diffBwParentChild>80)
{var newChildRect=autocompleteOverlayChildren[blueindex+1].getBoundingClientRect();autoCompleteOverlayParent.scrollTop+=newChildRect.bottom-newChildRect.top;}}
if(blueindex!==-1&&blueindex!=(numChild-1)){autocompleteOverlayChildren[blueindex].style.backgroundColor="#FFFFFF";}}
if(evt.keyCode===38)
{if(blueindex!=-1&&blueindex!=0){autocompleteOverlayChildren[blueindex-1].style.backgroundColor="#d7edff";newBlueIndex=blueindex-1;var parentRect=autoCompleteOverlayParent.getBoundingClientRect();autocompleteOverlayChildren[blueindex].style.backgroundColor="#FFFFFF";var childRect=autocompleteOverlayChildren[blueindex].getBoundingClientRect();var diffBwParentChild=childRect.top-parentRect.top;if(diffBwParentChild<5)
{var newChildRect=autocompleteOverlayChildren[blueindex-1].getBoundingClientRect();autoCompleteOverlayParent.scrollTop-=newChildRect.bottom-newChildRect.top;}}}
if(evt.keyCode===13&&blueindex!==-1){document.getElementById(oC.tdPrtBrndDD).value=autocompleteOverlayChildren[blueindex].id;autoCompleteOverlayParent.style.display="none";}}
if(!document.getElementById("TecDocPartBrandAutoCompleteParent")&&partBrandEntered!=="")
{var TecDocPartBrandDiv=document.getElementById(oC.tdPrtBrndDD);var autoCompleteDivParent=document.createElement("div");autoCompleteDivParent.id="TecDocPartBrandAutoCompleteParent";autoCompleteDivParent.style.maxHeight="80px";autoCompleteDivParent.style.zIndex="1";autoCompleteDivParent.style.overflowY="scroll";autoCompleteDivParent.style.position="absolute";autoCompleteDivParent.style.border="1px solid lightgray";autoCompleteDivParent.style.backgroundColor="#FFFFFF";var autoCompleteDivChild=document.createElement("div");autoCompleteDivChild.id="TecDocPartBrandAutoCompleteChild";autoCompleteDivChild.onclick=t.autoCompleteClick;autoCompleteDivParent.appendChild(autoCompleteDivChild);if(TecDocPartBrandDiv.nextSibling){TecDocPartBrandDiv.parentNode.insertBefore(autoCompleteDivParent,TecDocPartBrandDiv.nextSibling);}
else{TecDocPartBrandDiv.parentNode.appendChild(autoCompleteDivParent);}}
if(document.getElementById("TecDocPartBrandAutoCompleteChild")&&evt.keyCode!=40&&evt.keyCode!=38&&evt.keyCode!=13)
{var autoCompleteOverlayChild=document.getElementById("TecDocPartBrandAutoCompleteChild");var autoCompleteOverlayParent=document.getElementById("TecDocPartBrandAutoCompleteParent");document.onclick=t.ClosePartBrandOverlay;if(partBrandEntered!=="")
{if(autoCompleteOverlayChild.firstChild){autoCompleteOverlayChild.innerHTML='';}
for(var x=0;x<tdPrtBrandArrayLength;x++)
{var tdPrtBrandOptionFromArray=tdPartBrandsArray[x];tdPrtBrandOptionFromArray=decodeURIComponent(tdPrtBrandOptionFromArray);tdPrtBrandOptionFromArray=tdPrtBrandOptionFromArray.replace(/%20/g,' ');var index=tdPrtBrandOptionFromArray.toUpperCase().indexOf(partBrandEntered.toUpperCase());var partBrandEnteredLength=partBrandEntered.length;if(index!==-1)
{var partBrandOption=document.createElement("div");partBrandOption.id=tdPrtBrandOptionFromArray;var partBrandOptionLength=tdPrtBrandOptionFromArray.length;var userEnteredCharsInDD="";userEnteredCharsInDD=tdPrtBrandOptionFromArray.substring(index,partBrandEnteredLength+index);var finalOptionInDD="";var finalOptionLength=0;var userEnteredColoredChars=userEnteredCharsInDD.bold();userEnteredColoredChars=userEnteredColoredChars.fontcolor("blue");if(index!==0)
{finalOptionInDD=tdPrtBrandOptionFromArray.substring(0,index);finalOptionLength=finalOptionInDD.length;}
finalOptionInDD+=userEnteredColoredChars;finalOptionLength+=partBrandEnteredLength;if(finalOptionLength!=partBrandOptionLength)
{finalOptionInDD+=tdPrtBrandOptionFromArray.substring(finalOptionLength,partBrandOptionLength);}
partBrandOption.innerHTML=finalOptionInDD;partBrandOption.onmouseover=t.changeColorBlue;partBrandOption.onmouseout=t.changeColorWhite;partBrandOption.onclick=t.selectthis;partBrandOption.style.cursor="default";autoCompleteOverlayChild.appendChild(partBrandOption);}}
if(autoCompleteOverlayChild.firstChild){autoCompleteOverlayParent.style.display="block";}
else
{autoCompleteOverlayParent.style.display="none";}}
if(partBrandEntered==="")
{autoCompleteOverlayChild.innerHTML='';autoCompleteOverlayParent.style.display="none";}}}}
function bindTDLinks()
{linkObj=t.tdGetAllElementsByClass(t.tdManHelp);if(linkObj!=null&&linkObj!=undefined){for(i=0;i<linkObj.length;i++){linkObj[i].onclick=function(){window.FitmentOverlay();}}}}
function bindTDButtons()
{tdPNECCnclBtn=new EbayHTMLButton(t,pCfg.tdPNECCnclBtn);tdPNECCnclBtn.bind();tdAREVAppndBtn=new EbayHTMLButton(t,pCfg.tdAREVAppndBtn);tdAREVAppndBtn.bind();AREVRplcBtn=new EbayHTMLButton(t,pCfg.tdAREVRplcBtn);AREVRplcBtn.bind();AREVCnclBtn=new EbayHTMLButton(t,pCfg.tdAREVCnclBtn);AREVCnclBtn.bind();tdRFCRplcBtn=new EbayHTMLButton(t,pCfg.tdRFCRplcBtn);tdRFCRplcBtn.bind();tdRFCCnclBtn=new EbayHTMLButton(t,pCfg.tdRFCCnclBtn);tdRFCCnclBtn.bind();tdUVUpdtBtn=new EbayHTMLButton(t,pCfg.tdUVUpdtBtn);tdUVUpdtBtn.bind();tdUVCnclBtn=new EbayHTMLButton(t,pCfg.tdUVCnclBtn);tdUVCnclBtn.bind();tdPNECCnclBtn.onclick=function(){if(t.tdFitsLimitExceedWarn=="true"){noteImg.style.background="url(http://p.ebaystatic.com/aw/pics/cmp/ds3/sprds3_18.png) -245px -12px";t.notFound(oC.tdFitsLimitExceedTxt,"orange","NoButton",0);}
else{t.tdFitsLimitExceedWarn="false";if(window.TotalCompatibiltyCount===0)
{noteImg.style.background="url(http://p.ebaystatic.com/aw/pics/cmp/ds3/sprds3_18.png) -48px -12px";t.notFound(oC.tdNtNAV,"purple","NoButton",0);}
else
{noteImg.style.background="url(http://p.ebaystatic.com/aw/pics/cmp/ds3/sprds3_18.png) -346px -12px";t.notFound(oC.tdNtVCWP1,"green","NoButton",0);t.tdGetElementsByClass(oC.tdNtVCWP1Cnt).innerHTML=window.TotalCompatibiltyCount;}}}
tdAREVAppndBtn.onclick=function(){t.tdFitsLimitExceedWarn="false";t.TDAjax(oC.tdVerNum,"false","true","tecdocsave");window.TDFitmentCount=window.newTDFitmentCount;window.TotalCompatibiltyCount=window.newFitmentCount;};AREVRplcBtn.onclick=function(){t.tdFitsLimitExceedWarn="false";noteImg.style.background="url(http://p.ebaystatic.com/aw/pics/cmp/ds3/sprds3_18.png) -145px -12px";t.notFound(oC.tdNtRFC,"red",oC.tdNtRFCBtns,215);t.tdGetElementsByClass(oC.tdNtRFCOCnt).innerHTML=window.TotalCompatibiltyCount;t.tdGetElementsByClass(oC.tdNtRFCNCnt).innerHTML=window.newTDFitmentCount;};AREVCnclBtn.onclick=function(){if(t.tdFitsLimitExceedWarn=="true"){noteImg.style.background="url(http://p.ebaystatic.com/aw/pics/cmp/ds3/sprds3_18.png) -245px -12px";t.notFound(oC.tdFitsLimitExceedTxt,"orange","NoButton",0);}
else{t.tdFitsLimitExceedWarn="false";noteImg.style.background="url(http://p.ebaystatic.com/aw/pics/cmp/ds3/sprds3_18.png) -346px -12px";t.notFound(oC.tdNtVCWP1,"green","NoButton",0);t.tdGetElementsByClass(oC.tdNtVCWP1Cnt).innerHTML=window.TotalCompatibiltyCount;}};tdRFCRplcBtn.onclick=function(){t.tdFitsLimitExceedWarn="false";t.TDAjax(oC.tdVerNum,"true","true","tecdocsave");window.TDFitmentCount=t.tdGetElementsByClass(oC.tdNtRFCNCnt).innerHTML;window.TotalCompatibiltyCount=t.tdGetElementsByClass(oC.tdNtRFCNCnt).innerHTML;};tdRFCCnclBtn.onclick=function(){if(t.tdFitsLimitExceedWarn=="true"){noteImg.style.background="url(http://p.ebaystatic.com/aw/pics/cmp/ds3/sprds3_18.png) -245px -12px";t.notFound(oC.tdFitsLimitExceedTxt,"orange","NoButton",0);}
else{t.tdFitsLimitExceedWarn="false";noteImg.style.background="url(http://p.ebaystatic.com/aw/pics/cmp/ds3/sprds3_18.png) -346px -12px";t.notFound(oC.tdNtVCWP1,"green","NoButton",0);t.tdGetElementsByClass(oC.tdNtVCWP1Cnt).innerHTML=window.TotalCompatibiltyCount;}}
tdUVUpdtBtn.onclick=function(){t.tdFitsLimitExceedWarn="false";t.TDAjax(oC.tdVerNum,"false","false","tecdocrefresh");};tdUVCnclBtn.onclick=function(){t.tdFitsLimitExceedWarn="false";if(window.TDFitmentCount===0){t.notFound(oC.tdNtVCWP2,"green","NoButton",0);noteImg.style.background="url(http://p.ebaystatic.com/aw/pics/cmp/ds3/sprds3_18.png) -346px -12px";t.tdGetElementsByClass(oC.tdNtVCWP2Cnt).innerHTML=oC.tdPreSelTtlCnt;}
if(window.TDFitmentCount>0)
{t.notFound(oC.tdNtVCWP1,"green","NoButton",0);noteImg.style.background="url(http://p.ebaystatic.com/aw/pics/cmp/ds3/sprds3_18.png) -346px -12px";t.tdGetElementsByClass(oC.tdNtVCWP1Cnt).innerHTML=oC.tdPreSelTtlCnt;}};}
function ClosePartBrandOverlay()
{if(document.getElementById("TecDocPartBrandAutoCompleteParent")){document.getElementById("TecDocPartBrandAutoCompleteParent").style.display="none";}}
function autoCompleteClick()
{event.stopPropagation();}
function changeColorBlue()
{var autoCompleteOverlayChild=document.getElementById("TecDocPartBrandAutoCompleteChild");var autocompleteOverlayChildren=autoCompleteOverlayChild.childNodes;var numChild=autocompleteOverlayChildren.length;for(var x=0;x<numChild;x++)
{if(autocompleteOverlayChildren[x].style.backgroundColor=="rgb(215, 237, 255)")
{autocompleteOverlayChildren[x].style.backgroundColor="#FFFFFF";break;}}
this.style.backgroundColor="#d7edff";}
function changeColorWhite()
{this.style.backgroundColor="#FFFFFF";}
function selectthis()
{document.getElementById(oC.tdPrtBrndDD).value=this.id;document.getElementById("TecDocPartBrandAutoCompleteParent").style.display="none";}}

// \include\lib\_global\features\syi3\describe\post_msg.js 

var BPXD=BPXD||{};BPXD=function(){var interval_id,last_hash,cache_bust=1,attached_callback,cbHash={},count=0;return{postMessage:function(message,target_url,target){if(!target_url){return;}
target=target||parent;if(window['postMessage']){target['postMessage'](message,target_url.replace(/([^:]+:\/\/[^\/]+).*/,'$1'));}else if(target_url){target.location=target_url.replace(/#.*$/,'')+'#'+(+new Date)+(cache_bust++)+'&'+message;}},addEventListener:function(eventId,callback,scope){cbHash[eventId]=function(message){callback.call(scope,message);};count++;if(count===1){if(window['postMessage']){attached_callback=function(e){var msg=e.data||{};if(msg){msg=JSON.parse(msg);if(msg.msgId&&cbHash.hasOwnProperty(msg.msgId)){cbHash[msg.msgId].call(this,msg);}}};if(window['addEventListener']){window['addEventListener']('message',attached_callback,!1);}else{window['attachEvent']('onmessage',attached_callback);}}else{interval_id=setInterval(function(){var hash=document.location.hash,re=/^#?\d+&/,hashObj,msg;if(hash!==last_hash&&re.test(hash)){last_hash=hash;msg=hash.replace(re,'')||'';if(msg){msg=JSON.parse(msg);msg=JSON.parse(msg);if(msg.msgId&&cbHash.hasOwnProperty(msg.msgId)){cbHash[msg.msgId].call(this,msg);}}}},100);}}},removeEventListener:function(eventId){cbHash[eventId]=null;delete cbHash[eventId];count--;if(count===0){if(window['postMessage']){if(window['removeEventListener']){window['removeEventListener']('message',attached_callback,!1);}else{window['detachEvent']('onmessage',attached_callback);}
attached_callback=null;}else{interval_id&&clearInterval(interval_id);interval_id=null;}}}};}();

// \include\lib\_global\features\syi3\_base\json-parse.js 

var json_parse=(function(){"use strict";var at,ch,escapee={'"':'"','\\':'\\','/':'/',b:'\b',f:'\f',n:'\n',r:'\r',t:'\t'},text,error=function(m){throw{name:'SyntaxError',message:m,at:at,text:text};},next=function(c){if(c&&c!==ch){error("Expected '"+c+"' instead of '"+ch+"'");}
ch=text.charAt(at);at+=1;return ch;},number=function(){var number,string='';if(ch==='-'){string='-';next('-');}
while(ch>='0'&&ch<='9'){string+=ch;next();}
if(ch==='.'){string+='.';while(next()&&ch>='0'&&ch<='9'){string+=ch;}}
if(ch==='e'||ch==='E'){string+=ch;next();if(ch==='-'||ch==='+'){string+=ch;next();}
while(ch>='0'&&ch<='9'){string+=ch;next();}}
number=+string;if(!isFinite(number)){error("Bad number");}else{return number;}},string=function(){var hex,i,string='',uffff;if(ch==='"'){while(next()){if(ch==='"'){next();return string;}else if(ch==='\\'){next();if(ch==='u'){uffff=0;for(i=0;i<4;i+=1){hex=parseInt(next(),16);if(!isFinite(hex)){break;}
uffff=uffff*16+hex;}
string+=String.fromCharCode(uffff);}else if(typeof escapee[ch]==='string'){string+=escapee[ch];}else{break;}}else{string+=ch;}}}
error("Bad string");},white=function(){while(ch&&ch<=' '){next();}},word=function(){switch(ch){case't':next('t');next('r');next('u');next('e');return true;case'f':next('f');next('a');next('l');next('s');next('e');return false;case'n':next('n');next('u');next('l');next('l');return null;}
error("Unexpected '"+ch+"'");},value,array=function(){var array=[];if(ch==='['){next('[');white();if(ch===']'){next(']');return array;}
while(ch){array.push(value());white();if(ch===']'){next(']');return array;}
next(',');white();}}
error("Bad array");},object=function(){var key,object={};if(ch==='{'){next('{');white();if(ch==='}'){next('}');return object;}
while(ch){key=string();white();next(':');if(Object.hasOwnProperty.call(object,key)){error('Duplicate key "'+key+'"');}
object[key]=value();white();if(ch==='}'){next('}');return object;}
next(',');white();}}
error("Bad object");};value=function(){white();switch(ch){case'{':return object();case'[':return array();case'"':return string();case'-':return number();default:return ch>='0'&&ch<='9'?number():word();}};return function(source,reviver){var result;text=source;at=0;ch=' ';result=value();white();if(ch){error("Syntax error");}
return typeof reviver==='function'?(function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==='object'){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v;}else{delete value[k];}}}}
return reviver.call(holder,key,value);}({'':result},'')):result;};}());

// \include\lib\_global\features\syi3\describe\gsp_optin.js 

function EbayShowGSPOptInLyr(pParent,pName,pCfg){if(pCfg){if(!this.objType)
this.objType="EbayShowGSPOptInLyr";this.base=EbayBaseControl;this.base(pParent,pName);this.init=function(){var t=this,bLnk=false,bBtn=false;with(t){gLyr=new EbaySYI3Grayout(this,"lyrGrayout_sec");var gLyr=this._getControl('lyrGrayout_sec');if(gLyr){var bd=this.oDocument.doc.body,aPageSize=ebay.oUtils.oPositioning.getPageSize(),bStyleOverflow=bd.style.overflow=='hidden',cLyr=this.oDocument.getUIElem('content');sw=bStyleOverflow?cLyr.scrollWidth:aPageSize[0];sh=bStyleOverflow?cLyr.scrollHeight:aPageSize[1];gLyr.bDisableSelElems=false;gLyr.display(sw,sh);}
ovlay=new EbayHTMLOverlayContent(this,pCfg.sOvly,pCfg);if(ovlay){ovlay.bind();ovlay.bNoSetContent=true;ovlay.eElem.style.zIndex=111;ovlay.eElem.style.width=pCfg.width+'px'
ovlay.eElem.style.height=pCfg.height;ovlay.eElem.style.top="250px";ovlay.eElem.style.padding="25px 20px";ovlay.display();ovlay.isOpen=true;}
oGspBtn=new EbayHTMLButton(this,pCfg.gspbtn);oGspBtn.bind();oGspcheckBx=new EbayHTMLCheckbox(this,pCfg.gspcb);oGspcheckBx.bind();oLyrShown=new EbayHTMLText(this,pCfg.lyrShown);oLyrShown.bind();bOptedIn=new EbayHTMLText(this,pCfg.optedIn);bOptedIn.bind();oDontShw=new EbayHTMLText(this,pCfg.dnshdn);oDontShw.bind();oGspBtn.onclick=function(){if(!bBtn){oGspcheckBx.eElem.checked=true;oLyrShown.setValue("true");bOptedIn.setValue("true");if(oGspNoLnk.eElem&&oGspBtn.eElem){oGspNoLnk.eElem.style.color="#999";oGspBtn.eElem.style.opacity="0.5";oGspBtn.enable(false);bLnk=true;bBtn=true;}
this.parent.submitDYIPageForm();}}
oGspNoLnk=new EbayHTMLAnchor(this,pCfg.gspnolnk);oGspNoLnk.bind();oGspNoLnk.onclick=function(){if(!bLnk){oLyrShown.setValue("true");bOptedIn.setValue("false");oDontShw.setValue("true");if(oGspNoLnk.eElem&&oGspBtn.eElem){oGspNoLnk.eElem.style.color="#999";oGspBtn.eElem.style.opacity="0.5";oGspBtn.enable(false);bLnk=true;bBtn=true;}
this.parent.submitDYIPageForm();}}}}
this.submitDYIPageForm=function(){var oForm=ebay.oP.getFormObj('selling');oForm.bind();fAct=oForm.getAction();fAct+="?aidZ1=&";oForm.setAction(fAct);oForm.submit();return false;}
this.init();}}

// \include\lib\_global\features\syi3\describe\page.js 

ebay.oP.onBeforeLoad=function()
{ebay.oDocument.oPage.bShowAlert=true;ebay.oDocument.oPage.bItemFocus=false;this.initCurrencySwitch();var t=this,cfg=t.oDocument.getConfig('Motors.SYI.Location');if(cfg)
new EbaySYI3LocationDisable(t,'Motors.SYI.Location',cfg);c=t.parent.getConfig("Selling.Describe.ItemConditionDescription");if(c)
new EbayCharCounter(t,c.name,c);if(c)
new EbayHTMLitemconditiondesc(this,"itemconditiondesc",c);var c=t.parent.getConfig("SYI3.Motors.SignPost");if(c)
{c.bForceBind=true;new EbaySYI3MotorsSignPost(t,'sign_post',c);}
oLnk=new EbayHTMLAnchor(this,'errFocusId');if(!oLnk.eElem)
oLnk.bind();if(oLnk){oLnk.focus(true);oLnk.tabindex="-1";}
var cfg=this.oDocument.getConfig("SYI3.Motors.JustInTimeMessaging");if(cfg)
{var bFitment=cfg.bFitment||false;if(cfg&&bFitment)
new EbayClsOvrLy(this,'SYI3.Motors.JustInTimeMessaging',cfg);}
var oLM=t.controls['listner_mgr'];oLM.push('ebay.oP.onAfterLoadCustomRules');oLM.push('ebay.oP.onAfterLoadLocation');oLM.push('ebay.oP.onAfterLoadTelephone');oLM.push('ebay.oP.onAfterLoadPaymentMethods');this.initSOJTagging(10);ebay.oP.initCharityAL();}
ebay.oP.displayText=function(pAttribute)
{var t=this;oAttribute=ebay.oP._getControl('attribute-manager');oReturnDrop=oAttribute._getControl(pAttribute);if(oReturnDrop.oConfig.sTextDiv)
{oTextDiv=new EbayHTMLLayer(t,oReturnDrop.oConfig.sTextDiv);if(!oTextDiv.eElem)
oTextDiv.bind();pSelVals=oReturnDrop.getSelectedValues();if(pSelVals=="-6")
oTextDiv.show(true);}}
ebay.oP.onAfterLoad=function()
{var t=this,oc;t.initCurrencySwitch();t.onAfterLoadCategory();t.oDocument.gotoAnchor();t.onAfterLoadDescription();t.onAfterLoadEasySyi();t.initBinPriceSuggestion();t.onAddoptionsJitClose();var oCtfg=ebay.oDocument.getConfig('Selling.Title.SherpaGuidance');if(oCtfg)
titleGuidancePageLoad();var c=ebay.oDocument.getConfig('Selling.Alert');if(c)
ebay.oP.onContinueFlagUpdate();ebay.oP.initFormatTabsAL();ebay.oP.initRulesEngineAL();var sCfg=ebay.oDocument.getConfig('Selling.Describe.SoftGoods');if(sCfg)
ebay.oP.initSoftGoods(sCfg);oc=this.oDocument.getConfig("Selling.Describe.VariationCollapse");if(oc)
t.onExpandCollapse();c=ebay.oDocument.getConfig("Selling.Describe.CatOverlay");if(c){new EbaySYIProductOvly(this,"EbaySYIProductOvly",c);var cCfg=ebay.oDocument.getConfig('Selling.Common');c.bOnFocus=cCfg.bOnFocus;c.sStartLyrName=cCfg.sStartLyrName;}
c=ebay.oDocument.getConfig("Selling.Describe.PPEmailDropDown");if(c){new EbaySYI3PayPalEmail(this,"EbaySYI3PayPalEmail",c);}
var bCfg=ebay.oDocument.getConfig('Selling.BulkListingJit');if(bCfg)
t.onBulkJitClose();var gCfg=ebay.oDocument.getConfig('Selling.Describe.GTINMandate');if(gCfg){t.initGTINDropdown();}
this.trackFunc();if(typeof _sT!='undefined'&&typeof _eT!='undefined')
{var e=document.forms['selling'].elements['_dT'];if(e)
e.value=Math.abs((_eT-_sT)/1000);}
if(ebay.oP.controls['attribute-manager'])
{oAttribute=ebay.oP._getControl('attribute-manager');for(x in oAttribute.controls)
{if(x.has("3804"))
{ebay.oP.displayText(x);break;}}}
if(location.hash)
{this.controls['listner_mgr'].loadExtDyiJs();}
var conf=this.oDocument.getConfig("Selling.Product.MatchService");if(conf)
ebay.oP.initMatchProductOly();var cc=ebay.oDocument.getConfig('Selling.Common');if(cc)
ebay.oP.syiCommentSubmit();var cfg=ebay.oDocument.getConfig("Selling.Describe.AddPictures");if(cfg&&cfg.bNewUploaderEnabled)
new EbaySYI3DYIPicOptions(t,"EbaySYI3DYIPicOptions",cfg);var cfg1=this.oDocument.getConfig("Selling.Describe.Payment.SellerPolicies");if(cfg1){new EbaySellerPolicies(this,"sellerpolicies",cfg1);}
var cfg2=this.oDocument.getConfig("Selling.Describe.Shipping.SellerPolicies");if(cfg2){new EbaySellerPolicies(this,"sellerpolicies",cfg2);}
var cfg3=this.oDocument.getConfig("Selling.Describe.Returns.SellerPolicies");if(cfg3){new EbaySellerPolicies(this,"sellerpolicies",cfg3);}
var cfg4=this.oDocument.getConfig("Selling.Describe.Compatibility");if(cfg4){new EbayMCPFitments(this,"cmpRedesign",cfg4);}
var cfg5=this.oDocument.getConfig("Selling.Describe.Tecdoc");if(cfg5){new EbayTecdocFitments(this,"tecdocLookUp",cfg5);}
var cfg6=this.oDocument.getConfig("Selling.Hybrid.Catalog.Description");if(cfg6){new EbayHybridCatalogDescription(this,"hybridDesc",cfg6);}
var cfg7=this.oDocument.getConfig("Selling.PnA.Catalog.Removal");if(cfg7){new EbayPnACatalogDetailsRemoval(this,"catRemove",cfg7);}
var t=this,config=t.parent.getConfig("Selling.Shipping.GSPOly");if(config){new EbayShowGSPOptInLyr(t,"ShowGSPOptIn",config);}
var c=t.parent.getConfig("Selling.Guardrails");if(c)
{var l=new EbayHTMLButton(t,c.sFixLnk,false,c);l.onclick=function(){this.parent.controls[this.oConfig.sLayerElemName].closeOverlay();this.parent.controls["grayout_lyr"].hide();return false;}
l.bind();l=new EbayHTMLAnchor(t,c.sIgnoreLnk,false,c);l.onclick=function(){var oForm=this.parent.controls[c.sFormName];if(oForm)
{var oAid=this.parent.controls[c.sActionElemName];if(!oAid)
oAid=new EbayHTMLText(t,c.sActionElemName);if(!oAid.eElem)
oAid.bind();oAid.setValue(c.sActionValue);oForm.submit();}
return false;}
l.bind();t.openDialog(c,"");}
var t=this,config=t.parent.getConfig("Selling.Describe.ItemCondition");if(config&&config.IsStockPhotoMsgEnabled){new EbayShowStockInfoMsg(t,"ShowStockInfo",config);}
var oCnfg=this.oDocument.getConfig("Selling.Describe.NewPictureUploader");if(oCnfg){var pu=new PictureUploaderHost({openBtnIds:oCnfg.aOpenBtnIds,sel:oCnfg.aSel,dialogId:oCnfg.sDlgId,dialogMaskId:oCnfg.sDlgMaskId,dialogWidth:oCnfg.iDlgWidth,dialogHeight:oCnfg.iDlgHeight,windowWidth:window.innerWidth,windowHeight:window.innerHeight,user:oCnfg.sUser,site:oCnfg.sSite,page:oCnfg.sApp,itemId:oCnfg.sItemId,env:oCnfg.sEnv,bMSKU:false,btnMap:oCnfg.btnMap,maxPics:oCnfg.iMaxPict,isCopyWebOffered:oCnfg.isCopyWebAvl,isSelfHostOffered:oCnfg.isSelfHostAvl,isSelfHost:oCnfg.isSelfHosted});}
var cfg=this.oDocument.getConfig("Selling.Describe.NewPicturePopup");if(cfg){var popUrl='http://'+cfg.sParHost;var pu=new PicUploadPopupHost({openBtnIds:cfg.aOpenBtnIds,isCgi5Url:cfg.bCgi5Url,picUploadUrl:popUrl,hostAppUrl:'http://'+cfg.sParHost,popupName:'picUploadPopup',popupWidth:cfg.iDlgWidth,popupHeight:cfg.iDlgHeight,easyXdmFlash:'http://pics.ebaystatic.com/aw/pics/sell/picupload/easyxdm_v2_4_17_1.swf',btnMap:cfg.btnMap,user:cfg.sUser,userName:cfg.sUserName,site:cfg.sSite,page:cfg.sApp,itemId:cfg.sItemId,maxPics:cfg.iMaxPict,selfMaxPics:cfg.iMaxPics,env:cfg.sEnv,wm:cfg.sWaterMark,isCopyWebOffered:cfg.isCopyWebAvl,isSelfHostOffered:cfg.isSelfHostAvl,bMSKU:false,bOldUploader:cfg.bOldUploader,serialUpload:cfg.bSerialUploader,isSelfHost:cfg.isSelfHosted});}
userStr=navigator.userAgent;var c=ebay.oDocument.getConfig('Selling.Common');if(c&&c.bShowiOS8Message){if(userStr.match(/OS 8/)&&userStr.match(/iPhone|iPod|iPad/)&&userStr.indexOf('Safari')!=-1&&userStr.indexOf('CriOS')==-1)
alert(c.siOS8msg);}
var themeElm=document.getElementById("theme");if(themeElm)
themeElm.size="5";uptcfg=ebay.oDocument.getConfig("Selling.SOJTagging");if(uptcfg){var s='',sTrackData='';if(typeof pageName!='undefined')
sTrackData+=",pageId|||"+pageName;BrowserVr=navigator.userAgent;if(typeof BrowserVr!='undefined')
sTrackData+=",PU_BrowserVr|||"+BrowserVr;UpldFlw=uptcfg.sCommand;if(typeof UpldFlw!='undefined')
sTrackData+=",PU_UpldFlw|||"+UpldFlw;DraftID=uptcfg.draftId;if(typeof DraftID!='undefined')
sTrackData+=",PU_DraftID|||"+DraftID;isCatalog=uptcfg.isCatalog;isUpEntryPts=uptcfg.isUpEntryPts;if(typeof isCatalog!='undefined'&&isUpEntryPts)
sTrackData+=",PU_IsCatalog|||"+isCatalog;var oUplBtn=ebay.oDocument.getUIElem("addPicturesBtn"),oUplLnk=ebay.oDocument.getUIElem("freeImgLayer"),oClUplBtn=ebay.oDocument.getUIElem("clUploadBtn"),oClUplLnk=ebay.oDocument.getUIElem("clUploadLink"),oUplClsLink=ebay.oDocument.getUIElem("flashUploaderLink"),sReady="";if(oUplBtn&&oUplBtn.style.display!="none"&&oUplBtn.style.visibility!="hidden"){sReady+="addPicturesBtn,";}
if(oUplLnk&&oUplLnk.style.display!="none"&&oUplLnk.style.visibility!="hidden"){sReady+="freeImgLayer,";}
if(oUplClsLink&&oUplClsLink.style.display!="none"&&oUplClsLink.style.visibility!="hidden"){sReady+="flashUploaderLink";}
if(oClUplBtn&&oClUplBtn.style.display!="none"&&oClUplBtn.style.visibility!="hidden"){sReady+="clUploadBtn,";}
if(oClUplLnk&&oClUplLnk.style.display!="none"&&oClUplLnk.style.visibility!="hidden"){sReady+="clUploadLink";}
s+="PU_IsReady|"+sReady+"||";s+=sTrackData;new Image().src=uptcfg.sTagUrl+'{tagData="'+s+'"}';}}
ebay.oP.trackFunc=function()
{try
{_rover.setAppId(3639);var pageImpEvent=2685;var impEvt=_rover.createPageImpEvent(pageImpEvent);impEvt.setLVTrk(true);ebayLVTr.setRover(_rover);ebayLVTr.setActionSampling(100);ebayLVTr.setPageImpEvent(pageImpEvent);ebayLVTr.setEnableHeatMap();ebayLVTr.enableFormTracking();ebayLVTrClk._ebayLVTrackerClk_init_tracker();_rover.track();}
catch(e){}}
ebay.oP.getFormObj=function(pName)
{var t=this,fr=t.parent._getControl(pName);if(!fr)
{fr=new EbayHTMLForm(t,pName);fr.bind();}
return fr;}
ebay.oP.initCurrencySwitch=function()
{}
var oBody=document.body;oBody.onkeypress=function(e)
{try
{var evt=e||window.event,tgt=evt.srcElement?evt.srcElement:evt.target,key=evt.keyCode?evt.keyCode:evt.which;if(key==13&&tgt.tagName=='INPUT')
return false;}catch(e){}}
function EbayClsOvrLy(pParent,pName,pCfg)
{if(!this.objType)
this.objType="EbayClsOvrLy";this.base=EbayBaseControl;this.base(pParent,pName);this.cfg=pCfg;this.aClsImg=this.cfg.aClsImg;this.aOvrLy=this.cfg.aOvrLy;this.sUrl=this.cfg.sUrl;this.oOvrLy;this.oOvrCls=[];this.init=function()
{with(this)
{for(i=0;i<aClsImg.length;i++)
{oOvrCls[i]=new EbayHTMLAnchor(this,aClsImg[i]);if(!oOvrCls[i].eElem)
oOvrCls[i].bind();oOvrCls[i]._registerEvent("onclick","parent.makeScriptCall");oOvrLy=oOvrCls[i].oOvrLy=new EbayHTMLLayer(this,aOvrLy[i]);if(!oOvrLy.eElem)
oOvrLy.bind();}}}
this.init();this.makeScriptCall=function()
{var p=this.parent;p.close(this.oOvrLy);var url=p.sUrl
if(url)
{var scriptTag=document.createElement('script'),i;scriptTag.type='text/javascript';i=parseInt(Math.random()*10000);url+=(url.indexOf("?")>0?"&":"?")+"rand="+i;scriptTag.src=url;document.getElementsByTagName("head")[0].appendChild(scriptTag);}}
this.close=function(pOvrLy)
{var oOvrLy=pOvrLy;oOvrLy.show(false);}}
ebay.oP.onContinueFlagUpdate=function(){var c=ebay.oDocument.getConfig('Selling.Alert');with(c&&c.cancelBtn){btn=new EbayHTMLAnchor(this,c.continueBtn);btn.bind();btn._registerEvent("onclick","parent.onContinueSetFlag");this.onContinueSetFlag=function(){ebay.oDocument.oPage.bShowAlert=false;}}}

// \include\lib\_global\features\syi3\describe\pictureuploaderhost.js 

var PictureUploaderHost=function(cfg){var _ns={},_dialog,_dialogMask,_xdmSocket;_ns.setElements=function(){_dialog=document.getElementById(cfg.dialogId);_dialogMask=document.getElementById(cfg.dialogMaskId);};_ns.openDialog=function(){_dialogMask.style.display='block';_dialog.style.visibility='visible';_dialog.style.width=cfg.dialogWidth+'px';_dialog.style.height=cfg.dialogHeight+'px';};_ns.closeDialog=function(){_dialogMask.style.display='none';_dialog.style.visibility='hidden';_dialog.style.width='0px';_dialog.style.height='0px';_ns.removeIframe();btn=document.getElementById("addPicturesBtn");if(btn&&btn.focus)
btn.focus();};_ns.removeIframe=function(){var iframe=_dialog.getElementsByTagName('iframe')[0];if(iframe){_dialog.removeChild(iframe);}};_ns.openSocket=function(){var remoteUrl="http://www.picupload.ebay.com/_picupload/main";var picBaseUrl="http://pics.ebaystatic.com/aw/pics/";if(cfg.env&&cfg.env.toLowerCase()==='qa'){remoteUrl="http://www.fp3.stratus.qa.ebay.com/_picupload/main";picBaseUrl="http://pics.qa.ebaystatic.com/aw/pics/";}
try{_xdmSocket=new easyXDM.Socket({remote:remoteUrl,container:'pu-picUpDlg',props:{scrolling:"no"},onMessage:function(message,origin){var msgObj=JSON.parse(message);if(msgObj.cmd==='closePicUp'){_ns.closeDialog();if(msgObj.pics){var l=msgObj.pics.length,maxLen=12,iPictureCount=0,aThumbnailUrls=[],aPictureUrls=[],aIconUrls=[],oMoveRight=[],oMoveLeft=[];cfg.isSelfHost=false;var addPicCtrl=ebay.oDocument.oPage.controls[_ns.btnClicked];var shrGui,warn_code,warn_type,longMsg=[],shortMsg=[];with(addPicCtrl){if(l>0){removeAllPics();if(typeof oFreeImgLayer!='undefined'&&oFreeImgLayer.eElem){oFreeImgLayer.show(false);}
for(var x=0;x<l;x++){var url=msgObj.pics[x].url,tn,picUrl;var pic=oPics[iPictureCount],lyr=oPicLayer[iPictureCount];if(!msgObj.pics[x].isSelfHost&&!msgObj.pics[x].isStockPhoto){url=_ns.removeParamsFromUrl(url);var url1=url.split("_");var url2=url1[1].split(".");tn=url1[0]+"_0."+url2[1];picUrl=url1[0]+"_1."+url2[1];url+="?set_id=880000500F";picUrl+="?set_id=880000500F";}else{picUrl=url;tn=url;}
pic.bind();if(msgObj.pics[x].isSelfHost||msgObj.pics[x].isStockPhoto){with(pic){if(msgObj.pics[x].isSelfHost)
cfg.isSelfHost=true;var aDims=getSelfHostWH(eElem);if(typeof(aDims[0])!="undefined")
aDs=aDims;else
aDs=[96,72];isGalleryStrip=typeof oGalleryStrip!='undefined';if(isGalleryStrip)
oGalleryStrip.setImgDim(pic,aDs[0],aDs[1]);width(aDs[0]+'px');height(aDs[1]+'px');}}
bindElems(lyr);aThumbnailUrls[aThumbnailUrls.length]=tn;if(!msgObj.pics[x].isStockPhoto)
aPictureUrls[aPictureUrls.length]=picUrl;aIconUrls[aIconUrls.length]=url;document.getElementById(pic.name).src=tn;if(lyr.bWarnMsg)
removeWarnIcon(pic.eElem,iPictureCount,lyr);if(cf.IsSherpaEnabled){for(shr=0;shr<msgObj.sherpa.length;shr++){if(x==msgObj.sherpa[shr].pic){for(gui=0;gui<msgObj.sherpa[shr].guidance.length;gui++){if(msgObj.sherpa[shr].guidance[gui].code=="MANDATORY_STANDARDS_NOT_MET"){warn_type="picguiderror";longMsg[0]=msgObj.sherpa[shr].guidance[gui].longMsg,shortMsg[0]=msgObj.sherpa[shr].guidance[gui].shortMsg;break;}else if(msgObj.sherpa[shr].guidance[gui].code=="RECOMMENDED_STANDARDS_NOT_MET"){warn_type="picguidwarn";longMsg[gui]=msgObj.sherpa[shr].guidance[gui].longMsg,shortMsg[gui]=msgObj.sherpa[shr].guidance[gui].shortMsg;}}
setWarningNew(pic.eElem,iPictureCount,warn_type,longMsg,shortMsg);this.iWarnImgCount++;lyr.bWarnMsg=true;}}
if(!((pic.name).length>8))
iWarnCount=msgObj.sherpa.length;_ns.setWarningMsgNew(iWarnCount);}
lyr.show(true);oRemoveallLayer.show(true);if(!_ns.bMSKU&&oRemoveallLayer.eElem)
{oRemoveallLayer.eElem.style.marginTop=-20+'px';oRemoveallLayer.eElem.style.marginLeft=450+'px';oRemoveallLayer.eElem.style.fontFamily='arial';oRemoveallLayer.eElem.style.fontSize='small';}
if(iPictureCount>0)
{bindElems(oMoveRight[iPictureCount-1]);oMoveRight[iPictureCount-1].source(picBaseUrl+'icon/iconMoveRt_16x16.gif');if(!bSafari)
oMoveRight[iPictureCount-1].setStyle('cursor','pointer');oMoveRight[iPictureCount-1].enable(true);}
iPictureCount++;}
if(iPictureCount>0)
{var oLMR=oMoveRight[iPictureCount-1];bindElems(oLMR);oLMR.enable(false);oLMR.source(picBaseUrl+'icon/iconInactMoveRt_16x16.gif');if(!bSafari)
oLMR.setStyle('cursor','default');var oLML=oMoveLeft[0];bindElems(oLML);oLML.enable(false);oLML.source(picBaseUrl+'icon/iconInactMoveLt_16x16.gif');if(!bSafari)
oLML.setStyle('cursor','default');}
updatePictureUrlList();var oHdn=document.getElementById("picData"+_ns.suffix);var json=JSON.parse(oHdn.value);json.item.pictureDetails.pictureURL=aIconUrls;json.sherpa=msgObj.sherpa;oHdn.value=JSON.stringify(json);if(oConfig.bMskuFlow)
{updateIcon();setPicCount();updateVariationPage();}
else
{setPicCount();updateInsertionFees();}}}}}else if(msgObj.cmd==='closePicUpDoNotSave')
_ns.closeDialog();}});}catch(e){alert(e);}};_ns.removeParamsFromUrl=function(url){if(url){var found=url.match(/(https?:\/\/.*?)\?/i);if(found&&found[1]){url=found[1];}}
return url;};_ns.bindOpenBtns=function(){_ns.bMSKU=cfg.bMSKU;for(var i=0,n=cfg.openBtnIds.length;i<n;i++){var openBtn=document.getElementById(cfg.openBtnIds[i]);var picLink=document.getElementById("freeImgLayer");if(openBtn.addEventListener){openBtn.addEventListener('click',function(evt){_ns.handleOpenBtn(evt);},false);if(!_ns.bMSKU){picLink.addEventListener('click',function(evt){_ns.handleOpenBtn(this.name);},false);}}
else{openBtn.attachEvent('onclick',function(evt){_ns.handleOpenBtn(evt);});}}
for(var i=0,n=cfg.sel.length;i<n;i++)
{var imgLink=document.getElementById(cfg.sel[i]);if(imgLink!=null){imgLink.addEventListener('click',function(evt){_ns.handleOpenBtn(evt);},false);}}};_ns.handleOpenBtn=function(evt){_ns.removeIframe();var e=evt||window.event;var n=cfg.sel.length,i=0;if(evt=="freeImgLayer")
var t=document.getElementById("addPicturesBtn");else if(evt==cfg.sel[i])
for(;i<n;)
{var t=document.getElementById("addPicturesBtn");i++;}
else
var t=e.target||e.srcElement;var cf=ebay.oDocument.getConfig("Selling.Describe.AddPictures.PageWarningIcon");if(cf.IsSherpaEnabled){var jsonObj=JSON.parse(cf.sWarnModelData);var selCnt=t.id.substring(6);for(var id=0;id<jsonObj.sherpa.length;id++)
{var picCnt=jsonObj.sherpa[id].pic;if(picCnt==selCnt)
jsonObj.currentPic=selCnt;}}
var data=t.getAttribute('data');var data=document.getElementById(data).value;data=JSON.parse(data);data.session=cfg;data.cmd='openPicUp';data=JSON.stringify(data);_ns.openSocket();_ns.openDialog();_xdmSocket.postMessage(data);_ns.btnClicked=cfg.btnMap[t.name][0];_ns.suffix=cfg.btnMap[t.name][1];_ns.bMSKU=cfg.bMSKU;_ns.createImgCells();};_ns.createImgCells=function(){var addPicCtrl=ebay.oDocument.oPage.controls[_ns.btnClicked];this.sControlIdx=_ns.suffix;var c=addPicCtrl.oConfig,sTr=c.sPicsRow.replaceTokens(this.sControlIdx),tr=ebay.oDocument.getUIElem(sTr),cl=ebay.oGlobals.oClient,newCellLen=cl.bMac&&cl.bNav?tr.cells.length:-1,iOrigPicCount=0,sId=this.sControlIdx;with(addPicCtrl){for(var i=iOrigPicCount;i<12;i++)
{var td=tr.insertCell(newCellLen);td.setAttribute('valign','middle');if(i!=0)
td.setAttribute('valign','bottom');if(iStockPhotoCount==1)
td.innerHTML=c.sCellHTML.replaceTokens(i,i+1+iStockPhotoCount,c.sCoreHost,sId,i==0?"Stock picture 1":'');else
td.innerHTML=c.sCellHTML.replaceTokens(i,i+1+iStockPhotoCount,c.sCoreHost,sId,i==0?c.sTopTxt:'');}}};_ns.init=function(){_ns.setElements();_ns.bindOpenBtns();};_ns.init();_ns.initWarningIcon=function(){var cf=ebay.oDocument.getConfig("Selling.Describe.AddPictures.PageWarningIcon");var msgObj=JSON.parse(cf.sWarnModelData);var addPicCtrl=ebay.oDocument.oPage.controls["add pictures"];with(addPicCtrl){for(var x=0;x<msgObj.item.pictureDetails.pictureURL.length;x++){var shrGui,warn_code,warn_type,longMsg=[],shortMsg=[],inPictureCount;inPictureCount=x;var lyr=oPicLayer[inPictureCount];bindElems(lyr);var pic=document.getElementById('selImg'+x);pict=oPics[x];if(lyr.bWarnMsg)
removeWarnIcon(pict,inPictureCount,lyr);for(var shr=0;shr<msgObj.sherpa.length;shr++){if(x==msgObj.sherpa[shr].pic){for(gui=0;gui<msgObj.sherpa[shr].guidance.length;gui++){if(msgObj.sherpa[shr].guidance[gui].code=="MANDATORY_STANDARDS_NOT_MET"){warn_type="picguiderror";longMsg[0]=msgObj.sherpa[shr].guidance[gui].longMsg,shortMsg[0]=msgObj.sherpa[shr].guidance[gui].shortMsg;break;}else if(msgObj.sherpa[shr].guidance[gui].code=="RECOMMENDED_STANDARDS_NOT_MET"){warn_type="picguidwarn";longMsg[gui]=msgObj.sherpa[shr].guidance[gui].longMsg,shortMsg[gui]=msgObj.sherpa[shr].guidance[gui].shortMsg;}}
setWarningNew(pic,inPictureCount,warn_type,longMsg,shortMsg);this.iWarnImgCount++;lyr.bWarnMsg=true;}}}}};var cf=ebay.oDocument.getConfig("Selling.Describe.AddPictures.PageWarningIcon");if(cf.IsSherpaEnabled){_ns.initWarningIcon();}
_ns.VariationWarningIcon=function(var_pics_name,var_pics_len,msgObj,varilen,varPicImgLyr){var addPicCtrl=ebay.oDocument.oPage.controls["add pictures"];with(addPicCtrl){for(var x=0;x<msgObj.item.pictureDetails.pictureURL.length;x++){var shrGui,warn_code,warn_type,longMsg=[],shortMsg=[],inPictureCount,pict;inPictureCount=x;var lyr=varPicImgLyr[varilen][x];bindElems(lyr);var pic=document.getElementById(var_pics_name+x);pict=new EbayHTMLImage(var_pics_name+x);if(lyr.bWarnMsg)
removeWarnIcon(pict,inPictureCount,lyr);for(var shr=0;shr<msgObj.sherpa.length;shr++){if(x==msgObj.sherpa[shr].pic){for(gui=0;gui<msgObj.sherpa[shr].guidance.length;gui++){if(msgObj.sherpa[shr].guidance[gui].code=="MANDATORY_STANDARDS_NOT_MET"){warn_type="picguiderror";longMsg[0]=msgObj.sherpa[shr].guidance[gui].longMsg,shortMsg[0]=msgObj.sherpa[shr].guidance[gui].shortMsg;break;}else if(msgObj.sherpa[shr].guidance[gui].code=="RECOMMENDED_STANDARDS_NOT_MET"){warn_type="picguidwarn";longMsg[gui]=msgObj.sherpa[shr].guidance[gui].longMsg,shortMsg[gui]=msgObj.sherpa[shr].guidance[gui].shortMsg;}}
setWarningNew(pic,inPictureCount,warn_type,longMsg,shortMsg);this.iWarnImgCount++;lyr.bWarnMsg=true;}}}}};var cf=ebay.oDocument.getConfig("Selling.Describe.AddPictures.PageWarningIcon");if(cf&&cf.sVarPicDetails&&cf.IsSherpaEnabled){var xi=0,xj=0,varilen=0,varPicImgLyr=new Array(5),var_pics_name,var_pics_len,var_pics_sherpa,msgObj,iWarnCountVari,iWarnCount;for(xi=0;xi<cf.sVarPicDetails.length;xi+=4){var_pics_name=cf.sVarPicDetails[xi+1],var_pics_len=cf.sVarPicDetails[xi+2],var_pics_sherpa=cf.sVarPicDetails[xi+3];msgObj=JSON.parse(var_pics_sherpa);iWarnCountVari+=msgObj.sherpa.length;varPicImgLyr[varilen]=new Array(var_pics_len);for(xj=0;xj<var_pics_len;xj++){varPicImgLyr[varilen][xj]=new EbayHTMLLayer(cf.sVarPicDetails[xi]+xj);varPicImgLyr[varilen][xj].bind();}
if(var_pics_len>0)
_ns.VariationWarningIcon(var_pics_name,var_pics_len,msgObj,varilen,varPicImgLyr);varilen++;}}
_ns.setWarningMsgNew=function(count){var cf=ebay.oDocument.getConfig("Selling.Describe.AddPictures.PageWarningIcon");if(cf){sTotalWarnLyr=new EbayHTMLLayer(cf.sTotalWarnLyrNew);sTotalWarnLyr.bind();sTotalWarnLyr.setValue(cf.sWarnMsgNew.replaceTokens(count));sTotalWarnLyr.show(true);}};};

// \include\lib\_global\features\syi3\describe\easyXDM.js 

(function(window,document,location,setTimeout,decodeURIComponent,encodeURIComponent){var global=this;var channelId=Math.floor(Math.random()*10000);var emptyFn=Function.prototype;var reURI=new RegExp("^((http.?:)\\/\\/([^:\\/\\s]+)(:\\d+)*)");var reParent=new RegExp("[\\-\\w]+\\/\\.\\.\\/");var reDoubleSlash=new RegExp("([^:])\\/\\/","g");var namespace="";var easyXDM={};var _easyXDM=window.easyXDM;var IFRAME_PREFIX="easyXDM_";var HAS_NAME_PROPERTY_BUG;var useHash=false;var flashVersion;var HAS_FLASH_THROTTLED_BUG;function isHostMethod(object,property){var t=typeof object[property];return t=='function'||(!!(t=='object'&&object[property]))||t=='unknown';}
function isHostObject(object,property){return!!(typeof(object[property])=='object'&&object[property]);}
function isArray(o){return Object.prototype.toString.call(o)==='[object Array]';}
function hasFlash(){var name="Shockwave Flash",mimeType="application/x-shockwave-flash";if(!undef(navigator.plugins)&&typeof navigator.plugins[name]=="object"){var description=navigator.plugins[name].description;if(description&&!undef(navigator.mimeTypes)&&navigator.mimeTypes[mimeType]&&navigator.mimeTypes[mimeType].enabledPlugin){flashVersion=description.match(new RegExp("\\d+","g"));}}
if(!flashVersion){var flash;try{flash=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");flashVersion=Array.prototype.slice.call(flash.GetVariable("$version").match(new RegExp("(\\d+),(\\d+),(\\d+),(\\d+)")),1);flash=null;}
catch(notSupportedException){}}
if(!flashVersion){return false;}
var major=parseInt(flashVersion[0],10),minor=parseInt(flashVersion[1],10);HAS_FLASH_THROTTLED_BUG=major>9&&minor>0;return true;}
var on,un;if(isHostMethod(window,"addEventListener")){on=function(target,type,listener){target.addEventListener(type,listener,false);};un=function(target,type,listener){target.removeEventListener(type,listener,false);};}
else if(isHostMethod(window,"attachEvent")){on=function(object,sEvent,fpNotify){object.attachEvent("on"+sEvent,fpNotify);};un=function(object,sEvent,fpNotify){object.detachEvent("on"+sEvent,fpNotify);};}
else{throw new Error("Browser not supported");}
var domIsReady=false,domReadyQueue=[],readyState;if("readyState"in document){readyState=document.readyState;domIsReady=readyState=="complete"||(~navigator.userAgent.indexOf('AppleWebKit/')&&(readyState=="loaded"||readyState=="interactive"));}
else{domIsReady=!!document.body;}
function dom_onReady(){if(domIsReady){return;}
domIsReady=true;for(var i=0;i<domReadyQueue.length;i++){domReadyQueue[i]();}
domReadyQueue.length=0;}
if(!domIsReady){if(isHostMethod(window,"addEventListener")){on(document,"DOMContentLoaded",dom_onReady);}
else{on(document,"readystatechange",function(){if(document.readyState=="complete"){dom_onReady();}});if(document.documentElement.doScroll&&window===top){var doScrollCheck=function(){if(domIsReady){return;}
try{document.documentElement.doScroll("left");}
catch(e){setTimeout(doScrollCheck,1);return;}
dom_onReady();};doScrollCheck();}}
on(window,"load",dom_onReady);}
function whenReady(fn,scope){if(domIsReady){fn.call(scope);return;}
domReadyQueue.push(function(){fn.call(scope);});}
function getParentObject(){var obj=parent;if(namespace!==""){for(var i=0,ii=namespace.split(".");i<ii.length;i++){obj=obj[ii[i]];}}
return obj.easyXDM;}
function noConflict(ns){window.easyXDM=_easyXDM;namespace=ns;if(namespace){IFRAME_PREFIX="easyXDM_"+namespace.replace(".","_")+"_";}
return easyXDM;}
function getDomainName(url){return url.match(reURI)[3];}
function getPort(url){return url.match(reURI)[4]||"";}
function getLocation(url){var m=url.toLowerCase().match(reURI);var proto=m[2],domain=m[3],port=m[4]||"";if((proto=="http:"&&port==":80")||(proto=="https:"&&port==":443")){port="";}
return proto+"//"+domain+port;}
function resolveUrl(url){url=url.replace(reDoubleSlash,"$1/");if(!url.match(new RegExp("^(http||https):\\/\\/"))){var path=(url.substring(0,1)==="/")?"":location.pathname;if(path.substring(path.length-1)!=="/"){path=path.substring(0,path.lastIndexOf("/")+1);}
url=location.protocol+"//"+location.host+path+url;}
while(reParent.test(url)){url=url.replace(reParent,"");}
return url;}
function appendQueryParameters(url,parameters){var hash="",indexOf=url.indexOf("#");if(indexOf!==-1){hash=url.substring(indexOf);url=url.substring(0,indexOf);}
var q=[];for(var key in parameters){if(parameters.hasOwnProperty(key)){q.push(key+"="+encodeURIComponent(parameters[key]));}}
return url+(useHash?"#":(url.indexOf("?")==-1?"?":"&"))+q.join("&")+hash;}
var query=(function(input){input=input.substring(1).split("&");var data={},pair,i=input.length;while(i--){pair=input[i].split("=");data[pair[0]]=decodeURIComponent(pair[1]);}
return data;}(new RegExp("xdm_e=").test(location.search)?location.search:location.hash));function undef(v){return typeof v==="undefined";}
var getJSON=function(){var cached={};var obj={a:[1,2,3]},json="{\"a\":[1,2,3]}";if(typeof JSON!="undefined"&&typeof JSON.stringify==="function"&&JSON.stringify(obj).replace((new RegExp("\\s","g")),"")===json){return JSON;}
if(Object.toJSON){if(Object.toJSON(obj).replace((new RegExp("\\s","g")),"")===json){cached.stringify=Object.toJSON;}}
if(typeof String.prototype.evalJSON==="function"){obj=json.evalJSON();if(obj.a&&obj.a.length===3&&obj.a[2]===3){cached.parse=function(str){return str.evalJSON();};}}
if(cached.stringify&&cached.parse){getJSON=function(){return cached;};return cached;}
return null;};function apply(destination,source,noOverwrite){var member;for(var prop in source){if(source.hasOwnProperty(prop)){if(prop in destination){member=source[prop];if(typeof member==="object"){apply(destination[prop],member,noOverwrite);}
else if(!noOverwrite){destination[prop]=source[prop];}}
else{destination[prop]=source[prop];}}}
return destination;}
function testForNamePropertyBug(){var form=document.body.appendChild(document.createElement("form")),input=form.appendChild(document.createElement("input"));input.name=IFRAME_PREFIX+"TEST"+channelId;HAS_NAME_PROPERTY_BUG=input!==form.elements[input.name];document.body.removeChild(form);}
function createFrame(config){if(undef(HAS_NAME_PROPERTY_BUG)){testForNamePropertyBug();}
var frame;if(HAS_NAME_PROPERTY_BUG){frame=document.createElement("<iframe name=\""+config.props.name+"\"/>");}
else{frame=document.createElement("IFRAME");frame.name=config.props.name;}
frame.id=frame.name=config.props.name;delete config.props.name;if(typeof config.container=="string"){config.container=document.getElementById(config.container);}
if(!config.container){apply(frame.style,{position:"absolute",top:"-2000px",left:"0px"});config.container=document.body;}
var src=config.props.src;config.props.src="javascript:false";apply(frame,config.props);frame.border=frame.frameBorder=0;frame.allowTransparency=true;config.container.appendChild(frame);if(config.onLoad){on(frame,"load",config.onLoad);}
if(config.usePost){var form=config.container.appendChild(document.createElement('form')),input;form.target=frame.name;form.action=src;form.method='POST';if(typeof(config.usePost)==='object'){for(var i in config.usePost){if(config.usePost.hasOwnProperty(i)){if(HAS_NAME_PROPERTY_BUG){input=document.createElement('<input name="'+i+'"/>');}else{input=document.createElement("INPUT");input.name=i;}
input.value=config.usePost[i];form.appendChild(input);}}}
form.submit();form.parentNode.removeChild(form);}else{frame.src=src;}
config.props.src=src;return frame;}
function checkAcl(acl,domain){if(typeof acl=="string"){acl=[acl];}
var re,i=acl.length;while(i--){re=acl[i];re=new RegExp(re.substr(0,1)=="^"?re:("^"+re.replace(new RegExp("(\\*)","g"),".$1").replace(new RegExp("\\?","g"),".")+"$"));if(re.test(domain)){return true;}}
return false;}
function prepareTransportStack(config){var protocol=config.protocol,stackEls;config.isHost=config.isHost||undef(query.xdm_p);useHash=config.hash||false;if(!config.props){config.props={};}
if(!config.isHost){config.channel=query.xdm_c.replace(new RegExp("[\"'<>\\\\]","g"),"");config.secret=query.xdm_s;config.remote=query.xdm_e.replace(new RegExp("[\"'<>\\\\]","g"),"");;protocol=query.xdm_p;if(config.acl&&!checkAcl(config.acl,config.remote)){throw new Error("Access denied for "+config.remote);}}
else{config.remote=resolveUrl(config.remote);config.channel=config.channel||"default"+channelId++;config.secret=Math.random().toString(16).substring(2);if(undef(protocol)){if(getLocation(location.href)==getLocation(config.remote)){protocol="4";}
else if(isHostMethod(window,"postMessage")||isHostMethod(document,"postMessage")){protocol="1";}
else if(config.swf&&isHostMethod(window,"ActiveXObject")&&hasFlash()){protocol="6";}
else if(navigator.product==="Gecko"&&"frameElement"in window&&navigator.userAgent.indexOf('WebKit')==-1){protocol="5";}
else if(config.remoteHelper){protocol="2";}
else{protocol="0";}}}
config.protocol=protocol;switch(protocol){case"0":apply(config,{interval:100,delay:2000,useResize:true,useParent:false,usePolling:false},true);if(config.isHost){if(!config.local){var domain=location.protocol+"//"+location.host,images=document.body.getElementsByTagName("img"),image;var i=images.length;while(i--){image=images[i];if(image.src.substring(0,domain.length)===domain){config.local=image.src;break;}}
if(!config.local){config.local=window;}}
var parameters={xdm_c:config.channel,xdm_p:0};if(config.local===window){config.usePolling=true;config.useParent=true;config.local=location.protocol+"//"+location.host+location.pathname+location.search;parameters.xdm_e=config.local;parameters.xdm_pa=1;}
else{parameters.xdm_e=resolveUrl(config.local);}
if(config.container){config.useResize=false;parameters.xdm_po=1;}
config.remote=appendQueryParameters(config.remote,parameters);}
else{apply(config,{channel:query.xdm_c,remote:query.xdm_e,useParent:!undef(query.xdm_pa),usePolling:!undef(query.xdm_po),useResize:config.useParent?false:config.useResize});}
stackEls=[new easyXDM.stack.HashTransport(config),new easyXDM.stack.ReliableBehavior({}),new easyXDM.stack.QueueBehavior({encode:true,maxLength:4000-config.remote.length}),new easyXDM.stack.VerifyBehavior({initiate:config.isHost})];break;case"1":stackEls=[new easyXDM.stack.PostMessageTransport(config)];break;case"2":config.remoteHelper=resolveUrl(config.remoteHelper);stackEls=[new easyXDM.stack.NameTransport(config),new easyXDM.stack.QueueBehavior(),new easyXDM.stack.VerifyBehavior({initiate:config.isHost})];break;case"3":stackEls=[new easyXDM.stack.NixTransport(config)];break;case"4":stackEls=[new easyXDM.stack.SameOriginTransport(config)];break;case"5":stackEls=[new easyXDM.stack.FrameElementTransport(config)];break;case"6":if(!flashVersion){hasFlash();}
stackEls=[new easyXDM.stack.FlashTransport(config)];break;}
stackEls.push(new easyXDM.stack.QueueBehavior({lazy:config.lazy,remove:true}));return stackEls;}
function chainStack(stackElements){var stackEl,defaults={incoming:function(message,origin){this.up.incoming(message,origin);},outgoing:function(message,recipient){this.down.outgoing(message,recipient);},callback:function(success){this.up.callback(success);},init:function(){this.down.init();},destroy:function(){this.down.destroy();}};for(var i=0,len=stackElements.length;i<len;i++){stackEl=stackElements[i];apply(stackEl,defaults,true);if(i!==0){stackEl.down=stackElements[i-1];}
if(i!==len-1){stackEl.up=stackElements[i+1];}}
return stackEl;}
function removeFromStack(element){element.up.down=element.down;element.down.up=element.up;element.up=element.down=null;}
apply(easyXDM,{version:"2.4.16.0",query:query,stack:{},apply:apply,getJSONObject:getJSON,whenReady:whenReady,noConflict:noConflict});easyXDM.DomHelper={on:on,un:un,requiresJSON:function(path){if(!isHostObject(window,"JSON")){document.write('<'+'script type="text/javascript" src="'+path+'"><'+'/script>');}}};(function(){var _map={};easyXDM.Fn={set:function(name,fn){_map[name]=fn;},get:function(name,del){var fn=_map[name];if(del){delete _map[name];}
return fn;}};}());easyXDM.Socket=function(config){var stack=chainStack(prepareTransportStack(config).concat([{incoming:function(message,origin){config.onMessage(message,origin);},callback:function(success){if(config.onReady){config.onReady(success);}}}])),recipient=getLocation(config.remote);this.origin=getLocation(config.remote);this.destroy=function(){stack.destroy();};this.postMessage=function(message){stack.outgoing(message,recipient);};stack.init();};easyXDM.Rpc=function(config,jsonRpcConfig){if(jsonRpcConfig.local){for(var method in jsonRpcConfig.local){if(jsonRpcConfig.local.hasOwnProperty(method)){var member=jsonRpcConfig.local[method];if(typeof member==="function"){jsonRpcConfig.local[method]={method:member};}}}}
var stack=chainStack(prepareTransportStack(config).concat([new easyXDM.stack.RpcBehavior(this,jsonRpcConfig),{callback:function(success){if(config.onReady){config.onReady(success);}}}]));this.origin=getLocation(config.remote);this.destroy=function(){stack.destroy();};stack.init();};easyXDM.stack.SameOriginTransport=function(config){var pub,frame,send,targetOrigin;return(pub={outgoing:function(message,domain,fn){send(message);if(fn){fn();}},destroy:function(){if(frame){frame.parentNode.removeChild(frame);frame=null;}},onDOMReady:function(){targetOrigin=getLocation(config.remote);if(config.isHost){apply(config.props,{src:appendQueryParameters(config.remote,{xdm_e:location.protocol+"//"+location.host+location.pathname,xdm_c:config.channel,xdm_p:4}),name:IFRAME_PREFIX+config.channel+"_provider"});frame=createFrame(config);easyXDM.Fn.set(config.channel,function(sendFn){send=sendFn;setTimeout(function(){pub.up.callback(true);},0);return function(msg){pub.up.incoming(msg,targetOrigin);};});}
else{send=getParentObject().Fn.get(config.channel,true)(function(msg){pub.up.incoming(msg,targetOrigin);});setTimeout(function(){pub.up.callback(true);},0);}},init:function(){whenReady(pub.onDOMReady,pub);}});};easyXDM.stack.FlashTransport=function(config){var pub,frame,send,targetOrigin,swf,swfContainer;function onMessage(message,origin){setTimeout(function(){pub.up.incoming(message,targetOrigin);},0);}
function addSwf(domain){var url=config.swf+"?host="+config.isHost;var id="easyXDM_swf_"+Math.floor(Math.random()*10000);easyXDM.Fn.set("flash_loaded"+domain.replace(new RegExp("[\\-.]","g"),"_"),function(){easyXDM.stack.FlashTransport[domain].swf=swf=swfContainer.firstChild;var queue=easyXDM.stack.FlashTransport[domain].queue;for(var i=0;i<queue.length;i++){queue[i]();}
queue.length=0;});if(config.swfContainer){swfContainer=(typeof config.swfContainer=="string")?document.getElementById(config.swfContainer):config.swfContainer;}
else{swfContainer=document.createElement('div');apply(swfContainer.style,HAS_FLASH_THROTTLED_BUG&&config.swfNoThrottle?{height:"20px",width:"20px",position:"fixed",right:0,top:0}:{height:"1px",width:"1px",position:"absolute",overflow:"hidden",right:0,top:0});document.body.appendChild(swfContainer);}
var flashVars="callback=flash_loaded"+domain.replace(new RegExp("[\\-.]","g"),"_")+"&proto="+global.location.protocol+"&domain="+getDomainName(global.location.href)+"&port="+getPort(global.location.href)+"&ns="+namespace;swfContainer.innerHTML="<object height='20' width='20' type='application/x-shockwave-flash' id='"+id+"' data='"+url+"'>"+"<param name='allowScriptAccess' value='always'></param>"+"<param name='wmode' value='transparent'>"+"<param name='movie' value='"+
url+"'></param>"+"<param name='flashvars' value='"+
flashVars+"'></param>"+"<embed type='application/x-shockwave-flash' FlashVars='"+
flashVars+"' allowScriptAccess='always' wmode='transparent' src='"+
url+"' height='1' width='1'></embed>"+"</object>";}
return(pub={outgoing:function(message,domain,fn){swf.postMessage(config.channel,message.toString());if(fn){fn();}},destroy:function(){try{swf.destroyChannel(config.channel);}
catch(e){}
swf=null;if(frame){frame.parentNode.removeChild(frame);frame=null;}},onDOMReady:function(){targetOrigin=config.remote;easyXDM.Fn.set("flash_"+config.channel+"_init",function(){setTimeout(function(){pub.up.callback(true);});});easyXDM.Fn.set("flash_"+config.channel+"_onMessage",onMessage);config.swf=resolveUrl(config.swf);var swfdomain=getDomainName(config.swf);var fn=function(){easyXDM.stack.FlashTransport[swfdomain].init=true;swf=easyXDM.stack.FlashTransport[swfdomain].swf;swf.createChannel(config.channel,config.secret,getLocation(config.remote),config.isHost);if(config.isHost){if(HAS_FLASH_THROTTLED_BUG&&config.swfNoThrottle){apply(config.props,{position:"fixed",right:0,top:0,height:"20px",width:"20px"});}
apply(config.props,{src:appendQueryParameters(config.remote,{xdm_e:getLocation(location.href),xdm_c:config.channel,xdm_p:6,xdm_s:config.secret}),name:IFRAME_PREFIX+config.channel+"_provider"});frame=createFrame(config);}};if(easyXDM.stack.FlashTransport[swfdomain]&&easyXDM.stack.FlashTransport[swfdomain].init){fn();}
else{if(!easyXDM.stack.FlashTransport[swfdomain]){easyXDM.stack.FlashTransport[swfdomain]={queue:[fn]};addSwf(swfdomain);}
else{easyXDM.stack.FlashTransport[swfdomain].queue.push(fn);}}},init:function(){whenReady(pub.onDOMReady,pub);}});};easyXDM.stack.PostMessageTransport=function(config){var pub,frame,callerWindow,targetOrigin;function _getOrigin(event){if(event.origin){return getLocation(event.origin);}
if(event.uri){return getLocation(event.uri);}
if(event.domain){return location.protocol+"//"+event.domain;}
throw"Unable to retrieve the origin of the event";}
function _window_onMessage(event){var origin=_getOrigin(event);if(origin==targetOrigin&&event.data.substring(0,config.channel.length+1)==config.channel+" "){pub.up.incoming(event.data.substring(config.channel.length+1),origin);}}
return(pub={outgoing:function(message,domain,fn){callerWindow.postMessage(config.channel+" "+message,domain||targetOrigin);if(fn){fn();}},destroy:function(){un(window,"message",_window_onMessage);if(frame){callerWindow=null;frame.parentNode.removeChild(frame);frame=null;}},onDOMReady:function(){targetOrigin=getLocation(config.remote);if(config.isHost){var waitForReady=function(event){if(event.data==config.channel+"-ready"){callerWindow=("postMessage"in frame.contentWindow)?frame.contentWindow:frame.contentWindow.document;un(window,"message",waitForReady);on(window,"message",_window_onMessage);setTimeout(function(){pub.up.callback(true);},0);}};on(window,"message",waitForReady);apply(config.props,{src:appendQueryParameters(config.remote,{xdm_e:getLocation(location.href),xdm_c:config.channel,xdm_p:1}),name:IFRAME_PREFIX+config.channel+"_provider"});frame=createFrame(config);}
else{on(window,"message",_window_onMessage);callerWindow=("postMessage"in window.parent)?window.parent:window.parent.document;callerWindow.postMessage(config.channel+"-ready",targetOrigin);setTimeout(function(){pub.up.callback(true);},0);}},init:function(){whenReady(pub.onDOMReady,pub);}});};easyXDM.stack.FrameElementTransport=function(config){var pub,frame,send,targetOrigin;return(pub={outgoing:function(message,domain,fn){send.call(this,message);if(fn){fn();}},destroy:function(){if(frame){frame.parentNode.removeChild(frame);frame=null;}},onDOMReady:function(){targetOrigin=getLocation(config.remote);if(config.isHost){apply(config.props,{src:appendQueryParameters(config.remote,{xdm_e:getLocation(location.href),xdm_c:config.channel,xdm_p:5}),name:IFRAME_PREFIX+config.channel+"_provider"});frame=createFrame(config);frame.fn=function(sendFn){delete frame.fn;send=sendFn;setTimeout(function(){pub.up.callback(true);},0);return function(msg){pub.up.incoming(msg,targetOrigin);};};}
else{if(document.referrer&&getLocation(document.referrer)!=query.xdm_e){window.top.location=query.xdm_e;}
send=window.frameElement.fn(function(msg){pub.up.incoming(msg,targetOrigin);});pub.up.callback(true);}},init:function(){whenReady(pub.onDOMReady,pub);}});};easyXDM.stack.NameTransport=function(config){var pub;var isHost,callerWindow,remoteWindow,readyCount,callback,remoteOrigin,remoteUrl;function _sendMessage(message){var url=config.remoteHelper+(isHost?"#_3":"#_2")+config.channel;callerWindow.contentWindow.sendMessage(message,url);}
function _onReady(){if(isHost){if(++readyCount===2||!isHost){pub.up.callback(true);}}
else{_sendMessage("ready");pub.up.callback(true);}}
function _onMessage(message){pub.up.incoming(message,remoteOrigin);}
function _onLoad(){if(callback){setTimeout(function(){callback(true);},0);}}
return(pub={outgoing:function(message,domain,fn){callback=fn;_sendMessage(message);},destroy:function(){callerWindow.parentNode.removeChild(callerWindow);callerWindow=null;if(isHost){remoteWindow.parentNode.removeChild(remoteWindow);remoteWindow=null;}},onDOMReady:function(){isHost=config.isHost;readyCount=0;remoteOrigin=getLocation(config.remote);config.local=resolveUrl(config.local);if(isHost){easyXDM.Fn.set(config.channel,function(message){if(isHost&&message==="ready"){easyXDM.Fn.set(config.channel,_onMessage);_onReady();}});remoteUrl=appendQueryParameters(config.remote,{xdm_e:config.local,xdm_c:config.channel,xdm_p:2});apply(config.props,{src:remoteUrl+'#'+config.channel,name:IFRAME_PREFIX+config.channel+"_provider"});remoteWindow=createFrame(config);}
else{config.remoteHelper=config.remote;easyXDM.Fn.set(config.channel,_onMessage);}
var onLoad=function(){var w=callerWindow||this;un(w,"load",onLoad);easyXDM.Fn.set(config.channel+"_load",_onLoad);(function test(){if(typeof w.contentWindow.sendMessage=="function"){_onReady();}
else{setTimeout(test,50);}}());};callerWindow=createFrame({props:{src:config.local+"#_4"+config.channel},onLoad:onLoad});},init:function(){whenReady(pub.onDOMReady,pub);}});};easyXDM.stack.HashTransport=function(config){var pub;var me=this,isHost,_timer,pollInterval,_lastMsg,_msgNr,_listenerWindow,_callerWindow;var useParent,_remoteOrigin;function _sendMessage(message){if(!_callerWindow){return;}
var url=config.remote+"#"+(_msgNr++)+"_"+message;((isHost||!useParent)?_callerWindow.contentWindow:_callerWindow).location=url;}
function _handleHash(hash){_lastMsg=hash;pub.up.incoming(_lastMsg.substring(_lastMsg.indexOf("_")+1),_remoteOrigin);}
function _pollHash(){if(!_listenerWindow){return;}
var href=_listenerWindow.location.href,hash="",indexOf=href.indexOf("#");if(indexOf!=-1){hash=href.substring(indexOf);}
if(hash&&hash!=_lastMsg){_handleHash(hash);}}
function _attachListeners(){_timer=setInterval(_pollHash,pollInterval);}
return(pub={outgoing:function(message,domain){_sendMessage(message);},destroy:function(){window.clearInterval(_timer);if(isHost||!useParent){_callerWindow.parentNode.removeChild(_callerWindow);}
_callerWindow=null;},onDOMReady:function(){isHost=config.isHost;pollInterval=config.interval;_lastMsg="#"+config.channel;_msgNr=0;useParent=config.useParent;_remoteOrigin=getLocation(config.remote);if(isHost){apply(config.props,{src:config.remote,name:IFRAME_PREFIX+config.channel+"_provider"});if(useParent){config.onLoad=function(){_listenerWindow=window;_attachListeners();pub.up.callback(true);};}
else{var tries=0,max=config.delay/50;(function getRef(){if(++tries>max){throw new Error("Unable to reference listenerwindow");}
try{_listenerWindow=_callerWindow.contentWindow.frames[IFRAME_PREFIX+config.channel+"_consumer"];}
catch(ex){}
if(_listenerWindow){_attachListeners();pub.up.callback(true);}
else{setTimeout(getRef,50);}}());}
_callerWindow=createFrame(config);}
else{_listenerWindow=window;_attachListeners();if(useParent){_callerWindow=parent;pub.up.callback(true);}
else{apply(config,{props:{src:config.remote+"#"+config.channel+new Date(),name:IFRAME_PREFIX+config.channel+"_consumer"},onLoad:function(){pub.up.callback(true);}});_callerWindow=createFrame(config);}}},init:function(){whenReady(pub.onDOMReady,pub);}});};easyXDM.stack.ReliableBehavior=function(config){var pub,callback;var idOut=0,idIn=0,currentMessage="";return(pub={incoming:function(message,origin){var indexOf=message.indexOf("_"),ack=message.substring(0,indexOf).split(",");message=message.substring(indexOf+1);if(ack[0]==idOut){currentMessage="";if(callback){callback(true);callback=null;}}
if(message.length>0){pub.down.outgoing(ack[1]+","+idOut+"_"+currentMessage,origin);if(idIn!=ack[1]){idIn=ack[1];pub.up.incoming(message,origin);}}},outgoing:function(message,origin,fn){currentMessage=message;callback=fn;pub.down.outgoing(idIn+","+(++idOut)+"_"+message,origin);}});};easyXDM.stack.QueueBehavior=function(config){var pub,queue=[],waiting=true,incoming="",destroying,maxLength=0,lazy=false,doFragment=false;function dispatch(){if(config.remove&&queue.length===0){removeFromStack(pub);return;}
if(waiting||queue.length===0||destroying){return;}
waiting=true;var message=queue.shift();pub.down.outgoing(message.data,message.origin,function(success){waiting=false;if(message.callback){setTimeout(function(){message.callback(success);},0);}
dispatch();});}
return(pub={init:function(){if(undef(config)){config={};}
if(config.maxLength){maxLength=config.maxLength;doFragment=true;}
if(config.lazy){lazy=true;}
else{pub.down.init();}},callback:function(success){waiting=false;var up=pub.up;dispatch();up.callback(success);},incoming:function(message,origin){if(doFragment){var indexOf=message.indexOf("_"),seq=parseInt(message.substring(0,indexOf),10);incoming+=message.substring(indexOf+1);if(seq===0){if(config.encode){incoming=decodeURIComponent(incoming);}
pub.up.incoming(incoming,origin);incoming="";}}
else{pub.up.incoming(message,origin);}},outgoing:function(message,origin,fn){if(config.encode){message=encodeURIComponent(message);}
var fragments=[],fragment;if(doFragment){while(message.length!==0){fragment=message.substring(0,maxLength);message=message.substring(fragment.length);fragments.push(fragment);}
while((fragment=fragments.shift())){queue.push({data:fragments.length+"_"+fragment,origin:origin,callback:fragments.length===0?fn:null});}}
else{queue.push({data:message,origin:origin,callback:fn});}
if(lazy){pub.down.init();}
else{dispatch();}},destroy:function(){destroying=true;pub.down.destroy();}});};easyXDM.stack.VerifyBehavior=function(config){var pub,mySecret,theirSecret,verified=false;function startVerification(){mySecret=Math.random().toString(16).substring(2);pub.down.outgoing(mySecret);}
return(pub={incoming:function(message,origin){var indexOf=message.indexOf("_");if(indexOf===-1){if(message===mySecret){pub.up.callback(true);}
else if(!theirSecret){theirSecret=message;if(!config.initiate){startVerification();}
pub.down.outgoing(message);}}
else{if(message.substring(0,indexOf)===theirSecret){pub.up.incoming(message.substring(indexOf+1),origin);}}},outgoing:function(message,origin,fn){pub.down.outgoing(mySecret+"_"+message,origin,fn);},callback:function(success){if(config.initiate){startVerification();}}});};easyXDM.stack.RpcBehavior=function(proxy,config){var pub,serializer=config.serializer||getJSON();var _callbackCounter=0,_callbacks={};function _send(data){data.jsonrpc="2.0";pub.down.outgoing(serializer.stringify(data));}
function _createMethod(definition,method){var slice=Array.prototype.slice;return function(){var l=arguments.length,callback,message={method:method};if(l>0&&typeof arguments[l-1]==="function"){if(l>1&&typeof arguments[l-2]==="function"){callback={success:arguments[l-2],error:arguments[l-1]};message.params=slice.call(arguments,0,l-2);}
else{callback={success:arguments[l-1]};message.params=slice.call(arguments,0,l-1);}
_callbacks[""+(++_callbackCounter)]=callback;message.id=_callbackCounter;}
else{message.params=slice.call(arguments,0);}
if(definition.namedParams&&message.params.length===1){message.params=message.params[0];}
_send(message);};}
function _executeMethod(method,id,fn,params){if(!fn){if(id){_send({id:id,error:{code:-32601,message:"Procedure not found."}});}
return;}
var success,error;if(id){success=function(result){success=emptyFn;_send({id:id,result:result});};error=function(message,data){error=emptyFn;var msg={id:id,error:{code:-32099,message:message}};if(data){msg.error.data=data;}
_send(msg);};}
else{success=error=emptyFn;}
if(!isArray(params)){params=[params];}
try{var result=fn.method.apply(fn.scope,params.concat([success,error]));if(!undef(result)){success(result);}}
catch(ex1){error(ex1.message);}}
return(pub={incoming:function(message,origin){var data=serializer.parse(message);if(data.method){if(config.handle){config.handle(data,_send);}
else{_executeMethod(data.method,data.id,config.local[data.method],data.params);}}
else{var callback=_callbacks[data.id];if(data.error){if(callback.error){callback.error(data.error);}}
else if(callback.success){callback.success(data.result);}
delete _callbacks[data.id];}},init:function(){if(config.remote){for(var method in config.remote){if(config.remote.hasOwnProperty(method)){proxy[method]=_createMethod(config.remote[method],method);}}}
pub.down.init();},destroy:function(){for(var method in config.remote){if(config.remote.hasOwnProperty(method)&&proxy.hasOwnProperty(method)){delete proxy[method];}}
pub.down.destroy();}});};global.easyXDM=easyXDM;})(window,document,location,window.setTimeout,decodeURIComponent,encodeURIComponent);

// \include\lib\_global\features\syi3\describe\json2.js 

if(typeof JSON!=='object'){JSON={};}
(function(){'use strict';function f(n){return n<10?'0'+n:n;}
if(typeof Date.prototype.toJSON!=='function'){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+'-'+
f(this.getUTCMonth()+1)+'-'+
f(this.getUTCDate())+'T'+
f(this.getUTCHours())+':'+
f(this.getUTCMinutes())+':'+
f(this.getUTCSeconds())+'Z':null;};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf();};}
var cx=new RegExp("[\\u0000\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]","g"),escapable=new RegExp("[\\\\\\\"\\x00-\\x1f\\x7f-\\x9f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]","g"),gap,indent,meta={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==='string'?c:'\\u'+('0000'+a.charCodeAt(0).toString(16)).slice(-4);})+'"':'"'+string+'"';}
function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==='object'&&typeof value.toJSON==='function'){value=value.toJSON(key);}
if(typeof rep==='function'){value=rep.call(holder,key,value);}
switch(typeof value){case'string':return quote(value);case'number':return isFinite(value)?String(value):'null';case'boolean':case'null':return String(value);case'object':if(!value){return'null';}
gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==='[object Array]'){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||'null';}
v=partial.length===0?'[]':gap?'[\n'+gap+partial.join(',\n'+gap)+'\n'+mind+']':'['+partial.join(',')+']';gap=mind;return v;}
if(rep&&typeof rep==='object'){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==='string'){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?': ':':')+v);}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?': ':':')+v);}}}}
v=partial.length===0?'{}':gap?'{\n'+gap+partial.join(',\n'+gap)+'\n'+mind+'}':'{'+partial.join(',')+'}';gap=mind;return v;}}
if(typeof JSON.stringify!=='function'){JSON.stringify=function(value,replacer,space){var i;gap='';indent='';if(typeof space==='number'){for(i=0;i<space;i+=1){indent+=' ';}}else if(typeof space==='string'){indent=space;}
rep=replacer;if(replacer&&typeof replacer!=='function'&&(typeof replacer!=='object'||typeof replacer.length!=='number')){throw new Error('JSON.stringify');}
return str('',{'':value});};}
if(typeof JSON.parse!=='function'){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==='object'){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v;}else{delete value[k];}}}}
return reviver.call(holder,key,value);}
text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return'\\u'+
('0000'+a.charCodeAt(0).toString(16)).slice(-4);});}
if(new RegExp("^[\\],:{}\\s]*$").test(text.replace(new RegExp("\\\\(?:[\"\\\\\\/bfnrt]|u[0-9a-fA-F]{4})","g"),'@').replace(new RegExp("\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?","g"),']').replace(new RegExp("(?:^|:|,)(?:\\s*\\[)+","g"),''))){j=eval('('+text+')');return typeof reviver==='function'?walk({'':j},''):j;}
throw new SyntaxError('JSON.parse');};}}());

// \include\lib\_global\features\syi3\describe\picuploadpopuphost.js 

var PicUploadPopupHost=function(cfg){var _ns={},_proxy,_win,_currentData,_picUploadUrl=cfg.picUploadUrl,_hostAppUrl=cfg.hostAppUrl,_isCgi5Url=cfg.isCgi5Url,_popupName=cfg.popupName,_isSerial=cfg.serialUpload,_initialSelfHostFlag=cfg.isSelfHost;_popupProps='width='+cfg.popupWidth+',height='+cfg.popupHeight+',scrollbars=yes,directories=no,location=no,menubar=no,status=no,toolbar=no,resizable=1',_pictureWindow='',_form='',_inputData='';_ns.popwin=null;_ns.bindOpenBtns=function(){_ns.bMSKU=cfg.bMSKU;_ns.bOldUploader=cfg.bOldUploader;var addPicCtrl=ebay.oDocument.oPage.controls["add pictures"];var pcfg=ebay.oDocument.getConfig("Selling.Describe.AddPictures");with(addPicCtrl){oFreeImgLayer=new EbayHTMLAnchor(this,pcfg.sFreeTnail);oFreeImgLayer.bind();oFreeImgLayer.subscribeEvents("onclick");oFreeImgLayer._registerEvent('onclick','parent.checkEvntAddPict');}
this.checkEvntAddPict=function(){if(this.name=="freeImgLayer"){uptcfg=ebay.oDocument.getConfig("Selling.SOJTagging");if(uptcfg){var s='',sTrackData='';if(typeof pageName!='undefined')
sTrackData+=",pageId|||"+pageName;BrowserVr=navigator.userAgent;if(typeof BrowserVr!='undefined')
sTrackData+=",PU_BrowserVr|||"+BrowserVr;UpldFlw=uptcfg.sCommand;if(typeof UpldFlw!='undefined')
sTrackData+=",PU_UpldFlw|||"+UpldFlw;DraftID=uptcfg.draftId;if(typeof DraftID!='undefined')
sTrackData+=",PU_DraftID|||"+DraftID;isCatalog=uptcfg.isCatalog;isUpEntryPts=uptcfg.isUpEntryPts;if(typeof isCatalog!='undefined'&&isUpEntryPts)
sTrackData+=",PU_IsCatalog|||"+isCatalog;s="freeImgLayer|"+new Date().getTime()+"||";s+=sTrackData;new Image().src=uptcfg.sTagUrl+'{tagData="'+s+'"}';}}
var data=_ns.getHiddenInputDataIE();_ns.openPopup(data);_ns.createImgCells();}
for(var i=0,n=cfg.openBtnIds.length;i<n;i++){var openBtn=document.getElementById(cfg.openBtnIds[i]);if(openBtn.addEventListener){openBtn.addEventListener('click',function(evt){var data=_ns.getHiddenInputData(evt);_ns.openPopup(data);_ns.createImgCells();},false);openBtn.addEventListener('keydown',function(evt){if(evt.keyCode==13){var data=_ns.getHiddenInputData(evt);_ns.openPopup(data);_ns.createImgCells();}},false);}else{openBtn.attachEvent('onclick',function(evt){var data=_ns.getHiddenInputData(evt);_ns.openPopup(data);_ns.createImgCells();});}}};_ns.bindOpenBtns();_ns.getHiddenInputData=function(evt){var e=evt||window.event;var t=e.target||e.srcElement;if((evt.currentTarget&&evt.currentTarget.name=="freeImgLayer")||(e.srcElement&&e.srcElement.name=="freeImgLayer"))var t=document.getElementById("addPicturesBtn");_ns.btnClicked=cfg.btnMap[t.name][0];_ns.suffix=cfg.btnMap[t.name][1];var inputId=decodeURIComponent(t.getAttribute('data').replace(/%/g,'%25'));var data=document.getElementById(decodeURIComponent(inputId)).value;data=JSON.parse(data);ic=ebay.oDocument.getUIElem("itemCondition");if(ic)
data.item.conditionID=ic.value;var cfgPics=ebay.oDocument.getConfig("Selling.Describe.AddPictures");if(data.item.pictureDetails.includeStockPhotoURL){if(data.stockPhotoUrls[0]!=cfgPics.sStockUrlNewUpl)
data.stockPhotoUrls[0]=cfgPics.sStockUrlNewUpl;if(data.item.pictureDetails.pictureURL[0]!=data.stockPhotoUrls[0]&&typeof(data.stockPhotoUrls[0])!="undefined"){data.item.pictureDetails.pictureURL[0]=cfgPics.sStockUrlNewUpl;}}
data.session=cfg;data.cmd='init';return data;};_ns.getHiddenInputDataIE=function(){_ns.btnClicked="add pictures";_ns.suffix="";var t=document.getElementById("addPicturesBtn");var inputId=decodeURIComponent(t.getAttribute('data'));var data=document.getElementById(inputId).value;data=JSON.parse(data);ic=ebay.oDocument.getUIElem("itemCondition");if(ic)
data.item.conditionID=ic.value;if(data.item.pictureDetails.includeStockPhotoURL){if(data.item.pictureDetails.pictureURL[0]!=data.stockPhotoUrls[0]){data.item.pictureDetails.pictureURL.splice(0,0,data.stockPhotoUrls[0]);}}
data.session=cfg;data.cmd='init';return data;};_ns.openPopup=function(data){var msg,popupUrl;if(!_ns.popwin||_ns.popwin.closed){popupUrl=_picUploadUrl;if(_isCgi5Url){popupUrl+='/ws/eBayISAPI.dll?picupload&popup=1&ver=3';if(_isSerial)
popupUrl+='&serial=1';popupUrl+='&hostUrl='+_picUploadUrl+'/ws/eBayISAPI.dll?picupload';}
else{popupUrl+='/_picupload/main?popup=1&ver=3';if(_isSerial)
popupUrl+='&serial=1';}
popupUrl+='&hostAppUrl='+encodeURIComponent(_hostAppUrl);msg={'cmd':'open','popupUrl':popupUrl,'popupCfg':_popupProps};_currentData=data;_ns.popwin=window.open(msg.popupUrl,'popup',msg.popupCfg);}
_ns.popwin.focus();};_ns.postMessage=function(msg){_ns.popwin.XDMBridge.receiveMessage(msg);};_ns.onMessageHandler=function(msgStr){var msgObj=JSON.parse(msgStr);switch(msgObj.cmd){case'ready':_ns.postMessage(_currentData);break;case'closePicUp':var msgObj;_ns.popwin.close();if(msgObj.pics){var l=msgObj.pics.length,maxLen=12,iPictureCount=0,aThumbnailUrls=[],aPictureUrls=[],aIconUrls=[],oMoveRight=[],oMoveLeft=[];var picBaseUrl="http://pics.ebaystatic.com/aw/pics/";var shrGui,warn_code,warn_type,longMsg=[],shortMsg=[];if(cfg.env&&cfg.env.toLowerCase()==='qa'){picBaseUrl="http://pics.qa.ebaystatic.com/aw/pics/";}
cfg.isSelfHost=false;var addPicCtrl=ebay.oDocument.oPage.controls[_ns.btnClicked];with(addPicCtrl){if(addPicCtrl.bSelfhost){for(var sh=1;sh<=addPicCtrl.iSelfhostMax;sh++){addPicCtrl.oSelfthostText[sh].setValue('');var pic=addPicCtrl.oPicLayer[sh-1];bindElems(pic);pic.show(false);}
addPicCtrl.bSelfhost=false;}
if(l>0){removeAllPics();if(typeof oFreeImgLayer!='undefined'&&oFreeImgLayer.eElem){oFreeImgLayer.show(false);}
for(var x=0;x<l;x++){var url=msgObj.pics[x].url,tn,picUrl;var pic=oPics[iPictureCount],lyr=oPicLayer[iPictureCount];if(msgObj.pics[x].isStockPhoto){lyr=oStockPhotoLyr;pic=oStockPhotoImage;iStockPhotoCount=1;}
if(msgObj.pics[0].isStockPhoto&&x>0){pic=oPics[iPictureCount-1];lyr=oPicLayer[iPictureCount-1];}
if(!msgObj.pics[x].isSelfHost&&!msgObj.pics[x].isStockPhoto){url=_ns.removeParamsFromUrl(url);var url1=url.split("_");var url2=url1[1].split(".");tn=url1[0]+"_0."+url2[1];picUrl=url1[0]+"_1."+url2[1];url+="?set_id=880000500F";picUrl+="?set_id=880000500F";}else{picUrl=url;tn=url;}
pic.bind();if(pic.eElem.length>1)
pic.eElem=pic.eElem[0];if(msgObj.pics[x].isSelfHost||msgObj.pics[x].isStockPhoto){with(pic){if(msgObj.pics[x].isSelfHost)cfg.isSelfHost=true;var aDims=getSelfHostWH(eElem);if(typeof(aDims[0])!="undefined")aDs=aDims;else aDs=[96,72];isGalleryStrip=typeof oGalleryStrip!='undefined';if(isGalleryStrip)oGalleryStrip.setImgDim(pic,aDs[0],aDs[1]);width(aDs[0]+'px');height(aDs[1]+'px');}
if(msgObj.pics[x].isStockPhoto){if(!oStockPhotoOption.eElem)
bindElems(oStockPhotoOption);oStockPhotoOption.eElem.value="true";}}
bindElems(lyr);if(!msgObj.pics[x].isStockPhoto){aPictureUrls[aPictureUrls.length]=picUrl;aThumbnailUrls[aThumbnailUrls.length]=tn;}
aIconUrls[aIconUrls.length]=url;document.getElementById(pic.name).src=tn;if(lyr.bWarnMsg)
removeWarnIcon(pic.eElem,iPictureCount,lyr);if(((pic.name).length>8)&&cf.IsSherpaEnabled){imglyr=document.getElementById(lyr.name);warnlyr=imglyr.childNodes[1].childNodes[1];if(warnlyr&&warnlyr.id=='warn_'+iPictureCount){imglyr.childNodes[1].removeChild(warnlyr);}}
if(cf.IsSherpaEnabled){for(shr=0;shr<msgObj.sherpa.length;shr++){if(x==msgObj.sherpa[shr].pic){for(gui=0;gui<msgObj.sherpa[shr].guidance.length;gui++){if(msgObj.sherpa[shr].guidance[gui].code=="MANDATORY_STANDARDS_NOT_MET"){warn_type="picguiderror";longMsg[0]=msgObj.sherpa[shr].guidance[gui].longMsg,shortMsg[0]=msgObj.sherpa[shr].guidance[gui].shortMsg;break;}else if(msgObj.sherpa[shr].guidance[gui].code=="RECOMMENDED_STANDARDS_NOT_MET"){warn_type="picguidwarn";longMsg[gui]=msgObj.sherpa[shr].guidance[gui].longMsg,shortMsg[gui]=msgObj.sherpa[shr].guidance[gui].shortMsg;}}
iPicCount=iPictureCount;if(msgObj.pics[0].isStockPhoto&&x>0){iPicCount=iPictureCount-1;}
setWarningNew(pic.eElem,iPicCount,warn_type,longMsg,shortMsg);this.iWarnImgCount++;lyr.bWarnMsg=true;}}}
lyr.show(true);oRemoveallLayer.show(true);if(!_ns.bMSKU&&oRemoveallLayer.eElem){cnfg=ebay.oDocument.getConfig("Selling.Describe.AddPictures");if(cnfg){mgnLt=cnfg.rmallStl;oRemoveallLayer.eElem.style.marginLeft=mgnLt;}}
if(iPictureCount>0)
{cc=ebay.oDocument.getConfig("Selling.Describe.AddPictures");bindElems(oMoveRight[iPictureCount-1]);oMoveRight[iPictureCount-1].source(cc.sCoreHost+cc.sMREnable);if(!bSafari)
oMoveRight[iPictureCount-1].setStyle('cursor','pointer');oMoveRight[iPictureCount-1].enable(true);}
iPictureCount++;}
cc=ebay.oDocument.getConfig("Selling.Describe.AddPictures"),rPictureCount=iPictureCount;if(iPictureCount>0)
{if(cc.IsStockPhotoAvailable)
rPictureCount=iPictureCount-1;var oLMR=oMoveRight[rPictureCount-1];bindElems(oLMR);oLMR.enable(false);oLMR.source(cc.sCoreHost+cc.sMRDisable);if(!bSafari)
oLMR.setStyle('cursor','default');}
var oHdn=document.getElementById("picData"+_ns.suffix);var json=JSON.parse(oHdn.value);json.item.pictureDetails.pictureURL=aIconUrls;if(msgObj.pics[0].isStockPhoto)
json.item.pictureDetails.includeStockPhotoURL=true;json.sherpa=msgObj.sherpa;json.warningcount=msgObj.sherpa.length;if(_initialSelfHostFlag&&!cfg.isSelfHost)
json.rules.restrict=null;json.onmove=false;oHdn.value=JSON.stringify(json);if(json.item.pictureDetails.includeStockPhotoURL&&iPictureCount>=12)
iPictureCount=iPictureCount-1;updatePictureUrlList();if(!((pic.name).length>8)&&cf.IsSherpaEnabled)
setWarningMsgNew();if(oConfig.bMskuFlow){updateIcon();setPicCount();updateVariationPage();}else{setPicCount();updateInsertionFees();}}}}
break;case'closePicUpDoNotSave':_ns.popwin.close();break;}};window.XDMBridge={};window.XDMBridge.receiveMessage=function(msg){_ns.onMessageHandler(msg);};_ns.getHostWithProtocol=function(url){var ptn=new RegExp('^(https?://.*?)/(.*)','i');var match=ptn.exec(url);return match[1];};_ns.removeParamsFromUrl=function(url){if(url){var found=url.match(/(https?:\/\/.*?)\?/i);if(found&&found[1]){url=found[1];}}
return url;};_ns.createImgCells=function(){var addPicCtrl=ebay.oDocument.oPage.controls[_ns.btnClicked];var cfgPics=ebay.oDocument.getConfig("Selling.Describe.AddPictures");this.sControlIdx=_ns.suffix;var c=addPicCtrl.oConfig,sTr=c.sPicsRow.replaceTokens(this.sControlIdx),tr=ebay.oDocument.getUIElem(sTr),cl=ebay.oGlobals.oClient,newCellLen=cl.bMac&&cl.bNav?tr.cells.length:-1,iOrigPicCount=0,sId=this.sControlIdx.replace(new RegExp("\"","g"),"&quot;"),cellLength=tr.children.length;with(addPicCtrl){if(cellLength<=iMaxPics){for(var i=iOrigPicCount;i<cfgPics.iMaxPics;i++){var td=tr.insertCell(newCellLen),oML=oMoveLeft[i];td.setAttribute('valign','middle');if(i!=0)td.setAttribute('valign','bottom');td.innerHTML=c.sCellHTML.replaceTokens(i,i+1+iStockPhotoCount,c.sCoreHost,sId,i==0?c.sTopTxt:'');bindElems(oML);if(i==0||(i==iOrigPicCount&&c.bImagesAppendOnly[sControlIdx])){oML.enable(false);oML.source(c.sCoreHost+c.sMLDisable);if(!bSafari)
oML.setStyle('cursor','default');}}}}};_ns.initWarningIcon=function(){var cf=ebay.oDocument.getConfig("Selling.Describe.AddPictures.PageWarningIcon");var msgObj=cf.sWarnModelData;var addPicCtrl=ebay.oDocument.oPage.controls["add pictures"];with(addPicCtrl){for(var x=0;x<msgObj.item.pictureDetails.pictureURL.length;x++){var shrGui,warn_code,warn_type,longMsg=[],shortMsg=[],inPictureCount;inPictureCount=x;var lyr=oPicLayer[inPictureCount];bindElems(lyr);if(msgObj.item.pictureDetails.includeStockPhotoURL&&x>0){inPictureCount=x-1;lyr=oPicLayer[inPictureCount];bindElems(lyr);}
var pic=document.getElementById('selImg'+inPictureCount);pict=oPics[x];if(msgObj.item.pictureDetails.includeStockPhotoURL&&x==0){lyr=oStockPhotoLyr;pict=oStockPhotoImage;iStockPhotoCount=1;pic=document.getElementById('stockImg');bindElems(lyr);if(!pict.eElem)
pict.bind();}
if(lyr.bWarnMsg)
removeWarnIcon(pict,inPictureCount,lyr);for(var shr=0;shr<msgObj.sherpa.length;shr++){if(x==msgObj.sherpa[shr].pic){for(gui=0;gui<msgObj.sherpa[shr].guidance.length;gui++){if(msgObj.item.pictureDetails.includeStockPhotoURL&&x==0){pic=document.getElementById('stockImg');}
if(msgObj.sherpa[shr].guidance[gui].code=="MANDATORY_STANDARDS_NOT_MET"){warn_type="picguiderror";longMsg[0]=msgObj.sherpa[shr].guidance[gui].longMsg,shortMsg[0]=msgObj.sherpa[shr].guidance[gui].shortMsg;break;}else if(msgObj.sherpa[shr].guidance[gui].code=="RECOMMENDED_STANDARDS_NOT_MET"){warn_type="picguidwarn";longMsg[gui]=msgObj.sherpa[shr].guidance[gui].longMsg,shortMsg[gui]=msgObj.sherpa[shr].guidance[gui].shortMsg;}}
setWarningNew(pic,inPictureCount,warn_type,longMsg,shortMsg);this.iWarnImgCount++;lyr.bWarnMsg=true;}}}
if(cf.IsSherpaEnabled)
setWarningMsgNew();}};var cf=ebay.oDocument.getConfig("Selling.Describe.AddPictures.PageWarningIcon");if(cf.IsSherpaEnabled){_ns.initWarningIcon();}
_ns.VariationWarningIcon=function(var_pics_name,var_pics_len,msgObj,varilen,varPicImgLyr){var addPicCtrl=ebay.oDocument.oPage.controls["add pictures"];with(addPicCtrl){for(var x=0;x<msgObj.item.pictureDetails.pictureURL.length;x++){var shrGui,warn_code,warn_type,longMsg=[],shortMsg=[],inPictureCount,pict;inPictureCount=x;var lyr=varPicImgLyr[varilen][x];bindElems(lyr);var pic=document.getElementById(var_pics_name+x);pict=new EbayHTMLImage(var_pics_name+x);if(lyr.bWarnMsg)
removeWarnIcon(pict,inPictureCount,lyr);for(var shr=0;shr<msgObj.sherpa.length;shr++){if(x==msgObj.sherpa[shr].pic){for(gui=0;gui<msgObj.sherpa[shr].guidance.length;gui++){if(msgObj.sherpa[shr].guidance[gui].code=="MANDATORY_STANDARDS_NOT_MET"){warn_type="picguiderror";longMsg[0]=msgObj.sherpa[shr].guidance[gui].longMsg,shortMsg[0]=msgObj.sherpa[shr].guidance[gui].shortMsg;break;}else if(msgObj.sherpa[shr].guidance[gui].code=="RECOMMENDED_STANDARDS_NOT_MET"){warn_type="picguidwarn";longMsg[gui]=msgObj.sherpa[shr].guidance[gui].longMsg,shortMsg[gui]=msgObj.sherpa[shr].guidance[gui].shortMsg;}}
setWarningNew(pic,inPictureCount,warn_type,longMsg,shortMsg);this.iWarnImgCount++;lyr.bWarnMsg=true;}}}}};var cf=ebay.oDocument.getConfig("Selling.Describe.AddPictures.PageWarningIcon");if(cf&&cf.sVarPicDetails&&cf.IsSherpaEnabled){var xi=0,xj=0,varilen=0,varPicImgLyr=new Array(5),var_pics_name,var_pics_len,var_pics_sherpa,msgObj,iWarnCountVari,iWarnCount;for(xi=0;xi<cf.sVarPicDetails.length;xi+=4){var_pics_name=cf.sVarPicDetails[xi+1],var_pics_len=cf.sVarPicDetails[xi+2],var_pics_sherpa=cf.sVarPicDetails[xi+3];msgObj=JSON.parse(var_pics_sherpa);iWarnCountVari+=msgObj.sherpa.length;varPicImgLyr[varilen]=new Array(var_pics_len);for(xj=0;xj<var_pics_len;xj++){varPicImgLyr[varilen][xj]=new EbayHTMLLayer(cf.sVarPicDetails[xi]+xj);varPicImgLyr[varilen][xj].bind();}
if(var_pics_len>0)
_ns.VariationWarningIcon(var_pics_name,var_pics_len,msgObj,varilen,varPicImgLyr);varilen++;}}
_ns.setWarningMsgNew=function(count){var cf=ebay.oDocument.getConfig("Selling.Describe.AddPictures.PageWarningIcon");if(cf){sTotalWarnLyr=new EbayHTMLLayer(cf.sTotalWarnLyrNew);sTotalWarnLyr.bind();sTotalWarnLyr.setValue(cf.sWarnMsgNew.replaceTokens(count));sTotalWarnLyr.show(true);}};ebay.oDocument.oPage._ns=_ns;return{};};

// \include\lib\_global\features\syi3\describe\reserve_price.js 

ebay.oP.initReservePriceAL=function()
{var t=this,oD=t.parent,c=oD.getConfig("Selling.Format.ReservePrice");if(c)
{l=new EbayHTMLAnchor(t,oEC.sAnchorNameRp);l.onclick=function()
{var t=this;var cCfg=ebay.oDocument.getConfig('Selling.Common');c.bOnFocus=cCfg.bOnFocus;c.sStartLyrName=cCfg.sStartLyrName;t.parent.oChangeRP=this;t.parent.openDialog(c,t.eElem.href+'&ej2child=true');return false;}
new EbayHTMLText(t,oEC.sReservePriceElem);new EbayHTMLLayer(t,oEC.sReservePriceLayer);inp=new EbayHTMLText(this,c.sInptElemName);inp.subscribeEvents("onfocus");inp.bind();ctrl=new EbayHTMLRadio(this,c.sCtrlElemName,false,c);ctrl.subscribeEvents("onchange");ctrl.bind();inp.onfocus=function(){ctrl.setValue(2,true);}
ctrl.onchange=function(){if(this.getSelectedIndex()!=2){inp.setValue("");}}}}

// \include\lib\_global\features\syi3\describe\best_offer.js 

ebay.oP.initBestOfferAL=function()
{var t=this,oD=t.parent,c=oEC;if(c)
{var oA=new EbayHTMLCheckbox(t,c.sAutoAcceptCheckbox);var oAE=new EbayHTMLText(t,c.sAutoAcceptAmtElemName);var bHasBO=true;var oAD;var ft=t._getControl("format_tabs");if(ft&&ft.oConfig.sHasBO=='false'){oAD=new EbayHTMLRadio(t,c.sBestOfferDecline);bHasBO=false}else{oAD=new EbayHTMLCheckbox(t,c.sBestOfferDecline)}
var oDE=new EbayHTMLText(t,c.sAutoDeclineAmtElemName);var oDM=new EbayHTMLText(t,c.sAutoDeclineMsgElemName);var oHidden=new EbayHTMLText(t,c.sBestOfferOptionsReset);oA._registerListener(oA._registerEvent('onclick'),t.EVENT_AFTER,"onclick");oA.onclick=function()
{var t=this,b=t.isChecked();var bc=b?"":"disabledCtrl";if(!oAE.eElem)
oAE.bind();oAE.enable(b);oAE.setClass(bc);if(!b)
oAE.setValue('');if(b)
{if(!oHidden.eElem)
oHidden.bind();oHidden.setValue('true');}}
oAD._registerListener(oAD._registerEvent('onclick'),t.EVENT_AFTER,"onclick");oAD.onclick=function()
{var t=this,b=bHasBO?t.isChecked():(t.getValue()=='true');var bc=b?"":"disabledCtrl";if(!oDE.eElem)
oDE.bind();oDE.enable(b);oDE.setClass(bc);if(!oDM.eElem)
oDM.bind();oDM.enable(b);oDM.setClass(bc);if(!b)
oDE.setValue('');if(b)
{if(!oHidden.eElem)
oHidden.bind();oHidden.setValue('true');}}
oAE._registerListener(oAE._registerEvent('onchange'),t.EVENT_AFTER,"onchange");oAE.onchange=function()
{if(!oHidden.eElem)
oHidden.bind();oHidden.setValue('true');}
oDE._registerListener(oDE._registerEvent('onchange'),t.EVENT_AFTER,"onchange");oDE.onchange=function()
{if(!oHidden.eElem)
oHidden.bind();oHidden.setValue('true');}}}
ebay.oP.onAfterLoadBestOffer=function()
{var t=this,oD=t.parent,c=oEC;if(c)
{var a=t.controls[c.sAutoAcceptCheckbox];var d=t.controls[c.sBestOfferDecline];if(!a.eElem)
a.bind();a.onclick();if(!d.eElem)
d.bind();d.onclick();}}

// \include\lib\_global\features\syi3\describe\seller_granularity_popup.js 

ebay.oP.initSellerGranularityAL=function()
{var t=this,c=t.parent.getConfig("Selling.Shipping.SellerGranularity");if(c)
new EbaySellerGranularityPopUp(t,"SellerGranularity",c);}
ebay.oP.initShowGSPCountriesAL=function()
{var t=this,c=t.parent.getConfig("Selling.Shipping.SellerGranularity");if(c)
new EbayShowGSPCountries(t,"ShowGSPCountries",c);}
function EbayShowGSPCountries(pParent,pName,pCfg)
{if(pCfg)
{if(!this.objType)
this.objType="EbaySellerGranularityPopUp";this.base=EbayBaseControl;this.base(pParent,pName);var t=this;this.init=function()
{var t=this;var sctop=null;with(t)
{gLyr=new EbaySYI3Grayout(this,"lyrGrayout_sec");olay=new EbayHTMLOverlayContent(this,pCfg.sOlayCntId,pCfg);olay.bind();oCountry=new EbayHTMLAnchor(this,pCfg.sCountry,false,pCfg);if(!oCountry.eElem)
oCountry.bind();oCountry._registerEvent("onclick","onClick");oCountry.onClick=function(){t.openOverlay(olay,pCfg.width,pCfg.height,oCountry.eElem.offsetTop);}
ClsBtn=new EbayHTMLAnchor(this,pCfg.sClose);ClsBtn.bind();ClsBtn.onclick=function()
{t.closeOverlay();}}
this.showGryLyr=function(){with(this){var gLyr=this._getControl('lyrGrayout_sec');if(gLyr){var bd=this.oDocument.doc.body,aPageSize=ebay.oUtils.oPositioning.getPageSize(),bStyleOverflow=bd.style.overflow=='hidden',cLyr=this.oDocument.getUIElem('content');;sw=bStyleOverflow?cLyr.scrollWidth:aPageSize[0];sh=bStyleOverflow?cLyr.scrollHeight:aPageSize[1];gLyr.bDisableSelElems=false;gLyr.display(sw,sh);}}}
this.openOverlay=function(ovlay,w,h,t){this.showGryLyr();if(ovlay){ovlay.bind();ovlay.bNoSetContent=true;ovlay.eElem.style.zIndex=111;ovlay.eElem.style.width=w+'px'
ovlay.eElem.style.height=h;ovlay.display();ovlay.eElem.style.top=t+'px';ovlay.isOpen=true;}}
this.closeOverlay=function(){var gLyr=this._getControl('lyrGrayout_sec'),olay=this._getControl(pCfg.sOlayCntId);if(gLyr)
gLyr.hide();if(olay&&olay.isOpen){olay.bClearValueOnClose=false;olay.hide();olay.isOpen=false;}
return false;}}
this.init();}}
function EbaySellerGranularityPopUp(pParent,pName,pCfg)
{if(pCfg)
{if(!this.objType)
this.objType="EbaySellerGranularityPopUp";this.base=EbayBaseControl;this.base(pParent,pName);var t=this;t.oLnk;t.oPopup;t.oChk;t.oHidden;t.oCfg=pCfg;t.sHidden=t.oCfg.sHidden;t.sChk=t.oCfg.sChk;t.sCorELnk=t.oCfg.sCorELnk;this.init=function()
{var t=this;with(t)
{oPopup=new EbayHTMLPopup(t,"SellerGranularity",oCfg);oLnk=new EbayHTMLAnchor(t,sCorELnk);if(!oLnk.eElem)
oLnk.bind();oLnk._registerEvent("onclick","parent.showPopup");oLnk.bind();oHidden=new EbayHTMLText(t,sHidden);if(!oHidden.eElem)
oHidden.bind();oChk=new EbayHTMLCheckbox(t,sChk);if(!oChk.eElem)
oChk.bind();oChk._registerEvent("onclick","parent.chk");}}
this.init();this.chk=function()
{var t=this;oHidden.setValue(t.isChecked());}
this.close=function(){oPopup.close();}
this.showPopup=function()
{var p=this.parent;oPopup.sUrl=p.oCfg.sUrl;oPopup.show();}}}

// \include\lib\_global\features\syi3\multi_sku\_base\overlay_variations.js 

function EbaySYI3VariationOverlay(pParent,pName,pCfg){if(!this.objType)this.objType="EbaySYI3VariationOverlay";var cCfg=ebay.oDocument.getConfig('Selling.Common');pCfg.bOnFocus=cCfg.bOnFocus;pCfg.sStartLyrName=cCfg.sStartLyrName;var c=pCfg,oD=this.oDocument;this.base=EbayBaseControl;this.base(pParent,pName);this.oConfig=pCfg;this.bCreateVariation=c.bCreateVariation;this.bBrowsePage=c.bBrowsePage;this.bVariationPage=c.bVariationPage;this.bPicturePage=c.bPicturePage;var QP=ebay.oP.controls['QuantityPrice_variation'];this.bMSKUPicturePage=c.bMSKUPicturePage;if(c.sFormName)this.oForm=this.parent.getFormObj(c.sFormName);this.oAid=new EbayHTMLText(this,c.sAidElem);this.sAid=c.sAidElem;this.aFP=c.aFormPosts;this.iHiddenAid=c.sHiddenAid;this.aCloseIds=c.aoverlayIds.closeOvrlids;this.aShowOverlayBtn=c.aoverlayIds.aShowOverlayBtn;this.aShowQuantityBtn=c.aoverlayIds.aShowQuantityBtn;this.aRemoveBtnElem=c.aRemoveBtnElem;if(c.bBrowsePage){this.soverrideVariations=c.soverrideVariations;this.sHiddenCat1=c.sHiddenCat1;this.sHiddenCat2=c.sHiddenCat2;this.iNewCategory=c.iNewCategory;this.sprevCat1=c.sprevCat1;this.sprevCat2=c.sprevCat2;this.sPrimaryCat=c.sPrimaryCat;}
this.oShowOverlayBtn=[];this.oShowQuantityBtn=[];this.closeBtns=[];this.of=this.oDocument.createElement('form');this.of.setAttribute("id","VariationOverlayForm");this.of.setAttribute("name","VariationOverlayForm");var len=this.aShowOverlayBtn.length;for(var i=0;i<len;i++){this.oShowOverlayBtn[i]=new EbayHTMLButton(this,this.aShowOverlayBtn[i]);}
if(QP){var len2=this.aRemoveBtnElem.length;for(var k=0;k<len2;k++){this.aRemoveBtnElem[k]=new EbayHTMLButton(this,this.aRemoveBtnElem[k]);}}
if(this.aShowQuantityBtn){var len1=this.aShowQuantityBtn.length;for(var j=0;j<len1;j++){this.oShowQuantityBtn[j]=new EbayHTMLButton(this,this.aShowQuantityBtn[j]);}}
this.oCreateStBtn=new EbayHTMLButton(this,c.aoverlayIds.actionBtn);this.oGOL=new EbaySYI3Grayout(this,c.sGryLyr);this.oFixedPriceAmt=this.oDocument.getUIElem(c.aoverlayIds.textboxOverlayId);this.oQuantityamt=this.oDocument.getUIElem(c.aoverlayIds.QuantityamtTxt);len=this.aCloseIds.length;for(var i=0;i<len;i++){if(c.bBrowsePage&&i==0)this.closeBtns[i]=new EbayHTMLAnchor(this,this.aCloseIds[i]);else this.closeBtns[i]=new EbayHTMLButton(this,this.aCloseIds[i]);}
this.oWarningVariationOverlay=new EbayHTMLOverlayContent(this,c.sConfirmOverlay,c);this.oQuantityVariationOverlay=new EbayHTMLOverlayContent(this,c.sQuantityOverlay,c);if(this.bBrowsePage&&!this.oDocument.getUIElem(c.sConfirmOverlay).form){odiv=this.oDocument.getUIElem(c.sConfirmOverlay);this.oDocument.doc.body.appendChild(this.of);this.of.appendChild(odiv);}
this.oOverideVariationHidden=new EbayHTMLText(this,c.soverrideVariations);this.oPictureTrait=new EbayHTMLText(this,c.sTraitHiddenName);this.oErrorLyr=new EbayHTMLLayer(this,c.sErrDivid);this.init=function(){with(this){if(oErrorLyr)oErrorLyr.bind();var len2=aShowOverlayBtn.length;for(var i=0;i<len2;i++){if(!oShowOverlayBtn[i].eElem)oShowOverlayBtn[i].bind();if(!QP&&c.bMSKUPicturePage){if(oShowOverlayBtn[0].name==aShowOverlayBtn)
{oShowOverlayBtn[i]._registerEvent('onchange','parent.createVariation');}}
else
{oShowOverlayBtn[i]._registerEvent('onclick','parent.createVariation');}
oShowOverlayBtn[i].bind();_registerListener(ebay.oDocument._getEvent('resize'),this.EVENT_AFTER,'resize');}
if(aShowQuantityBtn){var lenn2=aShowOverlayBtn.length;for(var j=0;j<lenn2;j++){if(!oShowQuantityBtn[j].eElem)oShowQuantityBtn[j].bind();oShowQuantityBtn[j]._registerEvent('onclick','parent.createQuantity');oShowQuantityBtn[j].bind();_registerListener(ebay.oDocument._getEvent('resize'),this.EVENT_AFTER,'resize');}}
if(QP){if(aRemoveBtnElem){var lenk2=aRemoveBtnElem.length;for(var k=0;k<lenk2;k++){if(!aRemoveBtnElem[k].eElem)aRemoveBtnElem[k].bind();aRemoveBtnElem[k]._registerEvent('onclick','parent.Removebtn');aRemoveBtnElem[k].bind();_registerListener(ebay.oDocument._getEvent('resize'),this.EVENT_AFTER,'resize');}}}
oCreateStBtn._registerEvent('onclick','parent.RemoveWarning');oCreateStBtn.bind();len2=aCloseIds.length;for(var i=0;i<len2;i++){closeBtns[i].subscribeEvents("onblur");closeBtns[i]._registerEvent('onclick','parent.closeOverlayVariation');closeBtns[i]._registerEvent('onblur','parent.retainFocusOverlay');closeBtns[i].bind();}
for(var i in aFP){var oLink=this.oLink=new EbayHTMLAnchor(this,i);oLink._registerEvent('onclick','parent.formPost');}}
this.resize=function(){var p=this.parent,pp=p.parent,c=pp.oConfig,overlay=p.oWarningVariationOverlay,overlayElem=typeof overlay!='undefined';if(!QP&&c&&c.bMSKUPicturePage){if(p.oShowOverlayBtn[0].eElem.disabled==true)
{var overlay=p.oWarningVariationOverlay;}}
else
{if(p.oWarningVariationOverlay.eElem.style.display!="none"){var overlay=p.oWarningVariationOverlay;}
else{var overlay=p.oQuantityVariationOverlay;}}
if(overlayElem){overlay.eElem.style.top=((ebay.oDocument.doc.body.clientHeight-overlay.eElem.offsetHeight)/2)+ebay.oGlobals.oClient.getScrollTop();overlay.eElem.style.left=((ebay.oDocument.doc.body.clientWidth-overlay.eElem.offsetWidth)/2)+ebay.oGlobals.oClient.getScrollLeft();}}
this.hideGrayOut=function(){var gLyr=this.oGOL;if(gLyr){gLyr.hide();}}
this.retainFocusOverlay=function(){var sTextBox=this.parent.oConfig.aoverlayIds.stextboxOverlayId;if(sTextBox){var oTextBox=ebay.oDocument.getUIElem(sTextBox);if(oTextBox)oTextBox.focus(true);}else{OverlayCntrl=ebay.oP.controls['variation_overlay'];if(OverlayCntrl)OverlayCntrl.closeBtns[1].focus(true);else{s=this.parent.aCloseIds[1]+".focus(true);";setTimeout(s,10);}}}
this.closeOverlayVariation=function(){var p=this.parent,pp=p.parent,c=pp.oConfig;if(!QP&&c.bMSKUPicturePage){if(p.oShowOverlayBtn[0].eElem.disabled==true)
{var overlay=p.oWarningVariationOverlay;}}
else
{if(p.oWarningVariationOverlay.eElem.style.display!="none"){var overlay=p.oWarningVariationOverlay;}
else{var overlay=p.oQuantityVariationOverlay;}}
if(p.oPictureTrait&&p.oPictureTrait.eElem){var tochange=p.oPictureTrait.eElem.value;len=p.oShowOverlayBtn[0].eElem.length;for(var i=0;i<len;i++)
{if(p.oShowOverlayBtn[0].eElem[i].text===tochange)
p.oShowOverlayBtn[0].eElem[i].selected="true";}}
if(p.bBrowsePage){oHiddenCat1=new EbayHTMLText(this,p.sHiddenCat1);if(!oHiddenCat1.eElem)oHiddenCat1.bind();oHiddenCat1.setValue(p.sPrimaryCat);oHiddenCat2=new EbayHTMLText(this,p.sHiddenCat2);if(!oHiddenCat2.eElem)oHiddenCat2.bind();oHiddenCat2.setValue("");oHiddenPrevCat2=new EbayHTMLText(this,p.sprevCat2);if(!oHiddenPrevCat2.eElem)oHiddenPrevCat2.bind();oHiddenPrevCat2.setValue("");if(!p.oOverideVariationHidden.eElem)p.oOverideVariationHidden.bind();p.oOverideVariationHidden.setValue(false);oForm=pp.oContinueButton.eElem.form;oForm['aid'].value=p.iHiddenAid;ebay.oDocument.oPage.bShowAlert=false;oForm.submit();return false;}else{overlay.show();p.hideGrayOut();if(c.bMSKUPicturePage){var g=p.oShowOverlayBtn[0].eElem.options;for(var i=0;i<p.oShowOverlayBtn[0].eElem.length;i++)
if(g[i].text==p.oPictureTrait.eElem.value)
p.oShowOverlayBtn[0].eElem.selectedIndex=i;}
if(p.oShowQuantityBtn[0]&&overlay.name=="QuantityOverlay_secGrp"){p.oShowQuantityBtn[0].bind();p.oShowQuantityBtn[0].focus(true);}
if(p.oShowOverlayBtn[0]&&overlay.name=="ConfirmOverlay_secGrp"){p.oShowOverlayBtn[0].bind();p.oShowOverlayBtn[0].focus(true);}
return false;}}
this.RemoveWarning=function(){var p=this.parent,pp=p.parent,c=p.oConfig,overlay=p.oWarningVariationOverlay;if(!QP&&c.bMSKUPicturePage){if(p.oShowOverlayBtn[0].eElem.disabled==true)
{var overlay=p.oWarningVariationOverlay;}}
else
{if(p.oWarningVariationOverlay.eElem.style.display!="none"){var overlay=p.oWarningVariationOverlay;}
else{var overlay=p.oQuantityVariationOverlay;}}
overlay.show();if(p.bCreateVariation||p.bVariationPage){if(c.bDyi){oForm=this.parent.parent.getFormObj(c.sFormName);p.hideGrayOut();}else{oForm=new EbayHTMLForm(this,'selling');oForm.bind();}
if(p.bVariationPage){p.hideGrayOut();}
oForm.eElem.elements['aid'].value=p.iHiddenAid;if(!p.oOverideVariationHidden.eElem)p.oOverideVariationHidden.bind();p.oOverideVariationHidden.setValue(true);ebay.oDocument.oPage.bShowAlert=false;oForm.submit();return false;}else if(p.bBrowsePage){if(!p.oOverideVariationHidden.eElem)p.oOverideVariationHidden.bind();p.oOverideVariationHidden.setValue(true);oHiddenCat1=new EbayHTMLText(this,p.sHiddenCat1);if(!oHiddenCat1.eElem)oHiddenCat1.bind();oHiddenCat1.setValue(p.iNewCategory);oForm=new EbayHTMLForm(this,'selling');oForm.bind();ebay.oDocument.oPage.bShowAlert=false;oForm.submit();return false;p.hideGrayOut();}else if(p.bPicturePage){overlay.eElem.appendChild(p.of);if(!p.oPictureTrait.eElem)p.oPictureTrait.bind();var oVairationRow=this.oDocument.getUIElem(c.sTraitName).parentNode.parentNode;var child=oVairationRow.childNodes,len3=child.length;for(i=0;i<len3;i++){var grandchild=child[i].childNodes,len4=grandchild.length;for(j=0;j<len4;j++){if(p.bMSKUPicturePage){if((grandchild[j].id==c.sTraitName)&&(grandchild[j].selected)){p.oPictureTrait.setValue(grandchild[j].innerHTML);}}
else
{if((grandchild[j].id==c.sTraitName)&&(grandchild[j].checked)){p.oPictureTrait.setValue(grandchild[j].value);}}}}
oForm=new EbayHTMLForm(this,'selling');oForm.bind();oForm.eElem.elements['aid'].value=p.iHiddenAid;ebay.oDocument.oPage.bShowAlert=false;oForm.submit();return false;}else{overlay.eElem.appendChild(p.of);if(overlay.eElem.id==p.oWarningVariationOverlay.eElem.id){p.oFixedPriceAmt=this.oDocument.getUIElem("FixedPriceamtTxt");for(i in pp.aQuantity){var oVaraitionAmt=pp.oAmtTxt[i];if(oVaraitionAmt){oVaraitionAmt.bind();if(pp.oQtyChk[i].isChecked()&&p.oFixedPriceAmt.value!='')oVaraitionAmt.setValue(p.oFixedPriceAmt.value);}}}
p.hideGrayOut();if(overlay.eElem.id==p.oQuantityVariationOverlay.eElem.id){p.oQuantityamt=this.oDocument.getUIElem("QuantityamtTxt");for(i in pp.aQuantity){var oVaraitionQty=pp.oQtyTxt[i];if(oVaraitionQty){oVaraitionQty.bind();if(pp.oQtyChk[i].isChecked()&&p.oQuantityamt.value!='')oVaraitionQty.setValue(p.oQuantityamt.value);}}}
p.hideGrayOut();}
if(p.oShowOverlayBtn[0]){p.oShowOverlayBtn[0].bind();p.oShowOverlayBtn[0].focus(true);}}
if(QP){this.Removebtn=function(){var p=this.parent,pp=p.parent,berrmsg=false;this.outb=[];this.outd=[];if(pp.oQtyChk){ChkBox=pp.oQtyChk;for(i in ChkBox){if(ChkBox[i].isChecked()){var k=i.replace(/v/,"");this.outb[k]=new EbayHTMLLayer(this,pp.sRemoverLyrPrefix.replace("<#1#>",k));this.outb[k].bind();var dis=this.outb[k].eElem.style.display;if(dis!="none"&&ChkBox[i].isChecked())
berrmsg=ChkBox[i].isChecked();else
berrmsg=false;this.outb[k].eElem.style.display="none";if(k==0)
k=0;else
k=k-1;this.outd[k]=new EbayHTMLLayer(this,pp.sDividerLyrPrefix.replace("<#1#>",k));this.outd[k].bind();this.outd[k].eElem.style.display="none";}}}
if(berrmsg){if(p.oErrorLyr)p.oErrorLyr.show();return false;}else{if(p.oErrorLyr)p.oErrorLyr.show(true);}}}
this.createQuantity=function(){var p=this.parent,pp=p.parent,c=pp.oConfig,overlay=p.oQuantityVariationOverlay,oGreyLyr=p.oGOL,aLocs,bShowOverlay=true,berrmsg=false;OverlayCntrl=ebay.oP.controls['variation_overlay'];this.outb=[];if(pp.oQtyChk){ChkBox=pp.oQtyChk;for(i in ChkBox){if(ChkBox[i].isChecked()){var k=i.replace(/v/,"");this.outb[k]=new EbayHTMLLayer(this,pp.sRemoverLyrPrefix.replace("<#1#>",k));this.outb[k].bind();var dis=this.outb[k].eElem.style.display;if(dis!="none"&&ChkBox[i].isChecked())
berrmsg=ChkBox[i].isChecked();else
berrmsg=false;}}}
if(QP)
{if(!berrmsg)bShowOverlay=false;}
if((pp.iTotal!=0||pp.iTotal>0)&&(bShowOverlay)){if(!overlay)overlay=OverlayCntrl.oQuantityVariationOverlay;if(!oGreyLyr)oGreyLyr=OverlayCntrl.oGOL;overlay.bNoSetContent=true;overlay.bForceReposition=false;overlay.useIfShim=true;overlay.iTopPadding=0;aLocs=ebay.oUtils.oPositioning.getOffsetLeftTop(overlay.eElem);aLocs[0]=aLocs[1]=0;overlay.sTop=(aLocs[1]+ebay.oDocument.doc.body.clientHeight/2+ebay.oGlobals.oClient.getScrollTop()/2-30)+'px';overlay.sLeft=(aLocs[0]+ebay.oDocument.doc.body.clientWidth/2+ebay.oGlobals.oClient.getScrollLeft()/2-230)+'px';overlay.display();overlay.setIframeShim();cfg=p.aConfigs?p.aConfigs['Selling.variation.RemoveVariation']:'';if(cfg&&cfg.bVariationPage){odiv=this.oDocument.getUIElem(cfg.sConfirmOverlay);this.oDocument.doc.body.appendChild(OverlayCntrl.of);OverlayCntrl.of.appendChild(odiv);OverlayCntrl.closeBtns[1].bind();}
if(p.oConfig&&p.oConfig.bPriceQuantity){var sTextBox=p.oConfig.aoverlayIds.QuantityamtTxt;if(sTextBox)var oTextBox=ebay.oDocument.getUIElem(sTextBox);if(oTextBox)oTextBox.focus(true);}else{OverlayCntrl=ebay.oP.controls['variation_overlay'];if(OverlayCntrl)OverlayCntrl.closeBtns[1].focus(true);else{s=this.parent.aCloseIds[1]+".focus(true);";setTimeout(s,10);}}
if(p.oQuantityamt)p.oQuantityamt.value="";if(overlay.eElem){overlay.eElem.lastChild.style.height=overlay.eElem.offsetHeight-2;overlay.eElem.lastChild.style.width=overlay.eElem.offsetWidth-2;}
if(oGreyLyr)oGreyLyr.display(document.body.scrollWidth,document.body.scrollHeight);if(p.oErrorLyr)p.oErrorLyr.show();return false;}else if(p.bCreateVariation){oForm=this.eElem.form;oForm['aid'].value=p.iHiddenAid;ebay.oDocument.oPage.bShowAlert=false;oForm.submit();return false;}else{if(p.oErrorLyr)p.oErrorLyr.show(true);}
this.formPost=function(){ebay.oDocument.oPage.bShowAlert=false;var oSellForm=this.parent.oForm,aFP=this.parent.aFP;if(!oSellForm.eElem)oSellForm.bind();oSellForm.onBeforeSubmit=this.parent.parent.updateRTEDesc;oSellForm.eElem.elements[this.parent.sAid].value=aFP[this.name];oSellForm.submit();return false;}
this.init();}
this.createVariation=function(){var p=this.parent,pp=p.parent,c=pp.oConfig,overlay=p.oWarningVariationOverlay,oGreyLyr=p.oGOL,aLocs,bShowOverlay=true,berrmsg=false;OverlayCntrl=ebay.oP.controls['variation_overlay'];this.outb=[];if(pp.oQtyChk){ChkBox=pp.oQtyChk;for(i in ChkBox){if(ChkBox[i].isChecked()){var k=i.replace(/v/,"");this.outb[k]=new EbayHTMLLayer(this,pp.sRemoverLyrPrefix.replace("<#1#>",k));this.outb[k].bind();var dis=this.outb[k].eElem.style.display;if(dis!="none"&&ChkBox[i].isChecked())
berrmsg=ChkBox[i].isChecked();else
berrmsg=false;}}}
var QP=ebay.oP.controls['QuantityPrice_variation'];if(!QP){if(typeof c!="undefined"&&c.bMSKURevamp)bShowOverlay=false;}
if(QP)
{if(!berrmsg)bShowOverlay=false;}
if((pp.iTotal!=0||pp.iTotal>0)&&(bShowOverlay)){if(!overlay)overlay=OverlayCntrl.oWarningVariationOverlay;if(!oGreyLyr)oGreyLyr=OverlayCntrl.oGOL;overlay.bNoSetContent=true;overlay.bForceReposition=false;overlay.useIfShim=true;overlay.iTopPadding=0;aLocs=ebay.oUtils.oPositioning.getOffsetLeftTop(overlay.eElem);aLocs[0]=aLocs[1]=0;overlay.sTop=(aLocs[1]+ebay.oDocument.doc.body.clientHeight/2+ebay.oGlobals.oClient.getScrollTop()/2-30)+'px';overlay.sLeft=(aLocs[0]+ebay.oDocument.doc.body.clientWidth/2+ebay.oGlobals.oClient.getScrollLeft()/2-230)+'px';overlay.display();overlay.setIframeShim();cfg=p.aConfigs?p.aConfigs['Selling.variation.RemoveVariation']:'';if(cfg&&cfg.bVariationPage){odiv=this.oDocument.getUIElem(cfg.sConfirmOverlay);this.oDocument.doc.body.appendChild(OverlayCntrl.of);OverlayCntrl.of.appendChild(odiv);OverlayCntrl.closeBtns[1].bind();}
if(p.oConfig&&p.oConfig.bPriceQuantity){var sTextBox=p.oConfig.aoverlayIds.stextboxOverlayId;if(sTextBox)var oTextBox=ebay.oDocument.getUIElem(sTextBox);if(oTextBox)oTextBox.focus(true);}else{OverlayCntrl=ebay.oP.controls['variation_overlay'];if(OverlayCntrl)OverlayCntrl.closeBtns[1].focus(true);else{s=this.parent.aCloseIds[1]+".focus(true);";setTimeout(s,10);}}
if(p.oFixedPriceAmt)p.oFixedPriceAmt.value="";if(overlay.eElem){overlay.eElem.lastChild.style.height=overlay.eElem.offsetHeight-2;overlay.eElem.lastChild.style.width=overlay.eElem.offsetWidth-2;}
if(oGreyLyr)oGreyLyr.display(document.body.scrollWidth,document.body.scrollHeight);if(p.oErrorLyr)p.oErrorLyr.show();return false;}else if(p.bCreateVariation){oForm=this.eElem.form;oForm['aid'].value=p.iHiddenAid;ebay.oDocument.oPage.bShowAlert=false;oForm.submit();return false;}else{if(p.oErrorLyr)p.oErrorLyr.show(true);}}
this.formPost=function(){ebay.oDocument.oPage.bShowAlert=false;var oSellForm=this.parent.oForm,aFP=this.parent.aFP;if(!oSellForm.eElem)oSellForm.bind();oSellForm.onBeforeSubmit=this.parent.parent.updateRTEDesc;oSellForm.eElem.elements[this.parent.sAid].value=aFP[this.name];oSellForm.submit();return false;}}
this.init();}

// \include\lib\_global\features\syi3\multi_sku\variationOverlay.js 

ebay.oP.initVariationsOverlay=function()
{var c=this.parent.getConfig('Selling.Describe.RemoveAllVariation');if(c)
new EbaySYI3VariationOverlay(this,'Variation_Overlay',c);c=this.parent.getConfig('Selling.variation.RemoveVariation');if(c)
{new EbaySYI3VariationOverlay(this,'variation_overlay',c);this._registerListener(ebay.oDocument._getEvent('load'),this.EVENT_AFTER,"controls['variation_overlay'].createVariation");}
c=this.parent.getConfig('Selling.variation.HelpOverlayConfig');if(c)
{new EbaySYI3VariationOverlay(this,'Variation_HelpOverlay',c);}
c=this.parent.getConfig('Selling.variation.ChangeVariationConfig');if(c)
new EbaySYI3VariationOverlay(this,'Variation_ChangeVariationOverlay',c);}

// \include\lib\_global\features\syi3\multi_sku\_base\common.js 

function EbaySYI3SubmitVariations(pParent,pName,pCfg)
{if(!this.objType)
this.objType="EbaySYI3SubmitVariations";var c=pCfg;this.base=EbayBaseControl;this.base(pParent,pName);this.oConfig=pCfg;this.init=function(){with(this){new EbaySYI3submitVariationControl(this,"SubmitvariationControl",c);}}
this.init();}
function EbaySYI3submitVariationControl(pParent,pName,pCfg){if(!this.objType)
this.objType="EbaySYI3submitVariationControl";this.base=EbayBaseControl;this.base(pParent,pName);var c=pCfg;this.oHiddenAidText=new EbayHTMLText(this,oEC.sActionElem);this.oForm=new EbayHTMLForm(this,oEC.sFormName);this.init=function(){with(this){oHiddenAidText.bind();var p=this.parent,pp=p,c=pp.oConfig,aSumbitBtnid=c.aSumbitBtnid,iLen=aSumbitBtnid.length;for(i=0;i<iLen;i++){var osubmitBtnElem=new EbayHTMLButton(this,aSumbitBtnid[i].name);osubmitBtnElem.value=aSumbitBtnid[i].value;osubmitBtnElem.aSumbitBtnid=aSumbitBtnid;osubmitBtnElem.iInd=i;if(!osubmitBtnElem.eElem)
osubmitBtnElem.bind();osubmitBtnElem.onclick=function(){ebay.oDocument.oPage.bShowAlert=false;var oGTINFld=[],cf=ebay.oDocument.getConfig("Selling.Variation.UPIMandate");if(cf){for(i=0;i<cf.nMaxVar;i++){oGTINFld[i]=ebay.oDocument.getUIElem(cf.sGTINFld+i);if(oGTINFld[i]&&oGTINFld[i].value==cf.aLyrOpnLbl[0])
oGTINFld[i].value="";}}
oHiddenAidText.setValue(this.value);if(this.eElem)
this.eElem.form.submit();else{if(!oForm.eElem)
oForm.bind();oForm.submit();}
return false;}
osubmitBtnElem.subscribeEvents("onkeydown");osubmitBtnElem.bind();osubmitBtnElem.onkeydown=function(){var key=window.event?window.event.keyCode:arguments[1]?arguments[1].keyCode:0;if(key==13){oHiddenAidText.setValue(this.value);if(this.eElem)
this.eElem.form.submit();else{if(!oForm.eElem)
oForm.bind();oForm.submit();}
return false;}}}}}
this.init();}
ebay.oP.initVariationPreview=function()
{var oCfg=this.parent.getConfig("Selling.Variation.EnhancedViewPopup");if(oCfg)
{var iLen=oCfg.aPopAnchId?oCfg.aPopAnchId.length:0;for(var i=0;i<iLen;i++){var oAnchPopup=new EbayHTMLAnchor(this,oCfg.aPopAnchId[i]);var oViewPopup=new EbayHTMLPopup(this,"viewpopup",oCfg);oAnchPopup._registerEvent("onclick","PreviewListing");oAnchPopup.PreviewListing=function()
{oViewPopup.show();}}}}

// \include\lib\_global\features\syi3\multi_sku\variationsubmit.js 

ebay.oP.initSubmitVariations=function()
{new EbaySYI3SubmitVariations(this,'submit_variation',this.parent.getConfig('Selling.Variation.submit'));}

// \include\lib\_global\features\syi3\describe\rate_table_popup.js 

ebay.oP.initRateTable=function(){var oCg=this.parent.getConfig("Selling.Shipping.RateTable");if(oCg)
{new EbayRateTablePopUp(this,"popup_ratetable",oCg);}}
function EbayRateTablePopUp(pParent,pName,pCfg)
{if(pCfg)
{if(!this.objType)
this.objType="EbayRateTablePopUp";this.base=EbayBaseControl;this.base(pParent,pName);this.oRLnk;this.oPop;this.oCfg=pCfg;this.sRTLnk=this.oCfg.sRateTableLnk;this.oChk=[];this.oSurChk=[];this.oSurCstTxt=[];this.aRTChk=this.oCfg.aRTChk;this.aSurChPref=this.oCfg.aSurIdPref;this.sDomWtLyr;this.sIntlWtLyr;this.sCalcWtLyr;this.init=function()
{with(this)
{oPop=new EbayHTMLPopup(this,"popup_ratetable",oCfg);oRLnk=new EbayHTMLAnchor(this,sRTLnk);if(!oRLnk.eElem)
oRLnk.bind();oRLnk._registerEvent("onclick","parent.showRateTablePopup");oTempWtLyr=new EbayHTMLLayer(this,oCfg.tempWtDiv);if(!oTempWtLyr.eElem)
oTempWtLyr.bind();sDomWtLyr=new EbayHTMLLayer(this,oCfg.domWghtDiv);if(!sDomWtLyr.eElem)
sDomWtLyr.bind();sIntlWtLyr=new EbayHTMLLayer(this,oCfg.intlWghtDiv);if(!sIntlWtLyr.eElem)
sIntlWtLyr.bind();for(j=1;j<=3;j++){oSurChk[j]=new EbayHTMLCheckbox(this,aSurChPref[0]+j);if(!oSurChk[j].eElem)
oSurChk[j].bind();oSurCstTxt[j]=new EbayHTMLText(this,aSurChPref[1]+j);if(!oSurCstTxt[j].eElem)
oSurCstTxt[j].bind();}
var l=aRTChk.length;for(i=0;i<l;i++){oChk[i]=new EbayHTMLCheckbox(this,aRTChk[i]);if(!oChk[i].eElem)
oChk[i].bind();oChk[i]._registerEvent("onclick","parent.showWtDiv");if(i==0&&oChk[i].isChecked(i)){ebay.oP.toggleWtLayers(sDomWtLyr,oTempWtLyr);}
if(i==1&&oChk[i].isChecked(i)&&!oChk[0].isChecked(0)){ebay.oP.toggleWtLayers(sIntlWtLyr,oTempWtLyr);}}
sCalcWtLyr=new EbayHTMLLayer(this,oCfg.calcWghtDiv);if(!sCalcWtLyr.eElem)
sCalcWtLyr.bind();if(sCalcWtLyr&&sCalcWtLyr.eElem&&sCalcWtLyr.eElem.innerHTML!=""){sDomWtLyr.show(false);sIntlWtLyr.show(false);}}}
this.init();this.showRateTablePopup=function()
{var p=this.parent;oPop.sUrl=p.oCfg.sUrl;oPop.show();}
this.showWtDiv=function(){var p=this.parent;if(sDomWtLyr.eElem&&sDomWtLyr.eElem.innerHTML!="")
sDomWtLyr.eElem.removeChild(oTempWtLyr.eElem);if(sIntlWtLyr.eElem&&sIntlWtLyr.eElem.innerHTML!="")
sIntlWtLyr.eElem.removeChild(oTempWtLyr.eElem);if(this.name=='useDomesticRateTable'){if(this.isChecked()&&(!(p.oChk[1].isChecked()))){ebay.oP.toggleWtLayers(sDomWtLyr,oTempWtLyr);}
else if(p.oChk[1].isChecked()){sDomWtLyr.show(false);ebay.oP.toggleWtLayers(sIntlWtLyr,oTempWtLyr);}
else if(!(this.isChecked())&&sCalcWtLyr.eElem&&sCalcWtLyr.eElem.innerHTML==""){ebay.oP.toggleWtLayers(sCalcWtLyr,oTempWtLyr);}
else if(sCalcWtLyr&&sCalcWtLyr.eElem&&sCalcWtLyr.eElem.innerHTML!=""){sDomWtLyr.show(false);}
else{sDomWtLyr.show(false);}
for(var k=1;k<=3;k++){if(p.oSurChk[k].eElem)
p.oSurChk[k].eElem.disabled=this.isChecked();if(p.oSurCstTxt[k].eElem)
p.oSurCstTxt[k].eElem.disabled=this.isChecked();}}
if(this.name=='useIntlRateTable'){if(this.isChecked()&&(!(p.oChk[0].isChecked()))){ebay.oP.toggleWtLayers(sIntlWtLyr,oTempWtLyr);}
else if(p.oChk[0].isChecked()){ebay.oP.toggleWtLayers(sDomWtLyr,oTempWtLyr);sIntlWtLyr.show(false);}
else if(sCalcWtLyr&&sCalcWtLyr.eElem&&sCalcWtLyr.eElem.innerHTML!=""){sIntlWtLyr.show(false);}
else{sIntlWtLyr.show(false);}}}}}
ebay.oP.toggleWtLayers=function(pDomIntlLyr,pTmpLyr){if(pTmpLyr!=null&&pTmpLyr.eElem){pDomIntlLyr.eElem.appendChild(pTmpLyr.eElem);pDomIntlLyr.show(true);pTmpLyr.show(true);}}

// \include\lib\_global\features\syi3\describe\init_functions.js 
;(function(){var oLM=ebay.oP.controls['listner_mgr'];oLM.push('ebay.oP.initPreviewAL');oLM.push('ebay.oP.initListingDesignerAL');oLM.push('ebay.oP.initScheduledStartAL');oLM.push('ebay.oP.initCustomRulesAL');oLM.push('ebay.oP.initShippingOptionsAL');oLM.push('ebay.oP.initMerchAccountAL');oLM.push('ebay.oP.initSafePaymentAL');oLM.push('ebay.oP.initOptionForPayPalFormatAL');oLM.push('ebay.oP.initDomShipDiscountsAL');oLM.push('ebay.oP.initIntlShipDiscountsAL');oLM.push('ebay.oP.initFlatShippingAL');oLM.push('ebay.oP.initFreightAL');oLM.push('ebay.oP.initMandatoryPaymentsAL');oLM.push('ebay.oP.initSellerGranularityAL');oLM.push('ebay.oP.initShowGSPCountriesAL');oLM.push('ebay.oP.initShippingCalcAL');oLM.push('ebay.oP.initShippingPreferenceAL');oLM.push('ebay.oP.initShippingSeeMoreOptionsAL');oLM.push('ebay.oP.initOfferAdditonalServicesAL');oLM.push('ebay.oP.initLocationAL');oLM.push('ebay.oP.initTelephoneAL');oLM.push('ebay.oP.initBuyerReqsAL');oLM.push('ebay.oP.initSalesTaxAL');oLM.push('ebay.oP.initReturnPolicyAL');oLM.push('ebay.oP.initReturnPolicyInlineAL');oLM.push('ebay.oP.initCounterAL');oLM.push('ebay.oP.initSpellCheckerAL');oLM.push('ebay.oP.initDigitalGoodsAL');oLM.push('ebay.oP.initSellerTermsAL');oLM.push('ebay.oP.initShippingWizardAL');oLM.push('ebay.oP.initCheckoutRestoreAL');oLM.push('ebay.oP.initPaymentCharCounterAL');oLM.push('ebay.oP.initItemCondition');})();ebay.oP.initCustomRules=function(){}
ebay.oP.initRulesEngine=function(){}
ebay.oP.initFormatTabs=function(){}
ebay.oP.initListingDesigner=function(){}
ebay.oP.initScheduledStart=function(){}
ebay.oP.initCharity=function(){}
ebay.oP.initCounter=function(){}
ebay.oP.initSpellChecker=function(){}
ebay.oP.initShippingOptions=function(){}
ebay.oP.initMerchAccount=function(){}
ebay.oP.initSafePayment=function(){}
ebay.oP.initOptionForPayPalFormat=function(){}
ebay.oP.initDomShipDiscounts=function(){}
ebay.oP.initIntlShipDiscounts=function(){}
ebay.oP.initFlatShipping=function(){}
ebay.oP.initFreightAL=function(){}
ebay.oP.initShippingWizard=function(){}
ebay.oP.initMandatoryPayments=function(){}
ebay.oP.initSellerGranularity=function(){}
ebay.oP.initShippingCalc=function(){}
ebay.oP.initShippingSeeMoreOptions=function(){}
ebay.oP.initOfferAdditonalServices=function(){}
ebay.oP.initLocation=function(){}
ebay.oP.initBuyerReqs=function(){}
ebay.oP.initSalesTax=function(){}
ebay.oP.initReturnPolicy=function(){}
ebay.oP.initPreview=function(){}
ebay.oP.initDigitalGoods=function(){}
ebay.oP.initTelephone=function(){}
ebay.oP.initSellerTerms=function(){}
ebay.oP.initCheckoutRestore=function(){}
ebay.oP.initFreight=function(){}
ebay.oP.initShippingPreference=function(){}

// \include\lib\_global\features\syi3\alias.js 

ebay.oD=ebay.oDocument;ebay.oP=ebay.oDocument.oPage;

// \include\lib\_global\features\tracking\soj_tagging.js 

function EbaySOJTagging(pParent,pName,pConfig)
{var t=this;if(!t.objType)
t.objType="EbaySOJTagging";var c=t.oConfig=pConfig;t.base=EbayBaseControl;t.base(pParent,pName);t.sTagUrl=c.sTagUrl;t.bTagAllFields=c.bTagAllFields;t.aForms=[];t.iEventPostCount=c.iEventPostCount||5;t.iElemsTagged=0;t.iRDFld=null;t.aElemsTagged={};with(t)
{_registerListener(oDocument._getEvent("load"),EVENT_AFTER,"onAfterLoad");_registerListener(oDocument._getEvent("unload"),EVENT_AFTER,"taggingUnload");}
t.init=function()
{if(t.bTagAllFields)
{var c=t.oConfig;var oF=t.parent.controls[c.sFormName];if(!oF)
oF=new EbayHTMLForm(t.parent,c.sFormName);t.aForms[t.aForms.length]=oF;}}
t.taggingUnload=function()
{t.post(true);}
t.onAfterLoad=function()
{if(t.bTagAllFields)
t.registerFormFields();else if(typeof aSOJTagFields!='undefined')
t.registerFields(aSOJTagFields);}
t.registerFields=function(pFields)
{var af=pFields,l=af.length;for(var i=0;i<l;i++)
t.registerField(t.oDocument.getUIElem(af[i]));}
t.registerFormFields=function()
{var af=t.aForms,l=af.length;for(var i=0;i<l;i++)
{oF=af[i];if(!oF.eElem)
oF.bind();var elems=oF.getElements(),len=elems.length;for(var j=0;j<len;j++)
t.registerField(elems[j]);}}
t.registerField=function(pField)
{if(!pField)
return;var e=pField,id=e.id,typ=e.type,src=e.nodeName,oP=ebay.oDocument.oPage,o=oP.controls[id],p='parent.controls["'+t.name+'"].';if(typ)
{switch(typ.toLowerCase())
{case"text":case"textarea":t.attachEvent(e,'focus','registerTimeIn');t.attachEvent(e,'blur','registerTimeOut');break;case"radio":case"checkbox":case"button":case"submit":t.attachEvent(e,'click','registerTag');break;case"select-one":t.attachEvent(e,'change','registerTag');break;default:if(src&&src.toLowerCase()=="a")
t.attachEvent(e,'click','registerTag');break;}}
else
{if(src&&src.toLowerCase()=="a")
t.attachEvent(e,'click','registerTag');}
if(e)
e.tagObj=t;}
t.attachEvent=function(pElem,pEvent,pMethod)
{var e=pElem;if(e.addEventListener)
{e.removeEventListener(pEvent,eval('this.'+pMethod),false);e.addEventListener(pEvent,eval('this.'+pMethod),false);}
else if(e.attachEvent)
{e.detachEvent('on'+pEvent,eval('this.'+pMethod));e.attachEvent('on'+pEvent,eval('this.'+pMethod));}}
t.getTimeStamp=function()
{return new Date().getTime();}
t.registerTimeIn=function(a)
{var se;if(typeof a.type!='undefined')
se=a.srcElement?a.srcElement:a.target;var t=se&&se.tagObj?se.tagObj:this.objType&&this.objType=="EbaySOJTagging"?this:null;if(t)
{var nv=t.getNV(se,a),k=nv.n;if(t.aElemsTagged[k])
{var rd=Math.floor(Math.random()*999);k+="^"+rd;t.iRDFld=rd;}
t.aElemsTagged[k]=nv.ts;}}
t.registerTimeOut=function(a)
{var se;if(typeof a.type!='undefined')
se=a.srcElement?a.srcElement:a.target;var t=se&&se.tagObj?se.tagObj:this.objType&&this.objType=="EbaySOJTagging"?this:null;if(t)
{var nv=t.getNV(se,a),v,k=nv.n;if(t.iRDFld)
{k+="^"+t.iRDFld;t.iRDFld=null;}
v=t.aElemsTagged[k];if(typeof v!='undefined'&&!isNaN(v))
{t.aElemsTagged[k]=v+"|"+nv.ts+"|";t.iElemsTagged++;t.post();}
else
t.aElemsTagged[k]="";}}
t.registerTag=function(a)
{var se,uptracking,IsUPTrack;uptracking=['addPicturesBtn','flashUploaderLink','freeImgLayer','clUploadLink','clUploadBtn','useStandardLink','useEPSlnkCopyFromWeb','useSelfHostedLink','useEPSlnkBasic','useStandardLink2','useEPSlnkBasic2','useEPSlnkCopyFromWeb2'];if(typeof a.type!='undefined')
se=a.srcElement?a.srcElement:a.target;var t=se&&se.tagObj?se.tagObj:this.objType&&this.objType=="EbaySOJTagging"?this:null;if(t)
{var nv=t.getNV(se,a),k=nv.n;if(t.aElemsTagged[k])
k+="^"+Math.floor(Math.random()*999);var sojLnkId=nv.ts?nv.ts+"||":"||"+nv.v;IsUPTrack=(uptracking.indexOf(this.id)>-1);if(IsUPTrack)
{t.postUP_Tracking(this.id,sojLnkId);}
else
{t.aElemsTagged[k]=sojLnkId;t.iElemsTagged++;}
t.post();}}
t.getNV=function(pObj,pData)
{var o=pObj,oD=pData,n=typeof oD.k!='undefined'?oD.k:o?(o.id||o.name):null,v=typeof oD.v!='undefined'?oD.v:null;ts=!v?new Date().getTime():null;return{"n":n,"v":v,"ts":ts};}
t.post=function(pFlushData)
{var b=typeof pFlushData!='undefined'&&pFlushData,uptracking,bUPTrack;uptracking=['addPicturesBtn','flashUploaderLink','freeImgLayer','clUploadLink','clUploadBtn','useStandardLink','useEPSlnkCopyFromWeb','useSelfHostedLink','useEPSlnkBasic','useStandardLink2','useEPSlnkBasic2','useEPSlnkCopyFromWeb2'];if(b||t.iElemsTagged>=t.iEventPostCount)
{var s="";for(var i in t.aElemsTagged)
{bUPTrack=(uptracking.indexOf(i)>-1);if(!bUPTrack){var j=i;if(s.length>0)
s+=",";if(i.indexOf('^')>0)
i=i.substr(0,i.indexOf('^'));if(t.aElemsTagged[j]&&t.aElemsTagged[j].length>0)
s+=i+"|"+t.aElemsTagged[j];}}
if(s.length>0)
{if(typeof pageName!='undefined')
s+=",pageId|||"+pageName;t.aElemsTagged={}
t.iElemsTagged=0;t.iRDFld=null;new Image().src=t.sTagUrl+'{tagData="'+s+'"}';}}}
t.postUP_Tracking=function(id,sojLnkId)
{var s="",c,bclUPTrack,upcltracking;upcltracking=['flashUploaderLink','clUploadLink','clUploadBtn'];if(s.length>0)
s+=",";if(id.indexOf('^')>0)
id=id.substr(0,id.indexOf('^'));if(sojLnkId)
s+=id+"|"+sojLnkId;if(s.length>0)
{if(typeof pageName!='undefined')
s+=",pageId|||"+pageName;BrowserVr=navigator.userAgent;if(typeof BrowserVr!='undefined')
s+=",PU_BrowserVr|||"+BrowserVr;c=ebay.oDocument.getConfig("Selling.SOJTagging");UpldFlw=c.sCommand;if(typeof UpldFlw!='undefined')
s+=",PU_UpldFlw|||"+UpldFlw;DraftID=c.draftId;if(typeof DraftID!='undefined')
s+=",PU_DraftID|||"+DraftID;isCatalog=c.isCatalog;isUpEntryPts=c.isUpEntryPts;if(typeof isCatalog!='undefined'&&isUpEntryPts)
s+=",PU_IsCatalog|||"+isCatalog;bclUPTrack=(upcltracking.indexOf(id)>-1);if(bclUPTrack)
{s+=",CU_AddPhoto|||"+bclUPTrack;}
t.iRDFld=null;new Image().src=t.sTagUrl+'{tagData="'+s+'"}';}}
t.init();}

// \include\lib\_global\features\syi3\soj_tagging.js 

ebay.oP.initSOJTagging=function(pPostCount)
{var c=this.oDocument.getConfig("Selling.SOJTagging");if(document.getElementById('soj'))
document.getElementById('soj').src.replace(/\&amp;/g,'&');if(c)
{c.iEventPostCount=typeof pPostCount!='undefined'?pPostCount:1;new EbaySOJTagging(this,'soj_tagging',c);}}

// \include\lib\_global\features\syi3\describe\soj_tag_fields.js 

var aSOJTagFields=['lnkSwitchForm','btnSwitchFormContinue','sSaveDraftLater','lnkChangeCat','title','subtitle','itemCondition','GotoPicOptions','GotoTitleOptions','GotoDescOptions','GotoFormatOptions','GotoCommunicationOptions','GotoPaymentOptions','GotoShippingOptions','GotoOtherOption','GotoOtherOptions_emptysection','GotoCommunicationOptions_emptysection','GotoItemVariationsOptions','addPicturesBtn','GotoDescOptions','stdMode','stdMode_li','htmlMode','htmlMode_li','previewDialog2','aidZ72','listingDesigner','previewDialog3','counter','storeinventory','onlineauction','fixedprice','binPrice','bestOffer','bestOfferAutoAcceptOption','bestOfferAutoAcceptAmt','bestOfferAutoDeclineOption','bestOfferAutoDeclineAmt','quantity','duration','schldLstng','startPrice','pmPayPal','immediatePayment','domesticShipping','shipService1','shipService2','shipService3','shipFee1','shipFee2','shipFee3','domesticFreeShipping','removeService2','removeService3','addServiceLink','localPickup','applyDomesticShippingDiscountProfile','applyDomesticPromotional','shipsWithinDays','intlShipping','intlShipOptions1','intlShipOptions2','intlShipOptions3','intlShipService1','intlShipService2','intlShipService3','intlShipFee1','intlShipFee2','intlShipFee3','shipOptions','applyIntlShippingDiscountProfile','applyIntlPromotional','applyExcludeShipToLocationsChk','intl_create_list','lnkLocation','lnkBuyerRequirements','salesTaxRegion','salesTaxRate','applyTaxToShipping','returnsAccepted','itemReturnedWithin','refundGivenAs','returnsPaidBy','lnkReturnPolicy','textArea','paymentInstructions','aidZ1','aInstantOffer','PaymentProfile','ShippingProfile','ReturnProfile','hdePymt','hdeShip','hdeRet','sdePymt','sdeShip','sdeRet','create','createShp','CRP','editPay','editShp','editRet','gspTnC','gspOK','gspNotNow','gspLyrTnC','flashUploaderLink','freeImgLyr','clUploadLnk','clUpldLnk','frImgLyr','clUploadLink','clUploadBtn','gspDetails','gspLearn','catGetHelpLink_helpLink','helpBtnlink','category_helpLink','savetoinventoryGetHelpLink_helpLink','productinventory_helpLink','addProductInventorylnk','cntctusLnk','moreBubHlp','VariationGetHelpLink_helpLink','msku_learnmore','productsel_helpLink','productDetailsOption','previewDialog4','titleGetHelpLink_helpLink','title_helpLink','subtitle_helpLink','itemCondition0_helpLink','ConditionDescription_helpLink','upc','itemspecifics_helpLink','AddCustomLnk','picGetHelpLink_helpLink','picture_helpLink','descriptionGetHelpLink_helpLink','rte_1_inserts_select','rteToollbarHelp_helpLink','startPriceFees','startPrice_helpLink','binPriceFees','binPrice_helpLink','duration_helpLink','binPrice_store_helpLink','bestOffer_helpLink','quantity_helpLink','otherGetHelpLink_helpLink','buyerreq_helpLink','SalesTax_helpLink','changeRequest','completedList','aidCVBtn165','aidZ46','sSaveDraftLater_Top','sSaveDraftLater_Bottom','productlink','aidZ72','createblklst','gotoTop','titleFocus','rte_1_fontcolor','rte_1_bold','rte_1_italic','rte_1_underline','rte_1_left_align','rte_1_centered','rte_1_right_align','rte_1_unordered_list','rte_1_ordered_list','rte_1_outdent','rte_1_indent','rte_1_spelling_img'];

// \include\lib\_global\features\syi3\easy_syi\easy_syi.js 

ebay.oP.onAfterLoadEasySyi=function(){var cfg=this.oDocument.getConfig('Motors.SYI.Change');if(cfg)
new EbaySYI3EasySyiChange(this,'Motors.SYI.Change',cfg);var cfg1=this.oDocument.getConfig('Selling.Describe.Exteriorcolor');if(cfg1)
new EbaySYI3EasySyiColorPaletteChange(this,'Selling.Describe.Exteriorcolor',cfg1);var cfg2=this.oDocument.getConfig('Selling.Describe.Interiorcolor');if(cfg2)
new EbaySYI3EasySyiColorPaletteChange(this,'Selling.Describe.Interiorcolor',cfg2);var cfg3=this.oDocument.getConfig('SYI3.Motors.VINDecoder');if(cfg3)
new EbaySYI3MotorsVINDecoder(this,'vin_decoder',cfg3);var cfg4=this.oDocument.getConfig('Selling.Describe.SellerTags.Swift');if(cfg4)
new EbaySYI3SellerTagsSwift(this,"st_ymmte",cfg4);}
function EbaySYI3EasySyiColorPaletteChange(pParent,pName,pCfg){if(!this.objType){this.objType="EbayConfig";}
var t=this,oC=this.oCfg=pCfg;this.oIntImg=[];this.oIntClkNme;this.aIntImg=[];this.selIntClass;this.unselIntClass;this.oIntHid;this.sIntHidFld;this.aIntHid;this.oExtImg=[];this.oExtClkNme;this.aExtImg=[];this.selExtClass;this.unselExtClass;this.oExtHid;this.sExtHidFld;this.aExtHid;this.init=function(){var t=this;with(t){var c=oC;if(c.objType.is("EbayConfig"))
{if(c.sType=='palette')
{if(c.bInt)
{t.aIntImg=c.aIntImg;t.selIntClass=c.selIntClass;t.unselIntClass=c.unselIntClass;t.aIntHid=c.aIntHid;t.oIntClkNme=new EbayHTMLLayer(this,c.sIntClrNme);if(!t.oIntClkNme.eElem)
t.oIntClkNme.bind();for(i=0;i<t.aIntImg.length;i++)
{t.oIntImg[i]=new EbayHTMLImage(this,t.aIntImg[i]);if(!t.oIntImg[i].eElem)
t.oIntImg[i].bind();t.oIntImg[i]._registerEvent("onclick","parent.intImgClk");}}
else
{t.aExtImg=c.aExtImg;t.selExtClass=c.selExtClass;t.unselExtClass=c.unselExtClass;t.aExtHid=c.aExtHid;t.bEdmunds=c.bEdmunds?true:false;t.oExtClkNme=new EbayHTMLLayer(this,c.sExtClrNme);if(!t.oExtClkNme.eElem)
t.oExtClkNme.bind();for(i=0;i<t.aExtImg.length;i++)
{t.oExtImg[i]=new EbayHTMLImage(this,t.aExtImg[i]);if(!t.oExtImg[i].eElem)
t.oExtImg[i].bind();if(!t.bEdmunds)
t.oExtImg[i]._registerEvent("onclick","parent.extImgClk");}}}}}}
this.intImgClk=function()
{var sTit=this.eElem.title,p=this.parent,sIntHid;for(i=0;i<p.aIntImg.length;i++)
p.oIntImg[i].setClass(p.unselIntClass);for(i=0;i<p.aIntImg.length;i++)
{if(this.name==p.aIntImg[i])
{p.oIntImg[i].setClass(p.selIntClass);break;}}
p.oIntClkNme.eElem.innerHTML=sTit;}
this.extImgClk=function()
{var sTit=this.eElem.title,p=this.parent,sExtHid;for(i=0;i<p.aExtImg.length;i++)
p.oExtImg[i].setClass(p.unselExtClass);for(i=0;i<p.aExtImg.length;i++)
{if(this.name==p.aExtImg[i])
{p.oExtImg[i].setClass(p.selExtClass);break;}}
p.oExtClkNme.eElem.innerHTML=sTit;}
this.init();}
function EbaySYI3EasySyiChange(pParent,pName,pCfg){if(!this.objType)
this.objType="EbaySYI3EasySyiChange";var t=this,oC=this.oCfg=pCfg;t.base=EbayBaseControl;t.base(pParent,pName);t.sVinId=oC.sVinId;t.aErrId=oC.aErrId;t.oTxtVIN;t.oErrVIN;t.bVin=(typeof(oC.sVinId)=='undefined')?true:false;t.sErrMsg=oC.sErrTxt;t.oTxt=[];t.oLnk=[];t.oSel=[];t.oSl=[];t.oPicDv;t.bTop=(typeof(oC.bTop)!='undefined')?oC.bTop:false;t.bEdmunds=(typeof(oC.bEdmunds)!='undefined')?oC.bEdmunds:false;this.init=function(){var t=this;with(t){var i=0,j=0,k=0;if(!bVin)
{oTxtVIN=new EbayHTMLText(this,sVinId);if(!oTxtVIN.eElem)
oTxtVIN.bind();oErrVIN=new EbayHTMLLayer(this,aErrId[sVinId][0]);if(!oErrVIN.eElem)
oErrVIN.bind();}
oPicdv=new EbayHTMLLayer(this,oC.sPicdv);if(!oPicdv.eElem)
oPicdv.bind();var xPicDv1=this.findPosX(oPicdv)-296;var yPicDv1=this.findPosY(oPicdv)+174;this.creatediv("str1",xPicDv1,yPicDv1,oC.sTxt1);oDescdv=new EbayHTMLLayer(this,oC.sDescdv);if(!oDescdv.eElem)
oDescdv.bind();var xPicDv2=this.findPosX(oDescdv)-296;var yPicDv2=this.findPosY(oDescdv)+174;this.creatediv("str2",xPicDv2,yPicDv2,oC.sTxt2);for(x in oC.aChangeLnkDivIds){oLnk[i]=new EbayHTMLAnchor(this,x);var aDivs=oC.aChangeLnkDivIds[x],len=aDivs.length;oLnk[i].aDivs=aDivs;for(var t=0;t<len;t++)
new EbayHTMLLayer(this,aDivs[t]);if(!oLnk[i].eElem)
oLnk[i].bind();oLnk[i]._registerEvent("onclick","parent.editDetails");++i;}
for(x in oC.aErrId){oTxt[j]=new EbayHTMLText(this,x);var aTxtId=oC.aErrId[x],len=aTxtId.length;oTxt[j].aTxtId=aTxtId;for(var t=0;t<len;t++)
new EbayHTMLLayer(this,aTxtId[t]);if(!oTxt[j].eElem)
oTxt[j].bind();oTxt[j]._registerEvent("onblur","parent.validateField");++j;}
if(typeof(oC.aSel)!='undefined')
oSel=new EbayHTMLSelect(this,oC.aSel[0]);if(oC.aSelIds){for(x in oC.aSelIds){oSl[k]=new EbayHTMLSelect(this,x);var aSelId=oC.aSelIds[x],len=aSelId.length;oSl[k].aSelId=aSelId;for(var t=0;t<len;t++){new EbayHTMLLayer(this,aSelId[t]);}
if(!oSl[k].eElem)
oSl[k].bind();oSl[k]._registerEvent("onchange","parent.validateSelect");++k;}}
if(bEdmunds){oEdHlp=new EbayHTMLAnchor(t,oC.sEdHlp);oEdLyr=new EbayHTMLLayer(t,oC.sEdLyr);oEdHlp.subscribeEvents("onmouseover","onmouseout");if(!oEdHlp.eElem)oEdHlp.bind();if(!oEdLyr.eElem)oEdLyr.bind();oEdHlp.onmouseover=function(){if(!oEdHlp.eElem)oEdHlp.bind();if(!oEdLyr.eElem)oEdLyr.bind();var curleft=0;var curtop=0;if(oEdHlp.eElem.offsetParent){do{curleft+=oEdHlp.eElem.offsetLeft;curtop+=oEdHlp.eElem.offsetTop;}while(oEdHlp.eElem=oEdHlp.eElem.offsetParent);}
oEdLyr.show(true);oEdLyr.eElem.style.left=curleft+10+'px';oEdLyr.eElem.style.top=curtop+20+'px';oEdLyr.eElem.children[0].width=480;}
oEdHlp.onmouseout=function(){if(!oEdLyr.eElem)oEdLyr.bind();oEdLyr.show(false);}}}}
this.findPosX=function(obj)
{var curleft=0;if(obj.eElem.offsetParent)
while(1)
{if(obj.eElem)
curleft+=obj.eElem.offsetLeft;else
curleft+=obj.offsetLeft;if(typeof(obj.eElem)=='undefined')
break;obj=obj.eElem.offsetParent;}
else if(obj.eElem.x)
curleft+=obj.x;return curleft;}
this.findPosY=function(obj)
{var curtop=0;if(obj.eElem.offsetParent)
while(1)
{if(obj.eElem)
curtop+=obj.eElem.offsetTop;else
curtop+=obj.offsetTop;if(!obj.eElem)
break;obj=obj.eElem.offsetParent;}
else if(obj.eElem.y)
curtop+=obj.eElem.y;return curtop;}
this.creatediv=function(id,left,top,innerHTML)
{var newdiv=document.createElement('div');newdiv.setAttribute('id',id);if((left||top)||(left&&top))
newdiv.style.position="absolute";if(left){newdiv.style.left="40px";}
if(top)
newdiv.style.top=top+"px";newdiv.style.width="22%";if(innerHTML)
newdiv.innerHTML=innerHTML;var d=document.getElementById('easysyi_secGrp');d.appendChild(newdiv);}
this.validateSelect=function(){var t=this,p=t.parent,cfg=p.oCfg;var erDiv=p.controls[t.aSelId[0]],otDiv=p.controls[t.aSelId[1]];if(!erDiv.eElem)
erDiv.bind();if(!otDiv.eElem)
otDiv.bind();if(!this.parent.bVin)
{if(t.getSelectedValue()<'1981'||t.getSelectedValue()=='-')
{oTxtVIN.setClass("");oErrVIN.show(false);}}
if(erDiv.eElem)
{if(this.getSelectedIndex()!="0")
{erDiv.show(false);otDiv.setClass("");}
else
{erDiv.show(true);otDiv.setClass(cfg.sErrCls);}}}
this.editDetails=function(){var t=this,a=[],l=t.aDivs.length;for(var j=0;j<l;j++){a[j]=t.parent.controls[t.aDivs[j]];if(!a[j].eElem)
a[j].bind();}
ebay.oP.showHideDiv(a[0],a[1]);}
this.validateField=function(){var t=this,p=t.parent,cfg=p.oCfg;var sDiv=p.controls[t.aTxtId[0]],oSel=p.oSel,sVal,bEdmunds=(typeof(cfg.bEdmunds)!='undefined')?true:false,bST=(typeof(oC.bST)!='undefined')?oC.bST:false,oSelVal=new EbayHTMLText(this,cfg.aSel[0]);if(!sDiv.eElem)sDiv.bind();if(!oSelVal.eElem)oSelVal.bind();if(!oSel.eElem)oSel.bind();if(bEdmunds||bST){sVal=oSelVal.getValue();}else{sVal=oSel.getSelectedValue();}
var txtVal=t.getValue();t.setClass("");if(txtVal==""||txtVal==null){if(t.name!=cfg.sVinId){sDiv.setValue('<span>'+p.sErrMsg+' '+t.aTxtId[1]+'</span>');t.setClass(cfg.sErrCls);}else if(sVal>=cfg.aSel[1]){sDiv.setValue('<span>'+p.sErrMsg+' '+t.aTxtId[1]+'</span>');t.setClass(cfg.sErrCls);}else{sDiv.setValue("");}
sDiv.show(true);}else{if(!this.parent.bVin){var vinVal=oTxtVIN.getValue();if(vinVal==""||vinVal==null){if(sVal>'1981'||sVal=='-'){oErrVIN.setValue('<span>'+p.sErrMsg+' '+cfg.sVinErrMsg+'</span>');oTxtVIN.setClass(cfg.sErrCls);oErrVIN.show(true);}else{oTxtVIN.setClass("");oErrVIN.show(false);}}}
sDiv.show(false);}}
this.init();}
ebay.oP.showHideDiv=function(pHdiv,pSDiv){if(pHdiv!=''&&pHdiv.eElem&&pSDiv!=''&&pSDiv.eElem){pHdiv.show(false);pSDiv.show(true);}
else if(pHdiv==''&&pSDiv!=''&&pSDiv.eElem){pSDiv.show(true);}}

// \include\lib\_global\features\syi3\motors\_base\motors_vin_decoder.js 

function EbaySYI3MotorsVINDecoder(pParent,pName,pConfig){var t=this;var prevVIN="";if(!t.objType)t.objType="EbaySYI3MotorsVINDecoder";t.base=EbayBaseControl;t.base(pParent,pName);var c=t.oConfig=pConfig;t.requestData=ebRequestData;t.processVINDataResponse=ebVINDataResponse;t.validateVIN=ebValidateVIN;var oVin,oLoadLnk,oKeepLnk,oErrDiv,oBubDiv,oThrobber,oAid,oClsLnk,oEpid,oStyleId,oHdnPrms=c.aHdnPrms,aRespPrms=[];oVin=new EbayHTMLText(t,c.sVin);if(!oVin.eElem)oVin.bind();oVin._registerEvent("onblur","parent.validateVIN");oLoadLnk=new EbayHTMLAnchor(t,c.sLoadLnk);if(!oLoadLnk.eElem)oLoadLnk.bind();oLoadLnk._registerEvent("onclick","parent.refreshData");oKeepLnk=new EbayHTMLAnchor(t,c.sKeepLnk);if(!oKeepLnk.eElem)oKeepLnk.bind();oKeepLnk._registerEvent("onclick","parent.closeBubble");oClsLnk=new EbayHTMLAnchor(t,c.sVinClsLnk);if(!oClsLnk.eElem)oClsLnk.bind();oClsLnk._registerEvent("onclick","parent.closeBubble");oErrDiv=new EbayHTMLLayer(t,c.sVinErrId);oBubDiv=new EbayHTMLLayer(t,c.sVinBubId);if(!oErrDiv.eElem)oErrDiv.bind();if(!oBubDiv.eElem)oBubDiv.bind();oThrobber=new EbayHTMLLayer(t,c.sThrobberDiv);if(!oThrobber.eElem)oThrobber.bind();oAid=new EbayHTMLText(t,c.sAidName);if(!oAid.eElem)oAid.bind();oStyleId=new EbayHTMLText(t,oHdnPrms[0]);if(!oStyleId.eElem)oStyleId.bind();oEpid=new EbayHTMLText(t,oHdnPrms[1]);if(!oEpid.eElem)oEpid.bind();t.refreshData=function(){var fm=new EbayHTMLForm(t,c.sFormName);var el=document.createElement("input");if(!fm.eElem)fm.bind();oAid.setValue(c.sAidValue);el.type="hidden";el.name="_trksid";el.id="_trksid";el.value=c.sLoadLnkTrkId;fm.eElem.appendChild(el);oStyleId.setValue(aRespPrms[oStyleId.name]);oEpid.setValue(aRespPrms[oEpid.name]);fm.submit();}
t.closeBubble=function(){var oClrHdn=new EbayHTMLText(t,c.bClearVin);if(!oClrHdn.eElem)oClrHdn.bind();oClrHdn.setValue("true");for(var i in oHdnPrms){var oHdn=new EbayHTMLText(this,oHdnPrms[i]);if(!oHdn.eElem)oHdn.bind();oHdn.setValue("");}
oBubDiv.show(false);t.requestData(c.sTracURL,'keep_veh',"&_trksid="+c.sKeepLnkTrkId);}
function ebValidateVIN(){var charLen=this.value().length;if(charLen==17&&this.value()!=prevVIN){prevVIN=this.value();oThrobber.show(true);t.requestData(c.sAjaxURL,'vin_dec',"&vin="+oVin.getValue());}else return false;}
function ebRequestData(sUrl,reqAttr,postData){if(reqAttr=='vin_dec'){sUrl+=postData+'&responseformat=2&callback=SwiftVINDecodingCallBack';var head=document.getElementsByTagName("head")[0];var script=document.createElement("script");script.setAttribute("type","text/javascript");script.setAttribute("src",sUrl);head.appendChild(script);window['SwiftVINDecodingCallBack']=Function("resp","ebay.oDocument.oPage.controls['vin_decoder'].processVINDataResponse(resp);");}
else{var req=ebay.oServer.createRequest(reqAttr,sUrl,false);req.sPostData=postData;req.iResponseType=3;req.registerAsDataListener(this);req.send();}}
function ebVINDataResponse(pResp){var data,ymmte,bSuccess,vals,bErrors,cnt,oLnksCnt;data=pResp.dataMap;bSuccess=data.bSuccess;bErrors=data.bErrors;oLnksCnt=new EbayHTMLLayer(t,c.sLnksCnt);if(!oLnksCnt.eElem)oLnksCnt.bind();oThrobber.show(false);if(bSuccess){cnt=c.sVinErrorContent.replaceTokens(data.Ymmt);oErrDiv.setValue(cnt);oBubDiv.show(true);oLnksCnt.show(true);if(data.Epid)
aRespPrms["Epid"]=data.Epid;if(data.StyleID)
aRespPrms["StyleID"]=data.StyleID;}else{if(bErrors=='invalid'){oErrDiv.setValue("");oErrDiv.setValue(c.sInvalidErr);oBubDiv.show(true);oLnksCnt.show(false);}else if(bErrors=='mismatch'){oErrDiv.setValue("");oErrDiv.setValue(c.sMisMatchErr);oBubDiv.show(true);oLnksCnt.show(false);}else if(data.Vals!='')t.populateSTValues(data.Vals);}}
t.populateSTValues=function(vals){var oStCtrl=ebay.oP.controls['seller_tags'];var aSTIds=c.aSTIds;for(i in vals){var val=vals[i];if(val.hasOwnProperty("ExteriorColor")){var oExtCol=new EbayHTMLText(oStCtrl,aSTIds.ExtColr);if(!oExtCol.eElem)oExtCol.bind();oExtCol.setValue(val.ExteriorColor);}
if(val.hasOwnProperty("InteriorColor")){var oIntCol=new EbayHTMLText(oStCtrl,aSTIds.IntColr);if(!oIntCol.eElem)oIntCol.bind();oIntCol.setValue(val.InteriorColor);}
if(val.hasOwnProperty("Options")){var oOptions=new EbayHTMLCheckbox(oStCtrl,aSTIds.Options);if(!oOptions.eElem)oOptions.bind();for(i=0;i<val.Options.length;i++)
oOptions.selectByValue(val.Options[i],true);}
if(val.hasOwnProperty("Transmission")){var oTrans=new EbayHTMLText(oStCtrl,aSTIds.Trans);if(!oTrans.eElem)oTrans.bind();oTrans.setValue(val.Transmission);}}}}

// \include\lib\_global\features\syi3\describe\dialogs\match_product.js 

ebay.oP.initMatchProductOly=function()
{var t=this,oD=t.parent,oP=ebay.oDocument.oPage;var cCfg=oD.getConfig("SYI3.Describe.MatchProduct");cCfg.sIframeTitle='';oP.oIraHdn=new EbayHTMLText(oD,"ira");oP.oIraHdn.bind();oP.oPrHdn=new EbayHTMLText(oD,"pr");oP.oPrHdn.bind();oP.oParForm=new EbayHTMLForm(oD,cCfg.sFormName);oP.oParForm.bind();oP.oRecoHdn=new EbayHTMLText(oD,"isRecommendProduct");oP.oRecoHdn.bind();oP.oAidHdn=new EbayHTMLText(oD,"aid");oP.oAidHdn.bind();var cfg=ebay.oDocument.getConfig('Selling.Common');cCfg.bOnFocus=cfg.bOnFocus;cCfg.sStartLyrName=cfg.sStartLyrName;ebay.oP.openDialog(cCfg,cCfg.sCustomFormUrl+"1&cpg=151&isRecommendProduct=true&vMode=mpOly&ej2child=true");return false;}

// \include\lib\_global\features\syi3\catalog\catalog_motors_adoption.js 

ebay.oP.initMotorsCatalog=function(){var t=this,c=t.parent.getConfig('Selling.Motors.Swift.YMMTE');if(c)new EbaySYI3MotorsCatalogAdoption(this,"ymmte",c);var c=t.parent.getConfig('Selling.Motors.Swift.Catalog.YMMTE');if(c)new EbaySYI3MotorsSAMPAdoption(this,"catalog_ymmte",c);new EbaySYIHelpSystem(this,"help system");var c=t.parent.getConfig('Selling.Motors.YMMS.Filters');if(c)new EbaySYI3MotorsPnAFilters(this,"pna_ymms",c);}
function EbaySYI3MotorsPnAFilters(pParent,pName,pCfg){var t=this,c=t.oConfig=pCfg;if(!t.objType)t.objType="EbaySYIMotorsPnAYMMS";t.base=EbayBaseControl;t.base(pParent,pName);t.requestData=ebYMMSRequestData;t.processDataResponse=ebYMMSDataResponse;t.aDropIds=c.aDropIds;t.aEditable=t.aDropIds;t.aRdOlyVal=c.aRdOlyVal;t.catId=c.sCatId;t.oBtn=new EbayHTMLButton(t,"goBtn");t.bOnLoad=true;t.resetId=c.sResetId;if(!t.oBtn.eElem)t.oBtn.bind();t.oHdn=new EbayHTMLText(t,c.sHdnName);if(!t.oHdn.eElem)t.oHdn.bind();t.oTrk=new EbayHTMLText(t,c.sTrkId);if(!t.oTrk.eElem)t.oTrk.bind();t.oForm=new EbayHTMLForm(t,c.sFormName);if(!t.oForm.eElem)t.oForm.bind();t.oMeta=new EbayHTMLText(t,c.sMetCatId);if(!t.oMeta.eElem)t.oMeta.bind();t.oReset=new EbayHTMLAnchor(t,c.sResetId);if(!t.oReset.eElem)t.oReset.bind();t.initCatalog=function(){with(t){var oDrpDwn,oFrstDropDown;var strArr=aDropIds.toString();enableSubBtn();for(i in aDropIds){oDrpDwn=new EbayHTMLSelect(t,aDropIds[i]);if(!oDrpDwn.eElem)oDrpDwn.bind();oDrpDwn._registerEvent("onchange","parent.validateLoadDD");var oHdnVal=new EbayHTMLText(t,aDropIds[i]+"_sv");if(!oHdnVal.eElem)oHdnVal.bind();var reqVal=oHdnVal.eElem.value;if(bOnLoad&&i=="0"&&reqVal!="-1"){var reqId=aDropIds[i];var pselName=aDropIds[parseInt(i)+1];if(typeof(pselName)!="undefined"){if(reqVal!='-1')requestData(reqId,reqVal,pselName,bOnLoad,i);else resetDropDowns(pselName);}}}
for(j in aRdOlyVal){updateHdnParams(aRdOlyVal[j][0],aRdOlyVal[j][1]);}
aDropIds=strArr.split(',');oBtn._registerEvent("onclick","parent.submitFilters");oReset._registerEvent("onclick","parent.resetAll");}}
t.submitFilters=function(){with(t){oHdn.setValue("true");oMeta.setValue(c.sSelMetCatValue);oTrk.setValue(c.sTrkVal);oForm.submit();}}
t.resetAll=function(){t.resetDropDowns("Year");}
t.getNextEditableDD=function(id){with(t){var nxt="";for(i in aEditable){if(aEditable[i]==id){nxt=aEditable[++i];break;}}
return nxt;}}
t.getNextDD=function(id){with(t){var nxt="";for(i in aDropIds){if(aDropIds[i]==id){nxt=aDropIds[++i];break;}}
return nxt;}}
t.getCurrentDDIndex=function(id){with(t){var curInd="0";for(i in aDropIds){if(aDropIds[i]==id){curInd=i;break;}}
return curInd;}}
t.resetDropDowns=function(id){var oDrpDwn=this.oDocument.getUIElem(id);oDrpDwn.selectedIndex=0;if(id!="Year")
oDrpDwn.disabled=true;t.updateHdnParams(id,"-1");var nextDD=t.getNextDD(id);if(nextDD!=null)
t.resetDropDowns(nextDD);}
t.enableSubBtn=function(){with(t){var chk=false;var rdOnly=aDropIds;for(i in rdOnly){oDrpDwn=new EbayHTMLText(t,rdOnly[i]);if(!oDrpDwn.eElem)oDrpDwn.bind();var Val=typeof(oDrpDwn.getValue())!="undefined"?oDrpDwn.getValue():oDrpDwn.value;if((Val!='-1'&&Val!='Select')&&i>=2){chk=true;break;}}
if(chk){oBtn.enable(true);oBtn.eElem.disabled="";oBtn.eElem.style.opacity="";oBtn.eElem.style.filter="";}else{oBtn.enable(false);oBtn.eElem.style.opacity="0.5";oBtn.eElem.style.filter="alpha(opacity=50)";}}}
t.updateHdnParams=function(reqId,reqVal){var oHdnProp=new EbayHTMLText(t,reqId);if(!oHdnProp.eElem)oHdnProp.bind();oHdnProp.setValue(reqVal);t.enableSubBtn();}
t.validateLoadDD=function(){t.bOnLoad=false;var reqId=this.eElem.id;var reqVal=escape(this.eElem.value);var pselName=t.getNextDD(reqId);if(typeof(pselName)!="undefined"){if(reqVal!='-1')t.requestData(reqId,reqVal,pselName,t.bOnLoad,t.getCurrentDDIndex(reqId));else t.resetDropDowns(pselName);}
t.updateHdnParams(reqId,unescape(reqVal));}
t.validateDropDowns=function(){t.bOnLoad=false;var reqId=this.id;var reqVal=this.value;var pselName=t.getNextDD(reqId);if(typeof(pselName)!="undefined"){if(reqVal!='-1')t.requestData(reqId,reqVal,pselName,t.bOnLoad,t.getCurrentDDIndex(reqId));else t.resetDropDowns(pselName);}
t.updateHdnParams(reqId,unescape(reqVal));}
function ebYMMSRequestData(pName,pVal,pselName,bOnload,pInd){var sUrl=c.sAjaxURL,t=this;var req=ebay.oServer.createRequest('ymms_lyr',sUrl,false);var prop="",ind=0;var propIds=t.aDropIds,catId=t.catId;for(var i in propIds){if(pInd!="0"){var oTxt=new EbayHTMLText(this,propIds[i]);if(!oTxt.eElem)oTxt.bind();var oTxtVal=oTxt.getValue();if(oTxtVal!='-1'){if(i!=0)
prop+=",";prop+=propIds[i]+":"+oTxtVal;}
if(pName==propIds[i])ind=i;if(i==pInd-1)break;}}
prop+=","+pName+":"+pVal;var sPost="&propertyId="+pName+"&dropDMap="+prop+"&selectedId="+pselName+"&index="+ind+"&catId="+catId+"&site=0&manualComp=false";req.sPostData="&request="+encodeURIComponent(sPost);req.iResponseType=3;req.registerAsDataListener(this);req.send();}
function ebYMMSDataResponse(pResp){var oData=pResp.oJSON.data;var oDataMap=oData.dataMap,curId,curVal,count=0,bCallNextDD=false;for(temp in oDataMap){var respDiv=temp;var dropId=respDiv.substr(0,respDiv.indexOf('_'));if(count==0){curId=dropId;}
var id=dropId+"_inp";var oDropDiv=new EbayHTMLLayer(this,id);if(!oDropDiv.eElem)oDropDiv.bind();oDropDiv.eElem.innerHTML=oDataMap[respDiv];var e=this.oDocument.getUIElem(dropId);if(e){e.onchange=t.validateDropDowns;if(count==0&&e.selectedIndex==1){bCallNextDD=true;curVal=e.options[1].text;}}
if(t.bOnLoad){var oHdn=new EbayHTMLText(t,dropId+"_sv");if(!oHdn.eElem)oHdn.bind();if(oHdn.eElem.value!=-1){for(var i=0;i<e.options.length;i++){if(e.options[i].text==oHdn.eElem.value){e.options[i].selected=true;break;}}}}
t.updateHdnParams(dropId,e.options[e.selectedIndex].text);count++;}
if((t.bOnLoad||bCallNextDD)&&curId!="Submodel"){var oHdnVal=new EbayHTMLText(t,curId+"_sv");if(!oHdnVal.eElem)oHdnVal.bind();var reqVal;if(bCallNextDD){reqVal=curVal;}else{reqVal=oHdnVal.eElem.value;}
if(reqVal!="-1"){var reqId=curId;var pselName=t.getNextDD(curId);if(typeof(pselName)!="undefined"){if(reqVal!='-1')t.requestData(reqId,reqVal,pselName,true,t.getCurrentDDIndex(curId));else t.resetDropDowns(pselName);}}}}
t.initCatalog();}
function EbaySYI3MotorsSAMPAdoption(pParent,pName,pCfg){var t=this,c=t.oConfig=pCfg;if(!t.objType)t.objType="EbaySYIMotorsYMMTE";t.base=EbayBaseControl;t.base(pParent,pName);t.requestData=ebYMMTERequestData;t.processDataResponse=ebYMMTEDataResponse;t.aDropIds=c.aDropIds;t.aEditable=t.aDropIds;t.aRdOlyVal=c.aRdOlyVal;t.oBtn=new EbayHTMLButton(t,"goBtn");if(!t.oBtn.eElem)t.oBtn.bind();t.oHdn=new EbayHTMLText(t,c.sHdnName);if(!t.oHdn.eElem)t.oHdn.bind();t.oTrk=new EbayHTMLText(t,c.sTrkId);if(!t.oTrk.eElem)t.oTrk.bind();t.oForm=new EbayHTMLForm(t,c.sFormName);if(!t.oForm.eElem)t.oForm.bind();t.oMeta=new EbayHTMLText(t,c.sMetCatId);if(!t.oMeta.eElem)t.oMeta.bind();t.initCatalog=function(){with(t){var bEnableBtn=false;var oDrpDwn,oFrstDropDown;var strArr=aDropIds.toString();for(i in aDropIds){oDrpDwn=new EbayHTMLSelect(t,aDropIds[i]);if(!oDrpDwn.eElem)oDrpDwn.bind();oDrpDwn._registerEvent("onchange","parent.validateLoadDD");}
for(j in aRdOlyVal){updateHdnParams(aRdOlyVal[j][0],aRdOlyVal[j][1]);}
aDropIds=strArr.split(',');oBtn._registerEvent("onclick","parent.submitFilters");}}
t.submitFilters=function(){with(t){oHdn.setValue("true");oMeta.setValue(c.sSelMetCatValue);oTrk.setValue(c.sTrkVal);oForm.submit();}}
t.closeOly=function(){var oSrchTxt=new EbayHTMLText(t,c.sSrchTxt);if(!oSrchTxt.eElem)oSrchTxt.bind();this.eElem.href=c.sMotorProdUrl.replaceTokens(oSrchTxt.getValue());}
t.getNextEditableDD=function(id){with(t){var nxt="";for(i in aEditable){if(aEditable[i]==id){nxt=aEditable[++i];break;}}
return nxt;}}
t.getNextDD=function(id){with(t){var nxt="";for(i in aDropIds){if(aDropIds[i]==id){nxt=aDropIds[++i];break;}}
return nxt;}}
t.resetDropDowns=function(id){var oDrpDwn=this.oDocument.getUIElem(id);oDrpDwn.disabled=true;t.updateHdnParams(id,"-1");var nextDD=t.getNextDD(id);if(nextDD!=null)
t.resetDropDowns(nextDD);}
t.enableSubBtn=function(){with(t){var chk=false;var rdOnly=aDropIds;for(i in rdOnly){oDrpDwn=new EbayHTMLText(t,rdOnly[i]);if(!oDrpDwn.eElem)oDrpDwn.bind();var Val=typeof(oDrpDwn.getValue())!="undefined"?oDrpDwn.getValue():oDrpDwn.value;if(Val!='-1'){chk=true;break;}}
if(chk){oBtn.enable(true);oBtn.eElem.disabled="";oBtn.eElem.style.opacity="";oBtn.eElem.style.filter="";}else{oBtn.enable(false);oBtn.eElem.style.opacity="0.5";oBtn.eElem.style.filter="alpha(opacity=50)";}}}
t.updateHdnParams=function(reqId,reqVal){var oHdnProp=new EbayHTMLText(t,reqId);if(!oHdnProp.eElem)oHdnProp.bind();oHdnProp.setValue(reqVal);t.enableSubBtn();}
t.validateLoadDD=function(){var reqId=this.name;var reqVal=escape(this.getValue());var pselName=t.getNextDD(reqId);if(typeof(pselName)!="undefined"){if(reqVal!='-1')t.requestData(reqId,reqVal,pselName,false);else t.resetDropDowns(pselName);}
t.updateHdnParams(reqId,unescape(reqVal));}
t.validateDropDowns=function(){var reqId=this.id;var reqVal=this.value;var pselName=t.getNextDD(reqId);if(typeof(pselName)!="undefined"){if(reqVal!='-1')t.requestData(reqId,reqVal,pselName,false);else t.resetDropDowns(pselName);}
t.updateHdnParams(reqId,unescape(reqVal));}
function ebYMMTERequestData(pName,pVal,pselName,bOnload){var sUrl=c.sAjaxURL,t=this;var req=ebay.oServer.createRequest('ymmte_lyr',sUrl,false);var rdOly=c.aRdOlyVal;var prop="";var propIds=t.aDropIds;for(var i in propIds)
{var oTxt=new EbayHTMLText(this,propIds[i]);if(!oTxt.eElem)oTxt.bind();var oTxtVal=oTxt.getValue();prop+=propIds[i]+":"+(oTxtVal=='-1'?"":oTxtVal);if(i!=propIds.length-1)
prop+=",";}
if(!bOnload)
prop+=","+pName+":"+pVal;var sPost="&propertyId="+pName+"&dropDMap="+prop+"&selectedId="+pselName+"&site=100&manualComp=true&swift=true";req.sPostData="&request="+encodeURIComponent(sPost);req.iResponseType=3;req.registerAsDataListener(this);req.send();}
function ebYMMTEDataResponse(pResp){var oData=pResp.oJSON.data;var oDataMap=oData.dataMap;for(temp in oDataMap){var respDiv=temp;var dropId=respDiv.substr(0,respDiv.indexOf('_'));var id=dropId+"_inp";var oDropDiv=new EbayHTMLLayer(this,id);if(!oDropDiv.eElem)oDropDiv.bind();oDropDiv.eElem.innerHTML=oDataMap[respDiv];var e=this.oDocument.getUIElem(dropId);if(e)e.onchange=t.validateDropDowns;t.updateHdnParams(dropId,"-1");}}
t.initCatalog();}
function EbaySYI3MotorsCatalogAdoption(pParent,pName,pCfg){var t=this,c=t.oConfig=pCfg;if(!t.objType)t.objType="EbaySYIMotorsYMMTE";t.base=EbayBaseControl;t.base(pParent,pName);t.requestData=ebYMMTERequestData;t.processDataResponse=ebYMMTEDataResponse;t.aDropIds=c.aDropIds;t.oBtn=new EbayHTMLButton(t,c.sContBtn);if(!t.oBtn.eElem)t.oBtn.bind();t.oHdn=new EbayHTMLText(t,c.sHdnName);if(!t.oHdn.eElem)t.oHdn.bind();t.oAid=new EbayHTMLText(t,c.sAidName);if(!t.oAid.eElem)t.oAid.bind();t.oForm=new EbayHTMLForm(t,c.sFormName);if(!t.oForm.eElem)t.oForm.bind();t.init=function(){with(t){var bEnableBtn=false;var oDrpDwn,oCloseLnk,oFrstDropDown;oCloseLnk=new EbayHTMLAnchor(t,c.sCloseBtn);if(!oCloseLnk.eElem)oCloseLnk.bind();oCloseLnk._registerEvent("onclick","parent.closeOly");if(!c.bLoadVIN){oFrstDropDown=new EbayHTMLText(t,c.sFrstDrop);if(!oFrstDropDown.eElem)oFrstDropDown.bind();requestData(c.sFrstDrop,oFrstDropDown.getValue(),"Trim",true);}else{oFrstDropDown=new EbayHTMLSelect(t,"Trim");if(!oFrstDropDown.eElem)oFrstDropDown.bind();oFrstDropDown._registerEvent("onchange","parent.validateLoadDD");}
oBtn._registerEvent("onclick","parent.submitOly");}}
t.initOly=function(){with(t){var bEnableBtn=false;var oDrpDwn,oCloseLnk,oFrstDropDown;oCloseLnk=new EbayHTMLAnchor(t,c.sCloseBtn);if(!oCloseLnk.eElem)oCloseLnk.bind();oCloseLnk._registerEvent("onclick","parent.closeOly");if(!c.bLoadVIN){oFrstDropDown=new EbayHTMLText(t,c.sFrstDrop);if(!oFrstDropDown.eElem)oFrstDropDown.bind();requestData(c.sFrstDrop,oFrstDropDown.getValue(),"Trim",true);}else{oFrstDropDown=new EbayHTMLSelect(t,"Trim");if(!oFrstDropDown.eElem)oFrstDropDown.bind();oFrstDropDown._registerEvent("onchange","parent.validateLoadDD");}
oBtn._registerEvent("onclick","parent.submitOly");}}
t.submitOly=function(){with(t){oHdn.setValue("true");oAid.setValue(c.sAidValue);oForm.submit();}}
t.closeOly=function(){var oSrchTxt=new EbayHTMLText(t,c.sSrchTxt);if(!oSrchTxt.eElem)oSrchTxt.bind();this.eElem.href=c.sMotorProdUrl.replaceTokens(oSrchTxt.getValue());}
t.getNextDD=function(id){with(t){var nxt="";for(i in aDropIds){if(aDropIds[i]==id){nxt=aDropIds[++i];break;}}
return nxt;}}
t.resetDropDowns=function(id){var oDrpDwn=new EbayHTMLSelect(t,id);if(!oDrpDwn.eElem)oDrpDwn.bind();oDrpDwn.enable(false);}
t.enableSubBtn=function(){with(t){var chk=true;var rdOnly=['Trim','Engine','DriveType'];for(i in rdOnly){oDrpDwn=new EbayHTMLText(t,rdOnly[i]);if(!oDrpDwn.eElem)oDrpDwn.bind();var Val=typeof(oDrpDwn.getValue())!="undefined"?oDrpDwn.getValue():oDrpDwn.value;if(Val=='-1'){chk=false;break;}}
if(chk){oBtn.enable(true);oBtn.eElem.disabled="";oBtn.eElem.style.opacity="";oBtn.eElem.style.filter="";}else{oBtn.enable(false);oBtn.eElem.style.opacity="0.5";oBtn.eElem.style.filter="alpha(opacity=50)";}}}
t.updateHdnParams=function(reqId,reqVal){var oHdnProp=new EbayHTMLText(t,reqId);if(!oHdnProp.eElem)oHdnProp.bind();oHdnProp.setValue(reqVal);t.enableSubBtn();}
t.validateLoadDD=function(){var reqId=this.name;var reqVal=escape(this.getValue());var pselName=t.getNextDD(reqId);if(typeof(pselName)!="undefined"){if(reqVal!='-1')t.requestData(reqId,reqVal,pselName,false);else t.resetDropDowns(pselName);}
t.updateHdnParams(reqId,unescape(reqVal));}
t.validateDropDowns=function(){var reqId=this.id;var reqVal=this.value;var pselName=t.getNextDD(reqId);if(typeof(pselName)!="undefined"){if(reqVal!='-1')t.requestData(reqId,reqVal,pselName,false);else t.resetDropDowns(pselName);}
t.updateHdnParams(reqId,unescape(reqVal));}
function ebYMMTERequestData(pName,pVal,pselName,bOnload){var sUrl=c.sAjaxURL;var req=ebay.oServer.createRequest('ymmte_lyr',sUrl,false);var rdOly=c.aRdOlyVal;var prop="";for(i=0;i<rdOly.length;i++)
{prop+=rdOly[i][0]+":"+rdOly[i][1];if(i!=rdOly.length-1)
prop+=",";}
if(!bOnload)
prop+=","+pName+":"+pVal;var sPost="&propertyId="+pName+"&dropDMap="+prop+"&selectedId="+pselName+"&site=100&manualComp=true&swift=true";req.sPostData="&request="+encodeURIComponent(sPost);req.iResponseType=3;req.registerAsDataListener(this);req.send();}
function ebYMMTEDataResponse(pResp){var oData=pResp.oJSON.data;var oDataMap=oData.dataMap;for(temp in oDataMap){var respDiv=temp;var dropId=respDiv.substr(0,respDiv.indexOf('_'));var id=dropId+"_inp";if(!(id=="Year_inp"||id=="Model_inp"||id=="Make_inp"||id=="Trim_inp")){var oDropDiv=new EbayHTMLLayer(this,id);if(!oDropDiv.eElem)oDropDiv.bind();oDropDiv.eElem.innerHTML=oDataMap[respDiv];var e=this.oDocument.getUIElem(dropId);if(e)e.onchange=t.validateDropDowns;t.updateHdnParams(dropId,"-1");}}}
t.init();}
function EbaySYI3SellerTagsSwift(pParent,pName,pCfg){var t=this,c=t.oConfig=pCfg;if(!t.objType)t.objType="EbaySYI3SellerTagsSwift";t.base=EbayBaseControl;t.base(pParent,pName);t.requestData=ebSwiftRequestData;t.processDataResponse=ebSwiftDataResponse;function ebSwiftRequestData(sSelOptionVal,oTagText){var sUrl=c.sAjaxURL;var req=ebay.oServer.createRequest('ymmte_dyi',sUrl,false);var propIds=c.aPropIds;var prop="";var count=0;for(var i in propIds)
{var oTxt=new EbayHTMLText(this,propIds[i].Id);if(!oTxt.eElem)oTxt.bind();if(oTxt.name==oTagText.name){var j=i;var pName=propIds[j].Prop;var pselName=(propIds[i].Prop!="Year")?propIds[++j].Prop:"Trim";}
prop+=propIds[i].Prop+":"+oTxt.getValue();++count;if(i!=propIds.length-1)
prop+=",";}
var sPost="&propertyId="+pName+"&dropDMap="+prop+"&selectedId="+pselName+"&site=100&manualComp=true&swiftDyi=true";req.sPostData="&request="+encodeURIComponent(sPost);req.iResponseType=3;req.registerAsDataListener(this);req.send();}
function ebSwiftDataResponse(pResp){var t=this.parent,aData=pResp.oJSON.data.dataMap.TagNmValLst;if(aData){var oData=eval("("+aData+")"),sTnName=oData.tn,stCtrl=t.controls['seller_tags'],oCTag=stCtrl.controls[sTnName],dv=oData.Vals;oCTag.aOptions=dv;oCTag.bIsBind=true;oCTag.init(oCTag.aOptions,true,false);oCTag.bSuggestionCreated=false;}}}

// \include\lib\_global\features\syi3\syialert.js 

window.onbeforeunload=confirmExit;function confirmExit(e){var bClient=ebay.oGlobals.oClient;var bIE=bClient.bIE;var c=ebay.oDocument.getConfig('Selling.Alert');if(c&&!bIE){if(ebay.oDocument.oPage.bShowAlert)
{return c.sAlertMsg;}}}
function EbaySYIscrollFunction(){var vscroll=ebay.oGlobals.oClient.getScrollTop(),goTopElm=ebay.oD.getUIElem("gotoTop");if(goTopElm){goTopElm.href="#";if(vscroll<=450)
goTopElm.style.display="none";else
goTopElm.style.display="block";}}
function GTINReset(){cfg=ebay.oDocument.getConfig("Selling.Describe.GTINMandate");if(cfg){oGTINFld=ebay.oDocument.getUIElem(cfg.oGTINField);if(oGTINFld&&oGTINFld.value==cfg.sEnterTxt)
oGTINFld.value="";}}

// \include\lib\_global\features\syi3\syicomments.js 

function EbayHTMLSyiComments(pParent,pName,pCfg){this.base=EbayBaseControl;this.base(pParent,pName);this.oC=ebay.oP.oC=pCfg;with(this){this.oSyiCmt=new EbayHTMLAnchor(this,oC.syiComment);oSyiCmt.bind();oSyiCmt._registerEvent("onclick","parent.submitSyiForm");this.oSyiCmtFrm=new EbayHTMLForm(this,oC.syiCmdForm);oSyiCmtFrm.bind();}
this.submitSyiForm=function(){var d=document,w=h=800,p=this.parent;if(p.oSyiCmtFrm){window.open("","syiCommentsSurvey","location=0,menubar=0,status=0,resizable=1,scrollbars=1,top="+Math.round((screen.height-h)/2)+",left="+Math.round((screen.width-w)/2)+",width="+w+",height="+h);if(d.location&&d.location.protocol!="https:"){p.oSyiCmtFrm.eElem[0].value="<html>"+document.getElementsByTagName('html')[0].innerHTML+"</html>";p.oSyiCmtFrm.submit();return false;}
return true;}}}
ebay.oP.syiCommentSubmit=function(){var c=ebay.oDocument.getConfig('Selling.Common');if(c)
new EbayHTMLSyiComments(this,"syicomments",c);}

// \include\lib\_global\features\syi3\bulklist.js 

ebay.oP.onBulkJitClose=function(){var t=this,oD=t.parent,oC=oD.getConfig("Selling.BulkListingJit");t.oJitCls=new EbayHTMLAnchor(t,oC.jClsId);t.oJitCls.bind();t.oJitCls.onclick=function(){var oJitOpt=new EbayHTMLText(t.oJitCls,oC.bJit);oJitOpt.bind();var bulkJit=new EbayHTMLLayer(t.oJitCls,oC.bulkJitLyr);bulkJit.bind();oJitOpt.eElem.value="false";bulkJit.show(false);}}

// \include\lib\_global\features\syi3\gtin_mandate.js 

ebay.oP.initGTINDropdown=function(){var t=this,oD=t.parent,oC=oD.getConfig("Selling.Describe.GTINMandate");t.oC=oC;ebay.oD.oPage.isLyrShown=false;t.oDDImg=new EbayHTMLAnchor(t,oC.oGTINdd);t.oDDImg.bind();t.oDDImg._registerEvent("onclick","parent.showSuggLayer");t.oGTINTxtbx=new EbayHTMLText(t,oC.oGTINField);t.oGTINTxtbx.bind();t.oGTINTxtbx._registerEvent("onfocus","parent.GTINFieldFocus");t.oDDwithGTIN=new EbayHTMLLayer(t,oC.aLyrWithGTIN);t.oDDwithGTIN.subscribeEvents("onclick","onmouseenter","onmouseout","onkeypress","onfocus","onblur");t.oDDwithGTIN.bind();t.oDDwithGTIN._registerEvent("onkeypress","parent.keyPress");t.oDDwithGTIN._registerEvent("onclick","parent.optionSeleted");t.oDDwithGTIN._registerEvent("onmouseenter","parent.mouseEnter");t.oDDwithGTIN._registerEvent("onmouseout","parent.mouseOut");t.oDDwithGTIN._registerEvent("onfocus","parent.mouseEnter");t.oDDwithGTIN._registerEvent("onblur","parent.mouseOut");this.showSuggLayer=function(){document.onclick=onClkLyrDoc;}
t.oDDOpn=new EbayHTMLLayer(t,oC.aLyrVal);t.oDDOpn.subscribeEvents("onclick","onmouseenter","onmouseout","onkeypress","onfocus","onblur");t.oDDOpn.bind();t.oDDOpn._registerEvent("onkeypress","parent.keyPress");t.oDDOpn._registerEvent("onclick","parent.optionSeleted");t.oDDOpn._registerEvent("onmouseenter","parent.mouseEnter");t.oDDOpn._registerEvent("onmouseout","parent.mouseOut");t.oDDOpn._registerEvent("onfocus","parent.mouseEnter");t.oDDOpn._registerEvent("onblur","parent.mouseOut");this.showSuggLayer=function(){document.onclick=onClkLyrDoc;}
this.keyPress=function(){var key=window.event?window.event.keyCode:arguments[2].keyCode;if(key==13){if(this.parent.oGTINTxtbx&&this.parent.oGTINTxtbx.eElem&&this.eElem){oGTINFld=this.parent.oGTINTxtbx.eElem;oGTINFld.value=this.eElem.innerHTML;oGTINFld.style.color="black";if(this.eElem.id=="withGTIN")
oGTINFld.style.color="gray";}
onClkLyrDoc();}}
this.optionSeleted=function(){if(this.parent.oGTINTxtbx&&this.parent.oGTINTxtbx.eElem&&this.eElem){oGTINFld=this.parent.oGTINTxtbx.eElem;oGTINFld.value=this.eElem.innerHTML;oGTINFld.style.color="black";if(this.eElem.id=="withGTIN")
oGTINFld.style.color="gray";}}
this.GTINFieldFocus=function(){if(this.eElem.value==oC.sEnterTxt){this.eElem.value="";this.eElem.style.color="black";}}
this.mouseEnter=function(){this.eElem.style.backgroundColor="#E0EDFF";}
this.mouseOut=function(){this.eElem.style.backgroundColor="white";}
function onClkLyrDoc(){var t=this;var oDDLyr=new EbayHTMLLayer(t,oC.oGTINlyr);oDDLyr.bind();if(oDDLyr&&!ebay.oD.oPage.isLyrShown){ebay.oD.oPage.isLyrShown=true;oDDLyr.show(true);}else{oDDLyr.show(false);ebay.oD.oPage.isLyrShown=false;document.onclick=null;}}}

// \include\lib\_global\features\syi3\describe\abinsuggestion.js 

ebay.oP.initBinPriceSuggestion=function(){pCfg=ebay.oDocument.getConfig("Selling.Describe.ABINPrice");if(pCfg){sBINprice=ebay.oP.controls[pCfg.binPrice];if(!sBINprice)
var sBINprice=new EbayHTMLText(this,pCfg.binPrice);sBINprice.bind();sabinDisp=new EbayHTMLLayer(this,pCfg.sABINSugLyr);sabinDisp.bind();abinVal=new EbayHTMLLayer(this,pCfg.sABINPriceVal);abinVal.bind();sBINprice._registerEvent('onfocus','parent.sBINpricefocus');this.sBINpricefocus=function(){if(!sabinDisp.eElem){sabinDisp.bind();}
var sCfg=ebay.oDocument.getConfig('Selling.Describe.SoftGoods');if((!sCfg)||(sCfg&&!sCfg.sugValue))
sabinDisp.show(true);if(abinVal.eElem){sabinDisp.eElem.innerHTML=abinVal.eElem.innerHTML;}}
sStartPrice=ebay.oP.controls[pCfg.startPrice];if(!sStartPrice){var sStartPrice=new EbayHTMLText(this,pCfg.startPrice);}
sStartPrice.bind();sStartPrice._registerEvent('onchange','parent.sStartPriceChange');this.sStartPriceChange=function(){if(!sabinDisp.eElem){sabinDisp.bind();}
if(!abinVal.eElem){abinVal.bind();}
if(abinVal.eElem){sabinDisp.eElem.innerHTML="";abinVal.eElem.innerHTML="";}}}}

// \include\lib\_global\features\syi3\describe\paypalemail.js 

function EbaySYI3PayPalEmail(pParent,pName,pCfg){if(!this.objType)
this.objType="EbaySYI3PayPalEmail";this.base=EbayBaseControl;this.base(pParent,pName);var t=this;t.oC=pCfg;t.oPPSuggestClyr=new EbayHTMLLayer(t,pCfg.oPPSuggestLayer);t.oPPSuggestClyr.bind();ebay.oD.oPage.fromPPSug=false;ebay.oD.oPage.bSugPPCreated=false;this.init=function(){var t=this;with(t){oPayLnk=new EbayHTMLAnchor(t,oC.dropdownpay);oPayLnk.bind();oPayLnk._registerEvent("onclick","parent.PPemaillyr");t.oPPEmailTxt=new EbayHTMLText(this,pCfg.oPPTagText);t.oPPEmailTxt.subscribeEvents("onclick");t.oPPEmailTxt.subscribeEvents("onkeydown");t.oPPEmailTxt._registerEvent("onclick","parent.PPTxtBxClk");t.oPPEmailTxt._registerEvent("onkeydown","parent.PPTxtBxClk");t.oPPEmailTxt.bind();for(i=0;i<=oC.PPOptionListValues.length;i++){oOptnLnk=new EbayHTMLLayer(t,oC.PPOptionListValues[i]);oOptnLnk.subscribeEvents("onclick");if(oC.PPOptionListValues.length>=2&&t.oPPEmailTxt.eElem){t.oPPOptnLst=new EbayHTMLLayer(t,oC.PPOptionListValues[0]);t.oPPOptnLst.bind();t.oPPEmailTxt.eElem.value=t.oPPOptnLst.eElem.innerHTML;}
if(i==oC.PPOptionListValues.length-1){oOptnLnk._registerEvent("onclick","parent.ownoptnnclk");}else{oOptnLnk._registerEvent("onclick","parent.optnclk");}
oOptnLnk.bind();}}}
this.PPemaillyr=function(){with(this.parent){if(t.oPPEmailTxt.eElem&&t.oPPEmailTxt.eElem.disabled)
return;if(!ebay.oD.oPage.bSugPPCreated){showPPSuggestions();}}}
this.showPPSuggestions=function(){var t=this;with(t){t.oPPSuggestClyr.eElem.style.height='';t.oPPSuggestClyr.show(true);t.oPPSuggestClyr.eElem.style.display="block";t.oPPSuggestClyr.eElem.style.visibility="visible";t.oPPSuggestClyr.eElem.style.marginTop=0+'px';ebay.oD.oPage.fromPPSug=true;ebay.oD.oPage.bSugPPCreated=true;document.onclick=onClkDoc;}}
this.ownoptnnclk=function(){var t=this;t.parent.oPPEmailTxt.eElem.style.color="#666666";t.parent.oPPEmailTxt.eElem.value=pCfg.sPaypalOwnTxt;t.parent.oPPEmailTxt.focus(true);}
this.optnclk=function(){var t=this;if(t.eElem){t.parent.oPPEmailTxt.eElem.value=t.eElem.innerHTML;t.parent.oPPEmailTxt.eElem.style.color="#000000";t.parent.oPPEmailTxt.focus(true);}}
this.PPTxtBxClk=function(){var t=this;if(t.eElem){if(t.parent.oPPEmailTxt.eElem.value==pCfg.sPaypalOwnTxt)
t.parent.oPPEmailTxt.eElem.value='';t.parent.oPPEmailTxt.eElem.style.color="#000000";}}
this.init();}
function onClkDoc(){var oCtrl=ebay.oD._getControl("PPOptionList");if(oCtrl&&ebay.oD.oPage.bSugPPCreated){if(ebay.oD.oPage.fromPPSug){ebay.oD.oPage.fromPPSug=false;}else{oCtrl.show(false);ebay.oD.oPage.bSugPPCreated=false;ebay.oD.oPage.fromPPSug=true;document.onclick=null;}}}

// \include\lib\_global\features\syi3\describe\syi_picoptions.js 

function EbaySYI3DYIPicOptions(pParent,pName,pCfg){if(!this.objType)
this.objType="EbaySYI3DYIPicOptions";this.base=EbayBaseControl;this.base(pParent,pName);var t=this,c=t.oConfig=pCfg,checkedval,b;t.oPhotoUpgrade=new EbayHTMLCheckbox(t,c.sPhotoDispUpgrade);if(!t.oPhotoUpgrade.eElem)
t.oPhotoUpgrade.bind();t.oPhotoDisplay=new EbayHTMLCheckbox(t,c.sPhotoDispPkg);if(!t.oPhotoDisplay.eElem)
t.oPhotoDisplay.bind();t.oPhotoDisplay._registerEvent('onclick','parent.onClickPhotoDisplay');t.oPhotoUpgrade._registerEvent('onclick','parent.onClickPhotoUpgrade');if(t.oPhotoDisplay.eElem&&t.oPhotoDisplay.eElem[0].type=="checkbox"){checkedval=t.oPhotoDisplay.eElem[0].checked;b=checkedval?checkedval:false;}
if(!c.bPhotoUpgradesLocked&&t.oPhotoUpgrade.eElem&&t.oPhotoUpgrade.eElem[0].type=="checkbox"&&b)
{t.oPhotoUpgrade.eElem[0].checked=b;t.oPhotoUpgrade.eElem[0].disabled=b;}
if(t.oPhotoDisplay.eElem&&t.oPhotoDisplay.eElem[0].type=="checkbox"&&t.oPhotoDisplay.eElem[1].type=="hidden"){if(b){t.oPhotoDisplay.eElem[0].value="3";t.oPhotoDisplay.eElem[1].value="3";}else{t.oPhotoDisplay.eElem[0].value="0";t.oPhotoDisplay.eElem[1].value="0";}}
if(t.oPhotoUpgrade.eElem&&t.oPhotoUpgrade.eElem[0].type=="checkbox"&&t.oPhotoDisplay.eElem&&t.oPhotoDisplay.eElem[1].type=="hidden"){if(b){t.oPhotoUpgrade.eElem[0].value="2";t.oPhotoUpgrade.eElem[1].value="2";}else{t.oPhotoUpgrade.eElem[0].value="0";t.oPhotoUpgrade.eElem[1].value="0";}}
this.onClickPhotoUpgrade=function(){var t=this;with(t){if(t.eElem&&t.eElem[0].type=="checkbox"&&t.eElem[1].type=="hidden")
if(t.eElem[0].checked){t.eElem[0].value="2";t.eElem[1].value="2";}else{t.eElem[0].value="0";t.eElem[1].value="0";}}}
this.onClickPhotoDisplay=function(){var t=this;with(t)
{var p=t.parent,oPUe,b,checkedval,c,oPU;c=p.oConfig;oPU=p.oPhotoUpgrade;if(t.eElem&&t.eElem[0].type=="checkbox")
checkedval=t.eElem[0].checked;b=checkedval?checkedval:false;if(oPU.eElem&&oPU.eElem[0].type=="checkbox")
{oPU.eElem[0].checked=b;oPU.eElem[0].disabled=b;}
if(b){t.eElem[0].value="3";t.eElem[1].value="3";if(oPU.eElem){oPU.eElem[0].value="2";oPU.eElem[1].value="2";}}else{t.eElem[0].value="0";t.eElem[1].value="0";if(oPU.eElem){oPU.eElem[0].value="0";oPU.eElem[1].value="0";}}}}}
// b=18121260 -->